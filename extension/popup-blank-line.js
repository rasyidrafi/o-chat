import{m as f,a as g,u as y,b as d,c as b}from"./popup-index.js";const w={};function E(n,e){const t=w,o=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return h(n,o,i)}function h(n,e,t){if(m(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return a(n.children,e,t)}return Array.isArray(n)?a(n,e,t):""}function a(n,e,t){const o=[];let i=-1;for(;++i<n.length;)o[i]=h(n[i],e,t);return o.join("")}function m(n){return!!(n&&typeof n=="object")}function p(n,e,t,o){const i=n.length;let r=0,l;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,o.length<1e4)l=Array.from(o),l.unshift(e,t),n.splice(...l);else for(t&&n.splice(e,t);r<o.length;)l=o.slice(r,r+1e4),l.unshift(e,0),n.splice(...l),r+=1e4,e+=1e4}function L(n,e){return n.length>0?(p(n,n.length,0,e),n):e}const s={}.hasOwnProperty;function O(n){const e={};let t=-1;for(;++t<n.length;)k(e,n[t]);return e}function k(n,e){let t;for(t in e){const i=(s.call(n,t)?n[t]:void 0)||(n[t]={}),r=e[t];let l;if(r)for(l in r){s.call(i,l)||(i[l]=[]);const u=r[l];A(i[l],Array.isArray(u)?u:u?[u]:[])}}}function A(n,e){let t=-1;const o=[];for(;++t<e.length;)(e[t].add==="after"?n:o).push(e[t]);p(n,0,0,o)}function P(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function x(n,e,t,o){const i=o?o-1:Number.POSITIVE_INFINITY;let r=0;return l;function l(c){return f(c)?(n.enter(t),u(c)):e(c)}function u(c){return f(c)&&r++<i?(n.consume(c),u):(n.exit(t),e(c))}}function z(n){if(n===null||g(n)||y(n))return 1;if(d(n))return 2}function C(n,e,t){const o=[];let i=-1;for(;++i<n.length;){const r=n[i].resolveAll;r&&!o.includes(r)&&(e=r(e,t),o.push(r))}return e}const N={partial:!0,tokenize:I};function I(n,e,t){return o;function o(r){return f(r)?x(n,i,"linePrefix")(r):i(r)}function i(r){return r===null||b(r)?e(r):t(r)}}export{O as a,N as b,z as c,x as f,P as n,L as p,C as r,p as s,E as t};
