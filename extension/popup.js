const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["popup-index6.js","popup-index2.js","popup-index3.js","popup-index9.js","popup-blank-line.js","popup-index.js","popup-index10.js","popup-default.js","popup-index5.js","popup-index8.js","popup-index4.js","popup-index7.js"])))=>i.map(i=>d[i]);
function mM(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Rm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var iy={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function pM(){if(mT)return Su;mT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:o}}return Su.Fragment=e,Su.jsx=t,Su.jsxs=t,Su}var pT;function gM(){return pT||(pT=1,iy.exports=pM()),iy.exports}var v=gM();const yM=Rm(v),vM=mM({__proto__:null,default:yM},[v]);var ry={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function _M(){if(gT)return nt;gT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=_&&M[_]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function O(M,Y,re){this.props=M,this.context=Y,this.refs=k,this.updater=re||x}O.prototype.isReactComponent={},O.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function B(){}B.prototype=O.prototype;function V(M,Y,re){this.props=M,this.context=Y,this.refs=k,this.updater=re||x}var H=V.prototype=new B;H.constructor=V,C(H,O.prototype),H.isPureReactComponent=!0;var G=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function S(M,Y,re,le,ge,Me){return re=Me.ref,{$$typeof:n,type:M,key:Y,ref:re!==void 0?re:null,props:Me}}function R(M,Y){return S(M.type,Y,void 0,void 0,void 0,M.props)}function I(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function P(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(re){return Y[re]})}var L=/\/+/g;function z(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):Y.toString(36)}function D(){}function Ne(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Le(M,Y,re,le,ge){var Me=typeof M;(Me==="undefined"||Me==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(Me){case"bigint":case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case n:case e:he=!0;break;case y:return he=M._init,Le(he(M._payload),Y,re,le,ge)}}if(he)return ge=ge(M),he=le===""?"."+z(M,0):le,G(ge)?(re="",he!=null&&(re=he.replace(L,"$&/")+"/"),Le(ge,Y,re,"",function(Ge){return Ge})):ge!=null&&(I(ge)&&(ge=R(ge,re+(ge.key==null||M&&M.key===ge.key?"":(""+ge.key).replace(L,"$&/")+"/")+he)),Y.push(ge)),1;he=0;var ve=le===""?".":le+":";if(G(M))for(var xe=0;xe<M.length;xe++)le=M[xe],Me=ve+z(le,xe),he+=Le(le,Y,re,Me,ge);else if(xe=w(M),typeof xe=="function")for(M=xe.call(M),xe=0;!(le=M.next()).done;)le=le.value,Me=ve+z(le,xe++),he+=Le(le,Y,re,Me,ge);else if(Me==="object"){if(typeof M.then=="function")return Le(Ne(M),Y,re,le,ge);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return he}function Q(M,Y,re){if(M==null)return M;var le=[],ge=0;return Le(M,le,"","",function(Me){return Y.call(re,Me,ge++)}),le}function se(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(re){(M._status===0||M._status===-1)&&(M._status=1,M._result=re)},function(re){(M._status===0||M._status===-1)&&(M._status=2,M._result=re)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var ae=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ae(){}return nt.Children={map:Q,forEach:function(M,Y,re){Q(M,function(){Y.apply(this,arguments)},re)},count:function(M){var Y=0;return Q(M,function(){Y++}),Y},toArray:function(M){return Q(M,function(Y){return Y})||[]},only:function(M){if(!I(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},nt.Component=O,nt.Fragment=t,nt.Profiler=a,nt.PureComponent=V,nt.StrictMode=s,nt.Suspense=f,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,nt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return F.H.useMemoCache(M)}},nt.cache=function(M){return function(){return M.apply(null,arguments)}},nt.cloneElement=function(M,Y,re){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=C({},M.props),ge=M.key,Me=void 0;if(Y!=null)for(he in Y.ref!==void 0&&(Me=void 0),Y.key!==void 0&&(ge=""+Y.key),Y)!te.call(Y,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&Y.ref===void 0||(le[he]=Y[he]);var he=arguments.length-2;if(he===1)le.children=re;else if(1<he){for(var ve=Array(he),xe=0;xe<he;xe++)ve[xe]=arguments[xe+2];le.children=ve}return S(M.type,ge,void 0,void 0,Me,le)},nt.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},nt.createElement=function(M,Y,re){var le,ge={},Me=null;if(Y!=null)for(le in Y.key!==void 0&&(Me=""+Y.key),Y)te.call(Y,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ge[le]=Y[le]);var he=arguments.length-2;if(he===1)ge.children=re;else if(1<he){for(var ve=Array(he),xe=0;xe<he;xe++)ve[xe]=arguments[xe+2];ge.children=ve}if(M&&M.defaultProps)for(le in he=M.defaultProps,he)ge[le]===void 0&&(ge[le]=he[le]);return S(M,Me,void 0,void 0,null,ge)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(M){return{$$typeof:h,render:M}},nt.isValidElement=I,nt.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:se}},nt.memo=function(M,Y){return{$$typeof:p,type:M,compare:Y===void 0?null:Y}},nt.startTransition=function(M){var Y=F.T,re={};F.T=re;try{var le=M(),ge=F.S;ge!==null&&ge(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ae,ae)}catch(Me){ae(Me)}finally{F.T=Y}},nt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},nt.use=function(M){return F.H.use(M)},nt.useActionState=function(M,Y,re){return F.H.useActionState(M,Y,re)},nt.useCallback=function(M,Y){return F.H.useCallback(M,Y)},nt.useContext=function(M){return F.H.useContext(M)},nt.useDebugValue=function(){},nt.useDeferredValue=function(M,Y){return F.H.useDeferredValue(M,Y)},nt.useEffect=function(M,Y,re){var le=F.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(M,Y)},nt.useId=function(){return F.H.useId()},nt.useImperativeHandle=function(M,Y,re){return F.H.useImperativeHandle(M,Y,re)},nt.useInsertionEffect=function(M,Y){return F.H.useInsertionEffect(M,Y)},nt.useLayoutEffect=function(M,Y){return F.H.useLayoutEffect(M,Y)},nt.useMemo=function(M,Y){return F.H.useMemo(M,Y)},nt.useOptimistic=function(M,Y){return F.H.useOptimistic(M,Y)},nt.useReducer=function(M,Y,re){return F.H.useReducer(M,Y,re)},nt.useRef=function(M){return F.H.useRef(M)},nt.useState=function(M){return F.H.useState(M)},nt.useSyncExternalStore=function(M,Y,re){return F.H.useSyncExternalStore(M,Y,re)},nt.useTransition=function(){return F.H.useTransition()},nt.version="19.1.0",nt}var yT;function Z0(){return yT||(yT=1,ry.exports=_M()),ry.exports}var $=Z0();const Ws=Rm($);var ay={exports:{}},Au={},oy={exports:{}},ly={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function bM(){return vT||(vT=1,function(n){function e(Q,se){var ae=Q.length;Q.push(se);e:for(;0<ae;){var Ae=ae-1>>>1,M=Q[Ae];if(0<a(M,se))Q[Ae]=se,Q[ae]=M,ae=Ae;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var se=Q[0],ae=Q.pop();if(ae!==se){Q[0]=ae;e:for(var Ae=0,M=Q.length,Y=M>>>1;Ae<Y;){var re=2*(Ae+1)-1,le=Q[re],ge=re+1,Me=Q[ge];if(0>a(le,ae))ge<M&&0>a(Me,le)?(Q[Ae]=Me,Q[ge]=ae,Ae=ge):(Q[Ae]=le,Q[re]=ae,Ae=re);else if(ge<M&&0>a(Me,ae))Q[Ae]=Me,Q[ge]=ae,Ae=ge;else break e}}return se}function a(Q,se){var ae=Q.sortIndex-se.sortIndex;return ae!==0?ae:Q.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],p=[],y=1,_=null,w=3,x=!1,C=!1,k=!1,O=!1,B=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function G(Q){for(var se=t(p);se!==null;){if(se.callback===null)s(p);else if(se.startTime<=Q)s(p),se.sortIndex=se.expirationTime,e(f,se);else break;se=t(p)}}function F(Q){if(k=!1,G(Q),!C)if(t(f)!==null)C=!0,te||(te=!0,z());else{var se=t(p);se!==null&&Le(F,se.startTime-Q)}}var te=!1,S=-1,R=5,I=-1;function P(){return O?!0:!(n.unstable_now()-I<R)}function L(){if(O=!1,te){var Q=n.unstable_now();I=Q;var se=!0;try{e:{C=!1,k&&(k=!1,V(S),S=-1),x=!0;var ae=w;try{t:{for(G(Q),_=t(f);_!==null&&!(_.expirationTime>Q&&P());){var Ae=_.callback;if(typeof Ae=="function"){_.callback=null,w=_.priorityLevel;var M=Ae(_.expirationTime<=Q);if(Q=n.unstable_now(),typeof M=="function"){_.callback=M,G(Q),se=!0;break t}_===t(f)&&s(f),G(Q)}else s(f);_=t(f)}if(_!==null)se=!0;else{var Y=t(p);Y!==null&&Le(F,Y.startTime-Q),se=!1}}break e}finally{_=null,w=ae,x=!1}se=void 0}}finally{se?z():te=!1}}}var z;if(typeof H=="function")z=function(){H(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ne=D.port2;D.port1.onmessage=L,z=function(){Ne.postMessage(null)}}else z=function(){B(L,0)};function Le(Q,se){S=B(function(){Q(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(Q){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var ae=w;w=se;try{return Q()}finally{w=ae}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ae=w;w=Q;try{return se()}finally{w=ae}},n.unstable_scheduleCallback=function(Q,se,ae){var Ae=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ae+ae:Ae):ae=Ae,Q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ae+M,Q={id:y++,callback:se,priorityLevel:Q,startTime:ae,expirationTime:M,sortIndex:-1},ae>Ae?(Q.sortIndex=ae,e(p,Q),t(f)===null&&Q===t(p)&&(k?(V(S),S=-1):k=!0,Le(F,ae-Ae))):(Q.sortIndex=M,e(f,Q),C||x||(C=!0,te||(te=!0,z()))),Q},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Q){var se=w;return function(){var ae=w;w=se;try{return Q.apply(this,arguments)}finally{w=ae}}}}(ly)),ly}var _T;function wM(){return _T||(_T=1,oy.exports=bM()),oy.exports}var cy={exports:{}},os={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function EM(){if(bT)return os;bT=1;var n=Z0();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:f,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,os.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,y)},os.flushSync=function(f){var p=c.T,y=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=p,s.p=y,s.d.f()}},os.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(f,p))},os.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},os.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,_=h(y,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:x}):y==="script"&&s.d.X(f,{crossOrigin:_,integrity:w,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},os.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);s.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(f)},os.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=h(y,p.crossOrigin);s.d.L(f,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},os.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=h(p.as,p.crossOrigin);s.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(f)},os.requestFormReset=function(f){s.d.r(f)},os.unstable_batchedUpdates=function(f,p){return f(p)},os.useFormState=function(f,p,y){return c.H.useFormState(f,p,y)},os.useFormStatus=function(){return c.H.useHostTransitionStatus()},os.version="19.1.0",os}var wT;function TM(){if(wT)return cy.exports;wT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cy.exports=EM(),cy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function xM(){if(ET)return Au;ET=1;var n=wM(),e=Z0(),t=TM();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,u=r;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return h(m),i;if(g===u)return h(m),r;g=g.sibling}throw Error(s(188))}if(l.return!==u.return)l=m,u=g;else{for(var T=!1,A=m.child;A;){if(A===l){T=!0,l=m,u=g;break}if(A===u){T=!0,u=m,l=g;break}A=A.sibling}if(!T){for(A=g.child;A;){if(A===l){T=!0,l=g,u=m;break}if(A===u){T=!0,u=g,l=m;break}A=A.sibling}if(!T)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),H=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case O:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case te:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case H:return(i.displayName||"Context")+".Provider";case V:return(i._context.displayName||"Context")+".Consumer";case G:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case S:return r=i.displayName||null,r!==null?r:Ne(i.type)||"Memo";case R:r=i._payload,i=i._init;try{return Ne(i(r))}catch{}}return null}var Le=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Ae=[],M=-1;function Y(i){return{current:i}}function re(i){0>M||(i.current=Ae[M],Ae[M]=null,M--)}function le(i,r){M++,Ae[M]=i.current,i.current=r}var ge=Y(null),Me=Y(null),he=Y(null),ve=Y(null);function xe(i,r){switch(le(he,r),le(Me,i),le(ge,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?FE(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=FE(r),i=HE(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(ge),le(ge,i)}function Ge(){re(ge),re(Me),re(he)}function tt(i){i.memoizedState!==null&&le(ve,i);var r=ge.current,l=HE(r,i.type);r!==l&&(le(Me,i),le(ge,l))}function Xe(i){Me.current===i&&(re(ge),re(Me)),ve.current===i&&(re(ve),bu._currentValue=ae)}var cn=Object.prototype.hasOwnProperty,nn=n.unstable_scheduleCallback,Pt=n.unstable_cancelCallback,Li=n.unstable_shouldYield,Lt=n.unstable_requestPaint,Wt=n.unstable_now,Vt=n.unstable_getCurrentPriorityLevel,Yt=n.unstable_ImmediatePriority,sn=n.unstable_UserBlockingPriority,ss=n.unstable_NormalPriority,Bt=n.unstable_LowPriority,Ft=n.unstable_IdlePriority,ot=n.log,Tn=n.unstable_setDisableYieldValue,lt=null,pt=null;function is(i){if(typeof ot=="function"&&Tn(i),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(lt,i)}catch{}}var On=Math.clz32?Math.clz32:hr,il=Math.log,kc=Math.LN2;function hr(i){return i>>>=0,i===0?32:31-(il(i)/kc|0)|0}var dr=256,Vi=4194304;function Ms(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Jr(i,r,l){var u=i.pendingLanes;if(u===0)return 0;var m=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?m=Ms(u):(T&=A,T!==0?m=Ms(T):l||(l=A&~i,l!==0&&(m=Ms(l))))):(A=u&~g,A!==0?m=Ms(A):T!==0?m=Ms(T):l||(l=u&~i,l!==0&&(m=Ms(l)))),m===0?0:r!==0&&r!==m&&(r&g)===0&&(g=m&-m,l=r&-r,g>=l||g===32&&(l&4194048)!==0)?r:m}function fr(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function mr(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ea(){var i=dr;return dr<<=1,(dr&4194048)===0&&(dr=256),i}function ta(){var i=Vi;return Vi<<=1,(Vi&62914560)===0&&(Vi=4194304),i}function wi(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function Js(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ei(i,r,l,u,m,g){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var A=i.entanglements,j=i.expirationTimes,Z=i.hiddenUpdates;for(l=T&~l;0<l;){var ce=31-On(l),fe=1<<ce;A[ce]=0,j[ce]=-1;var ee=Z[ce];if(ee!==null)for(Z[ce]=null,ce=0;ce<ee.length;ce++){var ne=ee[ce];ne!==null&&(ne.lane&=-536870913)}l&=~fe}u!==0&&U(i,u,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~r))}function U(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-On(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|l&4194090}function ue(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var u=31-On(l),m=1<<u;m&r|i[u]&r&&(i[u]|=r),l&=~m}}function _e(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function je(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function At(){var i=se.p;return i!==0?i:(i=window.event,i===void 0?32:lT(i.type))}function Ht(i,r){var l=se.p;try{return se.p=i,r()}finally{se.p=l}}var be=Math.random().toString(36).slice(2),we="__reactFiber$"+be,Ce="__reactProps$"+be,Tt="__reactContainer$"+be,qt="__reactEvents$"+be,pr="__reactListeners$"+be,ti="__reactHandles$"+be,na="__reactResources$"+be,gr="__reactMarker$"+be;function ni(i){delete i[we],delete i[Ce],delete i[qt],delete i[pr],delete i[ti]}function Ei(i){var r=i[we];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Tt]||l[we]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=KE(i);i!==null;){if(l=i[we])return l;i=KE(i)}return r}i=l,l=i.parentNode}return null}function si(i){if(i=i[we]||i[Tt]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function ii(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Dn(i){var r=i[na];return r||(r=i[na]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function $t(i){i[gr]=!0}var ao=new Set,sa={};function Os(i,r){Pn(i,r),Pn(i+"Capture",r)}function Pn(i,r){for(sa[i]=r,i=0;i<r.length;i++)ao.add(r[i])}var oo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lo={},yr={};function rl(i){return cn.call(yr,i)?!0:cn.call(lo,i)?!1:oo.test(i)?yr[i]=!0:(lo[i]=!0,!1)}function ji(i,r,l){if(rl(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function ys(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function xn(i,r,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+u)}}var pe,Oe;function Je(i){if(pe===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);pe=r&&r[1]||"",Oe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+i+Oe}var bt=!1;function Gt(i,r){if(!i||bt)return"";bt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ne){var ee=ne}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ne){ee=ne}i.call(fe.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],A=g[1];if(T&&A){var j=T.split(`
`),Z=A.split(`
`);for(m=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Z.length&&!Z[m].includes("DetermineComponentFrameRoot");)m++;if(u===j.length||m===Z.length)for(u=j.length-1,m=Z.length-1;1<=u&&0<=m&&j[u]!==Z[m];)m--;for(;1<=u&&0<=m;u--,m--)if(j[u]!==Z[m]){if(u!==1||m!==1)do if(u--,m--,0>m||j[u]!==Z[m]){var ce=`
`+j[u].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=u&&0<=m);break}}}finally{bt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Je(l):""}function Hn(i){switch(i.tag){case 26:case 27:case 5:return Je(i.type);case 16:return Je("Lazy");case 13:return Je("Suspense");case 19:return Je("SuspenseList");case 0:case 15:return Gt(i.type,!1);case 11:return Gt(i.type.render,!1);case 1:return Gt(i.type,!0);case 31:return Je("Activity");default:return""}}function vs(i){try{var r="";do r+=Hn(i),i=i.return;while(i);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sn(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ts(i){var r=Sn(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),u=""+i[r];if(!i.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(T){u=""+T,g.call(this,T)}}),Object.defineProperty(i,r,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function vr(i){i._valueTracker||(i._valueTracker=Ts(i))}function ia(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return i&&(u=Sn(i)?i.checked?"true":"false":i.value),i=u,i!==l?(r.setValue(i),!0):!1}function zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Mc=/[\n"\\]/g;function rn(i){return i.replace(Mc,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function _s(i,r,l,u,m,g,T,A){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),r!=null?T==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+gn(r)):i.value!==""+gn(r)&&(i.value=""+gn(r)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),r!=null?Ds(i,T,gn(r)):l!=null?Ds(i,T,gn(l)):u!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+gn(A):i.removeAttribute("name")}function _r(i,r,l,u,m,g,T,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),r!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;l=l!=null?""+gn(l):"",r=r!=null?""+gn(r):l,A||r===i.value||(i.value=r),i.defaultValue=r}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=A?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Ds(i,r,l){r==="number"&&zi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ri(i,r,l,u){if(i=i.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=r.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&u&&(i[l].defaultSelected=!0)}else{for(l=""+gn(l),r=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function st(i,r,l){if(r!=null&&(r=""+gn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+gn(l):""}function br(i,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(s(92));if(Le(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=gn(r),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u)}function rs(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var ze=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function co(i,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,l):typeof l!="number"||l===0||ze.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Zt(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in r)u=r[m],r.hasOwnProperty(m)&&l[m]!==u&&co(i,m,u)}else for(var g in r)r.hasOwnProperty(g)&&co(i,g,r[g])}function wt(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ra=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ti=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ui(i){return Ti.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ps=null;function ye(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ie=null,He=null;function mt(i){var r=si(i);if(r&&(i=r.stateNode)){var l=i[Ce]||null;e:switch(i=r.stateNode,r.type){case"input":if(_s(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+rn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==i&&u.form===i.form){var m=u[Ce]||null;if(!m)throw Error(s(90));_s(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===i.form&&ia(u)}break e;case"textarea":st(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&ri(i,!!l.multiple,r,!1)}}}var jt=!1;function xs(i,r,l){if(jt)return i(r,l);jt=!0;try{var u=i(r);return u}finally{if(jt=!1,(Ie!==null||He!==null)&&(Dd(),Ie&&(r=Ie,i=He,He=Ie=null,mt(r),i)))for(r=0;r<i.length;r++)mt(i[r])}}function wr(i,r){var l=i.stateNode;if(l===null)return null;var u=l[Ce]||null;if(u===null)return null;l=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ai=!1;if(Ls)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){ai=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{ai=!1}var Bi=null,aa=null,Er=null;function Oc(){if(Er)return Er;var i,r=aa,l=r.length,u,m="value"in Bi?Bi.value:Bi.textContent,g=m.length;for(i=0;i<l&&r[i]===m[i];i++);var T=l-i;for(u=1;u<=T&&r[l-u]===m[g-u];u++);return Er=m.slice(i,1<u?1-u:void 0)}function Fi(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Hi(){return!0}function Dc(){return!1}function Ln(i){function r(l,u,m,g,T){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(l=i[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hi:Dc,this.isPropagationStopped=Dc,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),r}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=Ln(Rt),ho=y({},Rt,{view:0,detail:0}),Fh=Ln(ho),ol,ll,qi,fo=y({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qi&&(qi&&i.type==="mousemove"?(ol=i.screenX-qi.screenX,ll=i.screenY-qi.screenY):ll=ol=0,qi=i),ol)},movementY:function(i){return"movementY"in i?i.movementY:ll}}),oi=Ln(fo),Hh=y({},fo,{dataTransfer:0}),dp=Ln(Hh),mo=y({},ho,{relatedTarget:0}),cl=Ln(mo),Pc=y({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),ul=Ln(Pc),qh=y({},Rt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hl=Ln(qh),fp=y({},Rt,{data:0}),Lc=Ln(fp),po={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$h={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vc(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Gh[i])?!!r[i]:!1}function go(){return Vc}var Kh=y({},ho,{key:function(i){if(i.key){var r=po[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Fi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?$h[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(i){return i.type==="keypress"?Fi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),dl=Ln(Kh),Wh=y({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=Ln(Wh),Tr=y({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),Yh=Ln(Tr),Xh=y({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qh=Ln(Xh),Zh=y({},fo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fl=Ln(Zh),bs=y({},Rt,{newState:0,oldState:0}),Jh=Ln(bs),ed=[9,13,27,32],$i=Ls&&"CompositionEvent"in window,d=null;Ls&&"documentMode"in document&&(d=document.documentMode);var b=Ls&&"TextEvent"in window&&!d,E=Ls&&(!$i||d&&8<d&&11>=d),N=" ",W=!1;function ie(i,r){switch(i){case"keyup":return ed.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ee(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var gt=!1;function An(i,r){switch(i){case"compositionend":return Ee(r);case"keypress":return r.which!==32?null:(W=!0,N);case"textInput":return i=r.data,i===N&&W?null:i;default:return null}}function yt(i,r){if(gt)return i==="compositionend"||!$i&&ie(i,r)?(i=Oc(),Er=aa=Bi=null,gt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Vn[i.type]:r==="textarea"}function xr(i,r,l,u){Ie?He?He.push(u):He=[u]:Ie=u,r=Ud(r,"onChange"),0<r.length&&(l=new al("onChange","change",null,l,u),i.push({event:l,listeners:r}))}var qn=null,Gi=null;function zc(i){VE(i,0)}function td(i){var r=ii(i);if(ia(r))return i}function ib(i,r){if(i==="change")return r}var rb=!1;if(Ls){var mp;if(Ls){var pp="oninput"in document;if(!pp){var ab=document.createElement("div");ab.setAttribute("oninput","return;"),pp=typeof ab.oninput=="function"}mp=pp}else mp=!1;rb=mp&&(!document.documentMode||9<document.documentMode)}function ob(){qn&&(qn.detachEvent("onpropertychange",lb),Gi=qn=null)}function lb(i){if(i.propertyName==="value"&&td(Gi)){var r=[];xr(r,Gi,i,ye(i)),xs(zc,r)}}function q2(i,r,l){i==="focusin"?(ob(),qn=r,Gi=l,qn.attachEvent("onpropertychange",lb)):i==="focusout"&&ob()}function $2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return td(Gi)}function G2(i,r){if(i==="click")return td(r)}function K2(i,r){if(i==="input"||i==="change")return td(r)}function W2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Vs=typeof Object.is=="function"?Object.is:W2;function Uc(i,r){if(Vs(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!cn.call(r,m)||!Vs(i[m],r[m]))return!1}return!0}function cb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ub(i,r){var l=cb(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=r&&u>=r)return{node:l,offset:r-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=cb(l)}}function hb(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?hb(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function db(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=zi(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=zi(i.document)}return r}function gp(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Y2=Ls&&"documentMode"in document&&11>=document.documentMode,ml=null,yp=null,Bc=null,vp=!1;function fb(i,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vp||ml==null||ml!==zi(u)||(u=ml,"selectionStart"in u&&gp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bc&&Uc(Bc,u)||(Bc=u,u=Ud(yp,"onSelect"),0<u.length&&(r=new al("onSelect","select",null,r,l),i.push({event:r,listeners:u}),r.target=ml)))}function yo(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var pl={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionrun:yo("Transition","TransitionRun"),transitionstart:yo("Transition","TransitionStart"),transitioncancel:yo("Transition","TransitionCancel"),transitionend:yo("Transition","TransitionEnd")},_p={},mb={};Ls&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function vo(i){if(_p[i])return _p[i];if(!pl[i])return i;var r=pl[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in mb)return _p[i]=r[l];return i}var pb=vo("animationend"),gb=vo("animationiteration"),yb=vo("animationstart"),X2=vo("transitionrun"),Q2=vo("transitionstart"),Z2=vo("transitioncancel"),vb=vo("transitionend"),_b=new Map,bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bp.push("scrollEnd");function xi(i,r){_b.set(i,r),Os(r,[i])}var bb=new WeakMap;function li(i,r){if(typeof i=="object"&&i!==null){var l=bb.get(i);return l!==void 0?l:(r={value:i,source:r,stack:vs(r)},bb.set(i,r),r)}return{value:i,source:r,stack:vs(r)}}var ci=[],gl=0,wp=0;function nd(){for(var i=gl,r=wp=gl=0;r<i;){var l=ci[r];ci[r++]=null;var u=ci[r];ci[r++]=null;var m=ci[r];ci[r++]=null;var g=ci[r];if(ci[r++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}g!==0&&wb(l,m,g)}}function sd(i,r,l,u){ci[gl++]=i,ci[gl++]=r,ci[gl++]=l,ci[gl++]=u,wp|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ep(i,r,l,u){return sd(i,r,l,u),id(i)}function yl(i,r){return sd(i,null,null,r),id(i)}function wb(i,r,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var m=!1,g=i.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&r!==null&&(m=31-On(l),i=g.hiddenUpdates,u=i[m],u===null?i[m]=[r]:u.push(r),r.lane=l|536870912),g):null}function id(i){if(50<du)throw du=0,Cg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var vl={};function J2(i,r,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(i,r,l,u){return new J2(i,r,l,u)}function Tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sr(i,r){var l=i.alternate;return l===null?(l=js(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Eb(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function rd(i,r,l,u,m,g){var T=0;if(u=i,typeof i=="function")Tp(i)&&(T=1);else if(typeof i=="string")T=tM(i,l,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=js(31,l,r,m),i.elementType=I,i.lanes=g,i;case C:return _o(l.children,m,g,r);case k:T=8,m|=24;break;case O:return i=js(12,l,r,m|2),i.elementType=O,i.lanes=g,i;case F:return i=js(13,l,r,m),i.elementType=F,i.lanes=g,i;case te:return i=js(19,l,r,m),i.elementType=te,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case H:T=10;break e;case V:T=9;break e;case G:T=11;break e;case S:T=14;break e;case R:T=16,u=null;break e}T=29,l=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=js(T,l,r,m),r.elementType=i,r.type=u,r.lanes=g,r}function _o(i,r,l,u){return i=js(7,i,u,r),i.lanes=l,i}function xp(i,r,l){return i=js(6,i,null,r),i.lanes=l,i}function Sp(i,r,l){return r=js(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var _l=[],bl=0,ad=null,od=0,ui=[],hi=0,bo=null,Ar=1,Rr="";function wo(i,r){_l[bl++]=od,_l[bl++]=ad,ad=i,od=r}function Tb(i,r,l){ui[hi++]=Ar,ui[hi++]=Rr,ui[hi++]=bo,bo=i;var u=Ar;i=Rr;var m=32-On(u)-1;u&=~(1<<m),l+=1;var g=32-On(r)+m;if(30<g){var T=m-m%5;g=(u&(1<<T)-1).toString(32),u>>=T,m-=T,Ar=1<<32-On(r)+m|l<<m|u,Rr=g+i}else Ar=1<<g|l<<m|u,Rr=i}function Ap(i){i.return!==null&&(wo(i,1),Tb(i,1,0))}function Rp(i){for(;i===ad;)ad=_l[--bl],_l[bl]=null,od=_l[--bl],_l[bl]=null;for(;i===bo;)bo=ui[--hi],ui[hi]=null,Rr=ui[--hi],ui[hi]=null,Ar=ui[--hi],ui[hi]=null}var ws=null,an=null,xt=!1,Eo=null,Ki=!1,Cp=Error(s(519));function To(i){var r=Error(s(418,""));throw qc(li(r,i)),Cp}function xb(i){var r=i.stateNode,l=i.type,u=i.memoizedProps;switch(r[we]=i,r[Ce]=u,l){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(l=0;l<mu.length;l++)ut(mu[l],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":ut("invalid",r),_r(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),vr(r);break;case"select":ut("invalid",r);break;case"textarea":ut("invalid",r),br(r,u.value,u.defaultValue,u.children),vr(r)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||BE(r.textContent,l)?(u.popover!=null&&(ut("beforetoggle",r),ut("toggle",r)),u.onScroll!=null&&ut("scroll",r),u.onScrollEnd!=null&&ut("scrollend",r),u.onClick!=null&&(r.onclick=Bd),r=!0):r=!1,r||To(i)}function Sb(i){for(ws=i.return;ws;)switch(ws.tag){case 5:case 13:Ki=!1;return;case 27:case 3:Ki=!0;return;default:ws=ws.return}}function Fc(i){if(i!==ws)return!1;if(!xt)return Sb(i),xt=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||qg(i.type,i.memoizedProps)),l=!l),l&&an&&To(i),Sb(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(r===0){an=Ai(i.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;i=i.nextSibling}an=null}}else r===27?(r=an,Ea(i.type)?(i=Wg,Wg=null,an=i):an=r):an=ws?Ai(i.stateNode.nextSibling):null;return!0}function Hc(){an=ws=null,xt=!1}function Ab(){var i=Eo;return i!==null&&(Rs===null?Rs=i:Rs.push.apply(Rs,i),Eo=null),i}function qc(i){Eo===null?Eo=[i]:Eo.push(i)}var Ip=Y(null),xo=null,Cr=null;function oa(i,r,l){le(Ip,r._currentValue),r._currentValue=l}function Ir(i){i._currentValue=Ip.current,re(Ip)}function Np(i,r,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===l)break;i=i.return}}function kp(i,r,l,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=m;for(var j=0;j<r.length;j++)if(A.context===r[j]){g.lanes|=l,A=g.alternate,A!==null&&(A.lanes|=l),Np(g.return,l,i),u||(T=null);break e}g=A.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(s(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),Np(T,l,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function $c(i,r,l,u){i=null;for(var m=r,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var A=m.type;Vs(m.pendingProps.value,T.value)||(i!==null?i.push(A):i=[A])}}else if(m===ve.current){if(T=m.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(bu):i=[bu])}m=m.return}i!==null&&kp(r,i,l,u),r.flags|=262144}function ld(i){for(i=i.firstContext;i!==null;){if(!Vs(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function So(i){xo=i,Cr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function as(i){return Rb(xo,i)}function cd(i,r){return xo===null&&So(i),Rb(i,r)}function Rb(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Cr===null){if(i===null)throw Error(s(308));Cr=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Cr=Cr.next=r;return l}var ek=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},tk=n.unstable_scheduleCallback,nk=n.unstable_NormalPriority,Cn={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mp(){return{controller:new ek,data:new Map,refCount:0}}function Gc(i){i.refCount--,i.refCount===0&&tk(nk,function(){i.controller.abort()})}var Kc=null,Op=0,wl=0,El=null;function sk(i,r){if(Kc===null){var l=Kc=[];Op=0,wl=Pg(),El={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Op++,r.then(Cb,Cb),r}function Cb(){if(--Op===0&&Kc!==null){El!==null&&(El.status="fulfilled");var i=Kc;Kc=null,wl=0,El=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function ik(i,r){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var m=0;m<l.length;m++)(0,l[m])(r)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var Ib=Q.S;Q.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&sk(i,r),Ib!==null&&Ib(i,r)};var Ao=Y(null);function Dp(){var i=Ao.current;return i!==null?i:Kt.pooledCache}function ud(i,r){r===null?le(Ao,Ao.current):le(Ao,r.pool)}function Nb(){var i=Dp();return i===null?null:{parent:Cn._currentValue,pool:i}}var Wc=Error(s(460)),kb=Error(s(474)),hd=Error(s(542)),Pp={then:function(){}};function Mb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function dd(){}function Ob(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(dd,dd),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Pb(i),i;default:if(typeof r.status=="string")r.then(dd,dd);else{if(i=Kt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=u}},function(u){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Pb(i),i}throw Yc=r,Wc}}var Yc=null;function Db(){if(Yc===null)throw Error(s(459));var i=Yc;return Yc=null,i}function Pb(i){if(i===Wc||i===hd)throw Error(s(483))}var la=!1;function Lp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ca(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ua(i,r,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ct&2)!==0){var m=u.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),u.pending=r,r=id(i),wb(i,null,l),r}return sd(i,u,r,l),id(i)}function Xc(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,l|=u,r.lanes=l,ue(i,l)}}function jp(i,r){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?m=g=r:g=g.next=r}else m=g=r;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var zp=!1;function Qc(){if(zp){var i=El;if(i!==null)throw i}}function Zc(i,r,l,u){zp=!1;var m=i.updateQueue;la=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var j=A,Z=j.next;j.next=null,T===null?g=Z:T.next=Z,T=j;var ce=i.alternate;ce!==null&&(ce=ce.updateQueue,A=ce.lastBaseUpdate,A!==T&&(A===null?ce.firstBaseUpdate=Z:A.next=Z,ce.lastBaseUpdate=j))}if(g!==null){var fe=m.baseState;T=0,ce=Z=j=null,A=g;do{var ee=A.lane&-536870913,ne=ee!==A.lane;if(ne?(vt&ee)===ee:(u&ee)===ee){ee!==0&&ee===wl&&(zp=!0),ce!==null&&(ce=ce.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ke=i,Ue=A;ee=r;var Mt=l;switch(Ue.tag){case 1:if(Ke=Ue.payload,typeof Ke=="function"){fe=Ke.call(Mt,fe,ee);break e}fe=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=Ue.payload,ee=typeof Ke=="function"?Ke.call(Mt,fe,ee):Ke,ee==null)break e;fe=y({},fe,ee);break e;case 2:la=!0}}ee=A.callback,ee!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ce===null?(Z=ce=ne,j=fe):ce=ce.next=ne,T|=ee;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);ce===null&&(j=fe),m.baseState=j,m.firstBaseUpdate=Z,m.lastBaseUpdate=ce,g===null&&(m.shared.lanes=0),va|=T,i.lanes=T,i.memoizedState=fe}}function Lb(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Vb(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Lb(l[i],r)}var Tl=Y(null),fd=Y(0);function jb(i,r){i=Lr,le(fd,i),le(Tl,r),Lr=i|r.baseLanes}function Up(){le(fd,Lr),le(Tl,Tl.current)}function Bp(){Lr=fd.current,re(Tl),re(fd)}var ha=0,it=null,Nt=null,yn=null,md=!1,xl=!1,Ro=!1,pd=0,Jc=0,Sl=null,rk=0;function un(){throw Error(s(321))}function Fp(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!Vs(i[l],r[l]))return!1;return!0}function Hp(i,r,l,u,m,g){return ha=g,it=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=i===null||i.memoizedState===null?ww:Ew,Ro=!1,g=l(u,m),Ro=!1,xl&&(g=Ub(r,l,u,m)),zb(i),g}function zb(i){Q.H=wd;var r=Nt!==null&&Nt.next!==null;if(ha=0,yn=Nt=it=null,md=!1,Jc=0,Sl=null,r)throw Error(s(300));i===null||jn||(i=i.dependencies,i!==null&&ld(i)&&(jn=!0))}function Ub(i,r,l,u){it=i;var m=0;do{if(xl&&(Sl=null),Jc=0,xl=!1,25<=m)throw Error(s(301));if(m+=1,yn=Nt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Q.H=dk,g=r(l,u)}while(xl);return g}function ak(){var i=Q.H,r=i.useState()[0];return r=typeof r.then=="function"?eu(r):r,i=i.useState()[0],(Nt!==null?Nt.memoizedState:null)!==i&&(it.flags|=1024),r}function qp(){var i=pd!==0;return pd=0,i}function $p(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Gp(i){if(md){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}md=!1}ha=0,yn=Nt=it=null,xl=!1,Jc=pd=0,Sl=null}function Ss(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?it.memoizedState=yn=i:yn=yn.next=i,yn}function vn(){if(Nt===null){var i=it.alternate;i=i!==null?i.memoizedState:null}else i=Nt.next;var r=yn===null?it.memoizedState:yn.next;if(r!==null)yn=r,Nt=i;else{if(i===null)throw it.alternate===null?Error(s(467)):Error(s(310));Nt=i,i={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},yn===null?it.memoizedState=yn=i:yn=yn.next=i}return yn}function Kp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(i){var r=Jc;return Jc+=1,Sl===null&&(Sl=[]),i=Ob(Sl,i,r),r=it,(yn===null?r.memoizedState:yn.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?ww:Ew),i}function gd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return eu(i);if(i.$$typeof===H)return as(i)}throw Error(s(438,String(i)))}function Wp(i){var r=null,l=it.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=it.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Kp(),it.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),u=0;u<i;u++)l[u]=P;return r.index++,l}function Nr(i,r){return typeof r=="function"?r(i):r}function yd(i){var r=vn();return Yp(r,Nt,i)}function Yp(i,r,l){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var m=i.baseQueue,g=u.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}r.baseQueue=m=g,u.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{r=m.next;var A=T=null,j=null,Z=r,ce=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(vt&fe)===fe:(ha&fe)===fe){var ee=Z.revertLane;if(ee===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===wl&&(ce=!0);else if((ha&ee)===ee){Z=Z.next,ee===wl&&(ce=!0);continue}else fe={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(A=j=fe,T=g):j=j.next=fe,it.lanes|=ee,va|=ee;fe=Z.action,Ro&&l(g,fe),g=Z.hasEagerState?Z.eagerState:l(g,fe)}else ee={lane:fe,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(A=j=ee,T=g):j=j.next=ee,it.lanes|=fe,va|=fe;Z=Z.next}while(Z!==null&&Z!==r);if(j===null?T=g:j.next=A,!Vs(g,i.memoizedState)&&(jn=!0,ce&&(l=El,l!==null)))throw l;i.memoizedState=g,i.baseState=T,i.baseQueue=j,u.lastRenderedState=g}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Xp(i){var r=vn(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var u=l.dispatch,m=l.pending,g=r.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);Vs(g,r.memoizedState)||(jn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),l.lastRenderedState=g}return[g,u]}function Bb(i,r,l){var u=it,m=vn(),g=xt;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=r();var T=!Vs((Nt||m).memoizedState,l);T&&(m.memoizedState=l,jn=!0),m=m.queue;var A=qb.bind(null,u,m,i);if(tu(2048,8,A,[i]),m.getSnapshot!==r||T||yn!==null&&yn.memoizedState.tag&1){if(u.flags|=2048,Al(9,vd(),Hb.bind(null,u,m,l,r),null),Kt===null)throw Error(s(349));g||(ha&124)!==0||Fb(u,r,l)}return l}function Fb(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=it.updateQueue,r===null?(r=Kp(),it.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Hb(i,r,l,u){r.value=l,r.getSnapshot=u,$b(r)&&Gb(i)}function qb(i,r,l){return l(function(){$b(r)&&Gb(i)})}function $b(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!Vs(i,l)}catch{return!0}}function Gb(i){var r=yl(i,2);r!==null&&Hs(r,i,2)}function Qp(i){var r=Ss();if(typeof i=="function"){var l=i;if(i=l(),Ro){is(!0);try{l()}finally{is(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:i},r}function Kb(i,r,l,u){return i.baseState=l,Yp(i,Nt,typeof u=="function"?u:Nr)}function ok(i,r,l,u,m){if(bd(i))throw Error(s(485));if(i=r.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};Q.T!==null?l(!0):g.isTransition=!1,u(g),l=r.pending,l===null?(g.next=r.pending=g,Wb(r,g)):(g.next=l.next,r.pending=l.next=g)}}function Wb(i,r){var l=r.action,u=r.payload,m=i.state;if(r.isTransition){var g=Q.T,T={};Q.T=T;try{var A=l(m,u),j=Q.S;j!==null&&j(T,A),Yb(i,r,A)}catch(Z){Zp(i,r,Z)}finally{Q.T=g}}else try{g=l(m,u),Yb(i,r,g)}catch(Z){Zp(i,r,Z)}}function Yb(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Xb(i,r,u)},function(u){return Zp(i,r,u)}):Xb(i,r,l)}function Xb(i,r,l){r.status="fulfilled",r.value=l,Qb(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Wb(i,l)))}function Zp(i,r,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,Qb(r),r=r.next;while(r!==u)}i.action=null}function Qb(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Zb(i,r){return r}function Jb(i,r){if(xt){var l=Kt.formState;if(l!==null){e:{var u=it;if(xt){if(an){t:{for(var m=an,g=Ki;m.nodeType!==8;){if(!g){m=null;break t}if(m=Ai(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){an=Ai(m.nextSibling),u=m.data==="F!";break e}}To(u)}u=!1}u&&(r=l[0])}}return l=Ss(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:r},l.queue=u,l=vw.bind(null,it,u),u.dispatch=l,u=Qp(!1),g=sg.bind(null,it,!1,u.queue),u=Ss(),m={state:r,dispatch:null,action:i,pending:null},u.queue=m,l=ok.bind(null,it,m,g,l),m.dispatch=l,u.memoizedState=i,[r,l,!1]}function ew(i){var r=vn();return tw(r,Nt,i)}function tw(i,r,l){if(r=Yp(i,r,Zb)[0],i=yd(Nr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=eu(r)}catch(T){throw T===Wc?hd:T}else u=r;r=vn();var m=r.queue,g=m.dispatch;return l!==r.memoizedState&&(it.flags|=2048,Al(9,vd(),lk.bind(null,m,l),null)),[u,g,i]}function lk(i,r){i.action=r}function nw(i){var r=vn(),l=Nt;if(l!==null)return tw(r,l,i);vn(),r=r.memoizedState,l=vn();var u=l.queue.dispatch;return l.memoizedState=i,[r,u,!1]}function Al(i,r,l,u){return i={tag:i,create:l,deps:u,inst:r,next:null},r=it.updateQueue,r===null&&(r=Kp(),it.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,r.lastEffect=i),i}function vd(){return{destroy:void 0,resource:void 0}}function sw(){return vn().memoizedState}function _d(i,r,l,u){var m=Ss();u=u===void 0?null:u,it.flags|=i,m.memoizedState=Al(1|r,vd(),l,u)}function tu(i,r,l,u){var m=vn();u=u===void 0?null:u;var g=m.memoizedState.inst;Nt!==null&&u!==null&&Fp(u,Nt.memoizedState.deps)?m.memoizedState=Al(r,g,l,u):(it.flags|=i,m.memoizedState=Al(1|r,g,l,u))}function iw(i,r){_d(8390656,8,i,r)}function rw(i,r){tu(2048,8,i,r)}function aw(i,r){return tu(4,2,i,r)}function ow(i,r){return tu(4,4,i,r)}function lw(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function cw(i,r,l){l=l!=null?l.concat([i]):null,tu(4,4,lw.bind(null,r,i),l)}function Jp(){}function uw(i,r){var l=vn();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&Fp(r,u[1])?u[0]:(l.memoizedState=[i,r],i)}function hw(i,r){var l=vn();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&Fp(r,u[1]))return u[0];if(u=i(),Ro){is(!0);try{i()}finally{is(!1)}}return l.memoizedState=[u,r],u}function eg(i,r,l){return l===void 0||(ha&1073741824)!==0?i.memoizedState=r:(i.memoizedState=l,i=mE(),it.lanes|=i,va|=i,l)}function dw(i,r,l,u){return Vs(l,r)?l:Tl.current!==null?(i=eg(i,l,u),Vs(i,r)||(jn=!0),i):(ha&42)===0?(jn=!0,i.memoizedState=l):(i=mE(),it.lanes|=i,va|=i,r)}function fw(i,r,l,u,m){var g=se.p;se.p=g!==0&&8>g?g:8;var T=Q.T,A={};Q.T=A,sg(i,!1,r,l);try{var j=m(),Z=Q.S;if(Z!==null&&Z(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ce=ik(j,u);nu(i,r,ce,Fs(i))}else nu(i,r,u,Fs(i))}catch(fe){nu(i,r,{then:function(){},status:"rejected",reason:fe},Fs())}finally{se.p=g,Q.T=T}}function ck(){}function tg(i,r,l,u){if(i.tag!==5)throw Error(s(476));var m=mw(i).queue;fw(i,m,r,ae,l===null?ck:function(){return pw(i),l(u)})}function mw(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:ae},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function pw(i){var r=mw(i).next.queue;nu(i,r,{},Fs())}function ng(){return as(bu)}function gw(){return vn().memoizedState}function yw(){return vn().memoizedState}function uk(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=Fs();i=ca(l);var u=ua(r,i,l);u!==null&&(Hs(u,r,l),Xc(u,r,l)),r={cache:Mp()},i.payload=r;return}r=r.return}}function hk(i,r,l){var u=Fs();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},bd(i)?_w(r,l):(l=Ep(i,r,l,u),l!==null&&(Hs(l,i,u),bw(l,r,u)))}function vw(i,r,l){var u=Fs();nu(i,r,l,u)}function nu(i,r,l,u){var m={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(bd(i))_w(r,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var T=r.lastRenderedState,A=g(T,l);if(m.hasEagerState=!0,m.eagerState=A,Vs(A,T))return sd(i,r,m,0),Kt===null&&nd(),!1}catch{}finally{}if(l=Ep(i,r,m,u),l!==null)return Hs(l,i,u),bw(l,r,u),!0}return!1}function sg(i,r,l,u){if(u={lane:2,revertLane:Pg(),action:u,hasEagerState:!1,eagerState:null,next:null},bd(i)){if(r)throw Error(s(479))}else r=Ep(i,l,u,2),r!==null&&Hs(r,i,2)}function bd(i){var r=i.alternate;return i===it||r!==null&&r===it}function _w(i,r){xl=md=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function bw(i,r,l){if((l&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,l|=u,r.lanes=l,ue(i,l)}}var wd={readContext:as,use:gd,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un},ww={readContext:as,use:gd,useCallback:function(i,r){return Ss().memoizedState=[i,r===void 0?null:r],i},useContext:as,useEffect:iw,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,_d(4194308,4,lw.bind(null,r,i),l)},useLayoutEffect:function(i,r){return _d(4194308,4,i,r)},useInsertionEffect:function(i,r){_d(4,2,i,r)},useMemo:function(i,r){var l=Ss();r=r===void 0?null:r;var u=i();if(Ro){is(!0);try{i()}finally{is(!1)}}return l.memoizedState=[u,r],u},useReducer:function(i,r,l){var u=Ss();if(l!==void 0){var m=l(r);if(Ro){is(!0);try{l(r)}finally{is(!1)}}}else m=r;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=hk.bind(null,it,i),[u.memoizedState,i]},useRef:function(i){var r=Ss();return i={current:i},r.memoizedState=i},useState:function(i){i=Qp(i);var r=i.queue,l=vw.bind(null,it,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Jp,useDeferredValue:function(i,r){var l=Ss();return eg(l,i,r)},useTransition:function(){var i=Qp(!1);return i=fw.bind(null,it,i.queue,!0,!1),Ss().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var u=it,m=Ss();if(xt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Kt===null)throw Error(s(349));(vt&124)!==0||Fb(u,r,l)}m.memoizedState=l;var g={value:l,getSnapshot:r};return m.queue=g,iw(qb.bind(null,u,g,i),[i]),u.flags|=2048,Al(9,vd(),Hb.bind(null,u,g,l,r),null),l},useId:function(){var i=Ss(),r=Kt.identifierPrefix;if(xt){var l=Rr,u=Ar;l=(u&~(1<<32-On(u)-1)).toString(32)+l,r=""+r+"R"+l,l=pd++,0<l&&(r+="H"+l.toString(32)),r+=""}else l=rk++,r=""+r+"r"+l.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:ng,useFormState:Jb,useActionState:Jb,useOptimistic:function(i){var r=Ss();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=sg.bind(null,it,!0,l),l.dispatch=r,[i,r]},useMemoCache:Wp,useCacheRefresh:function(){return Ss().memoizedState=uk.bind(null,it)}},Ew={readContext:as,use:gd,useCallback:uw,useContext:as,useEffect:rw,useImperativeHandle:cw,useInsertionEffect:aw,useLayoutEffect:ow,useMemo:hw,useReducer:yd,useRef:sw,useState:function(){return yd(Nr)},useDebugValue:Jp,useDeferredValue:function(i,r){var l=vn();return dw(l,Nt.memoizedState,i,r)},useTransition:function(){var i=yd(Nr)[0],r=vn().memoizedState;return[typeof i=="boolean"?i:eu(i),r]},useSyncExternalStore:Bb,useId:gw,useHostTransitionStatus:ng,useFormState:ew,useActionState:ew,useOptimistic:function(i,r){var l=vn();return Kb(l,Nt,i,r)},useMemoCache:Wp,useCacheRefresh:yw},dk={readContext:as,use:gd,useCallback:uw,useContext:as,useEffect:rw,useImperativeHandle:cw,useInsertionEffect:aw,useLayoutEffect:ow,useMemo:hw,useReducer:Xp,useRef:sw,useState:function(){return Xp(Nr)},useDebugValue:Jp,useDeferredValue:function(i,r){var l=vn();return Nt===null?eg(l,i,r):dw(l,Nt.memoizedState,i,r)},useTransition:function(){var i=Xp(Nr)[0],r=vn().memoizedState;return[typeof i=="boolean"?i:eu(i),r]},useSyncExternalStore:Bb,useId:gw,useHostTransitionStatus:ng,useFormState:nw,useActionState:nw,useOptimistic:function(i,r){var l=vn();return Nt!==null?Kb(l,Nt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Wp,useCacheRefresh:yw},Rl=null,su=0;function Ed(i){var r=su;return su+=1,Rl===null&&(Rl=[]),Ob(Rl,i,r)}function iu(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Td(i,r){throw r.$$typeof===_?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Tw(i){var r=i._init;return r(i._payload)}function xw(i){function r(K,q){if(i){var X=K.deletions;X===null?(K.deletions=[q],K.flags|=16):X.push(q)}}function l(K,q){if(!i)return null;for(;q!==null;)r(K,q),q=q.sibling;return null}function u(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function m(K,q){return K=Sr(K,q),K.index=0,K.sibling=null,K}function g(K,q,X){return K.index=X,i?(X=K.alternate,X!==null?(X=X.index,X<q?(K.flags|=67108866,q):X):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function T(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function A(K,q,X,de){return q===null||q.tag!==6?(q=xp(X,K.mode,de),q.return=K,q):(q=m(q,X),q.return=K,q)}function j(K,q,X,de){var ke=X.type;return ke===C?ce(K,q,X.props.children,de,X.key):q!==null&&(q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===R&&Tw(ke)===q.type)?(q=m(q,X.props),iu(q,X),q.return=K,q):(q=rd(X.type,X.key,X.props,null,K.mode,de),iu(q,X),q.return=K,q)}function Z(K,q,X,de){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=Sp(X,K.mode,de),q.return=K,q):(q=m(q,X.children||[]),q.return=K,q)}function ce(K,q,X,de,ke){return q===null||q.tag!==7?(q=_o(X,K.mode,de,ke),q.return=K,q):(q=m(q,X),q.return=K,q)}function fe(K,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=xp(""+q,K.mode,X),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return X=rd(q.type,q.key,q.props,null,K.mode,X),iu(X,q),X.return=K,X;case x:return q=Sp(q,K.mode,X),q.return=K,q;case R:var de=q._init;return q=de(q._payload),fe(K,q,X)}if(Le(q)||z(q))return q=_o(q,K.mode,X,null),q.return=K,q;if(typeof q.then=="function")return fe(K,Ed(q),X);if(q.$$typeof===H)return fe(K,cd(K,q),X);Td(K,q)}return null}function ee(K,q,X,de){var ke=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return ke!==null?null:A(K,q,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return X.key===ke?j(K,q,X,de):null;case x:return X.key===ke?Z(K,q,X,de):null;case R:return ke=X._init,X=ke(X._payload),ee(K,q,X,de)}if(Le(X)||z(X))return ke!==null?null:ce(K,q,X,de,null);if(typeof X.then=="function")return ee(K,q,Ed(X),de);if(X.$$typeof===H)return ee(K,q,cd(K,X),de);Td(K,X)}return null}function ne(K,q,X,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return K=K.get(X)||null,A(q,K,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case w:return K=K.get(de.key===null?X:de.key)||null,j(q,K,de,ke);case x:return K=K.get(de.key===null?X:de.key)||null,Z(q,K,de,ke);case R:var at=de._init;return de=at(de._payload),ne(K,q,X,de,ke)}if(Le(de)||z(de))return K=K.get(X)||null,ce(q,K,de,ke,null);if(typeof de.then=="function")return ne(K,q,X,Ed(de),ke);if(de.$$typeof===H)return ne(K,q,X,cd(q,de),ke);Td(q,de)}return null}function Ke(K,q,X,de){for(var ke=null,at=null,De=q,Be=q=0,Un=null;De!==null&&Be<X.length;Be++){De.index>Be?(Un=De,De=null):Un=De.sibling;var Et=ee(K,De,X[Be],de);if(Et===null){De===null&&(De=Un);break}i&&De&&Et.alternate===null&&r(K,De),q=g(Et,q,Be),at===null?ke=Et:at.sibling=Et,at=Et,De=Un}if(Be===X.length)return l(K,De),xt&&wo(K,Be),ke;if(De===null){for(;Be<X.length;Be++)De=fe(K,X[Be],de),De!==null&&(q=g(De,q,Be),at===null?ke=De:at.sibling=De,at=De);return xt&&wo(K,Be),ke}for(De=u(De);Be<X.length;Be++)Un=ne(De,K,Be,X[Be],de),Un!==null&&(i&&Un.alternate!==null&&De.delete(Un.key===null?Be:Un.key),q=g(Un,q,Be),at===null?ke=Un:at.sibling=Un,at=Un);return i&&De.forEach(function(Ra){return r(K,Ra)}),xt&&wo(K,Be),ke}function Ue(K,q,X,de){if(X==null)throw Error(s(151));for(var ke=null,at=null,De=q,Be=q=0,Un=null,Et=X.next();De!==null&&!Et.done;Be++,Et=X.next()){De.index>Be?(Un=De,De=null):Un=De.sibling;var Ra=ee(K,De,Et.value,de);if(Ra===null){De===null&&(De=Un);break}i&&De&&Ra.alternate===null&&r(K,De),q=g(Ra,q,Be),at===null?ke=Ra:at.sibling=Ra,at=Ra,De=Un}if(Et.done)return l(K,De),xt&&wo(K,Be),ke;if(De===null){for(;!Et.done;Be++,Et=X.next())Et=fe(K,Et.value,de),Et!==null&&(q=g(Et,q,Be),at===null?ke=Et:at.sibling=Et,at=Et);return xt&&wo(K,Be),ke}for(De=u(De);!Et.done;Be++,Et=X.next())Et=ne(De,K,Be,Et.value,de),Et!==null&&(i&&Et.alternate!==null&&De.delete(Et.key===null?Be:Et.key),q=g(Et,q,Be),at===null?ke=Et:at.sibling=Et,at=Et);return i&&De.forEach(function(fM){return r(K,fM)}),xt&&wo(K,Be),ke}function Mt(K,q,X,de){if(typeof X=="object"&&X!==null&&X.type===C&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case w:e:{for(var ke=X.key;q!==null;){if(q.key===ke){if(ke=X.type,ke===C){if(q.tag===7){l(K,q.sibling),de=m(q,X.props.children),de.return=K,K=de;break e}}else if(q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===R&&Tw(ke)===q.type){l(K,q.sibling),de=m(q,X.props),iu(de,X),de.return=K,K=de;break e}l(K,q);break}else r(K,q);q=q.sibling}X.type===C?(de=_o(X.props.children,K.mode,de,X.key),de.return=K,K=de):(de=rd(X.type,X.key,X.props,null,K.mode,de),iu(de,X),de.return=K,K=de)}return T(K);case x:e:{for(ke=X.key;q!==null;){if(q.key===ke)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){l(K,q.sibling),de=m(q,X.children||[]),de.return=K,K=de;break e}else{l(K,q);break}else r(K,q);q=q.sibling}de=Sp(X,K.mode,de),de.return=K,K=de}return T(K);case R:return ke=X._init,X=ke(X._payload),Mt(K,q,X,de)}if(Le(X))return Ke(K,q,X,de);if(z(X)){if(ke=z(X),typeof ke!="function")throw Error(s(150));return X=ke.call(X),Ue(K,q,X,de)}if(typeof X.then=="function")return Mt(K,q,Ed(X),de);if(X.$$typeof===H)return Mt(K,q,cd(K,X),de);Td(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(l(K,q.sibling),de=m(q,X),de.return=K,K=de):(l(K,q),de=xp(X,K.mode,de),de.return=K,K=de),T(K)):l(K,q)}return function(K,q,X,de){try{su=0;var ke=Mt(K,q,X,de);return Rl=null,ke}catch(De){if(De===Wc||De===hd)throw De;var at=js(29,De,null,K.mode);return at.lanes=de,at.return=K,at}finally{}}}var Cl=xw(!0),Sw=xw(!1),di=Y(null),Wi=null;function da(i){var r=i.alternate;le(In,In.current&1),le(di,i),Wi===null&&(r===null||Tl.current!==null||r.memoizedState!==null)&&(Wi=i)}function Aw(i){if(i.tag===22){if(le(In,In.current),le(di,i),Wi===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(Wi=i)}}else fa()}function fa(){le(In,In.current),le(di,di.current)}function kr(i){re(di),Wi===i&&(Wi=null),re(In)}var In=Y(0);function xd(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Kg(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function ig(i,r,l,u){r=i.memoizedState,l=l(u,r),l=l==null?r:y({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var rg={enqueueSetState:function(i,r,l){i=i._reactInternals;var u=Fs(),m=ca(u);m.payload=r,l!=null&&(m.callback=l),r=ua(i,m,u),r!==null&&(Hs(r,i,u),Xc(r,i,u))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var u=Fs(),m=ca(u);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=ua(i,m,u),r!==null&&(Hs(r,i,u),Xc(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=Fs(),u=ca(l);u.tag=2,r!=null&&(u.callback=r),r=ua(i,u,l),r!==null&&(Hs(r,i,l),Xc(r,i,l))}};function Rw(i,r,l,u,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,T):r.prototype&&r.prototype.isPureReactComponent?!Uc(l,u)||!Uc(m,g):!0}function Cw(i,r,l,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==i&&rg.enqueueReplaceState(r,r.state,null)}function Co(i,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(i=i.defaultProps){l===r&&(l=y({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var Sd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Iw(i){Sd(i)}function Nw(i){console.error(i)}function kw(i){Sd(i)}function Ad(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Mw(i,r,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function ag(i,r,l){return l=ca(l),l.tag=3,l.payload={element:null},l.callback=function(){Ad(i,r)},l}function Ow(i){return i=ca(i),i.tag=3,i}function Dw(i,r,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;i.payload=function(){return m(g)},i.callback=function(){Mw(r,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Mw(r,l,u),typeof m!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function fk(i,r,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&$c(r,l,m,!0),l=di.current,l!==null){switch(l.tag){case 13:return Wi===null?Ng():l.alternate===null&&on===0&&(on=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===Pp?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),Mg(i,u,m)),!1;case 22:return l.flags|=65536,u===Pp?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),Mg(i,u,m)),!1}throw Error(s(435,l.tag))}return Mg(i,u,m),Ng(),!1}if(xt)return r=di.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,u!==Cp&&(i=Error(s(422),{cause:u}),qc(li(i,l)))):(u!==Cp&&(r=Error(s(423),{cause:u}),qc(li(r,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=li(u,l),m=ag(i.stateNode,u,m),jp(i,m),on!==4&&(on=2)),!1;var g=Error(s(520),{cause:u});if(g=li(g,l),hu===null?hu=[g]:hu.push(g),on!==4&&(on=2),r===null)return!0;u=li(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=ag(l.stateNode,u,i),jp(l,i),!1;case 1:if(r=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(_a===null||!_a.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Ow(m),Dw(m,i,l,u),jp(l,m),!1}l=l.return}while(l!==null);return!1}var Pw=Error(s(461)),jn=!1;function $n(i,r,l,u){r.child=i===null?Sw(r,null,l,u):Cl(r,i.child,l,u)}function Lw(i,r,l,u,m){l=l.render;var g=r.ref;if("ref"in u){var T={};for(var A in u)A!=="ref"&&(T[A]=u[A])}else T=u;return So(r),u=Hp(i,r,l,T,g,m),A=qp(),i!==null&&!jn?($p(i,r,m),Mr(i,r,m)):(xt&&A&&Ap(r),r.flags|=1,$n(i,r,u,m),r.child)}function Vw(i,r,l,u,m){if(i===null){var g=l.type;return typeof g=="function"&&!Tp(g)&&g.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=g,jw(i,r,g,u,m)):(i=rd(l.type,null,u,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(g=i.child,!mg(i,m)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:Uc,l(T,u)&&i.ref===r.ref)return Mr(i,r,m)}return r.flags|=1,i=Sr(g,u),i.ref=r.ref,i.return=r,r.child=i}function jw(i,r,l,u,m){if(i!==null){var g=i.memoizedProps;if(Uc(g,u)&&i.ref===r.ref)if(jn=!1,r.pendingProps=u=g,mg(i,m))(i.flags&131072)!==0&&(jn=!0);else return r.lanes=i.lanes,Mr(i,r,m)}return og(i,r,l,u,m)}function zw(i,r,l){var u=r.pendingProps,m=u.children,g=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,i!==null){for(m=r.child=i.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;r.childLanes=g&~u}else r.childLanes=0,r.child=null;return Uw(i,r,u,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ud(r,g!==null?g.cachePool:null),g!==null?jb(r,g):Up(),Aw(r);else return r.lanes=r.childLanes=536870912,Uw(i,r,g!==null?g.baseLanes|l:l,l)}else g!==null?(ud(r,g.cachePool),jb(r,g),fa(),r.memoizedState=null):(i!==null&&ud(r,null),Up(),fa());return $n(i,r,m,l),r.child}function Uw(i,r,l,u){var m=Dp();return m=m===null?null:{parent:Cn._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},i!==null&&ud(r,null),Up(),Aw(r),i!==null&&$c(i,r,u,!0),null}function Rd(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function og(i,r,l,u,m){return So(r),l=Hp(i,r,l,u,void 0,m),u=qp(),i!==null&&!jn?($p(i,r,m),Mr(i,r,m)):(xt&&u&&Ap(r),r.flags|=1,$n(i,r,l,m),r.child)}function Bw(i,r,l,u,m,g){return So(r),r.updateQueue=null,l=Ub(r,u,l,m),zb(i),u=qp(),i!==null&&!jn?($p(i,r,g),Mr(i,r,g)):(xt&&u&&Ap(r),r.flags|=1,$n(i,r,l,g),r.child)}function Fw(i,r,l,u,m){if(So(r),r.stateNode===null){var g=vl,T=l.contextType;typeof T=="object"&&T!==null&&(g=as(T)),g=new l(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=rg,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},Lp(r),T=l.contextType,g.context=typeof T=="object"&&T!==null?as(T):vl,g.state=r.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(ig(r,l,T,u),g.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&rg.enqueueReplaceState(g,g.state,null),Zc(r,u,g,m),Qc(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){g=r.stateNode;var A=r.memoizedProps,j=Co(l,A);g.props=j;var Z=g.context,ce=l.contextType;T=vl,typeof ce=="object"&&ce!==null&&(T=as(ce));var fe=l.getDerivedStateFromProps;ce=typeof fe=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,ce||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||Z!==T)&&Cw(r,g,u,T),la=!1;var ee=r.memoizedState;g.state=ee,Zc(r,u,g,m),Qc(),Z=r.memoizedState,A||ee!==Z||la?(typeof fe=="function"&&(ig(r,l,fe,u),Z=r.memoizedState),(j=la||Rw(r,l,j,u,ee,Z,T))?(ce||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Z),g.props=u,g.state=Z,g.context=T,u=j):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,Vp(i,r),T=r.memoizedProps,ce=Co(l,T),g.props=ce,fe=r.pendingProps,ee=g.context,Z=l.contextType,j=vl,typeof Z=="object"&&Z!==null&&(j=as(Z)),A=l.getDerivedStateFromProps,(Z=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==fe||ee!==j)&&Cw(r,g,u,j),la=!1,ee=r.memoizedState,g.state=ee,Zc(r,u,g,m),Qc();var ne=r.memoizedState;T!==fe||ee!==ne||la||i!==null&&i.dependencies!==null&&ld(i.dependencies)?(typeof A=="function"&&(ig(r,l,A,u),ne=r.memoizedState),(ce=la||Rw(r,l,ce,u,ee,ne,j)||i!==null&&i.dependencies!==null&&ld(i.dependencies))?(Z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ne,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ne,j)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ne),g.props=u,g.state=ne,g.context=j,u=ce):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&ee===i.memoizedState||(r.flags|=1024),u=!1)}return g=u,Rd(i,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,i!==null&&u?(r.child=Cl(r,i.child,null,m),r.child=Cl(r,null,l,m)):$n(i,r,l,m),r.memoizedState=g.state,i=r.child):i=Mr(i,r,m),i}function Hw(i,r,l,u){return Hc(),r.flags|=256,$n(i,r,l,u),r.child}var lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cg(i){return{baseLanes:i,cachePool:Nb()}}function ug(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=fi),i}function qw(i,r,l){var u=r.pendingProps,m=!1,g=(r.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(In.current&2)!==0),T&&(m=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,i===null){if(xt){if(m?da(r):fa(),xt){var A=an,j;if(j=A){e:{for(j=A,A=Ki;j.nodeType!==8;){if(!A){A=null;break e}if(j=Ai(j.nextSibling),j===null){A=null;break e}}A=j}A!==null?(r.memoizedState={dehydrated:A,treeContext:bo!==null?{id:Ar,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},j=js(18,null,null,0),j.stateNode=A,j.return=r,r.child=j,ws=r,an=null,j=!0):j=!1}j||To(r)}if(A=r.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Kg(A)?r.lanes=32:r.lanes=536870912,null;kr(r)}return A=u.children,u=u.fallback,m?(fa(),m=r.mode,A=Cd({mode:"hidden",children:A},m),u=_o(u,m,l,null),A.return=r,u.return=r,A.sibling=u,r.child=A,m=r.child,m.memoizedState=cg(l),m.childLanes=ug(i,T,l),r.memoizedState=lg,u):(da(r),hg(r,A))}if(j=i.memoizedState,j!==null&&(A=j.dehydrated,A!==null)){if(g)r.flags&256?(da(r),r.flags&=-257,r=dg(i,r,l)):r.memoizedState!==null?(fa(),r.child=i.child,r.flags|=128,r=null):(fa(),m=u.fallback,A=r.mode,u=Cd({mode:"visible",children:u.children},A),m=_o(m,A,l,null),m.flags|=2,u.return=r,m.return=r,u.sibling=m,r.child=u,Cl(r,i.child,null,l),u=r.child,u.memoizedState=cg(l),u.childLanes=ug(i,T,l),r.memoizedState=lg,r=m);else if(da(r),Kg(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var Z=T.dgst;T=Z,u=Error(s(419)),u.stack="",u.digest=T,qc({value:u,source:null,stack:null}),r=dg(i,r,l)}else if(jn||$c(i,r,l,!1),T=(l&i.childLanes)!==0,jn||T){if(T=Kt,T!==null&&(u=l&-l,u=(u&42)!==0?1:_e(u),u=(u&(T.suspendedLanes|l))!==0?0:u,u!==0&&u!==j.retryLane))throw j.retryLane=u,yl(i,u),Hs(T,i,u),Pw;A.data==="$?"||Ng(),r=dg(i,r,l)}else A.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=j.treeContext,an=Ai(A.nextSibling),ws=r,xt=!0,Eo=null,Ki=!1,i!==null&&(ui[hi++]=Ar,ui[hi++]=Rr,ui[hi++]=bo,Ar=i.id,Rr=i.overflow,bo=r),r=hg(r,u.children),r.flags|=4096);return r}return m?(fa(),m=u.fallback,A=r.mode,j=i.child,Z=j.sibling,u=Sr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,Z!==null?m=Sr(Z,m):(m=_o(m,A,l,null),m.flags|=2),m.return=r,u.return=r,u.sibling=m,r.child=u,u=m,m=r.child,A=i.child.memoizedState,A===null?A=cg(l):(j=A.cachePool,j!==null?(Z=Cn._currentValue,j=j.parent!==Z?{parent:Z,pool:Z}:j):j=Nb(),A={baseLanes:A.baseLanes|l,cachePool:j}),m.memoizedState=A,m.childLanes=ug(i,T,l),r.memoizedState=lg,u):(da(r),l=i.child,i=l.sibling,l=Sr(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,i!==null&&(T=r.deletions,T===null?(r.deletions=[i],r.flags|=16):T.push(i)),r.child=l,r.memoizedState=null,l)}function hg(i,r){return r=Cd({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Cd(i,r){return i=js(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function dg(i,r,l){return Cl(r,i.child,null,l),i=hg(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function $w(i,r,l){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Np(i.return,r,l)}function fg(i,r,l,u,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=m)}function Gw(i,r,l){var u=r.pendingProps,m=u.revealOrder,g=u.tail;if($n(i,r,u.children,l),u=In.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$w(i,l,r);else if(i.tag===19)$w(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(le(In,u),m){case"forwards":for(l=r.child,m=null;l!==null;)i=l.alternate,i!==null&&xd(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),fg(r,!1,m,l,g);break;case"backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&xd(i)===null){r.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}fg(r,!0,l,null,g);break;case"together":fg(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Mr(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),va|=r.lanes,(l&r.childLanes)===0)if(i!==null){if($c(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=Sr(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Sr(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function mg(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&ld(i)))}function mk(i,r,l){switch(r.tag){case 3:xe(r,r.stateNode.containerInfo),oa(r,Cn,i.memoizedState.cache),Hc();break;case 27:case 5:tt(r);break;case 4:xe(r,r.stateNode.containerInfo);break;case 10:oa(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(da(r),r.flags|=128,null):(l&r.child.childLanes)!==0?qw(i,r,l):(da(r),i=Mr(i,r,l),i!==null?i.sibling:null);da(r);break;case 19:var m=(i.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||($c(i,r,l,!1),u=(l&r.childLanes)!==0),m){if(u)return Gw(i,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),le(In,In.current),u)break;return null;case 22:case 23:return r.lanes=0,zw(i,r,l);case 24:oa(r,Cn,i.memoizedState.cache)}return Mr(i,r,l)}function Kw(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)jn=!0;else{if(!mg(i,l)&&(r.flags&128)===0)return jn=!1,mk(i,r,l);jn=(i.flags&131072)!==0}else jn=!1,xt&&(r.flags&1048576)!==0&&Tb(r,od,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var u=r.elementType,m=u._init;if(u=m(u._payload),r.type=u,typeof u=="function")Tp(u)?(i=Co(u,i),r.tag=1,r=Fw(null,r,u,i,l)):(r.tag=0,r=og(null,r,u,i,l));else{if(u!=null){if(m=u.$$typeof,m===G){r.tag=11,r=Lw(null,r,u,i,l);break e}else if(m===S){r.tag=14,r=Vw(null,r,u,i,l);break e}}throw r=Ne(u)||u,Error(s(306,r,""))}}return r;case 0:return og(i,r,r.type,r.pendingProps,l);case 1:return u=r.type,m=Co(u,r.pendingProps),Fw(i,r,u,m,l);case 3:e:{if(xe(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var g=r.memoizedState;m=g.element,Vp(i,r),Zc(r,u,null,l);var T=r.memoizedState;if(u=T.cache,oa(r,Cn,u),u!==g.cache&&kp(r,[Cn],l,!0),Qc(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Hw(i,r,u,l);break e}else if(u!==m){m=li(Error(s(424)),r),qc(m),r=Hw(i,r,u,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(an=Ai(i.firstChild),ws=r,xt=!0,Eo=null,Ki=!0,l=Sw(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Hc(),u===m){r=Mr(i,r,l);break e}$n(i,r,u,l)}r=r.child}return r;case 26:return Rd(i,r),i===null?(l=QE(r.type,null,r.pendingProps,null))?r.memoizedState=l:xt||(l=r.type,i=r.pendingProps,u=Fd(he.current).createElement(l),u[we]=r,u[Ce]=i,Kn(u,l,i),$t(u),r.stateNode=u):r.memoizedState=QE(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return tt(r),i===null&&xt&&(u=r.stateNode=WE(r.type,r.pendingProps,he.current),ws=r,Ki=!0,m=an,Ea(r.type)?(Wg=m,an=Ai(u.firstChild)):an=m),$n(i,r,r.pendingProps.children,l),Rd(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&xt&&((m=u=an)&&(u=Fk(u,r.type,r.pendingProps,Ki),u!==null?(r.stateNode=u,ws=r,an=Ai(u.firstChild),Ki=!1,m=!0):m=!1),m||To(r)),tt(r),m=r.type,g=r.pendingProps,T=i!==null?i.memoizedProps:null,u=g.children,qg(m,g)?u=null:T!==null&&qg(m,T)&&(r.flags|=32),r.memoizedState!==null&&(m=Hp(i,r,ak,null,null,l),bu._currentValue=m),Rd(i,r),$n(i,r,u,l),r.child;case 6:return i===null&&xt&&((i=l=an)&&(l=Hk(l,r.pendingProps,Ki),l!==null?(r.stateNode=l,ws=r,an=null,i=!0):i=!1),i||To(r)),null;case 13:return qw(i,r,l);case 4:return xe(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Cl(r,null,u,l):$n(i,r,u,l),r.child;case 11:return Lw(i,r,r.type,r.pendingProps,l);case 7:return $n(i,r,r.pendingProps,l),r.child;case 8:return $n(i,r,r.pendingProps.children,l),r.child;case 12:return $n(i,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,oa(r,r.type,u.value),$n(i,r,u.children,l),r.child;case 9:return m=r.type._context,u=r.pendingProps.children,So(r),m=as(m),u=u(m),r.flags|=1,$n(i,r,u,l),r.child;case 14:return Vw(i,r,r.type,r.pendingProps,l);case 15:return jw(i,r,r.type,r.pendingProps,l);case 19:return Gw(i,r,l);case 31:return u=r.pendingProps,l=r.mode,u={mode:u.mode,children:u.children},i===null?(l=Cd(u,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Sr(i.child,u),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return zw(i,r,l);case 24:return So(r),u=as(Cn),i===null?(m=Dp(),m===null&&(m=Kt,g=Mp(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),r.memoizedState={parent:u,cache:m},Lp(r),oa(r,Cn,m)):((i.lanes&l)!==0&&(Vp(i,r),Zc(r,null,null,l),Qc()),m=i.memoizedState,g=r.memoizedState,m.parent!==u?(m={parent:u,cache:u},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),oa(r,Cn,u)):(u=g.cache,oa(r,Cn,u),u!==m.cache&&kp(r,[Cn],l,!0))),$n(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Or(i){i.flags|=4}function Ww(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!nT(r)){if(r=di.current,r!==null&&((vt&4194048)===vt?Wi!==null:(vt&62914560)!==vt&&(vt&536870912)===0||r!==Wi))throw Yc=Pp,kb;i.flags|=8192}}function Id(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ta():536870912,i.lanes|=r,Ml|=r)}function ru(i,r){if(!xt)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Jt(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(r)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=l,r}function pk(i,r,l){var u=r.pendingProps;switch(Rp(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(r),null;case 1:return Jt(r),null;case 3:return l=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Ir(Cn),Ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Fc(r)?Or(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ab())),Jt(r),null;case 26:return l=r.memoizedState,i===null?(Or(r),l!==null?(Jt(r),Ww(r,l)):(Jt(r),r.flags&=-16777217)):l?l!==i.memoizedState?(Or(r),Jt(r),Ww(r,l)):(Jt(r),r.flags&=-16777217):(i.memoizedProps!==u&&Or(r),Jt(r),r.flags&=-16777217),null;case 27:Xe(r),l=he.current;var m=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Or(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}i=ge.current,Fc(r)?xb(r):(i=WE(m,u,l),r.stateNode=i,Or(r))}return Jt(r),null;case 5:if(Xe(r),l=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Or(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}if(i=ge.current,Fc(r))xb(r);else{switch(m=Fd(he.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?m.createElement(l,{is:u.is}):m.createElement(l)}}i[we]=r,i[Ce]=u;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=i;e:switch(Kn(i,l,u),l){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Or(r)}}return Jt(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Or(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=he.current,Fc(r)){if(i=r.stateNode,l=r.memoizedProps,u=null,m=ws,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[we]=r,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||BE(i.nodeValue,l)),i||To(r)}else i=Fd(i).createTextNode(u),i[we]=r,r.stateNode=i}return Jt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Fc(r),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[we]=r}else Hc(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),m=!1}else m=Ab(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(kr(r),r):(kr(r),null)}if(kr(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=u!==null,i=i!==null&&i.memoizedState!==null,l){u=r.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return l!==i&&l&&(r.child.flags|=8192),Id(r,r.updateQueue),Jt(r),null;case 4:return Ge(),i===null&&zg(r.stateNode.containerInfo),Jt(r),null;case 10:return Ir(r.type),Jt(r),null;case 19:if(re(In),m=r.memoizedState,m===null)return Jt(r),null;if(u=(r.flags&128)!==0,g=m.rendering,g===null)if(u)ru(m,!1);else{if(on!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(g=xd(i),g!==null){for(r.flags|=128,ru(m,!1),i=g.updateQueue,r.updateQueue=i,Id(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)Eb(l,i),l=l.sibling;return le(In,In.current&1|2),r.child}i=i.sibling}m.tail!==null&&Wt()>Md&&(r.flags|=128,u=!0,ru(m,!1),r.lanes=4194304)}else{if(!u)if(i=xd(g),i!==null){if(r.flags|=128,u=!0,i=i.updateQueue,r.updateQueue=i,Id(r,i),ru(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!xt)return Jt(r),null}else 2*Wt()-m.renderingStartTime>Md&&l!==536870912&&(r.flags|=128,u=!0,ru(m,!1),r.lanes=4194304);m.isBackwards?(g.sibling=r.child,r.child=g):(i=m.last,i!==null?i.sibling=g:r.child=g,m.last=g)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=Wt(),r.sibling=null,i=In.current,le(In,u?i&1|2:i&1),r):(Jt(r),null);case 22:case 23:return kr(r),Bp(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(Jt(r),r.subtreeFlags&6&&(r.flags|=8192)):Jt(r),l=r.updateQueue,l!==null&&Id(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),i!==null&&re(Ao),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ir(Cn),Jt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function gk(i,r){switch(Rp(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ir(Cn),Ge(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Xe(r),null;case 13:if(kr(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Hc()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return re(In),null;case 4:return Ge(),null;case 10:return Ir(r.type),null;case 22:case 23:return kr(r),Bp(),i!==null&&re(Ao),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ir(Cn),null;case 25:return null;default:return null}}function Yw(i,r){switch(Rp(r),r.tag){case 3:Ir(Cn),Ge();break;case 26:case 27:case 5:Xe(r);break;case 4:Ge();break;case 13:kr(r);break;case 19:re(In);break;case 10:Ir(r.type);break;case 22:case 23:kr(r),Bp(),i!==null&&re(Ao);break;case 24:Ir(Cn)}}function au(i,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&i)===i){u=void 0;var g=l.create,T=l.inst;u=g(),T.destroy=u}l=l.next}while(l!==m)}}catch(A){zt(r,r.return,A)}}function ma(i,r,l){try{var u=r.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&i)===i){var T=u.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,m=r;var j=l,Z=A;try{Z()}catch(ce){zt(m,j,ce)}}}u=u.next}while(u!==g)}}catch(ce){zt(r,r.return,ce)}}function Xw(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{Vb(r,l)}catch(u){zt(i,i.return,u)}}}function Qw(i,r,l){l.props=Co(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){zt(i,r,u)}}function ou(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof l=="function"?i.refCleanup=l(u):l.current=u}}catch(m){zt(i,r,m)}}function Yi(i,r){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){zt(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){zt(i,r,m)}else l.current=null}function Zw(i){var r=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){zt(i,i.return,m)}}function pg(i,r,l){try{var u=i.stateNode;Vk(u,i.type,l,r),u[Ce]=r}catch(m){zt(i,i.return,m)}}function Jw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ea(i.type)||i.tag===4}function gg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Jw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ea(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yg(i,r,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Bd));else if(u!==4&&(u===27&&Ea(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(yg(i,r,l),i=i.sibling;i!==null;)yg(i,r,l),i=i.sibling}function Nd(i,r,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(u!==4&&(u===27&&Ea(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Nd(i,r,l),i=i.sibling;i!==null;)Nd(i,r,l),i=i.sibling}function eE(i){var r=i.stateNode,l=i.memoizedProps;try{for(var u=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);Kn(r,u,l),r[we]=i,r[Ce]=l}catch(g){zt(i,i.return,g)}}var Dr=!1,hn=!1,vg=!1,tE=typeof WeakSet=="function"?WeakSet:Set,zn=null;function yk(i,r){if(i=i.containerInfo,Fg=Wd,i=db(i),gp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,A=-1,j=-1,Z=0,ce=0,fe=i,ee=null;t:for(;;){for(var ne;fe!==l||m!==0&&fe.nodeType!==3||(A=T+m),fe!==g||u!==0&&fe.nodeType!==3||(j=T+u),fe.nodeType===3&&(T+=fe.nodeValue.length),(ne=fe.firstChild)!==null;)ee=fe,fe=ne;for(;;){if(fe===i)break t;if(ee===l&&++Z===m&&(A=T),ee===g&&++ce===u&&(j=T),(ne=fe.nextSibling)!==null)break;fe=ee,ee=fe.parentNode}fe=ne}l=A===-1||j===-1?null:{start:A,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hg={focusedElem:i,selectionRange:l},Wd=!1,zn=r;zn!==null;)if(r=zn,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,zn=i;else for(;zn!==null;){switch(r=zn,g=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=r,m=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var Ke=Co(l.type,m,l.elementType===l.type);i=u.getSnapshotBeforeUpdate(Ke,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ue){zt(l,l.return,Ue)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)Gg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Gg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,zn=i;break}zn=r.return}}function nE(i,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:pa(i,l),u&4&&au(5,l);break;case 1:if(pa(i,l),u&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(T){zt(l,l.return,T)}else{var m=Co(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(T){zt(l,l.return,T)}}u&64&&Xw(l),u&512&&ou(l,l.return);break;case 3:if(pa(i,l),u&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Vb(i,r)}catch(T){zt(l,l.return,T)}}break;case 27:r===null&&u&4&&eE(l);case 26:case 5:pa(i,l),r===null&&u&4&&Zw(l),u&512&&ou(l,l.return);break;case 12:pa(i,l);break;case 13:pa(i,l),u&4&&rE(i,l),u&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=Ak.bind(null,l),qk(i,l))));break;case 22:if(u=l.memoizedState!==null||Dr,!u){r=r!==null&&r.memoizedState!==null||hn,m=Dr;var g=hn;Dr=u,(hn=r)&&!g?ga(i,l,(l.subtreeFlags&8772)!==0):pa(i,l),Dr=m,hn=g}break;case 30:break;default:pa(i,l)}}function sE(i){var r=i.alternate;r!==null&&(i.alternate=null,sE(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&ni(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Qt=null,As=!1;function Pr(i,r,l){for(l=l.child;l!==null;)iE(i,r,l),l=l.sibling}function iE(i,r,l){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(lt,l)}catch{}switch(l.tag){case 26:hn||Yi(l,r),Pr(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:hn||Yi(l,r);var u=Qt,m=As;Ea(l.type)&&(Qt=l.stateNode,As=!1),Pr(i,r,l),gu(l.stateNode),Qt=u,As=m;break;case 5:hn||Yi(l,r);case 6:if(u=Qt,m=As,Qt=null,Pr(i,r,l),Qt=u,As=m,Qt!==null)if(As)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(l.stateNode)}catch(g){zt(l,r,g)}else try{Qt.removeChild(l.stateNode)}catch(g){zt(l,r,g)}break;case 18:Qt!==null&&(As?(i=Qt,GE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),xu(i)):GE(Qt,l.stateNode));break;case 4:u=Qt,m=As,Qt=l.stateNode.containerInfo,As=!0,Pr(i,r,l),Qt=u,As=m;break;case 0:case 11:case 14:case 15:hn||ma(2,l,r),hn||ma(4,l,r),Pr(i,r,l);break;case 1:hn||(Yi(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Qw(l,r,u)),Pr(i,r,l);break;case 21:Pr(i,r,l);break;case 22:hn=(u=hn)||l.memoizedState!==null,Pr(i,r,l),hn=u;break;default:Pr(i,r,l)}}function rE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xu(i)}catch(l){zt(r,r.return,l)}}function vk(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new tE),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new tE),r;default:throw Error(s(435,i.tag))}}function _g(i,r){var l=vk(i);r.forEach(function(u){var m=Rk.bind(null,i,u);l.has(u)||(l.add(u),u.then(m,m))})}function zs(i,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],g=i,T=r,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Ea(A.type)){Qt=A.stateNode,As=!1;break e}break;case 5:Qt=A.stateNode,As=!1;break e;case 3:case 4:Qt=A.stateNode.containerInfo,As=!0;break e}A=A.return}if(Qt===null)throw Error(s(160));iE(g,T,m),Qt=null,As=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)aE(r,i),r=r.sibling}var Si=null;function aE(i,r){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:zs(r,i),Us(i),u&4&&(ma(3,i,i.return),au(3,i),ma(5,i,i.return));break;case 1:zs(r,i),Us(i),u&512&&(hn||l===null||Yi(l,l.return)),u&64&&Dr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=Si;if(zs(r,i),Us(i),u&512&&(hn||l===null||Yi(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[gr]||g[we]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Kn(g,u,l),g[we]=i,$t(g),u=g;break e;case"link":var T=eT("link","href",m).get(u+(l.href||""));if(T){for(var A=0;A<T.length;A++)if(g=T[A],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(A,1);break t}}g=m.createElement(u),Kn(g,u,l),m.head.appendChild(g);break;case"meta":if(T=eT("meta","content",m).get(u+(l.content||""))){for(A=0;A<T.length;A++)if(g=T[A],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(A,1);break t}}g=m.createElement(u),Kn(g,u,l),m.head.appendChild(g);break;default:throw Error(s(468,u))}g[we]=i,$t(g),u=g}i.stateNode=u}else tT(m,i.type,i.stateNode);else i.stateNode=JE(m,u,i.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?tT(m,i.type,i.stateNode):JE(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&pg(i,i.memoizedProps,l.memoizedProps)}break;case 27:zs(r,i),Us(i),u&512&&(hn||l===null||Yi(l,l.return)),l!==null&&u&4&&pg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(zs(r,i),Us(i),u&512&&(hn||l===null||Yi(l,l.return)),i.flags&32){m=i.stateNode;try{rs(m,"")}catch(ne){zt(i,i.return,ne)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,pg(i,m,l!==null?l.memoizedProps:m)),u&1024&&(vg=!0);break;case 6:if(zs(r,i),Us(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(ne){zt(i,i.return,ne)}}break;case 3:if($d=null,m=Si,Si=Hd(r.containerInfo),zs(r,i),Si=m,Us(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{xu(r.containerInfo)}catch(ne){zt(i,i.return,ne)}vg&&(vg=!1,oE(i));break;case 4:u=Si,Si=Hd(i.stateNode.containerInfo),zs(r,i),Us(i),Si=u;break;case 12:zs(r,i),Us(i);break;case 13:zs(r,i),Us(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Sg=Wt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_g(i,u)));break;case 22:m=i.memoizedState!==null;var j=l!==null&&l.memoizedState!==null,Z=Dr,ce=hn;if(Dr=Z||m,hn=ce||j,zs(r,i),hn=ce,Dr=Z,Us(i),u&8192)e:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(l===null||j||Dr||hn||Io(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){j=l=r;try{if(g=j.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=j.stateNode;var fe=j.memoizedProps.style,ee=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ne){zt(j,j.return,ne)}}}else if(r.tag===6){if(l===null){j=r;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(ne){zt(j,j.return,ne)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,_g(i,l))));break;case 19:zs(r,i),Us(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_g(i,u)));break;case 30:break;case 21:break;default:zs(r,i),Us(i)}}function Us(i){var r=i.flags;if(r&2){try{for(var l,u=i.return;u!==null;){if(Jw(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,g=gg(i);Nd(i,g,m);break;case 5:var T=l.stateNode;l.flags&32&&(rs(T,""),l.flags&=-33);var A=gg(i);Nd(i,A,T);break;case 3:case 4:var j=l.stateNode.containerInfo,Z=gg(i);yg(i,Z,j);break;default:throw Error(s(161))}}catch(ce){zt(i,i.return,ce)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function oE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;oE(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function pa(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)nE(i,r.alternate,r),r=r.sibling}function Io(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ma(4,r,r.return),Io(r);break;case 1:Yi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Qw(r,r.return,l),Io(r);break;case 27:gu(r.stateNode);case 26:case 5:Yi(r,r.return),Io(r);break;case 22:r.memoizedState===null&&Io(r);break;case 30:Io(r);break;default:Io(r)}i=i.sibling}}function ga(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,m=i,g=r,T=g.flags;switch(g.tag){case 0:case 11:case 15:ga(m,g,l),au(4,g);break;case 1:if(ga(m,g,l),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Z){zt(u,u.return,Z)}if(u=g,m=u.updateQueue,m!==null){var A=u.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)Lb(j[m],A)}catch(Z){zt(u,u.return,Z)}}l&&T&64&&Xw(g),ou(g,g.return);break;case 27:eE(g);case 26:case 5:ga(m,g,l),l&&u===null&&T&4&&Zw(g),ou(g,g.return);break;case 12:ga(m,g,l);break;case 13:ga(m,g,l),l&&T&4&&rE(m,g);break;case 22:g.memoizedState===null&&ga(m,g,l),ou(g,g.return);break;case 30:break;default:ga(m,g,l)}r=r.sibling}}function bg(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Gc(l))}function wg(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Gc(i))}function Xi(i,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lE(i,r,l,u),r=r.sibling}function lE(i,r,l,u){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Xi(i,r,l,u),m&2048&&au(9,r);break;case 1:Xi(i,r,l,u);break;case 3:Xi(i,r,l,u),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Gc(i)));break;case 12:if(m&2048){Xi(i,r,l,u),i=r.stateNode;try{var g=r.memoizedProps,T=g.id,A=g.onPostCommit;typeof A=="function"&&A(T,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){zt(r,r.return,j)}}else Xi(i,r,l,u);break;case 13:Xi(i,r,l,u);break;case 23:break;case 22:g=r.stateNode,T=r.alternate,r.memoizedState!==null?g._visibility&2?Xi(i,r,l,u):lu(i,r):g._visibility&2?Xi(i,r,l,u):(g._visibility|=2,Il(i,r,l,u,(r.subtreeFlags&10256)!==0)),m&2048&&bg(T,r);break;case 24:Xi(i,r,l,u),m&2048&&wg(r.alternate,r);break;default:Xi(i,r,l,u)}}function Il(i,r,l,u,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=i,T=r,A=l,j=u,Z=T.flags;switch(T.tag){case 0:case 11:case 15:Il(g,T,A,j,m),au(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Il(g,T,A,j,m):lu(g,T):(ce._visibility|=2,Il(g,T,A,j,m)),m&&Z&2048&&bg(T.alternate,T);break;case 24:Il(g,T,A,j,m),m&&Z&2048&&wg(T.alternate,T);break;default:Il(g,T,A,j,m)}r=r.sibling}}function lu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,u=r,m=u.flags;switch(u.tag){case 22:lu(l,u),m&2048&&bg(u.alternate,u);break;case 24:lu(l,u),m&2048&&wg(u.alternate,u);break;default:lu(l,u)}r=r.sibling}}var cu=8192;function Nl(i){if(i.subtreeFlags&cu)for(i=i.child;i!==null;)cE(i),i=i.sibling}function cE(i){switch(i.tag){case 26:Nl(i),i.flags&cu&&i.memoizedState!==null&&sM(Si,i.memoizedState,i.memoizedProps);break;case 5:Nl(i);break;case 3:case 4:var r=Si;Si=Hd(i.stateNode.containerInfo),Nl(i),Si=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=cu,cu=16777216,Nl(i),cu=r):Nl(i));break;default:Nl(i)}}function uE(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function uu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];zn=u,dE(u,i)}uE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hE(i),i=i.sibling}function hE(i){switch(i.tag){case 0:case 11:case 15:uu(i),i.flags&2048&&ma(9,i,i.return);break;case 3:uu(i);break;case 12:uu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,kd(i)):uu(i);break;default:uu(i)}}function kd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];zn=u,dE(u,i)}uE(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ma(8,r,r.return),kd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,kd(r));break;default:kd(r)}i=i.sibling}}function dE(i,r){for(;zn!==null;){var l=zn;switch(l.tag){case 0:case 11:case 15:ma(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,zn=u;else e:for(l=i;zn!==null;){u=zn;var m=u.sibling,g=u.return;if(sE(u),u===l){zn=null;break e}if(m!==null){m.return=g,zn=m;break e}zn=g}}}var _k={getCacheForType:function(i){var r=as(Cn),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l}},bk=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Kt=null,ct=null,vt=0,It=0,Bs=null,ya=!1,kl=!1,Eg=!1,Lr=0,on=0,va=0,No=0,Tg=0,fi=0,Ml=0,hu=null,Rs=null,xg=!1,Sg=0,Md=1/0,Od=null,_a=null,Gn=0,ba=null,Ol=null,Dl=0,Ag=0,Rg=null,fE=null,du=0,Cg=null;function Fs(){if((Ct&2)!==0&&vt!==0)return vt&-vt;if(Q.T!==null){var i=wl;return i!==0?i:Pg()}return At()}function mE(){fi===0&&(fi=(vt&536870912)===0||xt?ea():536870912);var i=di.current;return i!==null&&(i.flags|=32),fi}function Hs(i,r,l){(i===Kt&&(It===2||It===9)||i.cancelPendingCommit!==null)&&(Pl(i,0),wa(i,vt,fi,!1)),Js(i,l),((Ct&2)===0||i!==Kt)&&(i===Kt&&((Ct&2)===0&&(No|=l),on===4&&wa(i,vt,fi,!1)),Qi(i))}function pE(i,r,l){if((Ct&6)!==0)throw Error(s(327));var u=!l&&(r&124)===0&&(r&i.expiredLanes)===0||fr(i,r),m=u?Tk(i,r):kg(i,r,!0),g=u;do{if(m===0){kl&&!u&&wa(i,r,0,!1);break}else{if(l=i.current.alternate,g&&!wk(l)){m=kg(i,r,!1),g=!1;continue}if(m===2){if(g=r,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var A=i;m=hu;var j=A.current.memoizedState.isDehydrated;if(j&&(Pl(A,T).flags|=256),T=kg(A,T,!1),T!==2){if(Eg&&!j){A.errorRecoveryDisabledLanes|=g,No|=g,m=4;break e}g=Rs,Rs=m,g!==null&&(Rs===null?Rs=g:Rs.push.apply(Rs,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){Pl(i,0),wa(i,r,0,!0);break}e:{switch(u=i,g=m,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:wa(u,r,fi,!ya);break e;case 2:Rs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(m=Sg+300-Wt(),10<m)){if(wa(u,r,fi,!ya),Jr(u,0,!0)!==0)break e;u.timeoutHandle=qE(gE.bind(null,u,l,Rs,Od,xg,r,fi,No,Ml,ya,g,2,-0,0),m);break e}gE(u,l,Rs,Od,xg,r,fi,No,Ml,ya,g,0,-0,0)}}break}while(!0);Qi(i)}function gE(i,r,l,u,m,g,T,A,j,Z,ce,fe,ee,ne){if(i.timeoutHandle=-1,fe=r.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(_u={stylesheets:null,count:0,unsuspend:nM},cE(r),fe=iM(),fe!==null)){i.cancelPendingCommit=fe(TE.bind(null,i,r,g,l,u,m,T,A,j,ce,1,ee,ne)),wa(i,g,T,!Z);return}TE(i,r,g,l,u,m,T,A,j)}function wk(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],g=m.getSnapshot;m=m.value;try{if(!Vs(g(),m))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function wa(i,r,l,u){r&=~Tg,r&=~No,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var m=r;0<m;){var g=31-On(m),T=1<<g;u[g]=-1,m&=~T}l!==0&&U(i,l,r)}function Dd(){return(Ct&6)===0?(fu(0),!1):!0}function Ig(){if(ct!==null){if(It===0)var i=ct.return;else i=ct,Cr=xo=null,Gp(i),Rl=null,su=0,i=ct;for(;i!==null;)Yw(i.alternate,i),i=i.return;ct=null}}function Pl(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,zk(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ig(),Kt=i,ct=l=Sr(i.current,null),vt=r,It=0,Bs=null,ya=!1,kl=fr(i,r),Eg=!1,Ml=fi=Tg=No=va=on=0,Rs=hu=null,xg=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var m=31-On(u),g=1<<m;r|=i[m],u&=~g}return Lr=r,nd(),l}function yE(i,r){it=null,Q.H=wd,r===Wc||r===hd?(r=Db(),It=3):r===kb?(r=Db(),It=4):It=r===Pw?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Bs=r,ct===null&&(on=1,Ad(i,li(r,i.current)))}function vE(){var i=Q.H;return Q.H=wd,i===null?wd:i}function _E(){var i=Q.A;return Q.A=_k,i}function Ng(){on=4,ya||(vt&4194048)!==vt&&di.current!==null||(kl=!0),(va&134217727)===0&&(No&134217727)===0||Kt===null||wa(Kt,vt,fi,!1)}function kg(i,r,l){var u=Ct;Ct|=2;var m=vE(),g=_E();(Kt!==i||vt!==r)&&(Od=null,Pl(i,r)),r=!1;var T=on;e:do try{if(It!==0&&ct!==null){var A=ct,j=Bs;switch(It){case 8:Ig(),T=6;break e;case 3:case 2:case 9:case 6:di.current===null&&(r=!0);var Z=It;if(It=0,Bs=null,Ll(i,A,j,Z),l&&kl){T=0;break e}break;default:Z=It,It=0,Bs=null,Ll(i,A,j,Z)}}Ek(),T=on;break}catch(ce){yE(i,ce)}while(!0);return r&&i.shellSuspendCounter++,Cr=xo=null,Ct=u,Q.H=m,Q.A=g,ct===null&&(Kt=null,vt=0,nd()),T}function Ek(){for(;ct!==null;)bE(ct)}function Tk(i,r){var l=Ct;Ct|=2;var u=vE(),m=_E();Kt!==i||vt!==r?(Od=null,Md=Wt()+500,Pl(i,r)):kl=fr(i,r);e:do try{if(It!==0&&ct!==null){r=ct;var g=Bs;t:switch(It){case 1:It=0,Bs=null,Ll(i,r,g,1);break;case 2:case 9:if(Mb(g)){It=0,Bs=null,wE(r);break}r=function(){It!==2&&It!==9||Kt!==i||(It=7),Qi(i)},g.then(r,r);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:Mb(g)?(It=0,Bs=null,wE(r)):(It=0,Bs=null,Ll(i,r,g,7));break;case 5:var T=null;switch(ct.tag){case 26:T=ct.memoizedState;case 5:case 27:var A=ct;if(!T||nT(T)){It=0,Bs=null;var j=A.sibling;if(j!==null)ct=j;else{var Z=A.return;Z!==null?(ct=Z,Pd(Z)):ct=null}break t}}It=0,Bs=null,Ll(i,r,g,5);break;case 6:It=0,Bs=null,Ll(i,r,g,6);break;case 8:Ig(),on=6;break e;default:throw Error(s(462))}}xk();break}catch(ce){yE(i,ce)}while(!0);return Cr=xo=null,Q.H=u,Q.A=m,Ct=l,ct!==null?0:(Kt=null,vt=0,nd(),on)}function xk(){for(;ct!==null&&!Li();)bE(ct)}function bE(i){var r=Kw(i.alternate,i,Lr);i.memoizedProps=i.pendingProps,r===null?Pd(i):ct=r}function wE(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=Bw(l,r,r.pendingProps,r.type,void 0,vt);break;case 11:r=Bw(l,r,r.pendingProps,r.type.render,r.ref,vt);break;case 5:Gp(r);default:Yw(l,r),r=ct=Eb(r,Lr),r=Kw(l,r,Lr)}i.memoizedProps=i.pendingProps,r===null?Pd(i):ct=r}function Ll(i,r,l,u){Cr=xo=null,Gp(r),Rl=null,su=0;var m=r.return;try{if(fk(i,m,r,l,vt)){on=1,Ad(i,li(l,i.current)),ct=null;return}}catch(g){if(m!==null)throw ct=m,g;on=1,Ad(i,li(l,i.current)),ct=null;return}r.flags&32768?(xt||u===1?i=!0:kl||(vt&536870912)!==0?i=!1:(ya=i=!0,(u===2||u===9||u===3||u===6)&&(u=di.current,u!==null&&u.tag===13&&(u.flags|=16384))),EE(r,i)):Pd(r)}function Pd(i){var r=i;do{if((r.flags&32768)!==0){EE(r,ya);return}i=r.return;var l=pk(r.alternate,r,Lr);if(l!==null){ct=l;return}if(r=r.sibling,r!==null){ct=r;return}ct=r=i}while(r!==null);on===0&&(on=5)}function EE(i,r){do{var l=gk(i.alternate,i);if(l!==null){l.flags&=32767,ct=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){ct=i;return}ct=i=l}while(i!==null);on=6,ct=null}function TE(i,r,l,u,m,g,T,A,j){i.cancelPendingCommit=null;do Ld();while(Gn!==0);if((Ct&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=wp,ei(i,l,g,T,A,j),i===Kt&&(ct=Kt=null,vt=0),Ol=r,ba=i,Dl=l,Ag=g,Rg=m,fE=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Ck(ss,function(){return CE(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,m=se.p,se.p=2,T=Ct,Ct|=4;try{yk(i,r,l)}finally{Ct=T,se.p=m,Q.T=u}}Gn=1,xE(),SE(),AE()}}function xE(){if(Gn===1){Gn=0;var i=ba,r=Ol,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var u=se.p;se.p=2;var m=Ct;Ct|=4;try{aE(r,i);var g=Hg,T=db(i.containerInfo),A=g.focusedElem,j=g.selectionRange;if(T!==A&&A&&A.ownerDocument&&hb(A.ownerDocument.documentElement,A)){if(j!==null&&gp(A)){var Z=j.start,ce=j.end;if(ce===void 0&&(ce=Z),"selectionStart"in A)A.selectionStart=Z,A.selectionEnd=Math.min(ce,A.value.length);else{var fe=A.ownerDocument||document,ee=fe&&fe.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Ke=A.textContent.length,Ue=Math.min(j.start,Ke),Mt=j.end===void 0?Ue:Math.min(j.end,Ke);!ne.extend&&Ue>Mt&&(T=Mt,Mt=Ue,Ue=T);var K=ub(A,Ue),q=ub(A,Mt);if(K&&q&&(ne.rangeCount!==1||ne.anchorNode!==K.node||ne.anchorOffset!==K.offset||ne.focusNode!==q.node||ne.focusOffset!==q.offset)){var X=fe.createRange();X.setStart(K.node,K.offset),ne.removeAllRanges(),Ue>Mt?(ne.addRange(X),ne.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ne.addRange(X))}}}}for(fe=[],ne=A;ne=ne.parentNode;)ne.nodeType===1&&fe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<fe.length;A++){var de=fe[A];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Wd=!!Fg,Hg=Fg=null}finally{Ct=m,se.p=u,Q.T=l}}i.current=r,Gn=2}}function SE(){if(Gn===2){Gn=0;var i=ba,r=Ol,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var u=se.p;se.p=2;var m=Ct;Ct|=4;try{nE(i,r.alternate,r)}finally{Ct=m,se.p=u,Q.T=l}}Gn=3}}function AE(){if(Gn===4||Gn===3){Gn=0,Lt();var i=ba,r=Ol,l=Dl,u=fE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Gn=5:(Gn=0,Ol=ba=null,RE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(_a=null),je(l),r=r.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(lt,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Q.T,m=se.p,se.p=2,Q.T=null;try{for(var g=i.onRecoverableError,T=0;T<u.length;T++){var A=u[T];g(A.value,{componentStack:A.stack})}}finally{Q.T=r,se.p=m}}(Dl&3)!==0&&Ld(),Qi(i),m=i.pendingLanes,(l&4194090)!==0&&(m&42)!==0?i===Cg?du++:(du=0,Cg=i):du=0,fu(0)}}function RE(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Gc(r)))}function Ld(i){return xE(),SE(),AE(),CE()}function CE(){if(Gn!==5)return!1;var i=ba,r=Ag;Ag=0;var l=je(Dl),u=Q.T,m=se.p;try{se.p=32>l?32:l,Q.T=null,l=Rg,Rg=null;var g=ba,T=Dl;if(Gn=0,Ol=ba=null,Dl=0,(Ct&6)!==0)throw Error(s(331));var A=Ct;if(Ct|=4,hE(g.current),lE(g,g.current,T,l),Ct=A,fu(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(lt,g)}catch{}return!0}finally{se.p=m,Q.T=u,RE(i,r)}}function IE(i,r,l){r=li(l,r),r=ag(i.stateNode,r,2),i=ua(i,r,2),i!==null&&(Js(i,2),Qi(i))}function zt(i,r,l){if(i.tag===3)IE(i,i,l);else for(;r!==null;){if(r.tag===3){IE(r,i,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(_a===null||!_a.has(u))){i=li(l,i),l=Ow(2),u=ua(r,l,2),u!==null&&(Dw(l,u,r,i),Js(u,2),Qi(u));break}}r=r.return}}function Mg(i,r,l){var u=i.pingCache;if(u===null){u=i.pingCache=new bk;var m=new Set;u.set(r,m)}else m=u.get(r),m===void 0&&(m=new Set,u.set(r,m));m.has(l)||(Eg=!0,m.add(l),i=Sk.bind(null,i,r,l),r.then(i,i))}function Sk(i,r,l){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Kt===i&&(vt&l)===l&&(on===4||on===3&&(vt&62914560)===vt&&300>Wt()-Sg?(Ct&2)===0&&Pl(i,0):Tg|=l,Ml===vt&&(Ml=0)),Qi(i)}function NE(i,r){r===0&&(r=ta()),i=yl(i,r),i!==null&&(Js(i,r),Qi(i))}function Ak(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),NE(i,l)}function Rk(i,r){var l=0;switch(i.tag){case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),NE(i,l)}function Ck(i,r){return nn(i,r)}var Vd=null,Vl=null,Og=!1,jd=!1,Dg=!1,ko=0;function Qi(i){i!==Vl&&i.next===null&&(Vl===null?Vd=Vl=i:Vl=Vl.next=i),jd=!0,Og||(Og=!0,Nk())}function fu(i,r){if(!Dg&&jd){Dg=!0;do for(var l=!1,u=Vd;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var T=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-On(42|i)+1)-1,g&=m&~(T&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,DE(u,g))}else g=vt,g=Jr(u,u===Kt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||fr(u,g)||(l=!0,DE(u,g));u=u.next}while(l);Dg=!1}}function Ik(){kE()}function kE(){jd=Og=!1;var i=0;ko!==0&&(jk()&&(i=ko),ko=0);for(var r=Wt(),l=null,u=Vd;u!==null;){var m=u.next,g=ME(u,r);g===0?(u.next=null,l===null?Vd=m:l.next=m,m===null&&(Vl=l)):(l=u,(i!==0||(g&3)!==0)&&(jd=!0)),u=m}fu(i)}function ME(i,r){for(var l=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-On(g),A=1<<T,j=m[T];j===-1?((A&l)===0||(A&u)!==0)&&(m[T]=mr(A,r)):j<=r&&(i.expiredLanes|=A),g&=~A}if(r=Kt,l=vt,l=Jr(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,l===0||i===r&&(It===2||It===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Pt(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||fr(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(u!==null&&Pt(u),je(l)){case 2:case 8:l=sn;break;case 32:l=ss;break;case 268435456:l=Ft;break;default:l=ss}return u=OE.bind(null,i),l=nn(l,u),i.callbackPriority=r,i.callbackNode=l,r}return u!==null&&u!==null&&Pt(u),i.callbackPriority=2,i.callbackNode=null,2}function OE(i,r){if(Gn!==0&&Gn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Ld()&&i.callbackNode!==l)return null;var u=vt;return u=Jr(i,i===Kt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(pE(i,u,r),ME(i,Wt()),i.callbackNode!=null&&i.callbackNode===l?OE.bind(null,i):null)}function DE(i,r){if(Ld())return null;pE(i,r,!0)}function Nk(){Uk(function(){(Ct&6)!==0?nn(Yt,Ik):kE()})}function Pg(){return ko===0&&(ko=ea()),ko}function PE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ui(""+i)}function LE(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function kk(i,r,l,u,m){if(r==="submit"&&l&&l.stateNode===m){var g=PE((m[Ce]||null).action),T=u.submitter;T&&(r=(r=T[Ce]||null)?PE(r.formAction):T.getAttribute("formAction"),r!==null&&(g=r,T=null));var A=new al("action","action",null,u,m);i.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ko!==0){var j=T?LE(m,T):new FormData(m);tg(l,{pending:!0,data:j,method:m.method,action:g},null,j)}}else typeof g=="function"&&(A.preventDefault(),j=T?LE(m,T):new FormData(m),tg(l,{pending:!0,data:j,method:m.method,action:g},g,j))},currentTarget:m}]})}}for(var Lg=0;Lg<bp.length;Lg++){var Vg=bp[Lg],Mk=Vg.toLowerCase(),Ok=Vg[0].toUpperCase()+Vg.slice(1);xi(Mk,"on"+Ok)}xi(pb,"onAnimationEnd"),xi(gb,"onAnimationIteration"),xi(yb,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(X2,"onTransitionRun"),xi(Q2,"onTransitionStart"),xi(Z2,"onTransitionCancel"),xi(vb,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Os("onBeforeInput",["compositionend","keypress","textInput","paste"]),Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function VE(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],m=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var T=u.length-1;0<=T;T--){var A=u[T],j=A.instance,Z=A.currentTarget;if(A=A.listener,j!==g&&m.isPropagationStopped())break e;g=A,m.currentTarget=Z;try{g(m)}catch(ce){Sd(ce)}m.currentTarget=null,g=j}else for(T=0;T<u.length;T++){if(A=u[T],j=A.instance,Z=A.currentTarget,A=A.listener,j!==g&&m.isPropagationStopped())break e;g=A,m.currentTarget=Z;try{g(m)}catch(ce){Sd(ce)}m.currentTarget=null,g=j}}}}function ut(i,r){var l=r[qt];l===void 0&&(l=r[qt]=new Set);var u=i+"__bubble";l.has(u)||(jE(r,i,2,!1),l.add(u))}function jg(i,r,l){var u=0;r&&(u|=4),jE(l,i,u,r)}var zd="_reactListening"+Math.random().toString(36).slice(2);function zg(i){if(!i[zd]){i[zd]=!0,ao.forEach(function(l){l!=="selectionchange"&&(Dk.has(l)||jg(l,!1,i),jg(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[zd]||(r[zd]=!0,jg("selectionchange",!1,r))}}function jE(i,r,l,u){switch(lT(r)){case 2:var m=oM;break;case 8:m=lM;break;default:m=Jg}l=m.bind(null,r,l,i),m=void 0,!ai||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(r,l,{capture:!0,passive:m}):i.addEventListener(r,l,!0):m!==void 0?i.addEventListener(r,l,{passive:m}):i.addEventListener(r,l,!1)}function Ug(i,r,l,u,m){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var A=u.stateNode.containerInfo;if(A===m)break;if(T===4)for(T=u.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;A!==null;){if(T=Ei(A),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){u=g=T;continue e}A=A.parentNode}}u=u.return}xs(function(){var Z=g,ce=ye(l),fe=[];e:{var ee=_b.get(i);if(ee!==void 0){var ne=al,Ke=i;switch(i){case"keypress":if(Fi(l)===0)break e;case"keydown":case"keyup":ne=dl;break;case"focusin":Ke="focus",ne=cl;break;case"focusout":Ke="blur",ne=cl;break;case"beforeblur":case"afterblur":ne=cl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Yh;break;case pb:case gb:case yb:ne=ul;break;case vb:ne=Qh;break;case"scroll":case"scrollend":ne=Fh;break;case"wheel":ne=fl;break;case"copy":case"cut":case"paste":ne=hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=jc;break;case"toggle":case"beforetoggle":ne=Jh}var Ue=(r&4)!==0,Mt=!Ue&&(i==="scroll"||i==="scrollend"),K=Ue?ee!==null?ee+"Capture":null:ee;Ue=[];for(var q=Z,X;q!==null;){var de=q;if(X=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||X===null||K===null||(de=wr(q,K),de!=null&&Ue.push(pu(q,de,X))),Mt)break;q=q.return}0<Ue.length&&(ee=new ne(ee,Ke,null,l,ce),fe.push({event:ee,listeners:Ue}))}}if((r&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",ee&&l!==Ps&&(Ke=l.relatedTarget||l.fromElement)&&(Ei(Ke)||Ke[Tt]))break e;if((ne||ee)&&(ee=ce.window===ce?ce:(ee=ce.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Ke=l.relatedTarget||l.toElement,ne=Z,Ke=Ke?Ei(Ke):null,Ke!==null&&(Mt=o(Ke),Ue=Ke.tag,Ke!==Mt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ke=null)):(ne=null,Ke=Z),ne!==Ke)){if(Ue=oi,de="onMouseLeave",K="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Ue=jc,de="onPointerLeave",K="onPointerEnter",q="pointer"),Mt=ne==null?ee:ii(ne),X=Ke==null?ee:ii(Ke),ee=new Ue(de,q+"leave",ne,l,ce),ee.target=Mt,ee.relatedTarget=X,de=null,Ei(ce)===Z&&(Ue=new Ue(K,q+"enter",Ke,l,ce),Ue.target=X,Ue.relatedTarget=Mt,de=Ue),Mt=de,ne&&Ke)t:{for(Ue=ne,K=Ke,q=0,X=Ue;X;X=jl(X))q++;for(X=0,de=K;de;de=jl(de))X++;for(;0<q-X;)Ue=jl(Ue),q--;for(;0<X-q;)K=jl(K),X--;for(;q--;){if(Ue===K||K!==null&&Ue===K.alternate)break t;Ue=jl(Ue),K=jl(K)}Ue=null}else Ue=null;ne!==null&&zE(fe,ee,ne,Ue,!1),Ke!==null&&Mt!==null&&zE(fe,Mt,Ke,Ue,!0)}}e:{if(ee=Z?ii(Z):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var ke=ib;else if(Rn(ee))if(rb)ke=K2;else{ke=$2;var at=q2}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&wt(Z.elementType)&&(ke=ib):ke=G2;if(ke&&(ke=ke(i,Z))){xr(fe,ke,l,ce);break e}at&&at(i,ee,Z),i==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&Ds(ee,"number",ee.value)}switch(at=Z?ii(Z):window,i){case"focusin":(Rn(at)||at.contentEditable==="true")&&(ml=at,yp=Z,Bc=null);break;case"focusout":Bc=yp=ml=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,fb(fe,l,ce);break;case"selectionchange":if(Y2)break;case"keydown":case"keyup":fb(fe,l,ce)}var De;if($i)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else gt?ie(i,l)&&(Be="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Be="onCompositionStart");Be&&(E&&l.locale!=="ko"&&(gt||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&gt&&(De=Oc()):(Bi=ce,aa="value"in Bi?Bi.value:Bi.textContent,gt=!0)),at=Ud(Z,Be),0<at.length&&(Be=new Lc(Be,i,null,l,ce),fe.push({event:Be,listeners:at}),De?Be.data=De:(De=Ee(l),De!==null&&(Be.data=De)))),(De=b?An(i,l):yt(i,l))&&(Be=Ud(Z,"onBeforeInput"),0<Be.length&&(at=new Lc("onBeforeInput","beforeinput",null,l,ce),fe.push({event:at,listeners:Be}),at.data=De)),kk(fe,i,Z,l,ce)}VE(fe,r)})}function pu(i,r,l){return{instance:i,listener:r,currentTarget:l}}function Ud(i,r){for(var l=r+"Capture",u=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=wr(i,l),m!=null&&u.unshift(pu(i,m,g)),m=wr(i,r),m!=null&&u.push(pu(i,m,g))),i.tag===3)return u;i=i.return}return[]}function jl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zE(i,r,l,u,m){for(var g=r._reactName,T=[];l!==null&&l!==u;){var A=l,j=A.alternate,Z=A.stateNode;if(A=A.tag,j!==null&&j===u)break;A!==5&&A!==26&&A!==27||Z===null||(j=Z,m?(Z=wr(l,g),Z!=null&&T.unshift(pu(l,Z,j))):m||(Z=wr(l,g),Z!=null&&T.push(pu(l,Z,j)))),l=l.return}T.length!==0&&i.push({event:r,listeners:T})}var Pk=/\r\n?/g,Lk=/\u0000|\uFFFD/g;function UE(i){return(typeof i=="string"?i:""+i).replace(Pk,`
`).replace(Lk,"")}function BE(i,r){return r=UE(r),UE(i)===r}function Bd(){}function kt(i,r,l,u,m,g){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||rs(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&rs(i,""+u);break;case"className":ys(i,"class",u);break;case"tabIndex":ys(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ys(i,l,u);break;case"style":Zt(i,u,g);break;case"data":if(r!=="object"){ys(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=Ui(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(r!=="input"&&kt(i,r,"name",m.name,m,null),kt(i,r,"formEncType",m.formEncType,m,null),kt(i,r,"formMethod",m.formMethod,m,null),kt(i,r,"formTarget",m.formTarget,m,null)):(kt(i,r,"encType",m.encType,m,null),kt(i,r,"method",m.method,m,null),kt(i,r,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=Ui(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=Bd);break;case"onScroll":u!=null&&ut("scroll",i);break;case"onScrollEnd":u!=null&&ut("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=Ui(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":ut("beforetoggle",i),ut("toggle",i),ji(i,"popover",u);break;case"xlinkActuate":xn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ji(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ra.get(l)||l,ji(i,l,u))}}function Bg(i,r,l,u,m,g){switch(l){case"style":Zt(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof u=="string"?rs(i,u):(typeof u=="number"||typeof u=="bigint")&&rs(i,""+u);break;case"onScroll":u!=null&&ut("scroll",i);break;case"onScrollEnd":u!=null&&ut("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Bd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),r=l.slice(2,m?l.length-7:void 0),g=i[Ce]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(r,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,u,m);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):ji(i,l,u)}}}function Kn(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",i),ut("load",i);var u=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:kt(i,r,g,T,l,null)}}m&&kt(i,r,"srcSet",l.srcSet,l,null),u&&kt(i,r,"src",l.src,l,null);return;case"input":ut("invalid",i);var A=g=T=m=null,j=null,Z=null;for(u in l)if(l.hasOwnProperty(u)){var ce=l[u];if(ce!=null)switch(u){case"name":m=ce;break;case"type":T=ce;break;case"checked":j=ce;break;case"defaultChecked":Z=ce;break;case"value":g=ce;break;case"defaultValue":A=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,r));break;default:kt(i,r,u,ce,l,null)}}_r(i,g,A,j,Z,T,m,!1),vr(i);return;case"select":ut("invalid",i),u=T=g=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":g=A;break;case"defaultValue":T=A;break;case"multiple":u=A;default:kt(i,r,m,A,l,null)}r=g,l=T,i.multiple=!!u,r!=null?ri(i,!!u,r,!1):l!=null&&ri(i,!!u,l,!0);return;case"textarea":ut("invalid",i),g=m=u=null;for(T in l)if(l.hasOwnProperty(T)&&(A=l[T],A!=null))switch(T){case"value":u=A;break;case"defaultValue":m=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:kt(i,r,T,A,l,null)}br(i,u,m,g),vr(i);return;case"option":for(j in l)if(l.hasOwnProperty(j)&&(u=l[j],u!=null))switch(j){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:kt(i,r,j,u,l,null)}return;case"dialog":ut("beforetoggle",i),ut("toggle",i),ut("cancel",i),ut("close",i);break;case"iframe":case"object":ut("load",i);break;case"video":case"audio":for(u=0;u<mu.length;u++)ut(mu[u],i);break;case"image":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"embed":case"source":case"link":ut("error",i),ut("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(u=l[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:kt(i,r,Z,u,l,null)}return;default:if(wt(r)){for(ce in l)l.hasOwnProperty(ce)&&(u=l[ce],u!==void 0&&Bg(i,r,ce,u,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(u=l[A],u!=null&&kt(i,r,A,u,l,null))}function Vk(i,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,A=null,j=null,Z=null,ce=null;for(ne in l){var fe=l[ne];if(l.hasOwnProperty(ne)&&fe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=fe;default:u.hasOwnProperty(ne)||kt(i,r,ne,null,u,fe)}}for(var ee in u){var ne=u[ee];if(fe=l[ee],u.hasOwnProperty(ee)&&(ne!=null||fe!=null))switch(ee){case"type":g=ne;break;case"name":m=ne;break;case"checked":Z=ne;break;case"defaultChecked":ce=ne;break;case"value":T=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:ne!==fe&&kt(i,r,ee,ne,u,fe)}}_s(i,T,A,j,Z,ce,g,m);return;case"select":ne=T=A=ee=null;for(g in l)if(j=l[g],l.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":ne=j;default:u.hasOwnProperty(g)||kt(i,r,g,null,u,j)}for(m in u)if(g=u[m],j=l[m],u.hasOwnProperty(m)&&(g!=null||j!=null))switch(m){case"value":ee=g;break;case"defaultValue":A=g;break;case"multiple":T=g;default:g!==j&&kt(i,r,m,g,u,j)}r=A,l=T,u=ne,ee!=null?ri(i,!!l,ee,!1):!!u!=!!l&&(r!=null?ri(i,!!l,r,!0):ri(i,!!l,l?[]:"",!1));return;case"textarea":ne=ee=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:kt(i,r,A,null,u,m)}for(T in u)if(m=u[T],g=l[T],u.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":ee=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==g&&kt(i,r,T,m,u,g)}st(i,ee,ne);return;case"option":for(var Ke in l)if(ee=l[Ke],l.hasOwnProperty(Ke)&&ee!=null&&!u.hasOwnProperty(Ke))switch(Ke){case"selected":i.selected=!1;break;default:kt(i,r,Ke,null,u,ee)}for(j in u)if(ee=u[j],ne=l[j],u.hasOwnProperty(j)&&ee!==ne&&(ee!=null||ne!=null))switch(j){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:kt(i,r,j,ee,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in l)ee=l[Ue],l.hasOwnProperty(Ue)&&ee!=null&&!u.hasOwnProperty(Ue)&&kt(i,r,Ue,null,u,ee);for(Z in u)if(ee=u[Z],ne=l[Z],u.hasOwnProperty(Z)&&ee!==ne&&(ee!=null||ne!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:kt(i,r,Z,ee,u,ne)}return;default:if(wt(r)){for(var Mt in l)ee=l[Mt],l.hasOwnProperty(Mt)&&ee!==void 0&&!u.hasOwnProperty(Mt)&&Bg(i,r,Mt,void 0,u,ee);for(ce in u)ee=u[ce],ne=l[ce],!u.hasOwnProperty(ce)||ee===ne||ee===void 0&&ne===void 0||Bg(i,r,ce,ee,u,ne);return}}for(var K in l)ee=l[K],l.hasOwnProperty(K)&&ee!=null&&!u.hasOwnProperty(K)&&kt(i,r,K,null,u,ee);for(fe in u)ee=u[fe],ne=l[fe],!u.hasOwnProperty(fe)||ee===ne||ee==null&&ne==null||kt(i,r,fe,ee,u,ne)}var Fg=null,Hg=null;function Fd(i){return i.nodeType===9?i:i.ownerDocument}function FE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HE(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function qg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $g=null;function jk(){var i=window.event;return i&&i.type==="popstate"?i===$g?!1:($g=i,!0):($g=null,!1)}var qE=typeof setTimeout=="function"?setTimeout:void 0,zk=typeof clearTimeout=="function"?clearTimeout:void 0,$E=typeof Promise=="function"?Promise:void 0,Uk=typeof queueMicrotask=="function"?queueMicrotask:typeof $E<"u"?function(i){return $E.resolve(null).then(i).catch(Bk)}:qE;function Bk(i){setTimeout(function(){throw i})}function Ea(i){return i==="head"}function GE(i,r){var l=r,u=0,m=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var T=i.ownerDocument;if(l&1&&gu(T.documentElement),l&2&&gu(T.body),l&4)for(l=T.head,gu(l),T=l.firstChild;T;){var A=T.nextSibling,j=T.nodeName;T[gr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=A}}if(m===0){i.removeChild(g),xu(r);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);xu(r)}function Gg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gg(l),ni(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function Fk(i,r,l,u){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[gr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Ai(i.nextSibling),i===null)break}return null}function Hk(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ai(i.nextSibling),i===null))return null;return i}function Kg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function qk(i,r){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ai(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var Wg=null;function KE(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return i;r--}else l==="/$"&&r++}i=i.previousSibling}return null}function WE(i,r,l){switch(r=Fd(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function gu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);ni(i)}var mi=new Map,YE=new Set;function Hd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Vr=se.d;se.d={f:$k,r:Gk,D:Kk,C:Wk,L:Yk,m:Xk,X:Zk,S:Qk,M:Jk};function $k(){var i=Vr.f(),r=Dd();return i||r}function Gk(i){var r=si(i);r!==null&&r.tag===5&&r.type==="form"?pw(r):Vr.r(i)}var zl=typeof document>"u"?null:document;function XE(i,r,l){var u=zl;if(u&&typeof r=="string"&&r){var m=rn(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),YE.has(m)||(YE.add(m),i={rel:i,crossOrigin:l,href:r},u.querySelector(m)===null&&(r=u.createElement("link"),Kn(r,"link",i),$t(r),u.head.appendChild(r)))}}function Kk(i){Vr.D(i),XE("dns-prefetch",i,null)}function Wk(i,r){Vr.C(i,r),XE("preconnect",i,r)}function Yk(i,r,l){Vr.L(i,r,l);var u=zl;if(u&&i&&r){var m='link[rel="preload"][as="'+rn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+rn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+rn(l.imageSizes)+'"]')):m+='[href="'+rn(i)+'"]';var g=m;switch(r){case"style":g=Ul(i);break;case"script":g=Bl(i)}mi.has(g)||(i=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),mi.set(g,i),u.querySelector(m)!==null||r==="style"&&u.querySelector(yu(g))||r==="script"&&u.querySelector(vu(g))||(r=u.createElement("link"),Kn(r,"link",i),$t(r),u.head.appendChild(r)))}}function Xk(i,r){Vr.m(i,r);var l=zl;if(l&&i){var u=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+rn(u)+'"][href="'+rn(i)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Bl(i)}if(!mi.has(g)&&(i=y({rel:"modulepreload",href:i},r),mi.set(g,i),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vu(g)))return}u=l.createElement("link"),Kn(u,"link",i),$t(u),l.head.appendChild(u)}}}function Qk(i,r,l){Vr.S(i,r,l);var u=zl;if(u&&i){var m=Dn(u).hoistableStyles,g=Ul(i);r=r||"default";var T=m.get(g);if(!T){var A={loading:0,preload:null};if(T=u.querySelector(yu(g)))A.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},l),(l=mi.get(g))&&Yg(i,l);var j=T=u.createElement("link");$t(j),Kn(j,"link",i),j._p=new Promise(function(Z,ce){j.onload=Z,j.onerror=ce}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,qd(T,r,u)}T={type:"stylesheet",instance:T,count:1,state:A},m.set(g,T)}}}function Zk(i,r){Vr.X(i,r);var l=zl;if(l&&i){var u=Dn(l).hoistableScripts,m=Bl(i),g=u.get(m);g||(g=l.querySelector(vu(m)),g||(i=y({src:i,async:!0},r),(r=mi.get(m))&&Xg(i,r),g=l.createElement("script"),$t(g),Kn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function Jk(i,r){Vr.M(i,r);var l=zl;if(l&&i){var u=Dn(l).hoistableScripts,m=Bl(i),g=u.get(m);g||(g=l.querySelector(vu(m)),g||(i=y({src:i,async:!0,type:"module"},r),(r=mi.get(m))&&Xg(i,r),g=l.createElement("script"),$t(g),Kn(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function QE(i,r,l,u){var m=(m=he.current)?Hd(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ul(l.href),l=Dn(m).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ul(l.href);var g=Dn(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(yu(i)))&&!g._p&&(T.instance=g,T.state.loading=5),mi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},mi.set(i,l),g||eM(m,i,l,T.state))),r&&u===null)throw Error(s(528,""));return T}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Bl(l),l=Dn(m).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ul(i){return'href="'+rn(i)+'"'}function yu(i){return'link[rel="stylesheet"]['+i+"]"}function ZE(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function eM(i,r,l,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Kn(r,"link",l),$t(r),i.head.appendChild(r))}function Bl(i){return'[src="'+rn(i)+'"]'}function vu(i){return"script[async]"+i}function JE(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+rn(l.href)+'"]');if(u)return r.instance=u,$t(u),u;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),$t(u),Kn(u,"style",m),qd(u,l.precedence,i),r.instance=u;case"stylesheet":m=Ul(l.href);var g=i.querySelector(yu(m));if(g)return r.state.loading|=4,r.instance=g,$t(g),g;u=ZE(l),(m=mi.get(m))&&Yg(u,m),g=(i.ownerDocument||i).createElement("link"),$t(g);var T=g;return T._p=new Promise(function(A,j){T.onload=A,T.onerror=j}),Kn(g,"link",u),r.state.loading|=4,qd(g,l.precedence,i),r.instance=g;case"script":return g=Bl(l.src),(m=i.querySelector(vu(g)))?(r.instance=m,$t(m),m):(u=l,(m=mi.get(g))&&(u=y({},l),Xg(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),$t(m),Kn(m,"link",u),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,qd(u,l.precedence,i));return r.instance}function qd(i,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,T=0;T<u.length;T++){var A=u[T];if(A.dataset.precedence===r)g=A;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function Yg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Xg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var $d=null;function eT(i,r,l){if($d===null){var u=new Map,m=$d=new Map;m.set(l,u)}else m=$d,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var g=l[m];if(!(g[gr]||g[we]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(r)||"";T=i+T;var A=u.get(T);A?A.push(g):u.set(T,[g])}}return u}function tT(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function tM(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function nT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var _u=null;function nM(){}function sM(i,r,l){if(_u===null)throw Error(s(475));var u=_u;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Ul(l.href),g=i.querySelector(yu(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Gd.bind(u),i.then(u,u)),r.state.loading|=4,r.instance=g,$t(g);return}g=i.ownerDocument||i,l=ZE(l),(m=mi.get(m))&&Yg(l,m),g=g.createElement("link"),$t(g);var T=g;T._p=new Promise(function(A,j){T.onload=A,T.onerror=j}),Kn(g,"link",l),r.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Gd.bind(u),i.addEventListener("load",r),i.addEventListener("error",r))}}function iM(){if(_u===null)throw Error(s(475));var i=_u;return i.stylesheets&&i.count===0&&Qg(i,i.stylesheets),0<i.count?function(r){var l=setTimeout(function(){if(i.stylesheets&&Qg(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Gd(){if(this.count--,this.count===0){if(this.stylesheets)Qg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Kd=null;function Qg(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Kd=new Map,r.forEach(rM,i),Kd=null,Gd.call(i))}function rM(i,r){if(!(r.state.loading&4)){var l=Kd.get(i);if(l)var u=l.get(null);else{l=new Map,Kd.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}m=r.instance,T=m.getAttribute("data-precedence"),g=l.get(T)||u,g===u&&l.set(null,m),l.set(T,m),this.count++,u=Gd.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var bu={$$typeof:H,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function aM(i,r,l,u,m,g,T,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function sT(i,r,l,u,m,g,T,A,j,Z,ce,fe){return i=new aM(i,r,l,T,A,j,Z,fe),r=1,g===!0&&(r|=24),g=js(3,null,null,r),i.current=g,g.stateNode=i,r=Mp(),r.refCount++,i.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:r},Lp(g),i}function iT(i){return i?(i=vl,i):vl}function rT(i,r,l,u,m,g){m=iT(m),u.context===null?u.context=m:u.pendingContext=m,u=ca(r),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=ua(i,u,r),l!==null&&(Hs(l,i,r),Xc(l,i,r))}function aT(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Zg(i,r){aT(i,r),(i=i.alternate)&&aT(i,r)}function oT(i){if(i.tag===13){var r=yl(i,67108864);r!==null&&Hs(r,i,67108864),Zg(i,67108864)}}var Wd=!0;function oM(i,r,l,u){var m=Q.T;Q.T=null;var g=se.p;try{se.p=2,Jg(i,r,l,u)}finally{se.p=g,Q.T=m}}function lM(i,r,l,u){var m=Q.T;Q.T=null;var g=se.p;try{se.p=8,Jg(i,r,l,u)}finally{se.p=g,Q.T=m}}function Jg(i,r,l,u){if(Wd){var m=ey(u);if(m===null)Ug(i,r,u,Yd,l),cT(i,u);else if(uM(m,i,r,l,u))u.stopPropagation();else if(cT(i,u),r&4&&-1<cM.indexOf(i)){for(;m!==null;){var g=si(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Ms(g.pendingLanes);if(T!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var j=1<<31-On(T);A.entanglements[1]|=j,T&=~j}Qi(g),(Ct&6)===0&&(Md=Wt()+500,fu(0))}}break;case 13:A=yl(g,2),A!==null&&Hs(A,g,2),Dd(),Zg(g,2)}if(g=ey(u),g===null&&Ug(i,r,u,Yd,l),g===m)break;m=g}m!==null&&u.stopPropagation()}else Ug(i,r,u,null,l)}}function ey(i){return i=ye(i),ty(i)}var Yd=null;function ty(i){if(Yd=null,i=Ei(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Yd=i,null}function lT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case Yt:return 2;case sn:return 8;case ss:case Bt:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var ny=!1,Ta=null,xa=null,Sa=null,wu=new Map,Eu=new Map,Aa=[],cM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cT(i,r){switch(i){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":wu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(r.pointerId)}}function Tu(i,r,l,u,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},r!==null&&(r=si(r),r!==null&&oT(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function uM(i,r,l,u,m){switch(r){case"focusin":return Ta=Tu(Ta,i,r,l,u,m),!0;case"dragenter":return xa=Tu(xa,i,r,l,u,m),!0;case"mouseover":return Sa=Tu(Sa,i,r,l,u,m),!0;case"pointerover":var g=m.pointerId;return wu.set(g,Tu(wu.get(g)||null,i,r,l,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Eu.set(g,Tu(Eu.get(g)||null,i,r,l,u,m)),!0}return!1}function uT(i){var r=Ei(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,Ht(i.priority,function(){if(l.tag===13){var u=Fs();u=_e(u);var m=yl(l,u);m!==null&&Hs(m,l,u),Zg(l,u)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xd(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=ey(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Ps=u,l.target.dispatchEvent(u),Ps=null}else return r=si(l),r!==null&&oT(r),i.blockedOn=l,!1;r.shift()}return!0}function hT(i,r,l){Xd(i)&&l.delete(r)}function hM(){ny=!1,Ta!==null&&Xd(Ta)&&(Ta=null),xa!==null&&Xd(xa)&&(xa=null),Sa!==null&&Xd(Sa)&&(Sa=null),wu.forEach(hT),Eu.forEach(hT)}function Qd(i,r){i.blockedOn===r&&(i.blockedOn=null,ny||(ny=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hM)))}var Zd=null;function dT(i){Zd!==i&&(Zd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zd===i&&(Zd=null);for(var r=0;r<i.length;r+=3){var l=i[r],u=i[r+1],m=i[r+2];if(typeof u!="function"){if(ty(u||l)===null)continue;break}var g=si(l);g!==null&&(i.splice(r,3),r-=3,tg(g,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function xu(i){function r(j){return Qd(j,i)}Ta!==null&&Qd(Ta,i),xa!==null&&Qd(xa,i),Sa!==null&&Qd(Sa,i),wu.forEach(r),Eu.forEach(r);for(var l=0;l<Aa.length;l++){var u=Aa[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Aa.length&&(l=Aa[0],l.blockedOn===null);)uT(l),l.blockedOn===null&&Aa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],g=l[u+1],T=m[Ce]||null;if(typeof g=="function")T||dT(l);else if(T){var A=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Ce]||null)A=T.formAction;else if(ty(m)!==null)continue}else A=T.action;typeof A=="function"?l[u+1]=A:(l.splice(u,3),u-=3),dT(l)}}}function sy(i){this._internalRoot=i}Jd.prototype.render=sy.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,u=Fs();rT(l,u,i,r,null,null)},Jd.prototype.unmount=sy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;rT(i.current,2,null,i,null,null),Dd(),r[Tt]=null}};function Jd(i){this._internalRoot=i}Jd.prototype.unstable_scheduleHydration=function(i){if(i){var r=At();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Aa.length&&r!==0&&r<Aa[l].priority;l++);Aa.splice(l,0,i),l===0&&uT(i)}};var fT=e.version;if(fT!=="19.1.0")throw Error(s(527,fT,"19.1.0"));se.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var dM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{lt=ef.inject(dM),pt=ef}catch{}}return Au.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,u="",m=Iw,g=Nw,T=kw,A=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks)),r=sT(i,1,!1,null,null,l,u,m,g,T,A,null),i[Tt]=r.current,zg(i),new sy(r)},Au.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var u=!1,m="",g=Iw,T=Nw,A=kw,j=null,Z=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(j=l.unstable_transitionCallbacks),l.formState!==void 0&&(Z=l.formState)),r=sT(i,1,!0,r,l??null,u,m,g,T,A,j,Z),r.context=iT(null),l=r.current,u=Fs(),u=_e(u),m=ca(u),m.callback=null,ua(l,m,u),l=u,r.current.lanes=l,Js(r,l),Qi(r),i[Tt]=r.current,zg(i),new Jd(r)},Au.version="19.1.0",Au}var TT;function SM(){if(TT)return ay.exports;TT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ay.exports=xM(),ay.exports}var AM=SM();const RM=Rm(AM),CM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),v.jsx("polyline",{points:"12 19 5 12 12 5"})]}),IM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v.jsx("polyline",{points:"16 17 21 12 16 7"}),v.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),n1=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),v.jsx("polyline",{points:"10 17 15 12 10 7"}),v.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),s1=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),NM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),kM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),i1=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("path",{d:"M12 3L9.5 8.5 4 11l5.5 2.5L12 19l2.5-5.5L20 11l-5.5-2.5z"})}),MM=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4M4 9h16M4 15h16M10 3v18"})}),OM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("polyline",{points:"16 18 22 12 16 6"}),v.jsx("polyline",{points:"8 6 2 12 8 18"})]}),DM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),v.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),PM=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),LM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),v.jsx("polyline",{points:"5 12 12 5 19 12"})]}),VM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"21",x2:"14",y1:"4",y2:"4"}),v.jsx("line",{x1:"10",x2:"3",y1:"4",y2:"4"}),v.jsx("line",{x1:"21",x2:"12",y1:"12",y2:"12"}),v.jsx("line",{x1:"8",x2:"3",y1:"12",y2:"12"}),v.jsx("line",{x1:"21",x2:"16",y1:"20",y2:"20"}),v.jsx("line",{x1:"12",x2:"3",y1:"20",y2:"20"}),v.jsx("line",{x1:"14",x2:"14",y1:"2",y2:"6"}),v.jsx("line",{x1:"8",x2:"8",y1:"10",y2:"14"}),v.jsx("line",{x1:"16",x2:"16",y1:"18",y2:"22"})]}),xT=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"12",cy:"12",r:"4"}),v.jsx("path",{d:"M12 2v2"}),v.jsx("path",{d:"M12 20v2"}),v.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),v.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),v.jsx("path",{d:"M2 12h2"}),v.jsx("path",{d:"M20 12h2"}),v.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),v.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),jM=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),zM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}),v.jsx("line",{x1:"8",x2:"16",y1:"21",y2:"21"}),v.jsx("line",{x1:"12",x2:"12",y1:"17",y2:"21"})]}),ST=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),v.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),v.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),ic=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),r1=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,5 12,5C14.5,5 16.2,6.1 17.1,7L19,5.2C17.2,3.4 14.8,2 12,2C6.4,2 2,6.5 2,12C2,17.5 6.4,22 12,22C17.6,22 21.5,18.2 21.5,12.3C21.5,11.7 21.45,11.4 21.35,11.1Z"})}),a1=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),J0=n=>v.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("polyline",{points:"20 6 9 17 4 12"})}),AT=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),v.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),UM=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),v.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),RT=n=>v.jsxs("svg",{...n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),BM=({className:n})=>v.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),ev=({className:n})=>v.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),FM=({className:n})=>v.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),ks=({variant:n="primary",size:e="default",children:t,className:s,...a})=>{const o="inline-flex items-center justify-center rounded-lg font-semibold transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-[#1c1c1c] disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"text-white bg-gradient-to-r from-pink-600 to-purple-600 hover:opacity-90 focus:ring-pink-500",secondary:"bg-zinc-200 dark:bg-zinc-700 hover:bg-zinc-300 dark:hover:bg-zinc-600 text-zinc-900 dark:text-white focus:ring-zinc-500",destructive:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500",ghost:"hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-900 dark:text-white focus:ring-zinc-500"},h={default:"py-2.5 px-4",sm:"py-2 px-3 text-sm",lg:"py-3 px-8 text-lg",icon:"h-10 w-10"},f=[o,c[n],h[e],s].filter(Boolean).join(" ");return v.jsx("button",{className:f,...a,children:t})},o1=Ws.forwardRef(({isMobileMenuOpen:n,setIsMobileMenuOpen:e,isCollapsed:t,user:s,onLoginClick:a,onSignOutClick:o,chat:c},h)=>{var L;const{conversations:f,currentConversation:p,selectConversation:y,deleteConversation:_,isCreatingNewChat:w,isLoading:x,isLoadingMore:C,hasMoreConversations:k,loadMoreConversations:O}=c,[B,V]=$.useState(null),H=$.useRef(null);$.useEffect(()=>{const z=H.current;if(!z)return;const D=()=>{const{scrollTop:Ne,scrollHeight:Le,clientHeight:Q}=z;Ne+Q>=Le-100&&k&&!C&&!x&&O()};return z.addEventListener("scroll",D),()=>z.removeEventListener("scroll",D)},[k,C,x,O]);const G=()=>{y(null),e(!1)},F=z=>{y(z),e(!1)},te=(z,D)=>{z.stopPropagation(),V(D.id)},S=z=>{_(z),V(null)},R=()=>{V(null)},I=z=>{const Ne=(new Date().getTime()-z.getTime())/(1e3*60*60);return Ne<24?"Today":Ne<48?"Yesterday":Ne<168?z.toLocaleDateString([],{weekday:"long"}):z.toLocaleDateString([],{month:"short",day:"numeric"})},P=f.reduce((z,D)=>{const Ne=I(D.updatedAt);return z[Ne]||(z[Ne]=[]),z[Ne].push(D),z},{});return v.jsxs("aside",{ref:h,className:`fixed md:relative top-0 left-0 h-full flex flex-col bg-zinc-100 dark:bg-[#111111] text-zinc-600 dark:text-zinc-400 p-4 z-60
                 transition-all duration-300 ease-in-out
                 md:translate-x-0 ${n?"translate-x-0":"-translate-x-full"}
                 w-64 ${t?"md:w-20":""}`,children:[v.jsxs("div",{className:`flex items-center justify-between ${t?"mb-0":"mb-4"}`,children:[v.jsx("div",{className:`flex items-center justify-center gap-2 w-full ${t?"md:hidden":"flex"}`,children:v.jsx("span",{className:"font-bold text-lg text-zinc-900 dark:text-white text-center w-full",children:"O-Chat"})}),v.jsx("button",{onClick:()=>e(!1),className:"p-1 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded md:hidden","aria-label":"Close menu",children:v.jsx(ic,{className:"w-5 h-5"})})]}),v.jsx(ks,{onClick:G,disabled:w,className:`w-full mb-4 ${t?"md:px-2.5":""}`,children:t?v.jsx(s1,{className:"w-5 h-5"}):w?"Creating...":"New Chat"}),v.jsxs("div",{className:"relative mb-4",children:[v.jsx(NM,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),v.jsx("input",{type:"text",placeholder:t?"":"Search your threads...",className:"w-full bg-white dark:bg-[#1c1c1c] border border-zinc-300 dark:border-zinc-700 rounded-md py-2 pl-9 pr-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500"})]}),v.jsx("div",{ref:H,className:`flex-grow overflow-y-auto block thin-scrollbar ${t?"md:hidden":""}`,children:x?v.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-zinc-500 dark:text-zinc-400",children:[v.jsx("div",{className:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin mb-3"}),v.jsx("div",{className:"text-sm",children:"Loading conversations..."})]}):v.jsxs(v.Fragment,{children:[Object.entries(P).map(([z,D])=>v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"text-xs font-semibold text-zinc-500 mb-2",children:z}),v.jsx("ul",{className:"space-y-1",children:D.map(Ne=>v.jsxs("li",{onClick:()=>F(Ne),className:`py-2 px-3 text-sm rounded-md cursor-pointer transition-colors group relative ${(p==null?void 0:p.id)===Ne.id?"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-white":"text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800/50"}`,children:[v.jsx("div",{className:"truncate pr-6",children:Ne.title}),B===Ne.id?v.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center gap-1 bg-zinc-200 dark:bg-zinc-700 rounded p-1",children:[v.jsx("button",{onClick:Le=>{Le.stopPropagation(),R()},className:"p-1 hover:bg-zinc-300 dark:hover:bg-zinc-600 rounded transition-colors","aria-label":"Cancel delete",children:v.jsx(ic,{className:"w-3 h-3 text-zinc-600 dark:text-zinc-400"})}),v.jsx("button",{onClick:Le=>{Le.stopPropagation(),S(Ne.id)},className:"p-1 hover:bg-red-500 hover:text-white rounded transition-colors","aria-label":"Confirm delete",children:v.jsx(J0,{className:"w-3 h-3 text-red-500 hover:text-white"})})]}):v.jsx("button",{onClick:Le=>te(Le,Ne),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1 hover:bg-zinc-300 dark:hover:bg-zinc-700 rounded transition-all","aria-label":"Delete conversation",children:v.jsx(ic,{className:"w-3 h-3"})})]},Ne.id))})]},z)),C&&v.jsxs("div",{className:"flex flex-col items-center justify-center py-4 text-zinc-500 dark:text-zinc-400",children:[v.jsx("div",{className:"w-5 h-5 border-2 border-pink-500 border-t-transparent rounded-full animate-spin mb-2"}),v.jsx("div",{className:"text-xs",children:"Loading more..."})]}),f.length===0&&v.jsxs("div",{className:"text-center text-zinc-500 dark:text-zinc-400 text-sm py-8",children:["No conversations yet.",v.jsx("br",{}),"Start a new chat to begin!"]})]})}),v.jsx("div",{className:"mt-auto",children:s?v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("div",{className:"flex items-center p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-800 cursor-pointer",children:[v.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${s.displayName||((L=s.email)==null?void 0:L.charAt(0).toUpperCase())||"U"}&background=random`,alt:s.displayName||s.email||"User avatar",className:"w-8 h-8 rounded-full"}),v.jsxs("div",{className:`ml-3 flex-grow block overflow-hidden ${t?"md:hidden":""}`,children:[v.jsx("div",{className:"font-semibold text-zinc-900 dark:text-white truncate",children:s.displayName||s.email}),v.jsx("div",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Signed In"})]})]}),v.jsx("div",{className:`mt-2 ${t?"md:hidden":""}`,children:v.jsx(ks,{variant:"secondary",size:"sm",className:"w-full",onClick:o,children:"Sign Out"})})]}):v.jsx("button",{onClick:a,className:`flex items-center justify-center w-full text-zinc-900 dark:text-white font-semibold py-3.5 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors ${t?"px-2.5":"px-4 gap-2"}`,children:t?v.jsx(kM,{className:"w-5 h-5"}):v.jsxs(v.Fragment,{children:[v.jsx(n1,{className:"w-5 h-5"}),"Login"]})})})]})});o1.displayName="Sidebar";const HM=({icon:n,label:e,onClick:t,isActive:s})=>v.jsxs("button",{onClick:t,className:`flex items-center gap-2.5 py-2 px-4 rounded-lg transition-colors ${s?"bg-zinc-200 dark:bg-zinc-800":"bg-zinc-100 dark:bg-[#2a2a2a] hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[n,v.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-200",children:e})]}),qM=({children:n,onClick:e})=>v.jsx("button",{onClick:e,className:"w-full text-left py-3 px-4 bg-zinc-100 dark:bg-[#2a2a2a] rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:v.jsx("p",{className:"text-sm text-zinc-900 dark:text-zinc-200",children:n})}),$M=({user:n,onPromptSelect:e})=>{var h;const[t,s]=$.useState("Create"),a=[{icon:v.jsx(i1,{className:"w-5 h-5"}),label:"Create"},{icon:v.jsx(MM,{className:"w-5 h-5"}),label:"Explore"},{icon:v.jsx(OM,{className:"w-5 h-5"}),label:"Code"},{icon:v.jsx(DM,{className:"w-5 h-5"}),label:"Learn"}],o={Create:["Write me a sci-fi story in 2 paragraphs","Suggest a name for my new indie rock band","Draft a thank you note to a colleague","Compose a poem about the ocean"],Explore:["How does AI work?","Are black holes real?",'How many Rs are in the word "strawberry"?',"What is the meaning of life?"],Code:["Write a python function to reverse a string","Explain what 'git rebase' does","How to center a div in CSS?","Generate a boilerplate for a React component"],Learn:["What were the main causes of World War I?","Explain the theory of relativity in simple terms","Who was Cleopatra?","How does the stock market work?"]},c=((h=n==null?void 0:n.displayName)==null?void 0:h.split(" ")[0])||"";return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[v.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-zinc-900 dark:text-white mb-6",children:["How can I help you",c?`, ${c}`:"","?"]}),v.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:a.map(f=>v.jsx(HM,{icon:f.icon,label:f.label,onClick:()=>s(f.label),isActive:t===f.label},f.label))}),v.jsx("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:o[t].map(f=>v.jsx(qM,{onClick:()=>e==null?void 0:e(f),children:f},f))}),v.jsx("div",{className:"h-20 md:h-20"})]})},GM=({size:n="md",className:e="",color:t="primary"})=>{const s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},a={primary:"border-pink-500",secondary:"border-zinc-500",white:"border-white"};return v.jsx("div",{className:`inline-block ${s[n]} ${e}`,children:v.jsx("div",{className:`${s[n]} border-2 border-transparent border-t-current ${a[t]} rounded-full animate-spin`,role:"status","aria-label":"Loading",children:v.jsx("span",{className:"sr-only",children:"Loading..."})})})},KM=({className:n=""})=>v.jsx("div",{className:`relative my-3 ${n}`,children:v.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700",style:{boxShadow:"0 1px 2px rgba(0,0,0,0.05), 0 1px 4px rgba(0,0,0,0.03)"}})}),WM=({onMessageSend:n,onModelSelect:e,disabled:t=!1})=>{var G;const[s,a]=$.useState(""),[o,c]=$.useState("gemini-1.5-flash"),[h,f]=$.useState(""),[p,y]=$.useState(!1),[_,w]=$.useState([]),x=$.useRef(null),C=$.useCallback(()=>{const F=[],te=[{label:"Gemini 1.5 Flash",value:"gemini-1.5-flash",source:"system"},{label:"Gemini 1.5 Flash 8B",value:"gemini-1.5-flash-8b",source:"system"}];F.push(...te);try{const S=localStorage.getItem("builtin_api_providers");S&&JSON.parse(S).forEach(I=>{var P;(P=I.value)!=null&&P.trim()&&(I.id==="openai"?F.push({label:"GPT-4",value:"gpt-4",source:"builtin",providerId:I.id},{label:"GPT-3.5 Turbo",value:"gpt-3.5-turbo",source:"builtin",providerId:I.id}):I.id==="anthropic"&&F.push({label:"Claude 3 Sonnet",value:"claude-3-sonnet-20240229",source:"builtin",providerId:I.id},{label:"Claude 3 Haiku",value:"claude-3-haiku-20240307",source:"builtin",providerId:I.id}))})}catch(S){console.error("Error loading built-in providers:",S)}try{const S=localStorage.getItem("custom_api_providers");S&&JSON.parse(S).forEach(I=>{var P,L,z;if((P=I.label)!=null&&P.trim()&&((L=I.value)!=null&&L.trim())&&((z=I.base_url)!=null&&z.trim())){const D=`models_${I.id}`,Ne=localStorage.getItem(D);if(Ne)try{const Le=JSON.parse(Ne);(Le.length>0&&typeof Le[0]=="string"?Le.map(se=>({id:se,name:se})):Le).forEach(se=>{F.push({label:`${I.label} - ${se.name}`,value:se.id,source:"custom",providerId:I.id})})}catch(Le){console.error("Error parsing selected models:",Le)}}})}catch(S){console.error("Error loading custom providers:",S)}w(F)},[]);$.useEffect(()=>{C()},[C]),$.useEffect(()=>{if(_.length>0&&e){const F=_.find(te=>te.value===o);F&&e(F.value,F.source,F.providerId)}},[_,o,e]),$.useEffect(()=>{const F=S=>{var R;(S.key==="builtin_api_providers"||S.key==="custom_api_providers"||(R=S.key)!=null&&R.startsWith("models_"))&&C()};window.addEventListener("storage",F);const te=S=>{var R;(S.detail.key==="builtin_api_providers"||S.detail.key==="custom_api_providers"||(R=S.detail.key)!=null&&R.startsWith("models_"))&&C()};return window.addEventListener("localStorageChange",te),()=>{window.removeEventListener("storage",F),window.removeEventListener("localStorageChange",te)}},[C]);const k=((G=_.find(F=>F.value===o))==null?void 0:G.label)||"Gemini 1.5 Flash";$.useEffect(()=>{const F=te=>{x.current&&!x.current.contains(te.target)&&y(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[]);const O=F=>{a(F.target.value),F.target.style.height="auto",F.target.style.height=`${F.target.scrollHeight}px`},B=F=>{c(F.value),f(F.providerId||""),y(!1),e&&e(F.value,F.source,F.providerId)},V=async()=>{if(!s.trim()||t)return;const F=s.trim(),te=o,S=_.find(R=>R.value===te);a(""),n&&n(F,te,(S==null?void 0:S.source)||"system",S==null?void 0:S.providerId)},H=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),V())};return v.jsxs("div",{className:`bg-white/80 dark:bg-[#1c1c1c]/80 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-700/50 p-3 rounded-2xl w-full
        sm:rounded-2xl
        rounded-t-2xl rounded-b-none
        shadow-[0_-8px_32px_-4px_rgba(0,0,0,0.12),0_-4px_16px_-2px_rgba(0,0,0,0.08)]
        dark:shadow-[0_-8px_32px_-4px_rgba(0,0,0,0.3),0_-4px_16px_-2px_rgba(0,0,0,0.2)]
      `,children:[v.jsx("div",{className:"relative",children:v.jsx("textarea",{value:s,onChange:O,onKeyPress:H,placeholder:"Type your message here...",className:"w-full bg-transparent text-zinc-900 dark:text-zinc-200 placeholder-zinc-500 dark:placeholder-zinc-500 resize-none focus:outline-none pl-2 pr-2 pt-1 pb-1 text-sm max-h-24 overflow-y-auto thin-scrollbar",rows:1,disabled:t})}),v.jsx(KM,{}),v.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2 mt-2",children:[v.jsx("div",{className:"flex items-center flex-wrap gap-2",children:v.jsxs("div",{ref:x,className:"relative",children:[v.jsxs("button",{onClick:()=>y(!p),className:"flex items-center gap-2 text-sm py-2 px-3 rounded-lg bg-zinc-100/80 dark:bg-zinc-800/80 hover:bg-zinc-200/80 dark:hover:bg-zinc-700/80 transition-colors w-48",children:[v.jsx(i1,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}),v.jsx("span",{className:"text-zinc-900 dark:text-white truncate flex-1 text-left",children:k}),v.jsx(ev,{className:`w-4 h-4 text-zinc-500 dark:text-zinc-400 transition-transform duration-200 flex-shrink-0 ${p?"rotate-180":""}`})]}),p&&v.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-64 bg-white/95 dark:bg-zinc-800/95 backdrop-blur-md rounded-lg shadow-lg border border-zinc-200/50 dark:border-zinc-700/50 overflow-hidden z-10",children:v.jsx("div",{className:"py-1 max-h-48 overflow-y-auto thin-scrollbar",children:_.map(F=>v.jsxs("button",{onClick:()=>B(F),className:"w-full text-left flex items-center justify-between px-3 py-2 text-sm text-zinc-900 dark:text-zinc-200 hover:bg-zinc-100/80 dark:hover:bg-zinc-700/80",title:F.label,children:[v.jsx("span",{className:"truncate flex-1 mr-2",children:F.label}),o===F.value&&h===(F.providerId||"")&&v.jsx(J0,{className:"w-4 h-4 text-pink-500 flex-shrink-0"})]},`${F.value}-${F.providerId||"system"}`))})})]})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{className:"p-1.5 rounded-lg hover:bg-zinc-100/80 dark:hover:bg-zinc-800/80 transition-colors","aria-label":"Attach file",children:v.jsx(PM,{className:"w-4 h-4 text-zinc-500 dark:text-zinc-400"})}),v.jsx("button",{onClick:V,className:`p-1.5 rounded-full transition-colors ${s.trim()&&!t?"bg-gradient-to-r from-pink-600 to-purple-600 text-white hover:from-pink-700 hover:to-purple-700":"bg-zinc-200/80 dark:bg-zinc-600/80 text-zinc-500 dark:text-zinc-400 cursor-not-allowed"}`,disabled:!s.trim()||t,"aria-label":t?"Sending...":"Send message",children:t&&s?v.jsx(GM,{size:"sm",color:"white"}):v.jsx(LM,{className:"w-4 h-4"})})]})]})]})},YM="modulepreload",XM=function(n){return"/"+n},CT={},$l=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(t.map(p=>{if(p=XM(p),p in CT)return;CT[p]=!0;const y=p.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":YM,y||(w.as="script"),w.crossOrigin="",w.href=p,f&&w.setAttribute("nonce",f),document.head.appendChild(w),y)return new Promise((x,C)=>{w.addEventListener("load",x),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},tv=$.createContext({});function nv(n){const e=$.useRef(null);return e.current===null&&(e.current=n()),e.current}const Cm=$.createContext(null),sv=$.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class QM extends $.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ZM({children:n,isPresent:e}){const t=$.useId(),s=$.useRef(null),a=$.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=$.useContext(sv);return $.useInsertionEffect(()=>{const{width:c,height:h,top:f,left:p}=a.current;if(e||!s.current||!c||!h)return;s.current.dataset.motionPopId=t;const y=document.createElement("style");return o&&(y.nonce=o),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${h}px !important;
            top: ${f}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),v.jsx(QM,{isPresent:e,childRef:s,sizeRef:a,children:$.cloneElement(n,{ref:s})})}const JM=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:c})=>{const h=nv(eO),f=$.useId(),p=$.useCallback(_=>{h.set(_,!0);for(const w of h.values())if(!w)return;s&&s()},[h,s]),y=$.useMemo(()=>({id:f,initial:e,isPresent:t,custom:a,onExitComplete:p,register:_=>(h.set(_,!1),()=>h.delete(_))}),o?[Math.random(),p]:[t,p]);return $.useMemo(()=>{h.forEach((_,w)=>h.set(w,!1))},[t]),$.useEffect(()=>{!t&&!h.size&&s&&s()},[t]),c==="popLayout"&&(n=v.jsx(ZM,{isPresent:t,children:n})),v.jsx(Cm.Provider,{value:y,children:n})};function eO(){return new Map}function l1(n=!0){const e=$.useContext(Cm);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:a}=e,o=$.useId();$.useEffect(()=>{n&&a(o)},[n]);const c=$.useCallback(()=>n&&s&&s(o),[o,s,n]);return!t&&s?[!1,c]:[!0]}const tf=n=>n.key||"";function IT(n){const e=[];return $.Children.forEach(n,t=>{$.isValidElement(t)&&e.push(t)}),e}const iv=typeof window<"u",c1=iv?$.useLayoutEffect:$.useEffect,Oi=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:o="sync",propagate:c=!1})=>{const[h,f]=l1(c),p=$.useMemo(()=>IT(n),[n]),y=c&&!h?[]:p.map(tf),_=$.useRef(!0),w=$.useRef(p),x=nv(()=>new Map),[C,k]=$.useState(p),[O,B]=$.useState(p);c1(()=>{_.current=!1,w.current=p;for(let G=0;G<O.length;G++){const F=tf(O[G]);y.includes(F)?x.delete(F):x.get(F)!==!0&&x.set(F,!1)}},[O,y.length,y.join("-")]);const V=[];if(p!==C){let G=[...p];for(let F=0;F<O.length;F++){const te=O[F],S=tf(te);y.includes(S)||(G.splice(F,0,te),V.push(te))}o==="wait"&&V.length&&(G=V),B(IT(G)),k(p);return}const{forceRender:H}=$.useContext(tv);return v.jsx(v.Fragment,{children:O.map(G=>{const F=tf(G),te=c&&!h?!1:p===O||y.includes(F),S=()=>{if(x.has(F))x.set(F,!0);else return;let R=!0;x.forEach(I=>{I||(R=!1)}),R&&(H==null||H(),B(w.current),c&&(f==null||f()),s&&s())};return v.jsx(JM,{isPresent:te,initial:!_.current||t?void 0:!1,custom:te?void 0:e,presenceAffectsLayout:a,mode:o,onExitComplete:te?void 0:S,children:G},F)})})},Xs=n=>n;let u1=Xs;function rv(n){let e;return()=>(e===void 0&&(e=n()),e)}const uc=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},qr=n=>n*1e3,$r=n=>n/1e3,tO={useManualTiming:!1};function nO(n){let e=new Set,t=new Set,s=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(p){o.has(p)&&(f.schedule(p),n()),p(c)}const f={schedule:(p,y=!1,_=!1)=>{const x=_&&s?e:t;return y&&o.add(p),x.has(p)||x.add(p),p},cancel:p=>{t.delete(p),o.delete(p)},process:p=>{if(c=p,s){a=!0;return}s=!0,[e,t]=[t,e],e.forEach(h),e.clear(),s=!1,a&&(a=!1,f.process(p))}};return f}const nf=["read","resolveKeyframes","update","preRender","render","postRender"],sO=40;function h1(n,e){let t=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,c=nf.reduce((B,V)=>(B[V]=nO(o),B),{}),{read:h,resolveKeyframes:f,update:p,preRender:y,render:_,postRender:w}=c,x=()=>{const B=performance.now();t=!1,a.delta=s?1e3/60:Math.max(Math.min(B-a.timestamp,sO),1),a.timestamp=B,a.isProcessing=!0,h.process(a),f.process(a),p.process(a),y.process(a),_.process(a),w.process(a),a.isProcessing=!1,t&&e&&(s=!1,n(x))},C=()=>{t=!0,s=!0,a.isProcessing||n(x)};return{schedule:nf.reduce((B,V)=>{const H=c[V];return B[V]=(G,F=!1,te=!1)=>(t||C(),H.schedule(G,F,te)),B},{}),cancel:B=>{for(let V=0;V<nf.length;V++)c[nf[V]].cancel(B)},state:a,steps:c}}const{schedule:Xt,cancel:Ha,state:Xn,steps:uy}=h1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xs,!0),d1=$.createContext({strict:!1}),NT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hc={};for(const n in NT)hc[n]={isEnabled:e=>NT[n].some(t=>!!e[t])};function iO(n){for(const e in n)hc[e]={...hc[e],...n[e]}}const rO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||rO.has(n)}let f1=n=>!qf(n);function aO(n){n&&(f1=e=>e.startsWith("on")?!qf(e):n(e))}try{aO(require("@emotion/is-prop-valid").default)}catch{}function oO(n,e,t){const s={};for(const a in n)a==="values"&&typeof n.values=="object"||(f1(a)||t===!0&&qf(a)||!e&&!qf(a)||n.draggable&&a.startsWith("onDrag"))&&(s[a]=n[a]);return s}function lO(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,a)=>a==="create"?n:(e.has(a)||e.set(a,n(a)),e.get(a))})}const Im=$.createContext({});function rh(n){return typeof n=="string"||Array.isArray(n)}function Nm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const av=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ov=["initial",...av];function km(n){return Nm(n.animate)||ov.some(e=>rh(n[e]))}function m1(n){return!!(km(n)||n.variants)}function cO(n,e){if(km(n)){const{initial:t,animate:s}=n;return{initial:t===!1||rh(t)?t:void 0,animate:rh(s)?s:void 0}}return n.inherit!==!1?e:{}}function uO(n){const{initial:e,animate:t}=cO(n,$.useContext(Im));return $.useMemo(()=>({initial:e,animate:t}),[kT(e),kT(t)])}function kT(n){return Array.isArray(n)?n.join(" "):n}const hO=Symbol.for("motionComponentSymbol");function Zl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function dO(n,e,t){return $.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Zl(t)&&(t.current=s))},[e])}const lv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fO="framerAppearId",p1="data-"+lv(fO),{schedule:cv}=h1(queueMicrotask,!1),g1=$.createContext({});function mO(n,e,t,s,a){var o,c;const{visualElement:h}=$.useContext(Im),f=$.useContext(d1),p=$.useContext(Cm),y=$.useContext(sv).reducedMotion,_=$.useRef(null);s=s||f.renderer,!_.current&&s&&(_.current=s(n,{visualState:e,parent:h,props:t,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const w=_.current,x=$.useContext(g1);w&&!w.projection&&a&&(w.type==="html"||w.type==="svg")&&pO(_.current,t,a,x);const C=$.useRef(!1);$.useInsertionEffect(()=>{w&&C.current&&w.update(t,p)});const k=t[p1],O=$.useRef(!!k&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,k))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,k)));return c1(()=>{w&&(C.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),cv.render(w.render),O.current&&w.animationState&&w.animationState.animateChanges())}),$.useEffect(()=>{w&&(!O.current&&w.animationState&&w.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)===null||B===void 0||B.call(window,k)}),O.current=!1))}),w}function pO(n,e,t,s){const{layoutId:a,layout:o,drag:c,dragConstraints:h,layoutScroll:f,layoutRoot:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:y1(n.parent)),n.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!c||h&&Zl(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:p})}function y1(n){if(n)return n.options.allowProjection!==!1?n.projection:y1(n.parent)}function gO({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:a}){var o,c;n&&iO(n);function h(p,y){let _;const w={...$.useContext(sv),...p,layoutId:yO(p)},{isStatic:x}=w,C=uO(p),k=s(p,x);if(!x&&iv){vO();const O=_O(w);_=O.MeasureLayout,C.visualElement=mO(a,k,w,e,O.ProjectionNode)}return v.jsxs(Im.Provider,{value:C,children:[_&&C.visualElement?v.jsx(_,{visualElement:C.visualElement,...w}):null,t(a,p,dO(k,C.visualElement,y),k,x,C.visualElement)]})}h.displayName=`motion.${typeof a=="string"?a:`create(${(c=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&c!==void 0?c:""})`}`;const f=$.forwardRef(h);return f[hO]=a,f}function yO({layoutId:n}){const e=$.useContext(tv).id;return e&&n!==void 0?e+"-"+n:n}function vO(n,e){$.useContext(d1).strict}function _O(n){const{drag:e,layout:t}=hc;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const bO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uv(n){return typeof n!="string"||n.includes("-")?!1:!!(bO.indexOf(n)>-1||/[A-Z]/u.test(n))}function MT(n){const e=[{},{}];return n==null||n.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function hv(n,e,t,s){if(typeof e=="function"){const[a,o]=MT(s);e=e(t!==void 0?t:n.custom,a,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[a,o]=MT(s);e=e(t!==void 0?t:n.custom,a,o)}return e}const Wy=n=>Array.isArray(n),wO=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),EO=n=>Wy(n)?n[n.length-1]||0:n,ps=n=>!!(n&&n.getVelocity);function wf(n){const e=ps(n)?n.get():n;return wO(e)?e.toValue():e}function TO({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},s,a,o){const c={latestValues:xO(s,a,o,n),renderState:e()};return t&&(c.onMount=h=>t({props:s,current:h,...c}),c.onUpdate=h=>t(h)),c}const v1=n=>(e,t)=>{const s=$.useContext(Im),a=$.useContext(Cm),o=()=>TO(n,e,s,a);return t?o():nv(o)};function xO(n,e,t,s){const a={},o=s(n,{});for(const w in o)a[w]=wf(o[w]);let{initial:c,animate:h}=n;const f=km(n),p=m1(n);e&&p&&!f&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let y=t?t.initial===!1:!1;y=y||c===!1;const _=y?h:c;if(_&&typeof _!="boolean"&&!Nm(_)){const w=Array.isArray(_)?_:[_];for(let x=0;x<w.length;x++){const C=hv(n,w[x]);if(C){const{transitionEnd:k,transition:O,...B}=C;for(const V in B){let H=B[V];if(Array.isArray(H)){const G=y?H.length-1:0;H=H[G]}H!==null&&(a[V]=H)}for(const V in k)a[V]=k[V]}}}return a}const bc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tl=new Set(bc),_1=n=>e=>typeof e=="string"&&e.startsWith(n),b1=_1("--"),SO=_1("var(--"),dv=n=>SO(n)?AO.test(n.split("/*")[0].trim()):!1,AO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,w1=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Kr=(n,e,t)=>t>e?e:t<n?n:t,wc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ah={...wc,transform:n=>Kr(0,1,n)},sf={...wc,default:1},wh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ka=wh("deg"),nr=wh("%"),Fe=wh("px"),RO=wh("vh"),CO=wh("vw"),OT={...nr,parse:n=>nr.parse(n)/100,transform:n=>nr.transform(n*100)},IO={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,backgroundPositionX:Fe,backgroundPositionY:Fe},NO={rotate:ka,rotateX:ka,rotateY:ka,rotateZ:ka,scale:sf,scaleX:sf,scaleY:sf,scaleZ:sf,skew:ka,skewX:ka,skewY:ka,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:ah,originX:OT,originY:OT,originZ:Fe},DT={...wc,transform:Math.round},fv={...IO,...NO,zIndex:DT,size:Fe,fillOpacity:ah,strokeOpacity:ah,numOctaves:DT},kO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},MO=bc.length;function OO(n,e,t){let s="",a=!0;for(let o=0;o<MO;o++){const c=bc[o],h=n[c];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(c.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||t){const p=w1(h,fv[c]);if(!f){a=!1;const y=kO[c]||c;s+=`${y}(${p}) `}t&&(e[c]=p)}}return s=s.trim(),t?s=t(e,a?"":s):a&&(s="none"),s}function mv(n,e,t){const{style:s,vars:a,transformOrigin:o}=n;let c=!1,h=!1;for(const f in e){const p=e[f];if(tl.has(f)){c=!0;continue}else if(b1(f)){a[f]=p;continue}else{const y=w1(p,fv[f]);f.startsWith("origin")?(h=!0,o[f]=y):s[f]=y}}if(e.transform||(c||t?s.transform=OO(e,n.transform,t):s.transform&&(s.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:y=0}=o;s.transformOrigin=`${f} ${p} ${y}`}}const DO={offset:"stroke-dashoffset",array:"stroke-dasharray"},PO={offset:"strokeDashoffset",array:"strokeDasharray"};function LO(n,e,t=1,s=0,a=!0){n.pathLength=1;const o=a?DO:PO;n[o.offset]=Fe.transform(-s);const c=Fe.transform(e),h=Fe.transform(t);n[o.array]=`${c} ${h}`}function PT(n,e,t){return typeof n=="string"?n:Fe.transform(e+t*n)}function VO(n,e,t){const s=PT(e,n.x,n.width),a=PT(t,n.y,n.height);return`${s} ${a}`}function pv(n,{attrX:e,attrY:t,attrScale:s,originX:a,originY:o,pathLength:c,pathSpacing:h=1,pathOffset:f=0,...p},y,_){if(mv(n,p,_),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:w,style:x,dimensions:C}=n;w.transform&&(C&&(x.transform=w.transform),delete w.transform),C&&(a!==void 0||o!==void 0||x.transform)&&(x.transformOrigin=VO(C,a!==void 0?a:.5,o!==void 0?o:.5)),e!==void 0&&(w.x=e),t!==void 0&&(w.y=t),s!==void 0&&(w.scale=s),c!==void 0&&LO(w,c,h,f,!1)}const gv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),E1=()=>({...gv(),attrs:{}}),yv=n=>typeof n=="string"&&n.toLowerCase()==="svg";function T1(n,{style:e,vars:t},s,a){Object.assign(n.style,e,a&&a.getProjectionStyles(s));for(const o in t)n.style.setProperty(o,t[o])}const x1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function S1(n,e,t,s){T1(n,e,void 0,s);for(const a in e.attrs)n.setAttribute(x1.has(a)?a:lv(a),e.attrs[a])}const $f={};function jO(n){Object.assign($f,n)}function A1(n,{layout:e,layoutId:t}){return tl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!$f[n]||n==="opacity")}function vv(n,e,t){var s;const{style:a}=n,o={};for(const c in a)(ps(a[c])||e.style&&ps(e.style[c])||A1(c,n)||((s=t==null?void 0:t.getValue(c))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[c]=a[c]);return o}function R1(n,e,t){const s=vv(n,e,t);for(const a in n)if(ps(n[a])||ps(e[a])){const o=bc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=n[a]}return s}function zO(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const LT=["x","y","width","height","cx","cy","r"],UO={useVisualState:v1({scrapeMotionValuesFromProps:R1,createRenderState:E1,onUpdate:({props:n,prevProps:e,current:t,renderState:s,latestValues:a})=>{if(!t)return;let o=!!n.drag;if(!o){for(const h in a)if(tl.has(h)){o=!0;break}}if(!o)return;let c=!e;if(e)for(let h=0;h<LT.length;h++){const f=LT[h];n[f]!==e[f]&&(c=!0)}c&&Xt.read(()=>{zO(t,s),Xt.render(()=>{pv(s,a,yv(t.tagName),n.transformTemplate),S1(t,s)})})}})},BO={useVisualState:v1({scrapeMotionValuesFromProps:vv,createRenderState:gv})};function C1(n,e,t){for(const s in e)!ps(e[s])&&!A1(s,t)&&(n[s]=e[s])}function FO({transformTemplate:n},e){return $.useMemo(()=>{const t=gv();return mv(t,e,n),Object.assign({},t.vars,t.style)},[e])}function HO(n,e){const t=n.style||{},s={};return C1(s,t,n),Object.assign(s,FO(n,e)),s}function qO(n,e){const t={},s=HO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}function $O(n,e,t,s){const a=$.useMemo(()=>{const o=E1();return pv(o,e,yv(s),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};C1(o,n.style,n),a.style={...o,...a.style}}return a}function GO(n=!1){return(t,s,a,{latestValues:o},c)=>{const f=(uv(t)?$O:qO)(s,o,c,t),p=oO(s,typeof t=="string",n),y=t!==$.Fragment?{...p,...f,ref:a}:{},{children:_}=s,w=$.useMemo(()=>ps(_)?_.get():_,[_]);return $.createElement(t,{...y,children:w})}}function KO(n,e){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const c={...uv(s)?UO:BO,preloadedFeatures:n,useRender:GO(a),createVisualElement:e,Component:s};return gO(c)}}function I1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function Mm(n,e,t){const s=n.getProps();return hv(s,e,t!==void 0?t:s.custom,n)}const WO=rv(()=>window.ScrollTimeline!==void 0);class YO{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=t}attachTimeline(e,t){const s=this.animations.map(a=>{if(WO()&&a.attachTimeline)return a.attachTimeline(e);if(typeof t=="function")return t(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class XO extends YO{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function _v(n,e){return n?n[e]||n.default||n:void 0}const Yy=2e4;function N1(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<Yy;)e+=t,s=n.next(e);return e>=Yy?1/0:e}function bv(n){return typeof n=="function"}function VT(n,e){n.timeline=e,n.onfinish=null}const wv=n=>Array.isArray(n)&&typeof n[0]=="number",QO={linearEasing:void 0};function ZO(n,e){const t=rv(n);return()=>{var s;return(s=QO[e])!==null&&s!==void 0?s:t()}}const Gf=ZO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),k1=(n,e,t=10)=>{let s="";const a=Math.max(Math.round(e/t),2);for(let o=0;o<a;o++)s+=n(uc(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function M1(n){return!!(typeof n=="function"&&Gf()||!n||typeof n=="string"&&(n in Xy||Gf())||wv(n)||Array.isArray(n)&&n.every(M1))}const Iu=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,Xy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Iu([0,.65,.55,1]),circOut:Iu([.55,0,1,.45]),backIn:Iu([.31,.01,.66,-.59]),backOut:Iu([.33,1.53,.69,.99])};function O1(n,e){if(n)return typeof n=="function"&&Gf()?k1(n,e):wv(n)?Iu(n):Array.isArray(n)?n.map(t=>O1(t,e)||Xy.easeOut):Xy[n]}const Ci={x:!1,y:!1};function D1(){return Ci.x||Ci.y}function JO(n,e,t){var s;if(n instanceof Element)return[n];if(typeof n=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function P1(n,e){const t=JO(n),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[t,a,()=>s.abort()]}function jT(n){return e=>{e.pointerType==="touch"||D1()||n(e)}}function eD(n,e,t={}){const[s,a,o]=P1(n,t),c=jT(h=>{const{target:f}=h,p=e(h);if(typeof p!="function"||!f)return;const y=jT(_=>{p(_),f.removeEventListener("pointerleave",y)});f.addEventListener("pointerleave",y,a)});return s.forEach(h=>{h.addEventListener("pointerenter",c,a)}),o}const L1=(n,e)=>e?n===e?!0:L1(n,e.parentElement):!1,Ev=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,tD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nD(n){return tD.has(n.tagName)||n.tabIndex!==-1}const Nu=new WeakSet;function zT(n){return e=>{e.key==="Enter"&&n(e)}}function hy(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sD=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=zT(()=>{if(Nu.has(t))return;hy(t,"down");const a=zT(()=>{hy(t,"up")}),o=()=>hy(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function UT(n){return Ev(n)&&!D1()}function iD(n,e,t={}){const[s,a,o]=P1(n,t),c=h=>{const f=h.currentTarget;if(!UT(h)||Nu.has(f))return;Nu.add(f);const p=e(h),y=(x,C)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",w),!(!UT(x)||!Nu.has(f))&&(Nu.delete(f),typeof p=="function"&&p(x,{success:C}))},_=x=>{y(x,t.useGlobalTarget||L1(f,x.target))},w=x=>{y(x,!1)};window.addEventListener("pointerup",_,a),window.addEventListener("pointercancel",w,a)};return s.forEach(h=>{!nD(h)&&h.getAttribute("tabindex")===null&&(h.tabIndex=0),(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,a),h.addEventListener("focus",p=>sD(p,a),a)}),o}function rD(n){return n==="x"||n==="y"?Ci[n]?null:(Ci[n]=!0,()=>{Ci[n]=!1}):Ci.x||Ci.y?null:(Ci.x=Ci.y=!0,()=>{Ci.x=Ci.y=!1})}const V1=new Set(["width","height","top","left","right","bottom",...bc]);let Ef;function aD(){Ef=void 0}const sr={now:()=>(Ef===void 0&&sr.set(Xn.isProcessing||tO.useManualTiming?Xn.timestamp:performance.now()),Ef),set:n=>{Ef=n,queueMicrotask(aD)}};function Tv(n,e){n.indexOf(e)===-1&&n.push(e)}function xv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Sv{constructor(){this.subscriptions=[]}add(e){return Tv(this.subscriptions,e),()=>xv(this.subscriptions,e)}notify(e,t,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,s);else for(let o=0;o<a;o++){const c=this.subscriptions[o];c&&c(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function j1(n,e){return e?n*(1e3/e):0}const BT=30,oD=n=>!isNaN(parseFloat(n));class lD{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=sr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=sr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Sv);const s=this.events[e].add(t);return e==="change"?()=>{s(),Xt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=sr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>BT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,BT);return j1(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oh(n,e){return new lD(n,e)}function cD(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,oh(t))}function uD(n,e){const t=Mm(n,e);let{transitionEnd:s={},transition:a={},...o}=t||{};o={...o,...s};for(const c in o){const h=EO(o[c]);cD(n,c,h)}}function hD(n){return!!(ps(n)&&n.add)}function Qy(n,e){const t=n.getValue("willChange");if(hD(t))return t.add(e)}function z1(n){return n.props[p1]}const U1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,dD=1e-7,fD=12;function mD(n,e,t,s,a){let o,c,h=0;do c=e+(t-e)/2,o=U1(c,s,a)-n,o>0?t=c:e=c;while(Math.abs(o)>dD&&++h<fD);return c}function Eh(n,e,t,s){if(n===e&&t===s)return Xs;const a=o=>mD(o,0,1,n,t);return o=>o===0||o===1?o:U1(a(o),e,s)}const B1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,F1=n=>e=>1-n(1-e),H1=Eh(.33,1.53,.69,.99),Av=F1(H1),q1=B1(Av),$1=n=>(n*=2)<1?.5*Av(n):.5*(2-Math.pow(2,-10*(n-1))),Rv=n=>1-Math.sin(Math.acos(n)),G1=F1(Rv),K1=B1(Rv),W1=n=>/^0[^.\s]+$/u.test(n);function pD(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||W1(n):!0}const Ku=n=>Math.round(n*1e5)/1e5,Cv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gD(n){return n==null}const yD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Iv=(n,e)=>t=>!!(typeof t=="string"&&yD.test(t)&&t.startsWith(n)||e&&!gD(t)&&Object.prototype.hasOwnProperty.call(t,e)),Y1=(n,e,t)=>s=>{if(typeof s!="string")return s;const[a,o,c,h]=s.match(Cv);return{[n]:parseFloat(a),[e]:parseFloat(o),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},vD=n=>Kr(0,255,n),dy={...wc,transform:n=>Math.round(vD(n))},Uo={test:Iv("rgb","red"),parse:Y1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+dy.transform(n)+", "+dy.transform(e)+", "+dy.transform(t)+", "+Ku(ah.transform(s))+")"};function _D(n){let e="",t="",s="",a="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),a=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),a=n.substring(4,5),e+=e,t+=t,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Zy={test:Iv("#"),parse:_D,transform:Uo.transform},Jl={test:Iv("hsl","hue"),parse:Y1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+nr.transform(Ku(e))+", "+nr.transform(Ku(t))+", "+Ku(ah.transform(s))+")"},ds={test:n=>Uo.test(n)||Zy.test(n)||Jl.test(n),parse:n=>Uo.test(n)?Uo.parse(n):Jl.test(n)?Jl.parse(n):Zy.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Uo.transform(n):Jl.transform(n)},bD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wD(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Cv))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(bD))===null||t===void 0?void 0:t.length)||0)>0}const X1="number",Q1="color",ED="var",TD="var(",FT="${}",xD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lh(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},a=[];let o=0;const h=e.replace(xD,f=>(ds.test(f)?(s.color.push(o),a.push(Q1),t.push(ds.parse(f))):f.startsWith(TD)?(s.var.push(o),a.push(ED),t.push(f)):(s.number.push(o),a.push(X1),t.push(parseFloat(f))),++o,FT)).split(FT);return{values:t,split:h,indexes:s,types:a}}function Z1(n){return lh(n).values}function J1(n){const{split:e,types:t}=lh(n),s=e.length;return a=>{let o="";for(let c=0;c<s;c++)if(o+=e[c],a[c]!==void 0){const h=t[c];h===X1?o+=Ku(a[c]):h===Q1?o+=ds.transform(a[c]):o+=a[c]}return o}}const SD=n=>typeof n=="number"?0:n;function AD(n){const e=Z1(n);return J1(n)(e.map(SD))}const qa={test:wD,parse:Z1,createTransformer:J1,getAnimatableNone:AD},RD=new Set(["brightness","contrast","saturate","opacity"]);function CD(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(Cv)||[];if(!s)return n;const a=t.replace(s,"");let o=RD.has(e)?1:0;return s!==t&&(o*=100),e+"("+o+a+")"}const ID=/\b([a-z-]*)\(.*?\)/gu,Jy={...qa,getAnimatableNone:n=>{const e=n.match(ID);return e?e.map(CD).join(" "):n}},ND={...fv,color:ds,backgroundColor:ds,outlineColor:ds,fill:ds,stroke:ds,borderColor:ds,borderTopColor:ds,borderRightColor:ds,borderBottomColor:ds,borderLeftColor:ds,filter:Jy,WebkitFilter:Jy},Nv=n=>ND[n];function eR(n,e){let t=Nv(n);return t!==Jy&&(t=qa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const kD=new Set(["auto","none","0"]);function MD(n,e,t){let s=0,a;for(;s<n.length&&!a;){const o=n[s];typeof o=="string"&&!kD.has(o)&&lh(o).values.length&&(a=n[s]),s++}if(a&&t)for(const o of e)n[o]=eR(t,a)}const HT=n=>n===wc||n===Fe,qT=(n,e)=>parseFloat(n.split(", ")[e]),$T=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return qT(a[1],e);{const o=s.match(/^matrix\((.+)\)$/u);return o?qT(o[1],n):0}},OD=new Set(["x","y","z"]),DD=bc.filter(n=>!OD.has(n));function PD(n){const e=[];return DD.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const dc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:$T(4,13),y:$T(5,14)};dc.translateX=dc.x;dc.translateY=dc.y;const $o=new Set;let e0=!1,t0=!1;function tR(){if(t0){const n=Array.from($o).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const a=PD(s);a.length&&(t.set(s,a),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=t.get(s);a&&a.forEach(([o,c])=>{var h;(h=s.getValue(o))===null||h===void 0||h.set(c)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}t0=!1,e0=!1,$o.forEach(n=>n.complete()),$o.clear()}function nR(){$o.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(t0=!0)})}function LD(){nR(),tR()}class kv{constructor(e,t,s,a,o,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=a,this.element=o,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?($o.add(this),e0||(e0=!0,Xt.read(nR),Xt.resolveKeyframes(tR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:a}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const c=a==null?void 0:a.get(),h=e[e.length-1];if(c!==void 0)e[0]=c;else if(s&&t){const f=s.readValue(t,h);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=h),a&&c===void 0&&a.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$o.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$o.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sR=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),VD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jD(n){const e=VD.exec(n);if(!e)return[,];const[,t,s,a]=e;return[`--${t??s}`,a]}function iR(n,e,t=1){const[s,a]=jD(n);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const c=o.trim();return sR(c)?parseFloat(c):c}return dv(a)?iR(a,e,t+1):a}const rR=n=>e=>e.test(n),zD={test:n=>n==="auto",parse:n=>n},aR=[wc,Fe,nr,ka,CO,RO,zD],GT=n=>aR.find(rR(n));class oR extends kv{constructor(e,t,s,a,o){super(e,t,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),dv(p))){const y=iR(p,t.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!V1.has(s)||e.length!==2)return;const[a,o]=e,c=GT(a),h=GT(o);if(c!==h)if(HT(c)&&HT(h))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let a=0;a<e.length;a++)pD(e[a])&&s.push(a);s.length&&MD(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const o=t.getValue(s);o&&o.jump(this.measuredOrigin,!1);const c=a.length-1,h=a[c];a[c]=dc[s](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,p])=>{t.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const KT=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(qa.test(n)||n==="0")&&!n.startsWith("url("));function UD(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function BD(n,e,t,s){const a=n[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],c=KT(a,e),h=KT(o,e);return!c||!h?!1:UD(n)||(t==="spring"||bv(t))&&s}const FD=n=>n!==null;function Om(n,{repeat:e,repeatType:t="loop"},s){const a=n.filter(FD),o=e&&t!=="loop"&&e%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const HD=40;class lR{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:c="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=sr.now(),this.options={autoplay:e,delay:t,type:s,repeat:a,repeatDelay:o,repeatType:c,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>HD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&LD(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=sr.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:c,onComplete:h,onUpdate:f,isGenerator:p}=this.options;if(!p&&!BD(e,s,a,o))if(c)this.options.duration=0;else{f&&f(Om(e,this.options,t)),h&&h(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,t);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...y},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const en=(n,e,t)=>n+(e-n)*t;function fy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function qD({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let a=0,o=0,c=0;if(!e)a=o=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;a=fy(f,h,n+1/3),o=fy(f,h,n),c=fy(f,h,n-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:s}}function Kf(n,e){return t=>t>0?e:n}const my=(n,e,t)=>{const s=n*n,a=t*(e*e-s)+s;return a<0?0:Math.sqrt(a)},$D=[Zy,Uo,Jl],GD=n=>$D.find(e=>e.test(n));function WT(n){const e=GD(n);if(!e)return!1;let t=e.parse(n);return e===Jl&&(t=qD(t)),t}const YT=(n,e)=>{const t=WT(n),s=WT(e);if(!t||!s)return Kf(n,e);const a={...t};return o=>(a.red=my(t.red,s.red,o),a.green=my(t.green,s.green,o),a.blue=my(t.blue,s.blue,o),a.alpha=en(t.alpha,s.alpha,o),Uo.transform(a))},KD=(n,e)=>t=>e(n(t)),Th=(...n)=>n.reduce(KD),n0=new Set(["none","hidden"]);function WD(n,e){return n0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function YD(n,e){return t=>en(n,e,t)}function Mv(n){return typeof n=="number"?YD:typeof n=="string"?dv(n)?Kf:ds.test(n)?YT:ZD:Array.isArray(n)?cR:typeof n=="object"?ds.test(n)?YT:XD:Kf}function cR(n,e){const t=[...n],s=t.length,a=n.map((o,c)=>Mv(o)(o,e[c]));return o=>{for(let c=0;c<s;c++)t[c]=a[c](o);return t}}function XD(n,e){const t={...n,...e},s={};for(const a in t)n[a]!==void 0&&e[a]!==void 0&&(s[a]=Mv(n[a])(n[a],e[a]));return a=>{for(const o in s)t[o]=s[o](a);return t}}function QD(n,e){var t;const s=[],a={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const c=e.types[o],h=n.indexes[c][a[c]],f=(t=n.values[h])!==null&&t!==void 0?t:0;s[o]=f,a[c]++}return s}const ZD=(n,e)=>{const t=qa.createTransformer(e),s=lh(n),a=lh(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?n0.has(n)&&!a.values.length||n0.has(e)&&!s.values.length?WD(n,e):Th(cR(QD(s,a),a.values),t):Kf(n,e)};function uR(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?en(n,e,t):Mv(n)(n,e)}const JD=5;function hR(n,e,t){const s=Math.max(e-JD,0);return j1(t-n(s),e-s)}const ln={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},py=.001;function eP({duration:n=ln.duration,bounce:e=ln.bounce,velocity:t=ln.velocity,mass:s=ln.mass}){let a,o,c=1-e;c=Kr(ln.minDamping,ln.maxDamping,c),n=Kr(ln.minDuration,ln.maxDuration,$r(n)),c<1?(a=p=>{const y=p*c,_=y*n,w=y-t,x=s0(p,c),C=Math.exp(-_);return py-w/x*C},o=p=>{const _=p*c*n,w=_*t+t,x=Math.pow(c,2)*Math.pow(p,2)*n,C=Math.exp(-_),k=s0(Math.pow(p,2),c);return(-a(p)+py>0?-1:1)*((w-x)*C)/k}):(a=p=>{const y=Math.exp(-p*n),_=(p-t)*n+1;return-py+y*_},o=p=>{const y=Math.exp(-p*n),_=(t-p)*(n*n);return y*_});const h=5/n,f=nP(a,o,h);if(n=qr(n),isNaN(f))return{stiffness:ln.stiffness,damping:ln.damping,duration:n};{const p=Math.pow(f,2)*s;return{stiffness:p,damping:c*2*Math.sqrt(s*p),duration:n}}}const tP=12;function nP(n,e,t){let s=t;for(let a=1;a<tP;a++)s=s-n(s)/e(s);return s}function s0(n,e){return n*Math.sqrt(1-e*e)}const sP=["duration","bounce"],iP=["stiffness","damping","mass"];function XT(n,e){return e.some(t=>n[t]!==void 0)}function rP(n){let e={velocity:ln.velocity,stiffness:ln.stiffness,damping:ln.damping,mass:ln.mass,isResolvedFromDuration:!1,...n};if(!XT(n,iP)&&XT(n,sP))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),a=s*s,o=2*Kr(.05,1,1-(n.bounce||0))*Math.sqrt(a);e={...e,mass:ln.mass,stiffness:a,damping:o}}else{const t=eP(n);e={...e,...t,mass:ln.mass},e.isResolvedFromDuration=!0}return e}function dR(n=ln.visualDuration,e=ln.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:a}=t;const o=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:f,damping:p,mass:y,duration:_,velocity:w,isResolvedFromDuration:x}=rP({...t,velocity:-$r(t.velocity||0)}),C=w||0,k=p/(2*Math.sqrt(f*y)),O=c-o,B=$r(Math.sqrt(f/y)),V=Math.abs(O)<5;s||(s=V?ln.restSpeed.granular:ln.restSpeed.default),a||(a=V?ln.restDelta.granular:ln.restDelta.default);let H;if(k<1){const F=s0(B,k);H=te=>{const S=Math.exp(-k*B*te);return c-S*((C+k*B*O)/F*Math.sin(F*te)+O*Math.cos(F*te))}}else if(k===1)H=F=>c-Math.exp(-B*F)*(O+(C+B*O)*F);else{const F=B*Math.sqrt(k*k-1);H=te=>{const S=Math.exp(-k*B*te),R=Math.min(F*te,300);return c-S*((C+k*B*O)*Math.sinh(R)+F*O*Math.cosh(R))/F}}const G={calculatedDuration:x&&_||null,next:F=>{const te=H(F);if(x)h.done=F>=_;else{let S=0;k<1&&(S=F===0?qr(C):hR(H,F,te));const R=Math.abs(S)<=s,I=Math.abs(c-te)<=a;h.done=R&&I}return h.value=h.done?c:te,h},toString:()=>{const F=Math.min(N1(G),Yy),te=k1(S=>G.next(F*S).value,F,30);return F+"ms "+te}};return G}function QT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:f,restDelta:p=.5,restSpeed:y}){const _=n[0],w={done:!1,value:_},x=R=>h!==void 0&&R<h||f!==void 0&&R>f,C=R=>h===void 0?f:f===void 0||Math.abs(h-R)<Math.abs(f-R)?h:f;let k=t*e;const O=_+k,B=c===void 0?O:c(O);B!==O&&(k=B-_);const V=R=>-k*Math.exp(-R/s),H=R=>B+V(R),G=R=>{const I=V(R),P=H(R);w.done=Math.abs(I)<=p,w.value=w.done?B:P};let F,te;const S=R=>{x(w.value)&&(F=R,te=dR({keyframes:[w.value,C(w.value)],velocity:hR(H,R,w.value),damping:a,stiffness:o,restDelta:p,restSpeed:y}))};return S(0),{calculatedDuration:null,next:R=>{let I=!1;return!te&&F===void 0&&(I=!0,G(R),S(R)),F!==void 0&&R>=F?te.next(R-F):(!I&&G(R),w)}}}const aP=Eh(.42,0,1,1),oP=Eh(0,0,.58,1),fR=Eh(.42,0,.58,1),lP=n=>Array.isArray(n)&&typeof n[0]!="number",cP={linear:Xs,easeIn:aP,easeInOut:fR,easeOut:oP,circIn:Rv,circInOut:K1,circOut:G1,backIn:Av,backInOut:q1,backOut:H1,anticipate:$1},ZT=n=>{if(wv(n)){u1(n.length===4);const[e,t,s,a]=n;return Eh(e,t,s,a)}else if(typeof n=="string")return cP[n];return n};function uP(n,e,t){const s=[],a=t||uR,o=n.length-1;for(let c=0;c<o;c++){let h=a(n[c],n[c+1]);if(e){const f=Array.isArray(e)?e[c]||Xs:e;h=Th(f,h)}s.push(h)}return s}function hP(n,e,{clamp:t=!0,ease:s,mixer:a}={}){const o=n.length;if(u1(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=uP(e,s,a),f=h.length,p=y=>{if(c&&y<n[0])return e[0];let _=0;if(f>1)for(;_<n.length-2&&!(y<n[_+1]);_++);const w=uc(n[_],n[_+1],y);return h[_](w)};return t?y=>p(Kr(n[0],n[o-1],y)):p}function dP(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const a=uc(0,e,s);n.push(en(t,1,a))}}function fP(n){const e=[0];return dP(e,n.length-1),e}function mP(n,e){return n.map(t=>t*e)}function pP(n,e){return n.map(()=>e||fR).splice(0,n.length-1)}function Wf({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const a=lP(s)?s.map(ZT):ZT(s),o={done:!1,value:e[0]},c=mP(t&&t.length===e.length?t:fP(e),n),h=hP(c,e,{ease:Array.isArray(a)?a:pP(e,a)});return{calculatedDuration:n,next:f=>(o.value=h(f),o.done=f>=n,o)}}const gP=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Xt.update(e,!0),stop:()=>Ha(e),now:()=>Xn.isProcessing?Xn.timestamp:sr.now()}},yP={decay:QT,inertia:QT,tween:Wf,keyframes:Wf,spring:dR},vP=n=>n/100;class Ov extends lR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:t,motionValue:s,element:a,keyframes:o}=this.options,c=(a==null?void 0:a.KeyframeResolver)||kv,h=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new c(o,h,t,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:c=0}=this.options,h=bv(t)?t:yP[t]||Wf;let f,p;h!==Wf&&typeof e[0]!="number"&&(f=Th(vP,uR(e[0],e[1])),e=[0,100]);const y=h({...this.options,keyframes:e});o==="mirror"&&(p=h({...this.options,keyframes:[...e].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=N1(y));const{calculatedDuration:_}=y,w=_+a,x=w*(s+1)-a;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:_,resolvedDuration:w,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:s}=this;if(!s){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:c,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:p,totalDuration:y,resolvedDuration:_}=s;if(this.startTime===null)return o.next(0);const{delay:w,repeat:x,repeatType:C,repeatDelay:k,onUpdate:O}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const B=this.currentTime-w*(this.speed>=0?1:-1),V=this.speed>=0?B<0:B>y;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let H=this.currentTime,G=o;if(x){const R=Math.min(this.currentTime,y)/_;let I=Math.floor(R),P=R%1;!P&&R>=1&&(P=1),P===1&&I--,I=Math.min(I,x+1),!!(I%2)&&(C==="reverse"?(P=1-P,k&&(P-=k/_)):C==="mirror"&&(G=c)),H=Kr(0,1,P)*_}const F=V?{done:!1,value:f[0]}:G.next(H);h&&(F.value=h(F.value));let{done:te}=F;!V&&p!==null&&(te=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return S&&a!==void 0&&(F.value=Om(f,this.options,a)),O&&O(F.value),S&&this.finish(),F}get duration(){const{resolved:e}=this;return e?$r(e.calculatedDuration):0}get time(){return $r(this.currentTime)}set time(e){e=qr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=$r(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=gP,onPlay:t,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const _P=new Set(["opacity","clipPath","filter","transform"]);function bP(n,e,t,{delay:s=0,duration:a=300,repeat:o=0,repeatType:c="loop",ease:h="easeInOut",times:f}={}){const p={[e]:t};f&&(p.offset=f);const y=O1(h,a);return Array.isArray(y)&&(p.easing=y),n.animate(p,{delay:s,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"})}const wP=rv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Yf=10,EP=2e4;function TP(n){return bv(n.type)||n.type==="spring"||!M1(n.ease)}function xP(n,e){const t=new Ov({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:n[0]};const a=[];let o=0;for(;!s.done&&o<EP;)s=t.sample(o),a.push(s.value),o+=Yf;return{times:void 0,keyframes:a,duration:o-Yf,ease:"linear"}}const mR={anticipate:$1,backInOut:q1,circInOut:K1};function SP(n){return n in mR}class JT extends lR{constructor(e){super(e);const{name:t,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new oR(o,(c,h)=>this.onKeyframesResolved(c,h),t,s,a),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:s=300,times:a,ease:o,type:c,motionValue:h,name:f,startTime:p}=this.options;if(!h.owner||!h.owner.current)return!1;if(typeof o=="string"&&Gf()&&SP(o)&&(o=mR[o]),TP(this.options)){const{onComplete:_,onUpdate:w,motionValue:x,element:C,...k}=this.options,O=xP(e,k);e=O.keyframes,e.length===1&&(e[1]=e[0]),s=O.duration,a=O.times,o=O.ease,c="keyframes"}const y=bP(h.owner.current,f,e,{...this.options,duration:s,times:a,ease:o});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(VT(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:_}=this.options;h.set(Om(e,this.options,t)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:s,times:a,type:c,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return $r(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return $r(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.currentTime=qr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Xs;const{animation:s}=t;VT(s,e)}return Xs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:s,duration:a,type:o,ease:c,times:h}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:_,element:w,...x}=this.options,C=new Ov({...x,keyframes:s,duration:a,type:o,ease:c,times:h,isGenerator:!0}),k=qr(this.time);p.setWithVelocity(C.sample(k-Yf).value,C.sample(k).value,Yf)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:s,repeatDelay:a,repeatType:o,damping:c,type:h}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=t.owner.getProps();return wP()&&s&&_P.has(s)&&!f&&!p&&!a&&o!=="mirror"&&c!==0&&h!=="inertia"}}const AP={type:"spring",stiffness:500,damping:25,restSpeed:10},RP=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),CP={type:"keyframes",duration:.8},IP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NP=(n,{keyframes:e})=>e.length>2?CP:tl.has(n)?n.startsWith("scale")?RP(e[1]):AP:IP;function kP({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:c,repeatDelay:h,from:f,elapsed:p,...y}){return!!Object.keys(y).length}const Dv=(n,e,t,s={},a,o)=>c=>{const h=_v(s,n)||{},f=h.delay||s.delay||0;let{elapsed:p=0}=s;p=p-qr(f);let y={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:w=>{e.set(w),h.onUpdate&&h.onUpdate(w)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:a};kP(h)||(y={...y,...NP(n,y)}),y.duration&&(y.duration=qr(y.duration)),y.repeatDelay&&(y.repeatDelay=qr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let _=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(_=!0)),_&&!o&&e.get()!==void 0){const w=Om(y.keyframes,h);if(w!==void 0)return Xt.update(()=>{y.onUpdate(w),y.onComplete()}),new XO([])}return!o&&JT.supports(y)?new JT(y):new Ov(y)};function MP({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function pR(n,e,{delay:t=0,transitionOverride:s,type:a}={}){var o;let{transition:c=n.getDefaultTransition(),transitionEnd:h,...f}=e;s&&(c=s);const p=[],y=a&&n.animationState&&n.animationState.getState()[a];for(const _ in f){const w=n.getValue(_,(o=n.latestValues[_])!==null&&o!==void 0?o:null),x=f[_];if(x===void 0||y&&MP(y,_))continue;const C={delay:t,..._v(c||{},_)};let k=!1;if(window.MotionHandoffAnimation){const B=z1(n);if(B){const V=window.MotionHandoffAnimation(B,_,Xt);V!==null&&(C.startTime=V,k=!0)}}Qy(n,_),w.start(Dv(_,w,x,n.shouldReduceMotion&&V1.has(_)?{type:!1}:C,n,k));const O=w.animation;O&&p.push(O)}return h&&Promise.all(p).then(()=>{Xt.update(()=>{h&&uD(n,h)})}),p}function i0(n,e,t={}){var s;const a=Mm(n,e,t.type==="exit"?(s=n.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=a||{};t.transitionOverride&&(o=t.transitionOverride);const c=a?()=>Promise.all(pR(n,a,t)):()=>Promise.resolve(),h=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:_,staggerDirection:w}=o;return OP(n,e,y+p,_,w,t)}:()=>Promise.resolve(),{when:f}=o;if(f){const[p,y]=f==="beforeChildren"?[c,h]:[h,c];return p().then(()=>y())}else return Promise.all([c(),h(t.delay)])}function OP(n,e,t=0,s=0,a=1,o){const c=[],h=(n.variantChildren.size-1)*s,f=a===1?(p=0)=>p*s:(p=0)=>h-p*s;return Array.from(n.variantChildren).sort(DP).forEach((p,y)=>{p.notify("AnimationStart",e),c.push(i0(p,e,{...o,delay:t+f(y)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(c)}function DP(n,e){return n.sortNodePosition(e)}function PP(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(o=>i0(n,o,t));s=Promise.all(a)}else if(typeof e=="string")s=i0(n,e,t);else{const a=typeof e=="function"?Mm(n,e,t.custom):e;s=Promise.all(pR(n,a,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const LP=ov.length;function gR(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?gR(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<LP;t++){const s=ov[t],a=n.props[s];(rh(a)||a===!1)&&(e[s]=a)}return e}const VP=[...av].reverse(),jP=av.length;function zP(n){return e=>Promise.all(e.map(({animation:t,options:s})=>PP(n,t,s)))}function UP(n){let e=zP(n),t=ex(),s=!0;const a=f=>(p,y)=>{var _;const w=Mm(n,y,f==="exit"?(_=n.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(w){const{transition:x,transitionEnd:C,...k}=w;p={...p,...k,...C}}return p};function o(f){e=f(n)}function c(f){const{props:p}=n,y=gR(n.parent)||{},_=[],w=new Set;let x={},C=1/0;for(let O=0;O<jP;O++){const B=VP[O],V=t[B],H=p[B]!==void 0?p[B]:y[B],G=rh(H),F=B===f?V.isActive:null;F===!1&&(C=O);let te=H===y[B]&&H!==p[B]&&G;if(te&&s&&n.manuallyAnimateOnMount&&(te=!1),V.protectedKeys={...x},!V.isActive&&F===null||!H&&!V.prevProp||Nm(H)||typeof H=="boolean")continue;const S=BP(V.prevProp,H);let R=S||B===f&&V.isActive&&!te&&G||O>C&&G,I=!1;const P=Array.isArray(H)?H:[H];let L=P.reduce(a(B),{});F===!1&&(L={});const{prevResolvedValues:z={}}=V,D={...z,...L},Ne=se=>{R=!0,w.has(se)&&(I=!0,w.delete(se)),V.needsAnimating[se]=!0;const ae=n.getValue(se);ae&&(ae.liveStyle=!1)};for(const se in D){const ae=L[se],Ae=z[se];if(x.hasOwnProperty(se))continue;let M=!1;Wy(ae)&&Wy(Ae)?M=!I1(ae,Ae):M=ae!==Ae,M?ae!=null?Ne(se):w.add(se):ae!==void 0&&w.has(se)?Ne(se):V.protectedKeys[se]=!0}V.prevProp=H,V.prevResolvedValues=L,V.isActive&&(x={...x,...L}),s&&n.blockInitialAnimation&&(R=!1),R&&(!(te&&S)||I)&&_.push(...P.map(se=>({animation:se,options:{type:B}})))}if(w.size){const O={};w.forEach(B=>{const V=n.getBaseTarget(B),H=n.getValue(B);H&&(H.liveStyle=!0),O[B]=V??null}),_.push({animation:O})}let k=!!_.length;return s&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(k=!1),s=!1,k?e(_):Promise.resolve()}function h(f,p){var y;if(t[f].isActive===p)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(w=>{var x;return(x=w.animationState)===null||x===void 0?void 0:x.setActive(f,p)}),t[f].isActive=p;const _=c(f);for(const w in t)t[w].protectedKeys={};return _}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=ex(),s=!0}}}function BP(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!I1(e,n):!1}function Mo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ex(){return{animate:Mo(!0),whileInView:Mo(),whileHover:Mo(),whileTap:Mo(),whileDrag:Mo(),whileFocus:Mo(),exit:Mo()}}class Ja{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FP extends Ja{constructor(e){super(e),e.animationState||(e.animationState=UP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let HP=0;class qP extends Ja{constructor(){super(...arguments),this.id=HP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $P={animation:{Feature:FP},exit:{Feature:qP}};function ch(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function xh(n){return{point:{x:n.pageX,y:n.pageY}}}const GP=n=>e=>Ev(e)&&n(e,xh(e));function Wu(n,e,t,s){return ch(n,e,GP(t),s)}const tx=(n,e)=>Math.abs(n-e);function KP(n,e){const t=tx(n.x,e.x),s=tx(n.y,e.y);return Math.sqrt(t**2+s**2)}class yR{constructor(e,t,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=yy(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,x=KP(_.offset,{x:0,y:0})>=3;if(!w&&!x)return;const{point:C}=_,{timestamp:k}=Xn;this.history.push({...C,timestamp:k});const{onStart:O,onMove:B}=this.handlers;w||(O&&O(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,_)},this.handlePointerMove=(_,w)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=gy(w,this.transformPagePoint),Xt.update(this.updatePoint,!0)},this.handlePointerUp=(_,w)=>{this.end();const{onEnd:x,onSessionEnd:C,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=yy(_.type==="pointercancel"?this.lastMoveEventInfo:gy(w,this.transformPagePoint),this.history);this.startEvent&&x&&x(_,O),C&&C(_,O)},!Ev(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=s,this.contextWindow=a||window;const c=xh(e),h=gy(c,this.transformPagePoint),{point:f}=h,{timestamp:p}=Xn;this.history=[{...f,timestamp:p}];const{onSessionStart:y}=t;y&&y(e,yy(h,this.history)),this.removeListeners=Th(Wu(this.contextWindow,"pointermove",this.handlePointerMove),Wu(this.contextWindow,"pointerup",this.handlePointerUp),Wu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ha(this.updatePoint)}}function gy(n,e){return e?{point:e(n.point)}:n}function nx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function yy({point:n},e){return{point:n,delta:nx(n,vR(e)),offset:nx(n,WP(e)),velocity:YP(e,.1)}}function WP(n){return n[0]}function vR(n){return n[n.length-1]}function YP(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const a=vR(n);for(;t>=0&&(s=n[t],!(a.timestamp-s.timestamp>qr(e)));)t--;if(!s)return{x:0,y:0};const o=$r(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const c={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const _R=1e-4,XP=1-_R,QP=1+_R,bR=.01,ZP=0-bR,JP=0+bR;function Zs(n){return n.max-n.min}function eL(n,e,t){return Math.abs(n-e)<=t}function sx(n,e,t,s=.5){n.origin=s,n.originPoint=en(e.min,e.max,n.origin),n.scale=Zs(t)/Zs(e),n.translate=en(t.min,t.max,n.origin)-n.originPoint,(n.scale>=XP&&n.scale<=QP||isNaN(n.scale))&&(n.scale=1),(n.translate>=ZP&&n.translate<=JP||isNaN(n.translate))&&(n.translate=0)}function Yu(n,e,t,s){sx(n.x,e.x,t.x,s?s.originX:void 0),sx(n.y,e.y,t.y,s?s.originY:void 0)}function ix(n,e,t){n.min=t.min+e.min,n.max=n.min+Zs(e)}function tL(n,e,t){ix(n.x,e.x,t.x),ix(n.y,e.y,t.y)}function rx(n,e,t){n.min=e.min-t.min,n.max=n.min+Zs(e)}function Xu(n,e,t){rx(n.x,e.x,t.x),rx(n.y,e.y,t.y)}function nL(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?en(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?en(t,n,s.max):Math.min(n,t)),n}function ax(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function sL(n,{top:e,left:t,bottom:s,right:a}){return{x:ax(n.x,t,a),y:ax(n.y,e,s)}}function ox(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function iL(n,e){return{x:ox(n.x,e.x),y:ox(n.y,e.y)}}function rL(n,e){let t=.5;const s=Zs(n),a=Zs(e);return a>s?t=uc(e.min,e.max-s,n.min):s>a&&(t=uc(n.min,n.max-a,e.min)),Kr(0,1,t)}function aL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const r0=.35;function oL(n=r0){return n===!1?n=0:n===!0&&(n=r0),{x:lx(n,"left","right"),y:lx(n,"top","bottom")}}function lx(n,e,t){return{min:cx(n,e),max:cx(n,t)}}function cx(n,e){return typeof n=="number"?n:n[e]||0}const ux=()=>({translate:0,scale:1,origin:0,originPoint:0}),ec=()=>({x:ux(),y:ux()}),hx=()=>({min:0,max:0}),dn=()=>({x:hx(),y:hx()});function gi(n){return[n("x"),n("y")]}function wR({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function lL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function cL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function vy(n){return n===void 0||n===1}function a0({scale:n,scaleX:e,scaleY:t}){return!vy(n)||!vy(e)||!vy(t)}function Po(n){return a0(n)||ER(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function ER(n){return dx(n.x)||dx(n.y)}function dx(n){return n&&n!=="0%"}function Xf(n,e,t){const s=n-t,a=e*s;return t+a}function fx(n,e,t,s,a){return a!==void 0&&(n=Xf(n,a,s)),Xf(n,t,s)+e}function o0(n,e=0,t=1,s,a){n.min=fx(n.min,e,t,s,a),n.max=fx(n.max,e,t,s,a)}function TR(n,{x:e,y:t}){o0(n.x,e.translate,e.scale,e.originPoint),o0(n.y,t.translate,t.scale,t.originPoint)}const mx=.999999999999,px=1.0000000000001;function uL(n,e,t,s=!1){const a=t.length;if(!a)return;e.x=e.y=1;let o,c;for(let h=0;h<a;h++){o=t[h],c=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&nc(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,TR(n,c)),s&&Po(o.latestValues)&&nc(n,o.latestValues))}e.x<px&&e.x>mx&&(e.x=1),e.y<px&&e.y>mx&&(e.y=1)}function tc(n,e){n.min=n.min+e,n.max=n.max+e}function gx(n,e,t,s,a=.5){const o=en(n.min,n.max,a);o0(n,e,t,o,s)}function nc(n,e){gx(n.x,e.x,e.scaleX,e.scale,e.originX),gx(n.y,e.y,e.scaleY,e.scale,e.originY)}function xR(n,e){return wR(cL(n.getBoundingClientRect(),e))}function hL(n,e,t){const s=xR(n,t),{scroll:a}=e;return a&&(tc(s.x,a.offset.x),tc(s.y,a.offset.y)),s}const SR=({current:n})=>n?n.ownerDocument.defaultView:null,dL=new WeakMap;class fL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(xh(y).point)},o=(y,_)=>{const{drag:w,dragPropagation:x,onDragStart:C}=this.getProps();if(w&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rD(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi(O=>{let B=this.getAxisMotionValue(O).get()||0;if(nr.test(B)){const{projection:V}=this.visualElement;if(V&&V.layout){const H=V.layout.layoutBox[O];H&&(B=Zs(H)*(parseFloat(B)/100))}}this.originPoint[O]=B}),C&&Xt.postRender(()=>C(y,_)),Qy(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},c=(y,_)=>{const{dragPropagation:w,dragDirectionLock:x,onDirectionLock:C,onDrag:k}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:O}=_;if(x&&this.currentDirection===null){this.currentDirection=mL(O),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",_.point,O),this.updateAxis("y",_.point,O),this.visualElement.render(),k&&k(y,_)},h=(y,_)=>this.stop(y,_),f=()=>gi(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new yR(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:SR(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=t;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Xt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:a}=this.getProps();if(!s||!rf(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=nL(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&Zl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=sL(a.layoutBox,t):this.constraints=!1,this.elastic=oL(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&gi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=aL(a.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Zl(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=hL(s,a.root,this.visualElement.getTransformPagePoint());let c=iL(a.layout.layoutBox,o);if(t){const h=t(lL(c));this.hasMutatedConstraints=!!h,h&&(c=wR(h))}return c}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=gi(y=>{if(!rf(y,t,this.currentDirection))return;let _=f&&f[y]||{};c&&(_={min:0,max:0});const w=a?200:1e6,x=a?40:1e7,C={type:"inertia",velocity:s?e[y]:0,bounceStiffness:w,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(y,C)});return Promise.all(p).then(h)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Qy(this.visualElement,e),s.start(Dv(e,s,0,t,this.visualElement,!1))}stopAnimation(){gi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gi(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[t];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){gi(t=>{const{drag:s}=this.getProps();if(!rf(t,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(t);if(a&&a.layout){const{min:c,max:h}=a.layout.layoutBox[t];o.set(e[t]-en(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Zl(t)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};gi(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const f=h.get();a[c]=rL({min:f,max:f},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gi(c=>{if(!rf(c,e,null))return;const h=this.getAxisMotionValue(c),{min:f,max:p}=this.constraints[c];h.set(en(f,p,a[c]))})}addListeners(){if(!this.visualElement.current)return;dL.set(this.visualElement,this);const e=this.visualElement.current,t=Wu(e,"pointerdown",f=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Zl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Xt.read(s);const c=ch(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(gi(y=>{const _=this.getAxisMotionValue(y);_&&(this.originPoint[y]+=f[y].translate,_.set(_.get()+f[y].translate))}),this.visualElement.render())});return()=>{c(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:c=r0,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function rf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function mL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class pL extends Ja{constructor(e){super(e),this.removeGroupControls=Xs,this.removeListeners=Xs,this.controls=new fL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xs}unmount(){this.removeGroupControls(),this.removeListeners()}}const yx=n=>(e,t)=>{n&&Xt.postRender(()=>n(e,t))};class gL extends Ja{constructor(){super(...arguments),this.removePointerDownListener=Xs}onPointerDown(e){this.session=new yR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:yx(e),onStart:yx(t),onMove:s,onEnd:(o,c)=>{delete this.session,a&&Xt.postRender(()=>a(o,c))}}}mount(){this.removePointerDownListener=Wu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vx(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ru={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Fe.test(n))n=parseFloat(n);else return n;const t=vx(n,e.target.x),s=vx(n,e.target.y);return`${t}% ${s}%`}},yL={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,a=qa.parse(n);if(a.length>5)return s;const o=qa.createTransformer(n),c=typeof a[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;a[0+c]/=h,a[1+c]/=f;const p=en(h,f,.5);return typeof a[2+c]=="number"&&(a[2+c]/=p),typeof a[3+c]=="number"&&(a[3+c]/=p),o(a)}};class vL extends $.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=e;jO(_L),o&&(t.group&&t.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Tf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:a,isPresent:o}=this.props,c=s.projection;return c&&(c.isPresent=o,a||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Xt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AR(n){const[e,t]=l1(),s=$.useContext(tv);return v.jsx(vL,{...n,layoutGroup:s,switchLayoutGroup:$.useContext(g1),isPresent:e,safeToRemove:t})}const _L={borderRadius:{...Ru,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ru,borderTopRightRadius:Ru,borderBottomLeftRadius:Ru,borderBottomRightRadius:Ru,boxShadow:yL};function bL(n,e,t){const s=ps(n)?n:oh(n);return s.start(Dv("",s,e,t)),s.animation}function wL(n){return n instanceof SVGElement&&n.tagName!=="svg"}const EL=(n,e)=>n.depth-e.depth;class TL{constructor(){this.children=[],this.isDirty=!1}add(e){Tv(this.children,e),this.isDirty=!0}remove(e){xv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EL),this.isDirty=!1,this.children.forEach(e)}}function xL(n,e){const t=sr.now(),s=({timestamp:a})=>{const o=a-t;o>=e&&(Ha(s),n(o-e))};return Xt.read(s,!0),()=>Ha(s)}const RR=["TopLeft","TopRight","BottomLeft","BottomRight"],SL=RR.length,_x=n=>typeof n=="string"?parseFloat(n):n,bx=n=>typeof n=="number"||Fe.test(n);function AL(n,e,t,s,a,o){a?(n.opacity=en(0,t.opacity!==void 0?t.opacity:1,RL(s)),n.opacityExit=en(e.opacity!==void 0?e.opacity:1,0,CL(s))):o&&(n.opacity=en(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let c=0;c<SL;c++){const h=`border${RR[c]}Radius`;let f=wx(e,h),p=wx(t,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||bx(f)===bx(p)?(n[h]=Math.max(en(_x(f),_x(p),s),0),(nr.test(p)||nr.test(f))&&(n[h]+="%")):n[h]=p}(e.rotate||t.rotate)&&(n.rotate=en(e.rotate||0,t.rotate||0,s))}function wx(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const RL=CR(0,.5,G1),CL=CR(.5,.95,Xs);function CR(n,e,t){return s=>s<n?0:s>e?1:t(uc(n,e,s))}function Ex(n,e){n.min=e.min,n.max=e.max}function pi(n,e){Ex(n.x,e.x),Ex(n.y,e.y)}function Tx(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function xx(n,e,t,s,a){return n-=e,n=Xf(n,1/t,s),a!==void 0&&(n=Xf(n,1/a,s)),n}function IL(n,e=0,t=1,s=.5,a,o=n,c=n){if(nr.test(e)&&(e=parseFloat(e),e=en(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=en(o.min,o.max,s);n===o&&(h-=e),n.min=xx(n.min,e,t,h,a),n.max=xx(n.max,e,t,h,a)}function Sx(n,e,[t,s,a],o,c){IL(n,e[t],e[s],e[a],e.scale,o,c)}const NL=["x","scaleX","originX"],kL=["y","scaleY","originY"];function Ax(n,e,t,s){Sx(n.x,e,NL,t?t.x:void 0,s?s.x:void 0),Sx(n.y,e,kL,t?t.y:void 0,s?s.y:void 0)}function Rx(n){return n.translate===0&&n.scale===1}function IR(n){return Rx(n.x)&&Rx(n.y)}function Cx(n,e){return n.min===e.min&&n.max===e.max}function ML(n,e){return Cx(n.x,e.x)&&Cx(n.y,e.y)}function Ix(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function NR(n,e){return Ix(n.x,e.x)&&Ix(n.y,e.y)}function Nx(n){return Zs(n.x)/Zs(n.y)}function kx(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class OL{constructor(){this.members=[]}add(e){Tv(this.members,e),e.scheduleRender()}remove(e){if(xv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let s;for(let a=t;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DL(n,e,t){let s="";const a=n.x.translate/e.x,o=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((a||o||c)&&(s=`translate3d(${a}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:y,rotateX:_,rotateY:w,skewX:x,skewY:C}=t;p&&(s=`perspective(${p}px) ${s}`),y&&(s+=`rotate(${y}deg) `),_&&(s+=`rotateX(${_}deg) `),w&&(s+=`rotateY(${w}deg) `),x&&(s+=`skewX(${x}deg) `),C&&(s+=`skewY(${C}deg) `)}const h=n.x.scale*e.x,f=n.y.scale*e.y;return(h!==1||f!==1)&&(s+=`scale(${h}, ${f})`),s||"none"}const Lo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ku=typeof window<"u"&&window.MotionDebug!==void 0,_y=["","X","Y","Z"],PL={visibility:"hidden"},Mx=1e3;let LL=0;function by(n,e,t,s){const{latestValues:a}=e;a[n]&&(t[n]=a[n],e.setStaticValue(n,0),s&&(s[n]=0))}function kR(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=z1(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Xt,!(a||o))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&kR(s)}function MR({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(c={},h=e==null?void 0:e()){this.id=LL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ku&&(Lo.totalNodes=Lo.resolvedTargetDeltas=Lo.recalculatedProjection=0),this.nodes.forEach(zL),this.nodes.forEach(qL),this.nodes.forEach($L),this.nodes.forEach(UL),ku&&window.MotionDebug.record(Lo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new TL)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Sv),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const f=this.eventHandlers.get(c);f&&f.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wL(c),this.instance=c;const{layoutId:f,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),n){let _;const w=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=xL(w,250),Tf.hasAnimatedSinceResize&&(Tf.hasAnimatedSinceResize=!1,this.nodes.forEach(Dx))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&y&&(f||p)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:w,hasRelativeTargetChanged:x,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||y.getDefaultTransition()||XL,{onLayoutAnimationStart:O,onLayoutAnimationComplete:B}=y.getProps(),V=!this.targetLayout||!NR(this.targetLayout,C)||x,H=!w&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||w&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,H);const G={..._v(k,"layout"),onPlay:O,onComplete:B};(y.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else w||Dx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ha(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const _=this.path[y];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ox);return}this.isUpdating||this.nodes.forEach(FL),this.isUpdating=!1,this.nodes.forEach(HL),this.nodes.forEach(VL),this.nodes.forEach(jL),this.clearAllSnapshots();const h=sr.now();Xn.delta=Kr(0,1e3/60,h-Xn.timestamp),Xn.timestamp=h,Xn.isProcessing=!0,uy.update.process(Xn),uy.preRender.process(Xn),uy.render.process(Xn),Xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BL),this.sharedNodes.forEach(KL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!IR(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&(h||Po(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return c&&(f=this.removeTransform(f)),QL(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:h}=this.options;if(!h)return dn();const f=h.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(ZL))){const{scroll:y}=this.root;y&&(tc(f.x,y.offset.x),tc(f.y,y.offset.y))}return f}removeElementScroll(c){var h;const f=dn();if(pi(f,c),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:_,options:w}=y;y!==this.root&&_&&w.layoutScroll&&(_.wasRoot&&pi(f,c),tc(f.x,_.offset.x),tc(f.y,_.offset.y))}return f}applyTransform(c,h=!1){const f=dn();pi(f,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&nc(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Po(y.latestValues)&&nc(f,y.latestValues)}return Po(this.latestValues)&&nc(f,this.latestValues),f}removeTransform(c){const h=dn();pi(h,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!Po(p.latestValues))continue;a0(p.latestValues)&&p.updateSnapshot();const y=dn(),_=p.measurePageBox();pi(y,_),Ax(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Po(this.latestValues)&&Ax(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:w}=this.options;if(!(!this.layout||!(_||w))){if(this.resolvedRelativeTargetAt=Xn.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),Xu(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dn(),this.targetWithTransforms=dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pi(this.target,this.layout.layoutBox),TR(this.target,this.targetDelta)):pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),Xu(this.relativeTargetOrigin,this.target,x.target),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ku&&Lo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||a0(this.parent.latestValues)||ER(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Xn.timestamp&&(p=!1),p)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;pi(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,x=this.treeScale.y;uL(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=dn());const{target:C}=h;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Tx(this.prevProjectionDelta.x,this.projectionDelta.x),Tx(this.prevProjectionDelta.y,this.projectionDelta.y)),Yu(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==x||!kx(this.projectionDelta.x,this.prevProjectionDelta.x)||!kx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),ku&&Lo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ec(),this.projectionDelta=ec(),this.projectionDeltaWithTransform=ec()}setAnimationOrigin(c,h=!1){const f=this.snapshot,p=f?f.latestValues:{},y={...this.latestValues},_=ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=dn(),x=f?f.source:void 0,C=this.layout?this.layout.source:void 0,k=x!==C,O=this.getStack(),B=!O||O.members.length<=1,V=!!(k&&!B&&this.options.crossfade===!0&&!this.path.some(YL));this.animationProgress=0;let H;this.mixTargetDelta=G=>{const F=G/1e3;Px(_.x,c.x,F),Px(_.y,c.y,F),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xu(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),WL(this.relativeTarget,this.relativeTargetOrigin,w,F),H&&ML(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=dn()),pi(H,this.relativeTarget)),k&&(this.animationValues=y,AL(y,p,this.latestValues,F,V,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ha(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xt.update(()=>{Tf.hasAnimatedSinceResize=!0,this.currentAnimation=bL(0,Mx,{...c,onUpdate:h=>{this.mixTargetDelta(h),c.onUpdate&&c.onUpdate(h)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:y}=c;if(!(!h||!f||!p)){if(this!==c&&this.layout&&p&&OR(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||dn();const _=Zs(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+_;const w=Zs(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+w}pi(h,f),nc(h,y),Yu(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new OL),this.sharedNodes.get(c).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:h}=this.options;return h?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:h}=this.options;return h?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&by("z",c,p,this.animationValues);for(let y=0;y<_y.length;y++)by(`rotate${_y[y]}`,c,p,this.animationValues),by(`skew${_y[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}getProjectionStyles(c){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PL;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=wf(c==null?void 0:c.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=wf(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Po(this.latestValues)&&(k.transform=y?y({},""):"none",this.hasProjected=!1),k}const w=_.animationValues||_.latestValues;this.applyTransformsToTarget(),p.transform=DL(this.projectionDeltaWithTransform,this.treeScale,w),y&&(p.transform=y(w,p.transform));const{x,y:C}=this.projectionDelta;p.transformOrigin=`${x.origin*100}% ${C.origin*100}% 0`,_.animationValues?p.opacity=_===this?(f=(h=w.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:p.opacity=_===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const k in $f){if(w[k]===void 0)continue;const{correct:O,applyTo:B}=$f[k],V=p.transform==="none"?w[k]:O(w[k],_);if(B){const H=B.length;for(let G=0;G<H;G++)p[B[G]]=V}else p[k]=V}return this.options.layoutId&&(p.pointerEvents=_===this?wf(c==null?void 0:c.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(Ox),this.root.sharedNodes.clear()}}}function VL(n){n.updateLayout()}function jL(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=n.layout,{animationType:o}=n.options,c=t.source!==n.layout.source;o==="size"?gi(_=>{const w=c?t.measuredBox[_]:t.layoutBox[_],x=Zs(w);w.min=s[_].min,w.max=w.min+x}):OR(o,t.layoutBox,s)&&gi(_=>{const w=c?t.measuredBox[_]:t.layoutBox[_],x=Zs(s[_]);w.max=w.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+x)});const h=ec();Yu(h,s,t.layoutBox);const f=ec();c?Yu(f,n.applyTransform(a,!0),t.measuredBox):Yu(f,s,t.layoutBox);const p=!IR(h);let y=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:w,layout:x}=_;if(w&&x){const C=dn();Xu(C,t.layoutBox,w.layoutBox);const k=dn();Xu(k,s,x.layoutBox),NR(C,k)||(y=!0),_.options.layoutRoot&&(n.relativeTarget=k,n.relativeTargetOrigin=C,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:y})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function zL(n){ku&&Lo.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function UL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function BL(n){n.clearSnapshot()}function Ox(n){n.clearMeasurements()}function FL(n){n.isLayoutDirty=!1}function HL(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Dx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function qL(n){n.resolveTargetDelta()}function $L(n){n.calcProjection()}function GL(n){n.resetSkewAndRotation()}function KL(n){n.removeLeadSnapshot()}function Px(n,e,t){n.translate=en(e.translate,0,t),n.scale=en(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Lx(n,e,t,s){n.min=en(e.min,t.min,s),n.max=en(e.max,t.max,s)}function WL(n,e,t,s){Lx(n.x,e.x,t.x,s),Lx(n.y,e.y,t.y,s)}function YL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const XL={duration:.45,ease:[.4,0,.1,1]},Vx=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),jx=Vx("applewebkit/")&&!Vx("chrome/")?Math.round:Xs;function zx(n){n.min=jx(n.min),n.max=jx(n.max)}function QL(n){zx(n.x),zx(n.y)}function OR(n,e,t){return n==="position"||n==="preserve-aspect"&&!eL(Nx(e),Nx(t),.2)}function ZL(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const JL=MR({attachResizeListener:(n,e)=>ch(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wy={current:void 0},DR=MR({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!wy.current){const n=new JL({});n.mount(window),n.setOptions({layoutScroll:!0}),wy.current=n}return wy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),eV={pan:{Feature:gL},drag:{Feature:pL,ProjectionNode:DR,MeasureLayout:AR}};function Ux(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,o=s[a];o&&Xt.postRender(()=>o(e,xh(e)))}class tV extends Ja{mount(){const{current:e}=this.node;e&&(this.unmount=eD(e,t=>(Ux(this.node,t,"Start"),s=>Ux(this.node,s,"End"))))}unmount(){}}class nV extends Ja{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Th(ch(this.node.current,"focus",()=>this.onFocus()),ch(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bx(n,e,t){const{props:s}=n;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),o=s[a];o&&Xt.postRender(()=>o(e,xh(e)))}class sV extends Ja{mount(){const{current:e}=this.node;e&&(this.unmount=iD(e,t=>(Bx(this.node,t,"Start"),(s,{success:a})=>Bx(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const l0=new WeakMap,Ey=new WeakMap,iV=n=>{const e=l0.get(n.target);e&&e(n)},rV=n=>{n.forEach(iV)};function aV({root:n,...e}){const t=n||document;Ey.has(t)||Ey.set(t,{});const s=Ey.get(t),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(rV,{root:n,...e})),s[a]}function oV(n,e,t){const s=aV(e);return l0.set(n,t),s.observe(n),()=>{l0.delete(n),s.unobserve(n)}}const lV={some:0,all:1};class cV extends Ja{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:a="some",once:o}=e,c={root:t?t.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:lV[a]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:_}=this.node.getProps(),w=p?y:_;w&&w(f)};return oV(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(uV(e,t))&&this.startObserver()}unmount(){}}function uV({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const hV={inView:{Feature:cV},tap:{Feature:sV},focus:{Feature:nV},hover:{Feature:tV}},dV={layout:{ProjectionNode:DR,MeasureLayout:AR}},c0={current:null},PR={current:!1};function fV(){if(PR.current=!0,!!iv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>c0.current=n.matches;n.addListener(e),e()}else c0.current=!1}const mV=[...aR,ds,qa],pV=n=>mV.find(rR(n)),Fx=new WeakMap;function gV(n,e,t){for(const s in e){const a=e[s],o=t[s];if(ps(a))n.addValue(s,a);else if(ps(o))n.addValue(s,oh(a,{owner:n}));else if(o!==a)if(n.hasValue(s)){const c=n.getValue(s);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=n.getStaticValue(s);n.addValue(s,oh(c!==void 0?c:a,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const Hx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yV{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=sr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Xt.render(this.render,!1,!0))};const{latestValues:f,renderState:p,onUpdate:y}=c;this.onUpdate=y,this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=km(t),this.isVariantNode=m1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...w}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in w){const C=w[x];f[x]!==void 0&&ps(C)&&C.set(f[x],!1)}}mount(e){this.current=e,Fx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),PR.current||fV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:c0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Fx.delete(this.current),this.projection&&this.projection.unmount(),Ha(this.notifyUpdate),Ha(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=tl.has(e),a=t.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&Xt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),o(),c&&c(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in hc){const t=hc[e];if(!t)continue;const{isEnabled:s,Feature:a}=t;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<Hx.length;s++){const a=Hx[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,c=e[o];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=gV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=oh(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(sR(a)||W1(a))?a=parseFloat(a):!pV(a)&&qa.test(t)&&(a=eR(e,t)),this.setBaseTarget(e,ps(a)?a.get():a)),ps(a)?a.get():a}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const c=hv(this.props,s,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);c&&(a=c[e])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ps(o)?o:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Sv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class LR extends yV{constructor(){super(...arguments),this.KeyframeResolver=oR}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ps(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function vV(n){return window.getComputedStyle(n)}class _V extends LR{constructor(){super(...arguments),this.type="html",this.renderInstance=T1}readValueFromInstance(e,t){if(tl.has(t)){const s=Nv(t);return s&&s.default||0}else{const s=vV(e),a=(b1(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return xR(e,t)}build(e,t,s){mv(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return vv(e,t,s)}}class bV extends LR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(tl.has(t)){const s=Nv(t);return s&&s.default||0}return t=x1.has(t)?t:lv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return R1(e,t,s)}build(e,t,s){pv(e,t,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,s,a){S1(e,t,s,a)}mount(e){this.isSVGTag=yv(e.tagName),super.mount(e)}}const wV=(n,e)=>uv(n)?new bV(e):new _V(e,{allowProjection:n!==$.Fragment}),EV=KO({...$P,...hV,...eV,...dV},wV),Ut=lO(EV),TV=({className:n=""})=>v.jsxs("div",{className:`flex items-center space-x-1 ${n}`,children:[v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-zinc-500 dark:bg-zinc-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),v.jsx("div",{className:"w-2 h-2 bg-zinc-500 dark:bg-zinc-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),v.jsx("div",{className:"w-2 h-2 bg-zinc-500 dark:bg-zinc-400 rounded-full animate-bounce"})]}),v.jsx("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 ml-2",children:"AI is typing..."})]}),xV=({reasoning:n,isReasoningComplete:e,isStreaming:t})=>{const[s,a]=$.useState(!1);return n?v.jsxs("div",{className:"mb-3 border border-pink-200 dark:border-pink-800/50 rounded-lg overflow-hidden",children:[v.jsxs("button",{onClick:()=>a(!s),className:"w-full flex items-center gap-2 p-3 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-950/30 dark:to-purple-950/30 hover:from-pink-100 hover:to-purple-100 dark:hover:from-pink-900/40 dark:hover:to-purple-900/40 transition-all text-left",children:[v.jsx(BM,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"}),v.jsx("span",{className:"text-sm font-semibold text-pink-800 dark:text-pink-200",children:"AI Reasoning"}),!e&&t&&v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("div",{className:"w-1 h-1 bg-pink-600 dark:bg-pink-400 rounded-full animate-pulse"}),v.jsx("div",{className:"w-1 h-1 bg-purple-600 dark:bg-purple-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),v.jsx("div",{className:"w-1 h-1 bg-pink-600 dark:bg-pink-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),v.jsx("div",{className:"ml-auto",children:s?v.jsx(ev,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"}):v.jsx(FM,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"})})]}),v.jsx(Oi,{children:s&&v.jsx(Ut.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-auto thin-scrollbar",style:{maxHeight:"300px"},children:v.jsx("div",{className:"p-3 bg-white dark:bg-zinc-900 border-t border-pink-200 dark:border-pink-800/50",children:v.jsxs("div",{className:"text-sm text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap",children:[n,!e&&t&&v.jsx("span",{className:"inline-block w-0.5 h-4 bg-gradient-to-r from-pink-600 to-purple-600 opacity-75 animate-pulse ml-1"})]})})})})]}):null},VR=n=>v.jsx("div",{className:"my-4",...n,children:v.jsxs("div",{className:"w-full h-px relative",children:[v.jsx("div",{className:"absolute inset-0 dark:hidden",style:{background:"linear-gradient(to right, transparent 0%, rgb(161 161 170) 15%, rgb(161 161 170) 90%, transparent 100%)"}}),v.jsx("div",{className:"absolute inset-0 dark:block hidden",style:{background:"linear-gradient(to right, transparent 0%, rgb(82 82 91) 15%, rgb(82 82 91) 90%, transparent 100%)"}})]})});var Ty,qx;function SV(){if(qx)return Ty;qx=1;function n(U){return U instanceof Map?U.clear=U.delete=U.set=function(){throw new Error("map is read-only")}:U instanceof Set&&(U.add=U.clear=U.delete=function(){throw new Error("set is read-only")}),Object.freeze(U),Object.getOwnPropertyNames(U).forEach(ue=>{const _e=U[ue],je=typeof _e;(je==="object"||je==="function")&&!Object.isFrozen(_e)&&n(_e)}),U}class e{constructor(ue){ue.data===void 0&&(ue.data={}),this.data=ue.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(U){return U.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function s(U,...ue){const _e=Object.create(null);for(const je in U)_e[je]=U[je];return ue.forEach(function(je){for(const At in je)_e[At]=je[At]}),_e}const a="</span>",o=U=>!!U.scope,c=(U,{prefix:ue})=>{if(U.startsWith("language:"))return U.replace("language:","language-");if(U.includes(".")){const _e=U.split(".");return[`${ue}${_e.shift()}`,..._e.map((je,At)=>`${je}${"_".repeat(At+1)}`)].join(" ")}return`${ue}${U}`};class h{constructor(ue,_e){this.buffer="",this.classPrefix=_e.classPrefix,ue.walk(this)}addText(ue){this.buffer+=t(ue)}openNode(ue){if(!o(ue))return;const _e=c(ue.scope,{prefix:this.classPrefix});this.span(_e)}closeNode(ue){o(ue)&&(this.buffer+=a)}value(){return this.buffer}span(ue){this.buffer+=`<span class="${ue}">`}}const f=(U={})=>{const ue={children:[]};return Object.assign(ue,U),ue};class p{constructor(){this.rootNode=f(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ue){this.top.children.push(ue)}openNode(ue){const _e=f({scope:ue});this.add(_e),this.stack.push(_e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ue){return this.constructor._walk(ue,this.rootNode)}static _walk(ue,_e){return typeof _e=="string"?ue.addText(_e):_e.children&&(ue.openNode(_e),_e.children.forEach(je=>this._walk(ue,je)),ue.closeNode(_e)),ue}static _collapse(ue){typeof ue!="string"&&ue.children&&(ue.children.every(_e=>typeof _e=="string")?ue.children=[ue.children.join("")]:ue.children.forEach(_e=>{p._collapse(_e)}))}}class y extends p{constructor(ue){super(),this.options=ue}addText(ue){ue!==""&&this.add(ue)}startScope(ue){this.openNode(ue)}endScope(){this.closeNode()}__addSublanguage(ue,_e){const je=ue.root;_e&&(je.scope=`language:${_e}`),this.add(je)}toHTML(){return new h(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function _(U){return U?typeof U=="string"?U:U.source:null}function w(U){return k("(?=",U,")")}function x(U){return k("(?:",U,")*")}function C(U){return k("(?:",U,")?")}function k(...U){return U.map(_e=>_(_e)).join("")}function O(U){const ue=U[U.length-1];return typeof ue=="object"&&ue.constructor===Object?(U.splice(U.length-1,1),ue):{}}function B(...U){return"("+(O(U).capture?"":"?:")+U.map(je=>_(je)).join("|")+")"}function V(U){return new RegExp(U.toString()+"|").exec("").length-1}function H(U,ue){const _e=U&&U.exec(ue);return _e&&_e.index===0}const G=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function F(U,{joinWith:ue}){let _e=0;return U.map(je=>{_e+=1;const At=_e;let Ht=_(je),be="";for(;Ht.length>0;){const we=G.exec(Ht);if(!we){be+=Ht;break}be+=Ht.substring(0,we.index),Ht=Ht.substring(we.index+we[0].length),we[0][0]==="\\"&&we[1]?be+="\\"+String(Number(we[1])+At):(be+=we[0],we[0]==="("&&_e++)}return be}).map(je=>`(${je})`).join(ue)}const te=/\b\B/,S="[a-zA-Z]\\w*",R="[a-zA-Z_]\\w*",I="\\b\\d+(\\.\\d+)?",P="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",L="\\b(0b[01]+)",z="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",D=(U={})=>{const ue=/^#![ ]*\//;return U.binary&&(U.begin=k(ue,/.*\b/,U.binary,/\b.*/)),s({scope:"meta",begin:ue,end:/$/,relevance:0,"on:begin":(_e,je)=>{_e.index!==0&&je.ignoreMatch()}},U)},Ne={begin:"\\\\[\\s\\S]",relevance:0},Le={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Ne]},Q={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Ne]},se={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},ae=function(U,ue,_e={}){const je=s({scope:"comment",begin:U,end:ue,contains:[]},_e);je.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const At=B("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return je.contains.push({begin:k(/[ ]+/,"(",At,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),je},Ae=ae("//","$"),M=ae("/\\*","\\*/"),Y=ae("#","$"),re={scope:"number",begin:I,relevance:0},le={scope:"number",begin:P,relevance:0},ge={scope:"number",begin:L,relevance:0},Me={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Ne,{begin:/\[/,end:/\]/,relevance:0,contains:[Ne]}]},he={scope:"title",begin:S,relevance:0},ve={scope:"title",begin:R,relevance:0},xe={begin:"\\.\\s*"+R,relevance:0};var tt=Object.freeze({__proto__:null,APOS_STRING_MODE:Le,BACKSLASH_ESCAPE:Ne,BINARY_NUMBER_MODE:ge,BINARY_NUMBER_RE:L,COMMENT:ae,C_BLOCK_COMMENT_MODE:M,C_LINE_COMMENT_MODE:Ae,C_NUMBER_MODE:le,C_NUMBER_RE:P,END_SAME_AS_BEGIN:function(U){return Object.assign(U,{"on:begin":(ue,_e)=>{_e.data._beginMatch=ue[1]},"on:end":(ue,_e)=>{_e.data._beginMatch!==ue[1]&&_e.ignoreMatch()}})},HASH_COMMENT_MODE:Y,IDENT_RE:S,MATCH_NOTHING_RE:te,METHOD_GUARD:xe,NUMBER_MODE:re,NUMBER_RE:I,PHRASAL_WORDS_MODE:se,QUOTE_STRING_MODE:Q,REGEXP_MODE:Me,RE_STARTERS_RE:z,SHEBANG:D,TITLE_MODE:he,UNDERSCORE_IDENT_RE:R,UNDERSCORE_TITLE_MODE:ve});function Xe(U,ue){U.input[U.index-1]==="."&&ue.ignoreMatch()}function cn(U,ue){U.className!==void 0&&(U.scope=U.className,delete U.className)}function nn(U,ue){ue&&U.beginKeywords&&(U.begin="\\b("+U.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",U.__beforeBegin=Xe,U.keywords=U.keywords||U.beginKeywords,delete U.beginKeywords,U.relevance===void 0&&(U.relevance=0))}function Pt(U,ue){Array.isArray(U.illegal)&&(U.illegal=B(...U.illegal))}function Li(U,ue){if(U.match){if(U.begin||U.end)throw new Error("begin & end are not supported with match");U.begin=U.match,delete U.match}}function Lt(U,ue){U.relevance===void 0&&(U.relevance=1)}const Wt=(U,ue)=>{if(!U.beforeMatch)return;if(U.starts)throw new Error("beforeMatch cannot be used with starts");const _e=Object.assign({},U);Object.keys(U).forEach(je=>{delete U[je]}),U.keywords=_e.keywords,U.begin=k(_e.beforeMatch,w(_e.begin)),U.starts={relevance:0,contains:[Object.assign(_e,{endsParent:!0})]},U.relevance=0,delete _e.beforeMatch},Vt=["of","and","for","in","not","or","if","then","parent","list","value"],Yt="keyword";function sn(U,ue,_e=Yt){const je=Object.create(null);return typeof U=="string"?At(_e,U.split(" ")):Array.isArray(U)?At(_e,U):Object.keys(U).forEach(function(Ht){Object.assign(je,sn(U[Ht],ue,Ht))}),je;function At(Ht,be){ue&&(be=be.map(we=>we.toLowerCase())),be.forEach(function(we){const Ce=we.split("|");je[Ce[0]]=[Ht,ss(Ce[0],Ce[1])]})}}function ss(U,ue){return ue?Number(ue):Bt(U)?0:1}function Bt(U){return Vt.includes(U.toLowerCase())}const Ft={},ot=U=>{console.error(U)},Tn=(U,...ue)=>{console.log(`WARN: ${U}`,...ue)},lt=(U,ue)=>{Ft[`${U}/${ue}`]||(console.log(`Deprecated as of ${U}. ${ue}`),Ft[`${U}/${ue}`]=!0)},pt=new Error;function is(U,ue,{key:_e}){let je=0;const At=U[_e],Ht={},be={};for(let we=1;we<=ue.length;we++)be[we+je]=At[we],Ht[we+je]=!0,je+=V(ue[we-1]);U[_e]=be,U[_e]._emit=Ht,U[_e]._multi=!0}function On(U){if(Array.isArray(U.begin)){if(U.skip||U.excludeBegin||U.returnBegin)throw ot("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),pt;if(typeof U.beginScope!="object"||U.beginScope===null)throw ot("beginScope must be object"),pt;is(U,U.begin,{key:"beginScope"}),U.begin=F(U.begin,{joinWith:""})}}function il(U){if(Array.isArray(U.end)){if(U.skip||U.excludeEnd||U.returnEnd)throw ot("skip, excludeEnd, returnEnd not compatible with endScope: {}"),pt;if(typeof U.endScope!="object"||U.endScope===null)throw ot("endScope must be object"),pt;is(U,U.end,{key:"endScope"}),U.end=F(U.end,{joinWith:""})}}function kc(U){U.scope&&typeof U.scope=="object"&&U.scope!==null&&(U.beginScope=U.scope,delete U.scope)}function hr(U){kc(U),typeof U.beginScope=="string"&&(U.beginScope={_wrap:U.beginScope}),typeof U.endScope=="string"&&(U.endScope={_wrap:U.endScope}),On(U),il(U)}function dr(U){function ue(be,we){return new RegExp(_(be),"m"+(U.case_insensitive?"i":"")+(U.unicodeRegex?"u":"")+(we?"g":""))}class _e{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(we,Ce){Ce.position=this.position++,this.matchIndexes[this.matchAt]=Ce,this.regexes.push([Ce,we]),this.matchAt+=V(we)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const we=this.regexes.map(Ce=>Ce[1]);this.matcherRe=ue(F(we,{joinWith:"|"}),!0),this.lastIndex=0}exec(we){this.matcherRe.lastIndex=this.lastIndex;const Ce=this.matcherRe.exec(we);if(!Ce)return null;const Tt=Ce.findIndex((pr,ti)=>ti>0&&pr!==void 0),qt=this.matchIndexes[Tt];return Ce.splice(0,Tt),Object.assign(Ce,qt)}}class je{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(we){if(this.multiRegexes[we])return this.multiRegexes[we];const Ce=new _e;return this.rules.slice(we).forEach(([Tt,qt])=>Ce.addRule(Tt,qt)),Ce.compile(),this.multiRegexes[we]=Ce,Ce}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(we,Ce){this.rules.push([we,Ce]),Ce.type==="begin"&&this.count++}exec(we){const Ce=this.getMatcher(this.regexIndex);Ce.lastIndex=this.lastIndex;let Tt=Ce.exec(we);if(this.resumingScanAtSamePosition()&&!(Tt&&Tt.index===this.lastIndex)){const qt=this.getMatcher(0);qt.lastIndex=this.lastIndex+1,Tt=qt.exec(we)}return Tt&&(this.regexIndex+=Tt.position+1,this.regexIndex===this.count&&this.considerAll()),Tt}}function At(be){const we=new je;return be.contains.forEach(Ce=>we.addRule(Ce.begin,{rule:Ce,type:"begin"})),be.terminatorEnd&&we.addRule(be.terminatorEnd,{type:"end"}),be.illegal&&we.addRule(be.illegal,{type:"illegal"}),we}function Ht(be,we){const Ce=be;if(be.isCompiled)return Ce;[cn,Li,hr,Wt].forEach(qt=>qt(be,we)),U.compilerExtensions.forEach(qt=>qt(be,we)),be.__beforeBegin=null,[nn,Pt,Lt].forEach(qt=>qt(be,we)),be.isCompiled=!0;let Tt=null;return typeof be.keywords=="object"&&be.keywords.$pattern&&(be.keywords=Object.assign({},be.keywords),Tt=be.keywords.$pattern,delete be.keywords.$pattern),Tt=Tt||/\w+/,be.keywords&&(be.keywords=sn(be.keywords,U.case_insensitive)),Ce.keywordPatternRe=ue(Tt,!0),we&&(be.begin||(be.begin=/\B|\b/),Ce.beginRe=ue(Ce.begin),!be.end&&!be.endsWithParent&&(be.end=/\B|\b/),be.end&&(Ce.endRe=ue(Ce.end)),Ce.terminatorEnd=_(Ce.end)||"",be.endsWithParent&&we.terminatorEnd&&(Ce.terminatorEnd+=(be.end?"|":"")+we.terminatorEnd)),be.illegal&&(Ce.illegalRe=ue(be.illegal)),be.contains||(be.contains=[]),be.contains=[].concat(...be.contains.map(function(qt){return Ms(qt==="self"?be:qt)})),be.contains.forEach(function(qt){Ht(qt,Ce)}),be.starts&&Ht(be.starts,we),Ce.matcher=At(Ce),Ce}if(U.compilerExtensions||(U.compilerExtensions=[]),U.contains&&U.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return U.classNameAliases=s(U.classNameAliases||{}),Ht(U)}function Vi(U){return U?U.endsWithParent||Vi(U.starts):!1}function Ms(U){return U.variants&&!U.cachedVariants&&(U.cachedVariants=U.variants.map(function(ue){return s(U,{variants:null},ue)})),U.cachedVariants?U.cachedVariants:Vi(U)?s(U,{starts:U.starts?s(U.starts):null}):Object.isFrozen(U)?s(U):U}var Jr="11.11.1";class fr extends Error{constructor(ue,_e){super(ue),this.name="HTMLInjectionError",this.html=_e}}const mr=t,ea=s,ta=Symbol("nomatch"),wi=7,Js=function(U){const ue=Object.create(null),_e=Object.create(null),je=[];let At=!0;const Ht="Could not find the language '{}', did you forget to load/include a language module?",be={disableAutodetect:!0,name:"Plain text",contains:[]};let we={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:y};function Ce(pe){return we.noHighlightRe.test(pe)}function Tt(pe){let Oe=pe.className+" ";Oe+=pe.parentNode?pe.parentNode.className:"";const Je=we.languageDetectRe.exec(Oe);if(Je){const bt=Pn(Je[1]);return bt||(Tn(Ht.replace("{}",Je[1])),Tn("Falling back to no-highlight mode for this block.",pe)),bt?Je[1]:"no-highlight"}return Oe.split(/\s+/).find(bt=>Ce(bt)||Pn(bt))}function qt(pe,Oe,Je){let bt="",Gt="";typeof Oe=="object"?(bt=pe,Je=Oe.ignoreIllegals,Gt=Oe.language):(lt("10.7.0","highlight(lang, code, ...args) has been deprecated."),lt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Gt=pe,bt=Oe),Je===void 0&&(Je=!0);const Hn={code:bt,language:Gt};ys("before:highlight",Hn);const vs=Hn.result?Hn.result:pr(Hn.language,Hn.code,Je);return vs.code=Hn.code,ys("after:highlight",vs),vs}function pr(pe,Oe,Je,bt){const Gt=Object.create(null);function Hn(ye,Ie){return ye.keywords[Ie]}function vs(){if(!ze.keywords){Zt.addText(wt);return}let ye=0;ze.keywordPatternRe.lastIndex=0;let Ie=ze.keywordPatternRe.exec(wt),He="";for(;Ie;){He+=wt.substring(ye,Ie.index);const mt=st.case_insensitive?Ie[0].toLowerCase():Ie[0],jt=Hn(ze,mt);if(jt){const[xs,wr]=jt;if(Zt.addText(He),He="",Gt[mt]=(Gt[mt]||0)+1,Gt[mt]<=wi&&(ra+=wr),xs.startsWith("_"))He+=Ie[0];else{const Ls=st.classNameAliases[xs]||xs;Ts(Ie[0],Ls)}}else He+=Ie[0];ye=ze.keywordPatternRe.lastIndex,Ie=ze.keywordPatternRe.exec(wt)}He+=wt.substring(ye),Zt.addText(He)}function gn(){if(wt==="")return;let ye=null;if(typeof ze.subLanguage=="string"){if(!ue[ze.subLanguage]){Zt.addText(wt);return}ye=pr(ze.subLanguage,wt,!0,co[ze.subLanguage]),co[ze.subLanguage]=ye._top}else ye=na(wt,ze.subLanguage.length?ze.subLanguage:null);ze.relevance>0&&(ra+=ye.relevance),Zt.__addSublanguage(ye._emitter,ye.language)}function Sn(){ze.subLanguage!=null?gn():vs(),wt=""}function Ts(ye,Ie){ye!==""&&(Zt.startScope(Ie),Zt.addText(ye),Zt.endScope())}function vr(ye,Ie){let He=1;const mt=Ie.length-1;for(;He<=mt;){if(!ye._emit[He]){He++;continue}const jt=st.classNameAliases[ye[He]]||ye[He],xs=Ie[He];jt?Ts(xs,jt):(wt=xs,vs(),wt=""),He++}}function ia(ye,Ie){return ye.scope&&typeof ye.scope=="string"&&Zt.openNode(st.classNameAliases[ye.scope]||ye.scope),ye.beginScope&&(ye.beginScope._wrap?(Ts(wt,st.classNameAliases[ye.beginScope._wrap]||ye.beginScope._wrap),wt=""):ye.beginScope._multi&&(vr(ye.beginScope,Ie),wt="")),ze=Object.create(ye,{parent:{value:ze}}),ze}function zi(ye,Ie,He){let mt=H(ye.endRe,He);if(mt){if(ye["on:end"]){const jt=new e(ye);ye["on:end"](Ie,jt),jt.isMatchIgnored&&(mt=!1)}if(mt){for(;ye.endsParent&&ye.parent;)ye=ye.parent;return ye}}if(ye.endsWithParent)return zi(ye.parent,Ie,He)}function Mc(ye){return ze.matcher.regexIndex===0?(wt+=ye[0],1):(Ps=!0,0)}function rn(ye){const Ie=ye[0],He=ye.rule,mt=new e(He),jt=[He.__beforeBegin,He["on:begin"]];for(const xs of jt)if(xs&&(xs(ye,mt),mt.isMatchIgnored))return Mc(Ie);return He.skip?wt+=Ie:(He.excludeBegin&&(wt+=Ie),Sn(),!He.returnBegin&&!He.excludeBegin&&(wt=Ie)),ia(He,ye),He.returnBegin?0:Ie.length}function _s(ye){const Ie=ye[0],He=Oe.substring(ye.index),mt=zi(ze,ye,He);if(!mt)return ta;const jt=ze;ze.endScope&&ze.endScope._wrap?(Sn(),Ts(Ie,ze.endScope._wrap)):ze.endScope&&ze.endScope._multi?(Sn(),vr(ze.endScope,ye)):jt.skip?wt+=Ie:(jt.returnEnd||jt.excludeEnd||(wt+=Ie),Sn(),jt.excludeEnd&&(wt=Ie));do ze.scope&&Zt.closeNode(),!ze.skip&&!ze.subLanguage&&(ra+=ze.relevance),ze=ze.parent;while(ze!==mt.parent);return mt.starts&&ia(mt.starts,ye),jt.returnEnd?0:Ie.length}function _r(){const ye=[];for(let Ie=ze;Ie!==st;Ie=Ie.parent)Ie.scope&&ye.unshift(Ie.scope);ye.forEach(Ie=>Zt.openNode(Ie))}let Ds={};function ri(ye,Ie){const He=Ie&&Ie[0];if(wt+=ye,He==null)return Sn(),0;if(Ds.type==="begin"&&Ie.type==="end"&&Ds.index===Ie.index&&He===""){if(wt+=Oe.slice(Ie.index,Ie.index+1),!At){const mt=new Error(`0 width match regex (${pe})`);throw mt.languageName=pe,mt.badRule=Ds.rule,mt}return 1}if(Ds=Ie,Ie.type==="begin")return rn(Ie);if(Ie.type==="illegal"&&!Je){const mt=new Error('Illegal lexeme "'+He+'" for mode "'+(ze.scope||"<unnamed>")+'"');throw mt.mode=ze,mt}else if(Ie.type==="end"){const mt=_s(Ie);if(mt!==ta)return mt}if(Ie.type==="illegal"&&He==="")return wt+=`
`,1;if(Ui>1e5&&Ui>Ie.index*3)throw new Error("potential infinite loop, way more iterations than matches");return wt+=He,He.length}const st=Pn(pe);if(!st)throw ot(Ht.replace("{}",pe)),new Error('Unknown language: "'+pe+'"');const br=dr(st);let rs="",ze=bt||br;const co={},Zt=new we.__emitter(we);_r();let wt="",ra=0,Ti=0,Ui=0,Ps=!1;try{if(st.__emitTokens)st.__emitTokens(Oe,Zt);else{for(ze.matcher.considerAll();;){Ui++,Ps?Ps=!1:ze.matcher.considerAll(),ze.matcher.lastIndex=Ti;const ye=ze.matcher.exec(Oe);if(!ye)break;const Ie=Oe.substring(Ti,ye.index),He=ri(Ie,ye);Ti=ye.index+He}ri(Oe.substring(Ti))}return Zt.finalize(),rs=Zt.toHTML(),{language:pe,value:rs,relevance:ra,illegal:!1,_emitter:Zt,_top:ze}}catch(ye){if(ye.message&&ye.message.includes("Illegal"))return{language:pe,value:mr(Oe),illegal:!0,relevance:0,_illegalBy:{message:ye.message,index:Ti,context:Oe.slice(Ti-100,Ti+100),mode:ye.mode,resultSoFar:rs},_emitter:Zt};if(At)return{language:pe,value:mr(Oe),illegal:!1,relevance:0,errorRaised:ye,_emitter:Zt,_top:ze};throw ye}}function ti(pe){const Oe={value:mr(pe),illegal:!1,relevance:0,_top:be,_emitter:new we.__emitter(we)};return Oe._emitter.addText(pe),Oe}function na(pe,Oe){Oe=Oe||we.languages||Object.keys(ue);const Je=ti(pe),bt=Oe.filter(Pn).filter(lo).map(Sn=>pr(Sn,pe,!1));bt.unshift(Je);const Gt=bt.sort((Sn,Ts)=>{if(Sn.relevance!==Ts.relevance)return Ts.relevance-Sn.relevance;if(Sn.language&&Ts.language){if(Pn(Sn.language).supersetOf===Ts.language)return 1;if(Pn(Ts.language).supersetOf===Sn.language)return-1}return 0}),[Hn,vs]=Gt,gn=Hn;return gn.secondBest=vs,gn}function gr(pe,Oe,Je){const bt=Oe&&_e[Oe]||Je;pe.classList.add("hljs"),pe.classList.add(`language-${bt}`)}function ni(pe){let Oe=null;const Je=Tt(pe);if(Ce(Je))return;if(ys("before:highlightElement",{el:pe,language:Je}),pe.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",pe);return}if(pe.children.length>0&&(we.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(pe)),we.throwUnescapedHTML))throw new fr("One of your code blocks includes unescaped HTML.",pe.innerHTML);Oe=pe;const bt=Oe.textContent,Gt=Je?qt(bt,{language:Je,ignoreIllegals:!0}):na(bt);pe.innerHTML=Gt.value,pe.dataset.highlighted="yes",gr(pe,Je,Gt.language),pe.result={language:Gt.language,re:Gt.relevance,relevance:Gt.relevance},Gt.secondBest&&(pe.secondBest={language:Gt.secondBest.language,relevance:Gt.secondBest.relevance}),ys("after:highlightElement",{el:pe,result:Gt,text:bt})}function Ei(pe){we=ea(we,pe)}const si=()=>{$t(),lt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function ii(){$t(),lt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Dn=!1;function $t(){function pe(){$t()}if(document.readyState==="loading"){Dn||window.addEventListener("DOMContentLoaded",pe,!1),Dn=!0;return}document.querySelectorAll(we.cssSelector).forEach(ni)}function ao(pe,Oe){let Je=null;try{Je=Oe(U)}catch(bt){if(ot("Language definition for '{}' could not be registered.".replace("{}",pe)),At)ot(bt);else throw bt;Je=be}Je.name||(Je.name=pe),ue[pe]=Je,Je.rawDefinition=Oe.bind(null,U),Je.aliases&&oo(Je.aliases,{languageName:pe})}function sa(pe){delete ue[pe];for(const Oe of Object.keys(_e))_e[Oe]===pe&&delete _e[Oe]}function Os(){return Object.keys(ue)}function Pn(pe){return pe=(pe||"").toLowerCase(),ue[pe]||ue[_e[pe]]}function oo(pe,{languageName:Oe}){typeof pe=="string"&&(pe=[pe]),pe.forEach(Je=>{_e[Je.toLowerCase()]=Oe})}function lo(pe){const Oe=Pn(pe);return Oe&&!Oe.disableAutodetect}function yr(pe){pe["before:highlightBlock"]&&!pe["before:highlightElement"]&&(pe["before:highlightElement"]=Oe=>{pe["before:highlightBlock"](Object.assign({block:Oe.el},Oe))}),pe["after:highlightBlock"]&&!pe["after:highlightElement"]&&(pe["after:highlightElement"]=Oe=>{pe["after:highlightBlock"](Object.assign({block:Oe.el},Oe))})}function rl(pe){yr(pe),je.push(pe)}function ji(pe){const Oe=je.indexOf(pe);Oe!==-1&&je.splice(Oe,1)}function ys(pe,Oe){const Je=pe;je.forEach(function(bt){bt[Je]&&bt[Je](Oe)})}function xn(pe){return lt("10.7.0","highlightBlock will be removed entirely in v12.0"),lt("10.7.0","Please use highlightElement now."),ni(pe)}Object.assign(U,{highlight:qt,highlightAuto:na,highlightAll:$t,highlightElement:ni,highlightBlock:xn,configure:Ei,initHighlighting:si,initHighlightingOnLoad:ii,registerLanguage:ao,unregisterLanguage:sa,listLanguages:Os,getLanguage:Pn,registerAliases:oo,autoDetection:lo,inherit:ea,addPlugin:rl,removePlugin:ji}),U.debugMode=function(){At=!1},U.safeMode=function(){At=!0},U.versionString=Jr,U.regex={concat:k,lookahead:w,either:B,optional:C,anyNumberOfTimes:x};for(const pe in tt)typeof tt[pe]=="object"&&n(tt[pe]);return Object.assign(U,tt),U},ei=Js({});return ei.newInstance=()=>Js({}),Ty=ei,ei.HighlightJS=ei,ei.default=ei,Ty}var AV=SV();const ki=Rm(AV),$x="[A-Za-z$_][0-9A-Za-z$_]*",RV=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],CV=["true","false","null","undefined","NaN","Infinity"],jR=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],zR=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],UR=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],IV=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],NV=[].concat(UR,jR,zR);function kV(n){const e=n.regex,t=(ae,{after:Ae})=>{const M="</"+ae[0].slice(1);return ae.input.indexOf(M,Ae)!==-1},s=$x,a={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,c={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ae,Ae)=>{const M=ae[0].length+ae.index,Y=ae.input[M];if(Y==="<"||Y===","){Ae.ignoreMatch();return}Y===">"&&(t(ae,{after:M})||Ae.ignoreMatch());let re;const le=ae.input.substring(M);if(re=le.match(/^\s*=/)){Ae.ignoreMatch();return}if((re=le.match(/^\s+extends\s+/))&&re.index===0){Ae.ignoreMatch();return}}},h={$pattern:$x,keyword:RV,literal:CV,built_in:NV,"variable.language":IV},f="[0-9](_?[0-9])*",p=`\\.(${f})`,y="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",_={className:"number",variants:[{begin:`(\\b(${y})((${p})|\\.)?|(${p}))[eE][+-]?(${f})\\b`},{begin:`\\b(${y})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},w={className:"subst",begin:"\\$\\{",end:"\\}",keywords:h,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,w],subLanguage:"xml"}},C={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,w],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,w],subLanguage:"graphql"}},O={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,w]},V={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},H=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,C,k,O,{match:/\$\d+/},_];w.contains=H.concat({begin:/\{/,end:/\}/,keywords:h,contains:["self"].concat(H)});const G=[].concat(V,w.contains),F=G.concat([{begin:/(\s*)\(/,end:/\)/,keywords:h,contains:["self"].concat(G)}]),te={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:F},S={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,e.concat(s,"(",e.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},R={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...jR,...zR]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[te],illegal:/%/},L={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function z(ae){return e.concat("(?!",ae.join("|"),")")}const D={match:e.concat(/\b/,z([...UR,"super","import"].map(ae=>`${ae}\\s*\\(`)),s,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},Ne={begin:e.concat(/\./,e.lookahead(e.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Le={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},te]},Q="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",se={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Q)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[te]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:h,exports:{PARAMS_CONTAINS:F,CLASS_REFERENCE:R},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,C,k,O,V,{match:/\$\d+/},_,R,{scope:"attr",match:s+e.lookahead(":"),relevance:0},se,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,n.REGEXP_MODE,{className:"function",begin:Q,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:F}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:o},{begin:c.begin,"on:begin":c.isTrulyOpeningTag,end:c.end}],subLanguage:"xml",contains:[{begin:c.begin,end:c.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[te,n.inherit(n.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},Ne,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[te]},D,L,S,Le,{match:/\$[(.]/}]}}const Qf="[A-Za-z$_][0-9A-Za-z$_]*",BR=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],FR=["true","false","null","undefined","NaN","Infinity"],HR=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],qR=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],$R=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],GR=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],KR=[].concat($R,HR,qR);function MV(n){const e=n.regex,t=(ae,{after:Ae})=>{const M="</"+ae[0].slice(1);return ae.input.indexOf(M,Ae)!==-1},s=Qf,a={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,c={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ae,Ae)=>{const M=ae[0].length+ae.index,Y=ae.input[M];if(Y==="<"||Y===","){Ae.ignoreMatch();return}Y===">"&&(t(ae,{after:M})||Ae.ignoreMatch());let re;const le=ae.input.substring(M);if(re=le.match(/^\s*=/)){Ae.ignoreMatch();return}if((re=le.match(/^\s+extends\s+/))&&re.index===0){Ae.ignoreMatch();return}}},h={$pattern:Qf,keyword:BR,literal:FR,built_in:KR,"variable.language":GR},f="[0-9](_?[0-9])*",p=`\\.(${f})`,y="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",_={className:"number",variants:[{begin:`(\\b(${y})((${p})|\\.)?|(${p}))[eE][+-]?(${f})\\b`},{begin:`\\b(${y})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},w={className:"subst",begin:"\\$\\{",end:"\\}",keywords:h,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,w],subLanguage:"xml"}},C={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,w],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,w],subLanguage:"graphql"}},O={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,w]},V={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},H=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,C,k,O,{match:/\$\d+/},_];w.contains=H.concat({begin:/\{/,end:/\}/,keywords:h,contains:["self"].concat(H)});const G=[].concat(V,w.contains),F=G.concat([{begin:/(\s*)\(/,end:/\)/,keywords:h,contains:["self"].concat(G)}]),te={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:F},S={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,e.concat(s,"(",e.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},R={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...HR,...qR]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[te],illegal:/%/},L={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function z(ae){return e.concat("(?!",ae.join("|"),")")}const D={match:e.concat(/\b/,z([...$R,"super","import"].map(ae=>`${ae}\\s*\\(`)),s,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},Ne={begin:e.concat(/\./,e.lookahead(e.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Le={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},te]},Q="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",se={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Q)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[te]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:h,exports:{PARAMS_CONTAINS:F,CLASS_REFERENCE:R},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,C,k,O,V,{match:/\$\d+/},_,R,{scope:"attr",match:s+e.lookahead(":"),relevance:0},se,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,n.REGEXP_MODE,{className:"function",begin:Q,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:F}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:o},{begin:c.begin,"on:begin":c.isTrulyOpeningTag,end:c.end}],subLanguage:"xml",contains:[{begin:c.begin,end:c.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[te,n.inherit(n.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},Ne,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[te]},D,L,S,Le,{match:/\$[(.]/}]}}function OV(n){const e=n.regex,t=MV(n),s=Qf,a=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},c={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:a},contains:[t.exports.CLASS_REFERENCE]},h={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},f=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],p={$pattern:Qf,keyword:BR.concat(f),literal:FR,built_in:KR.concat(a),"variable.language":GR},y={className:"meta",begin:"@"+s},_=(k,O,B)=>{const V=k.contains.findIndex(H=>H.label===O);if(V===-1)throw new Error("can not find mode to replace");k.contains.splice(V,1,B)};Object.assign(t.keywords,p),t.exports.PARAMS_CONTAINS.push(y);const w=t.contains.find(k=>k.scope==="attr"),x=Object.assign({},w,{match:e.concat(s,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,w,x]),t.contains=t.contains.concat([y,o,c,x]),_(t,"shebang",n.SHEBANG()),_(t,"use_strict",h);const C=t.contains.find(k=>k.label==="func.def");return C.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function DV(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),s=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],h={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:s,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},f={className:"meta",begin:/^(>>>|\.\.\.) /},p={className:"subst",begin:/\{/,end:/\}/,keywords:h,illegal:/#/},y={begin:/\{\{/,relevance:0},_={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,f],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,f],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,f,y,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,f,y,p]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,y,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,y,p]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},w="[0-9](_?[0-9])*",x=`(\\b(${w}))?\\.(${w})|\\b(${w})\\.`,C=`\\b|${s.join("|")}`,k={className:"number",relevance:0,variants:[{begin:`(\\b(${w})|(${x}))[eE][+-]?(${w})[jJ]?(?=${C})`},{begin:`(${x})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${C})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${C})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${C})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${C})`},{begin:`\\b(${w})[jJ](?=${C})`}]},O={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:h,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},B={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:h,contains:["self",f,k,_,n.HASH_COMMENT_MODE]}]};return p.contains=[_,k,f],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:h,illegal:/(<\/|\?)|=>/,contains:[f,k,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},_,O,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[B]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[k,B,_]}]}}function PV(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),s=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},c=n.inherit(o,{begin:/\(/,end:/\)/}),h=n.inherit(n.APOS_STRING_MODE,{className:"string"}),f=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),p={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:s,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,f,h,c,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,c,f,h]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[f]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[p],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[p],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:p}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function LV(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},s=["true","false","null"],a={scope:"literal",beginKeywords:s.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:s},contains:[e,t,n.QUOTE_STRING_MODE,a,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function VV(n){const e=n.regex,t={},s={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[t]}]};Object.assign(t,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},s]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[n.BACKSLASH_ESCAPE]},o=n.inherit(n.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),c={begin:/<<-?\s*(?=\w+)/,starts:{contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},h={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,t,a]};a.contains.push(h);const f={match:/\\"/},p={className:"string",begin:/'/,end:/'/},y={match:/\\'/},_={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},n.NUMBER_MODE,t]},w=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],x=n.SHEBANG({binary:`(${w.join("|")})`,relevance:10}),C={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[n.inherit(n.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},k=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],O=["true","false"],B={match:/(\/[a-z._-]+)+/},V=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],H=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],G=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],F=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:k,literal:O,built_in:[...V,...H,"set","shopt",...G,...F]},contains:[x,n.SHEBANG(),C,_,o,c,B,h,f,p,y,t]}}const jV=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),zV=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],UV=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],BV=[...zV,...UV],FV=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),HV=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),qV=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),$V=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function GV(n){const e=n.regex,t=jV(n),s={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},a="and or not only",o=/@-?\w[\w]*(-\w+)*/,c="[a-zA-Z-][a-zA-Z0-9_-]*",h=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,s,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+c,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+HV.join("|")+")"},{begin:":(:)?("+qV.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+$V.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...h,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...h,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:FV.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...h,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+BV.join("|")+")\\b"}]}}function KV(n){const e=n.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},s={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},o={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},c={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},h=/[A-Za-z][A-Za-z0-9+.-]*/,f={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,h,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},p={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},y={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},_=n.inherit(p,{contains:[]}),w=n.inherit(y,{contains:[]});p.contains.push(w),y.contains.push(_);let x=[t,f];return[p,y,_,w].forEach(B=>{B.contains=B.contains.concat(x)}),x=x.concat(p,y),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:x},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:x}]}]},t,o,p,y,{className:"quote",begin:"^>\\s+",contains:x,end:"$"},a,s,f,c,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}const WV=Ws.lazy(()=>$l(()=>import("./popup-mermaid.core.js").then(n=>n.bB),[]));ki.registerLanguage("javascript",kV);ki.registerLanguage("typescript",OV);ki.registerLanguage("python",DV);ki.registerLanguage("xml",PV);ki.registerLanguage("json",LV);ki.registerLanguage("bash",VV);ki.registerLanguage("css",GV);ki.registerLanguage("markdown",KV);const YV=({children:n,className:e})=>{const[t,s]=$.useState(!1),[a,o]=$.useState(!1),c=$.useRef(null);$.useEffect(()=>{const y="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/styles/panda-syntax-dark.min.css",_="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.0/styles/panda-syntax-light.min.css",w="hljs-theme-dynamic";return(C=>{let k=document.getElementById(w);k||(k=document.createElement("link"),k.rel="stylesheet",k.id=w,document.head.appendChild(k)),k.href=C?y:_})(a),()=>{}},[a]),$.useEffect(()=>{const y=()=>{o(document.documentElement.classList.contains("dark"))};y();const _=new MutationObserver(y);return _.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>_.disconnect()},[]);const[h,f]=$.useState("");$.useEffect(()=>{let y=(e==null?void 0:e.replace("language-",""))||"";ki.getLanguage(y)||(y="plaintext");try{const _=y==="plaintext"?ki.highlightAuto(n):ki.highlight(n,{language:y});f(_.value)}catch{f(n)}},[n,e]);const p=async()=>{try{await navigator.clipboard.writeText(n),s(!0),setTimeout(()=>s(!1),2e3)}catch(y){console.error("Failed to copy:",y)}};return v.jsx("div",{className:"relative group mb-4 w-full max-w-full overflow-hidden",children:v.jsxs("div",{className:"relative w-full bg-zinc-50 dark:bg-zinc-900 rounded-lg",style:{maxWidth:"100%",width:"100%",overflow:"hidden"},children:[v.jsx("div",{className:"overflow-x-auto thin-scrollbar",style:{maxWidth:"100%",width:"100%"},children:v.jsx("code",{ref:c,className:`${e?e+" hljs":"hljs"} block p-4 text-sm leading-relaxed whitespace-pre`,style:{margin:0,width:"max-content",minWidth:"100%",maxWidth:"none"},dangerouslySetInnerHTML:{__html:h}})}),v.jsx("button",{onClick:p,className:"absolute top-2 right-2 p-1.5 bg-white/90 dark:bg-zinc-800/90 hover:bg-white dark:hover:bg-zinc-800 rounded transition-colors opacity-0 group-hover:opacity-100 z-10 shadow-sm",title:t?"Copied!":"Copy to clipboard",children:t?v.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):v.jsx("svg",{className:"w-4 h-4 text-zinc-600 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})})},XV={pre:({children:n,...e})=>{const t=Ws.Children.only(n);return(t.props.className||"").includes("language-mermaid")?v.jsx(QV,{code:t.props.children}):v.jsx("pre",{...e,children:n})},p:({children:n,...e})=>v.jsx("p",{className:"mb-2 last:mb-0 leading-relaxed",...e,children:n}),ul:({children:n,...e})=>v.jsx("ul",{className:"mb-2 last:mb-0 pl-4 space-y-1",...e,children:n}),ol:({children:n,...e})=>v.jsx("ol",{className:"mb-2 last:mb-0 pl-4 space-y-1 list-decimal",...e,children:n}),li:({children:n,...e})=>v.jsx("li",{className:"mb-1",...e,children:n}),h1:({children:n,...e})=>v.jsx("h1",{className:"text-lg font-semibold mb-3 mt-4 first:mt-0",...e,children:n}),h2:({children:n,...e})=>v.jsx("h2",{className:"text-base font-semibold mb-2 mt-3 first:mt-0",...e,children:n}),h3:({children:n,...e})=>v.jsx("h3",{className:"text-sm font-semibold mb-2 mt-3 first:mt-0",...e,children:n}),blockquote:({children:n,...e})=>v.jsx("blockquote",{className:"border-l-4 border-zinc-300 dark:border-zinc-600 pl-4 italic my-3 text-zinc-700 dark:text-zinc-300",...e,children:n}),code:({children:n,className:e,...t})=>e?v.jsx(YV,{className:e,...t,children:n}):v.jsx("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1.5 py-0.5 rounded text-xs font-mono",...t,children:n}),table:({children:n,...e})=>v.jsx("div",{className:"overflow-x-auto my-4",children:v.jsx("table",{className:"min-w-full border-collapse border border-zinc-300 dark:border-zinc-600",...e,children:n})}),thead:({children:n,...e})=>v.jsx("thead",{className:"bg-zinc-100 dark:bg-zinc-800",...e,children:n}),tbody:({children:n,...e})=>v.jsx("tbody",{...e,children:n}),tr:({children:n,...e})=>v.jsx("tr",{className:"border-b border-zinc-200 dark:border-zinc-700",...e,children:n}),th:({children:n,...e})=>v.jsx("th",{className:"px-3 py-2 text-left font-semibold text-sm border-r border-zinc-300 dark:border-zinc-600 last:border-r-0",...e,children:n}),td:({children:n,...e})=>v.jsx("td",{className:"px-3 py-2 text-sm border-r border-zinc-300 dark:border-zinc-600 last:border-r-0",...e,children:n}),del:({children:n,...e})=>v.jsx("del",{className:"line-through text-zinc-500 dark:text-zinc-400",...e,children:n}),input:({type:n,checked:e,disabled:t,...s})=>n==="checkbox"?v.jsx("input",{type:"checkbox",checked:e,disabled:t,className:"mr-2 rounded",...s}):v.jsx("input",{type:n,...s}),hr:n=>v.jsx(VR,{...n})},QV=({code:n})=>{const[e,t]=$.useState(null);$.useEffect(()=>{WV().then(f=>{f.default.initialize({startOnLoad:!1,theme:"dark",securityLevel:"loose",fontFamily:"ui-sans-serif, system-ui, sans-serif"}),t(f.default)})},[]);const s=$.useRef(null),[a,o]=Ws.useState(""),[c,h]=Ws.useState("");return $.useEffect(()=>{(async()=>{if(e)try{const p=`mermaid-${Math.random().toString(36).substr(2,9)}`,{svg:y}=await e.render(p,n);o(y),h("")}catch(p){h("Failed to render Mermaid diagram"),console.error("Mermaid render error:",p)}})()},[n,e]),c?v.jsxs("div",{className:"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg p-4 my-4",children:[v.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:c}),v.jsx("pre",{className:"mt-2 text-xs text-red-700 dark:text-red-300 overflow-x-auto",children:n})]}):a?v.jsx("div",{ref:s,className:"my-4 flex justify-center bg-white dark:bg-zinc-900 rounded-lg p-4",dangerouslySetInnerHTML:{__html:a}}):v.jsx("div",{className:"my-4 flex justify-center bg-white dark:bg-zinc-900 rounded-lg p-4 text-zinc-500",children:"Loading diagram..."})},ZV=()=>Promise.all([$l(()=>import("./popup-index6.js"),__vite__mapDeps([0,1,2])),$l(()=>import("./popup-index9.js"),__vite__mapDeps([3,4,5,2])),$l(()=>import("./popup-index10.js"),__vite__mapDeps([6,4,5,7,8])),$l(()=>import("./popup-index8.js"),__vite__mapDeps([9,5,10,8])),$l(()=>import("./popup-index7.js"),__vite__mapDeps([11,7,1,2,10]))]).then(([n,e,t,s,a])=>({processor:n.unified().use(e.default).use(t.default).use(s.default,{allowDangerousHtml:!0}).use(a.default,{...vM,components:XV})})),JV=({message:n,isStreaming:e=!1,onStopStreaming:t,onLoaded:s,animationsDisabled:a})=>{const o=n.role==="user",c=n.role==="assistant",[h,f]=$.useState(null),[p,y]=$.useState(!1),[_,w]=$.useState(!1);$.useEffect(()=>{!o&&!h?ZV().then(({processor:V})=>{f(V),y(!0)}):o&&y(!0)},[o,h]),$.useEffect(()=>{if(p){const V=setTimeout(()=>{w(!0)},50),H=setTimeout(()=>{s()},300);return()=>{clearTimeout(V),clearTimeout(H)}}},[p]);const x={initial:{opacity:0},animate:{opacity:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.2}}},C=V=>{const G=(new Date().getTime()-V.getTime())/(1e3*60*60),F=Math.floor(G/24);return G<24?V.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):G<48?`Yesterday ${V.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:F<7?`${F} days ago ${V.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${V.toLocaleDateString([],{month:"short",day:"numeric"})} ${V.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`},k=()=>o?"bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-2xl px-4 py-3 max-w-100":n.isError?"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 rounded-2xl px-4 py-3 w-full max-w-full":"text-zinc-900 dark:text-zinc-100 w-full max-w-full min-w-0",O=$.useMemo(()=>{if(o||!n.content||!h||!p)return null;try{return h.processSync(n.content).result}catch(V){return console.error("Markdown processing error:",V),v.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:n.content})}},[n.content,h,o,p]),B=()=>o?v.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:n.content}):v.jsxs("div",{className:"space-y-3 w-full max-w-full min-w-0",children:[v.jsx(xV,{reasoning:n.reasoning||"",isReasoningComplete:n.isReasoningComplete||!1,isStreaming:e}),v.jsx(Oi,{mode:"wait",children:_?v.jsx(Ut.div,{variants:x,initial:a?{}:"initial",animate:"animate",className:"text-sm leading-relaxed w-full max-w-full min-w-0 overflow-hidden",children:O},"content"):v.jsx(Ut.div,{variants:x,initial:a?{}:"initial",animate:"animate",exit:a?{}:"exit",className:"text-sm leading-relaxed w-full max-w-full min-w-0 overflow-hidden",children:v.jsxs("div",{className:"flex items-center space-x-2 text-zinc-500 dark:text-zinc-400",children:[v.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-pulse"}),v.jsx("span",{children:"Processing..."})]})},"processing")})]});return v.jsx(Ut.div,{variants:x,initial:a?{}:"initial",animate:"animate",exit:a?{}:"exit",className:`flex ${o?"justify-end":"justify-start"}`,children:v.jsxs("div",{className:`my-4 flex flex-col ${o?"max-w-full items-end":"w-full max-w-full items-start min-w-0"}`,children:[v.jsxs("div",{className:k(),children:[B(),e&&!o&&v.jsx("span",{className:"inline-block w-0.5 h-4 bg-current opacity-75 animate-pulse ml-1"}),e&&!o&&v.jsx("div",{className:"mt-3 flex items-center justify-between",children:v.jsx(TV,{})})]}),v.jsxs("div",{className:`text-xs text-zinc-500 dark:text-zinc-400 ${o?"text-right mt-2":"text-left mt-4"}`,children:[C(n.timestamp),(n.model||n.modelName)&&c&&v.jsxs("span",{className:"ml-2",children:[" ",n.modelName||n.model]})]})]})})},e4=({messages:n,streamingMessageId:e,onStopStreaming:t,animationsDisabled:s,isLoadingMessages:a,onShowScrollToBottom:o})=>{const c=$.useRef(null),h=$.useRef(null),f=50,p=$.useCallback(()=>{const w=h.current;if(!w)return!1;const{scrollTop:x,scrollHeight:C,clientHeight:k}=w;return C-x-k<=f},[]),y=$.useCallback((w=!0)=>{if(!c.current)return;c.current.scrollIntoView({behavior:w?"smooth":"auto"});const x=setInterval(()=>{var C;if(p()){clearInterval(x);return}(C=c.current)==null||C.scrollIntoView({behavior:w?"smooth":"auto"})},100);setTimeout(()=>{clearInterval(x)},3e3)},[p]);$.useEffect(()=>{const w=()=>{y(!0)};return window.addEventListener("scrollToBottom",w),()=>window.removeEventListener("scrollToBottom",w)},[y,o]);const _=$.useCallback(()=>{if(!h.current)return;const x=p();o(!x)},[p,o,n.length]);return $.useEffect(()=>{const w=h.current;if(w)return w.addEventListener("scroll",_,{passive:!0}),()=>{w.removeEventListener("scroll",_)}},[_]),n.length===0?a?v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsxs("div",{className:"flex flex-col items-center text-zinc-500 dark:text-zinc-400",children:[v.jsx("div",{className:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin mb-3"}),v.jsx("div",{className:"text-sm",children:"Loading conversation..."})]})}):null:v.jsx("div",{ref:h,className:"absolute inset-0 overflow-y-auto custom-scrollbar pt-8",children:v.jsxs("div",{className:"px-4 md:px-6 lg:px-8 xl:px-16 max-w-4xl mx-auto overflow-x-hidden",children:[v.jsx(Oi,{mode:"popLayout",children:n.map((w,x)=>v.jsx(JV,{message:w,isStreaming:e===w.id,onStopStreaming:e===w.id?t:void 0,onLoaded:()=>{x==n.length-1&&y()},animationsDisabled:s},w.id))}),v.jsx("div",{className:"h-32 md:h-36"}),v.jsx("div",{ref:c})]})})},t4=({children:n,className:e,animationsDisabled:t=!1,...s})=>v.jsx(Oi,{children:v.jsx(Ut.button,{type:"button",className:`inline-flex items-center gap-1 rounded-full px-3 py-1.5 text-xs font-medium bg-white/90 dark:bg-[#1c1c1c]/90 text-zinc-900 dark:text-zinc-200 shadow-md hover:bg-zinc-50 dark:hover:bg-zinc-800/90 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-700/50 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${e}`,...s,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:t?0:.2,ease:"easeInOut"},children:n})}),n4=({onMenuClick:n,toggleSidebar:e,isSidebarCollapsed:t,onOpenSettings:s,theme:a,toggleTheme:o,user:c,animationsDisabled:h,chat:f})=>{const{currentConversation:p,streamingState:y,sendMessage:_,stopStreaming:w,isLoading:x,isLoadingMessages:C,isLoadingMoreMessages:k,hasMoreMessages:O,loadMoreMessages:B}=f,[V,H]=Ws.useState(typeof window<"u"?window.innerWidth:0);Ws.useEffect(()=>{const Q=()=>{H(window.innerWidth)};return window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]);const G=V<768,[F,te]=Ws.useState({model:"gemini-1.5-flash",source:"system",providerId:""}),[S,R]=Ws.useState(!1),I=$.useCallback(()=>{const Q=new CustomEvent("scrollToBottom");window.dispatchEvent(Q)},[]),P=$.useCallback((Q,se,ae="system",Ae)=>{_(Q,se,ae,Ae),setTimeout(()=>{I()},50)},[_,I]),L=$.useCallback(Q=>{_(Q,F.model,F.source,F.providerId)},[_,F]),z=$.useCallback((Q,se,ae)=>{te({model:Q,source:se,providerId:ae||""})},[]),D=t?80:256,Ne=!p,Le=()=>{const Q={initial:{opacity:0,rotate:-90,scale:.5},animate:{opacity:1,rotate:0,scale:1},exit:{opacity:0,rotate:90,scale:.5},transition:{duration:h?0:.3}};switch(a){case"light":return v.jsx(Ut.div,{...Q,children:v.jsx(jM,{className:"w-5 h-5"})},"moon");case"dark":return v.jsx(Ut.div,{...Q,children:v.jsx(xT,{className:"w-5 h-5"})},"sun");case"system":return v.jsx(Ut.div,{...Q,children:v.jsx(zM,{className:"w-5 h-5"})},"desktop");default:return v.jsx(Ut.div,{...Q,children:v.jsx(xT,{className:"w-5 h-5"})},"sun")}};return v.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-[#1c1c1c] relative",children:[v.jsx(Ut.div,{className:"fixed z-50 hidden md:block",style:{top:"10px"},animate:{left:`${D+10}px`},transition:{duration:h?0:.3,ease:"easeOut"},children:v.jsx("button",{onClick:e,className:"flex items-center justify-center hover:bg-zinc-200/80 dark:hover:bg-zinc-700/80 bg-white/80 dark:bg-[#1c1c1c]/80 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-700/50 rounded-lg transition-all duration-200",style:{width:"40px",height:"40px"},"aria-label":"Toggle sidebar",children:v.jsx(ST,{className:"w-5 h-5 text-zinc-500 dark:text-zinc-400"})})}),v.jsx("div",{className:"fixed z-50 md:hidden",style:{top:"10px",left:"10px"},children:v.jsx("button",{onClick:n,className:"flex items-center justify-center hover:bg-zinc-200/80 dark:hover:bg-zinc-700/80 bg-white/80 dark:bg-[#1c1c1c]/80 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-700/50 rounded-lg transition-all duration-200",style:{width:"40px",height:"40px"},"aria-label":"Open menu",children:v.jsx(ST,{className:"w-5 h-5 text-zinc-500 dark:text-zinc-400"})})}),v.jsxs("div",{className:"fixed z-10 flex items-center",style:{top:"10px",right:"18px"},children:[v.jsx("button",{onClick:()=>s(),className:"flex items-center justify-center hover:bg-zinc-200/80 dark:hover:bg-zinc-700/80 bg-white/80 dark:bg-[#1c1c1c]/80 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-700/50 rounded-bl-lg rounded-tl-lg transition-all duration-200",style:{width:"40px",height:"40px"},"aria-label":"Settings",children:v.jsx(VM,{className:"w-5 h-5 text-zinc-500 dark:text-zinc-400"})}),v.jsx("button",{className:"flex items-center justify-center hover:bg-zinc-200/80 dark:hover:bg-zinc-700/80 bg-white/80 dark:bg-[#1c1c1c]/80 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-700/50 rounded-tr-lg rounded-br-lg transition-all duration-200",onClick:o,"aria-label":`Switch to ${a==="light"?"dark":a==="dark"?"system":"light"} mode`,style:{width:"40px",height:"40px"},children:v.jsx(Oi,{mode:"wait",initial:!1,children:Le()})})]}),v.jsx("main",{className:"flex-1 flex flex-col overflow-hidden",children:x?v.jsx("div",{className:"w-full flex-1 flex items-center justify-center",children:v.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-6 lg:px-8 xl:px-16",children:[v.jsx("div",{className:"w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto"}),v.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mt-2",children:"Loading conversations..."})]})}):Ne?v.jsx("div",{className:"w-full flex-1 flex items-center justify-center",children:v.jsx("div",{className:"max-w-4xl mx-auto px-4 md:px-6 lg:px-8 xl:px-16",children:v.jsx($M,{user:c,onPromptSelect:L})})}):v.jsx("div",{className:"flex-1 relative overflow-hidden",children:v.jsx(e4,{messages:(p==null?void 0:p.messages)||[],streamingMessageId:y.currentMessageId,onStopStreaming:w,animationsDisabled:h,isLoadingMessages:C,isLoadingMoreMessages:k,hasMoreMessages:O,onLoadMoreMessages:()=>{},onShowScrollToBottom:R})})}),S&&!Ne&&v.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 pointer-events-none",children:v.jsx("div",{className:"max-w-4xl mx-auto pointer-events-auto px-4 md:px-6 lg:px-8 xl:px-16 flex justify-center",style:{paddingLeft:G?"16px":`${D+16}px`,paddingRight:"16px",paddingBottom:G?"140px":"160px"},children:v.jsxs(t4,{onClick:I,"aria-label":"Scroll to bottom",animationsDisabled:h,className:"shadow-lg hover:bg-zinc-50 dark:hover:bg-zinc-800/90 transition-all duration-200",children:["Scroll to bottom",v.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})})}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 pointer-events-none",children:v.jsx("div",{className:"max-w-4xl mx-auto pointer-events-auto px-4 md:px-6 lg:px-8 xl:px-16 pb-0 md:pb-4",style:{paddingLeft:G?"0":`${D+16}px`,paddingRight:G?"0":"16px"},children:v.jsx(WM,{onMessageSend:P,onModelSelect:z,disabled:y.isStreaming||x})})})]})},s4=({label:n,isActive:e,onClick:t,animationsDisabled:s})=>v.jsxs("button",{onClick:t,className:`relative px-4 py-2.5 text-sm font-semibold whitespace-nowrap transition-colors focus:outline-none 
                ${e?"text-pink-500":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white"}`,children:[n,e&&v.jsx(Ut.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500",layoutId:"active-settings-tab-indicator",transition:{duration:s?0:.2}})]}),u0="builtin_api_providers",h0="custom_api_providers",Gx=[{label:"Anthropic",value:"",id:"anthropic",base_url:""},{label:"OpenAI",value:"",id:"openai",base_url:""}],i4=()=>{try{const n=localStorage.getItem(u0);return n?JSON.parse(n):Gx}catch(n){return console.error("Error loading built-in providers from localStorage:",n),Gx}},r4=()=>{try{const n=localStorage.getItem(h0);return n?JSON.parse(n):[]}catch(n){return console.error("Error loading custom providers from localStorage:",n),[]}},a4=n=>{try{localStorage.setItem(u0,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{key:u0,value:n}}))}catch(e){console.error("Error saving built-in providers to localStorage:",e)}},o4=n=>{try{localStorage.setItem(h0,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{key:h0,value:n}}))}catch(e){console.error("Error saving custom providers to localStorage:",e)}},l4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)}),Kx=({title:n,consoleUrl:e,placeholder:t,consoleName:s,value:a,onChange:o})=>v.jsx(v.Fragment,{children:v.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800/50 rounded-2xl p-6 space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(a1,{className:"w-6 h-6 text-zinc-500 dark:text-zinc-400"}),v.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:n})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 min-w-[80px]",children:"API Key:"}),v.jsx("input",{type:"password",value:a,onChange:c=>o(c.target.value),placeholder:t,className:"w-full bg-white dark:bg-zinc-900/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]}),v.jsx("div",{children:v.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-pink-500 hover:underline",children:["Get your API key from ",s]})})]})}),c4=({provider:n,onUpdate:e,onDelete:t})=>{const s=(a,o)=>{const c={...n,[a]:o};e(c)};return v.jsx(v.Fragment,{children:v.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800/50 rounded-2xl p-6 relative",children:[v.jsx("button",{onClick:()=>t(n.id),className:"absolute top-4 right-4 p-1 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-full transition-colors","aria-label":"Delete provider",children:v.jsx(ic,{className:"w-4 h-4 text-zinc-500 dark:text-zinc-400"})}),v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx(a1,{className:"w-6 h-6 text-zinc-500 dark:text-zinc-400"}),v.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"OpenAI Compatible Provider"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Provider Name"}),v.jsx("input",{type:"text",value:n.label,onChange:a=>s("label",a.target.value),placeholder:"e.g., Local LLM, Custom API",className:"w-full bg-white dark:bg-zinc-900/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Base URL"}),v.jsx("input",{type:"url",value:n.base_url||"",onChange:a=>s("base_url",a.target.value),placeholder:"https://api.example.com/v1",className:"w-full bg-white dark:bg-zinc-900/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"API Key"}),v.jsx("input",{type:"password",value:n.value??"",onChange:a=>s("value",a.target.value),placeholder:"sk-...",className:"w-full bg-white dark:bg-zinc-900/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]})]})]})})},u4=()=>{var O;const[n,e]=$.useState([]),[t,s]=$.useState([]),[a,o]=$.useState(!1),[c,h]=$.useState(!1);$.useEffect(()=>{const B=i4(),V=r4();e(B),s(V)},[]);const f=(B,V)=>{e(H=>H.map(G=>G.id===B?{...G,value:V}:G)),o(!0)},p=()=>{const B={id:l4(),label:"",value:"",base_url:""};s(V=>[...V,B]),o(!0)},y=B=>{s(V=>V.map(H=>H.id===B.id?B:H)),o(!0)},_=B=>{s(H=>H.filter(G=>G.id!==B)),o(!0);const V=`models_${B}`;localStorage.removeItem(V)},w=async()=>{h(!0);try{if(t.filter(V=>{var H,G;return!V.label.trim()||!((H=V.base_url)!=null&&H.trim())||!((G=V.value)!=null&&G.trim())}).length>0){alert("Please fill in all fields for custom providers before saving."),h(!1);return}a4(n),o4(t),o(!1),await new Promise(V=>setTimeout(V,500))}catch(B){console.error("Error saving providers:",B),alert("Failed to save providers. Please try again.")}finally{h(!1)}},x=t.length===0||t[t.length-1].label.trim()&&((O=t[t.length-1].base_url)==null?void 0:O.trim())&&(t[t.length-1].value??"").trim(),C=n.find(B=>B.id==="anthropic"),k=n.find(B=>B.id==="openai");return v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:"API Keys"}),v.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:"This app offers free chats using Google's Gemini 1.5 Flash. For other models, like those from Anthropic or OpenAI, you will need to provide your own API key below. Your keys are stored securely on your device and are never sent to our servers."}),v.jsxs("div",{className:"space-y-6",children:[v.jsx(Kx,{title:"Anthropic API Key",consoleUrl:"https://console.anthropic.com/",placeholder:"sk-ant-...",consoleName:"Anthropic's Console",providerKey:"anthropic",value:(C==null?void 0:C.value)||"",onChange:B=>f("anthropic",B)}),v.jsx(Kx,{title:"OpenAI API Key",consoleUrl:"https://platform.openai.com/api-keys",placeholder:"sk-...",consoleName:"OpenAI's Console",providerKey:"openai",value:(k==null?void 0:k.value)||"",onChange:B=>f("openai",B)}),v.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"OpenAI Compatible Providers"}),v.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Add custom API endpoints that are compatible with OpenAI's API format."})]}),v.jsxs(ks,{onClick:p,className:"gap-3",disabled:!x,title:x?"":"Please complete the current provider before adding a new one",children:[v.jsx(s1,{className:"w-4 h-4 hidden sm:block"}),"Add Provider"]})]}),v.jsxs("div",{className:"space-y-4",children:[t.map(B=>v.jsx(c4,{provider:B,onUpdate:y,onDelete:_},B.id)),t.length===0&&v.jsxs("div",{className:"text-center py-8 text-zinc-500 dark:text-zinc-400",children:[v.jsx("p",{className:"text-sm",children:"No custom providers added yet."}),v.jsx("p",{className:"text-xs mt-1",children:'Click "Add Provider" to add your first OpenAI compatible API endpoint.'})]})]})]}),v.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-6",children:[v.jsx("div",{className:"flex justify-end",children:v.jsx(ks,{onClick:w,disabled:!a||c,className:`gap-2 ${a?"":"opacity-50"}`,children:c?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save All Changes"})}),a&&v.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-2 text-right",children:"You have unsaved changes"})]})]})]})},h4=()=>{};var Wx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},d4=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[s++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],h=n[t++],f=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},YR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,h=c?n[a+1]:0,f=a+2<n.length,p=f?n[a+2]:0,y=o>>2,_=(o&3)<<4|h>>4;let w=(h&15)<<2|p>>6,x=p&63;f||(x=64,c||(w=64)),s.push(t[y],t[_],t[w],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||p==null||_==null)throw new f4;const w=o<<2|h>>4;if(s.push(w),p!==64){const x=h<<4&240|p>>2;if(s.push(x),_!==64){const C=p<<6&192|_;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class f4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m4=function(n){const e=WR(n);return YR.encodeByteArray(e,!0)},Zf=function(n){return m4(n).replace(/\./g,"")},XR=function(n){try{return YR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=()=>p4().__FIREBASE_DEFAULTS__,y4=()=>{if(typeof process>"u"||typeof Wx>"u")return;const n=Wx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},v4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XR(n[1]);return e&&JSON.parse(e)},Dm=()=>{try{return h4()||g4()||y4()||v4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},QR=n=>{var e,t;return(t=(e=Dm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},_4=n=>{const e=QR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ZR=()=>{var n;return(n=Dm())===null||n===void 0?void 0:n.config},JR=n=>{var e;return(e=Dm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zf(JSON.stringify(t)),Zf(JSON.stringify(c)),""].join(".")}const Qu={};function E4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qu))Qu[e]?n.emulator.push(e):n.prod.push(e);return n}function T4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Yx=!1;function tC(n,e){if(typeof window>"u"||typeof document>"u"||!Ec(window.location.host)||Qu[n]===e||Qu[n]||Yx)return;Qu[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",o=E4().prod.length>0;function c(){const w=document.getElementById(s);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,x){w.setAttribute("width","24"),w.setAttribute("id",x),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Yx=!0,c()},w}function y(w,x){w.setAttribute("id",x),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=T4(s),x=t("text"),C=document.getElementById(x)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),B=t("preprendIcon"),V=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const H=w.element;h(H),y(O,k);const G=p();f(V,B),H.append(V,C,O,G),document.body.appendChild(H)}o?(C.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gs())}function S4(){var n;const e=(n=Dm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I4(){const n=gs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function N4(){return!S4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k4(){try{return typeof indexedDB=="object"}catch{return!1}}function M4(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="FirebaseError";class Zr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=O4,Object.setPrototypeOf(this,Zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?D4(o,s):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Zr(a,h,s)}}function D4(n,e){return n.replace(P4,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const P4=/\{\$([^}]+)}/g;function L4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const o=n[a],c=e[a];if(Xx(o)&&Xx(c)){if(!Wo(o,c))return!1}else if(o!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Xx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,o]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Ou(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function V4(n,e){const t=new j4(n,e);return t.subscribe.bind(t)}class j4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");z4(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=xy),a.error===void 0&&(a.error=xy),a.complete===void 0&&(a.complete=xy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n){return n&&n._delegate?n._delegate:n}class Yo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new b4;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F4(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});s.resolve(o)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);s===h&&c.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),o=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:B4(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B4(n){return n===Vo?void 0:n}function F4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const q4={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},$4=dt.INFO,G4={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},K4=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=G4[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pv{constructor(e){this.name=e,this._logLevel=$4,this._logHandler=K4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const W4=(n,e)=>e.some(t=>n instanceof t);let Qx,Zx;function Y4(){return Qx||(Qx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X4(){return Zx||(Zx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nC=new WeakMap,d0=new WeakMap,sC=new WeakMap,Sy=new WeakMap,Lv=new WeakMap;function Q4(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(ja(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&nC.set(t,n)}).catch(()=>{}),Lv.set(e,n),e}function Z4(n){if(d0.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});d0.set(n,e)}let f0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return d0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ja(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function J4(n){f0=n(f0)}function ej(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ay(this),e,...t);return sC.set(s,e.sort?e.sort():[e]),ja(s)}:X4().includes(n)?function(...e){return n.apply(Ay(this),e),ja(nC.get(this))}:function(...e){return ja(n.apply(Ay(this),e))}}function tj(n){return typeof n=="function"?ej(n):(n instanceof IDBTransaction&&Z4(n),W4(n,Y4())?new Proxy(n,f0):n)}function ja(n){if(n instanceof IDBRequest)return Q4(n);if(Sy.has(n))return Sy.get(n);const e=tj(n);return e!==n&&(Sy.set(n,e),Lv.set(e,n)),e}const Ay=n=>Lv.get(n);function nj(n,e,{blocked:t,upgrade:s,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),h=ja(c);return s&&c.addEventListener("upgradeneeded",f=>{s(ja(c.result),f.oldVersion,f.newVersion,ja(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const sj=["get","getKey","getAll","getAllKeys","count"],ij=["put","add","delete","clear"],Ry=new Map;function Jx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ry.get(e))return Ry.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=ij.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||sj.includes(t)))return;const o=async function(c,...h){const f=this.transaction(c,a?"readwrite":"readonly");let p=f.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&f.done]))[0]};return Ry.set(e,o),o}J4(n=>({...n,get:(e,t,s)=>Jx(e,t)||n.get(e,t,s),has:(e,t)=>!!Jx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aj(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function aj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const m0="@firebase/app",eS="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Pv("@firebase/app"),oj="@firebase/app-compat",lj="@firebase/analytics-compat",cj="@firebase/analytics",uj="@firebase/app-check-compat",hj="@firebase/app-check",dj="@firebase/auth",fj="@firebase/auth-compat",mj="@firebase/database",pj="@firebase/data-connect",gj="@firebase/database-compat",yj="@firebase/functions",vj="@firebase/functions-compat",_j="@firebase/installations",bj="@firebase/installations-compat",wj="@firebase/messaging",Ej="@firebase/messaging-compat",Tj="@firebase/performance",xj="@firebase/performance-compat",Sj="@firebase/remote-config",Aj="@firebase/remote-config-compat",Rj="@firebase/storage",Cj="@firebase/storage-compat",Ij="@firebase/firestore",Nj="@firebase/ai",kj="@firebase/firestore-compat",Mj="firebase",Oj="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="[DEFAULT]",Dj={[m0]:"fire-core",[oj]:"fire-core-compat",[cj]:"fire-analytics",[lj]:"fire-analytics-compat",[hj]:"fire-app-check",[uj]:"fire-app-check-compat",[dj]:"fire-auth",[fj]:"fire-auth-compat",[mj]:"fire-rtdb",[pj]:"fire-data-connect",[gj]:"fire-rtdb-compat",[yj]:"fire-fn",[vj]:"fire-fn-compat",[_j]:"fire-iid",[bj]:"fire-iid-compat",[wj]:"fire-fcm",[Ej]:"fire-fcm-compat",[Tj]:"fire-perf",[xj]:"fire-perf-compat",[Sj]:"fire-rc",[Aj]:"fire-rc-compat",[Rj]:"fire-gcs",[Cj]:"fire-gcs-compat",[Ij]:"fire-fst",[kj]:"fire-fst-compat",[Nj]:"fire-vertex","fire-js":"fire-js",[Mj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Map,Pj=new Map,g0=new Map;function tS(n,e){try{n.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fc(n){const e=n.name;if(g0.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;g0.set(e,n);for(const t of Jf.values())tS(t,n);for(const t of Pj.values())tS(t,n);return!0}function Vv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ks(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},za=new Sh("app","Firebase",Lj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw za.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=Oj;function iC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:p0,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw za.create("bad-app-name",{appName:String(a)});if(t||(t=ZR()),!t)throw za.create("no-options");const o=Jf.get(a);if(o){if(Wo(t,o.options)&&Wo(s,o.config))return o;throw za.create("duplicate-app",{appName:a})}const c=new H4(a);for(const f of g0.values())c.addComponent(f);const h=new Vj(t,s,c);return Jf.set(a,h),h}function rC(n=p0){const e=Jf.get(n);if(!e&&n===p0&&ZR())return iC();if(!e)throw za.create("no-app",{appName:n});return e}function Ua(n,e,t){var s;let a=(s=Dj[n])!==null&&s!==void 0?s:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(h.join(" "));return}fc(new Yo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="firebase-heartbeat-database",zj=1,uh="firebase-heartbeat-store";let Cy=null;function aC(){return Cy||(Cy=nj(jj,zj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uh)}catch(t){console.warn(t)}}}}).catch(n=>{throw za.create("idb-open",{originalErrorMessage:n.message})})),Cy}async function Uj(n){try{const t=(await aC()).transaction(uh),s=await t.objectStore(uh).get(oC(n));return await t.done,s}catch(e){if(e instanceof Zr)Wr.warn(e.message);else{const t=za.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(t.message)}}}async function nS(n,e){try{const s=(await aC()).transaction(uh,"readwrite");await s.objectStore(uh).put(e,oC(n)),await s.done}catch(t){if(t instanceof Zr)Wr.warn(t.message);else{const s=za.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wr.warn(s.message)}}}function oC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=1024,Fj=30;class Hj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $j(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>Fj){const c=Gj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Wr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sS(),{heartbeatsToSend:s,unsentEntries:a}=qj(this._heartbeatsCache.heartbeats),o=Zf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Wr.warn(t),""}}}function sS(){return new Date().toISOString().substring(0,10)}function qj(n,e=Bj){const t=[];let s=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),iS(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),iS(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class $j{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k4()?M4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Uj(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return nS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return nS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function iS(n){return Zf(JSON.stringify({version:2,heartbeats:n})).length}function Gj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(n){fc(new Yo("platform-logger",e=>new rj(e),"PRIVATE")),fc(new Yo("heartbeat",e=>new Hj(e),"PRIVATE")),Ua(m0,eS,n),Ua(m0,eS,"esm2017"),Ua("fire-js","")}Kj("");var Wj="firebase",Yj="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua(Wj,Yj,"app");function jv(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function lC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xj=lC,cC=new Sh("auth","Firebase",lC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=new Pv("@firebase/auth");function Qj(n,...e){em.logLevel<=dt.WARN&&em.warn(`Auth (${Tc}): ${n}`,...e)}function xf(n,...e){em.logLevel<=dt.ERROR&&em.error(`Auth (${Tc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(n,...e){throw Uv(n,...e)}function Mi(n,...e){return Uv(n,...e)}function zv(n,e,t){const s=Object.assign(Object.assign({},Xj()),{[e]:t});return new Sh("auth","Firebase",s).create(e,{appName:n.name})}function Gr(n){return zv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zj(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&bi(n,"argument-error"),zv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uv(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return cC.create(n,...e)}function qe(n,e,...t){if(!n)throw Uv(e,...t)}function Fr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xf(e),new Error(e)}function Yr(n,e){n||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Jj(){return rS()==="http:"||rS()==="https:"}function rS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jj()||R4()||"connection"in navigator)?navigator.onLine:!0}function tz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yr(t>e,"Short delay should be less than long delay!"),this.isMobile=x4()||C4()}get(){return ez()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(n,e){Yr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iz=new Rh(3e4,6e4);function eo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function to(n,e,t,s,a={}){return hC(n,a,async()=>{let o={},c={};s&&(e==="GET"?c=s:o={body:JSON.stringify(s)});const h=Ah(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},o);return A4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ec(n.emulatorConfig.host)&&(p.credentials="include"),uC.fetch()(await dC(n,n.config.apiHost,t,h),p)})}async function hC(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},nz),e);try{const a=new az(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw af(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw af(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw af(n,"user-disabled",c);const y=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw zv(n,y,p);bi(n,y)}}catch(a){if(a instanceof Zr)throw a;bi(n,"network-request-failed",{message:String(a)})}}async function Ch(n,e,t,s,a={}){const o=await to(n,e,t,s,a);return"mfaPendingCredential"in o&&bi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function dC(n,e,t,s){const a=`${e}${t}?${s}`,o=n,c=o.config.emulator?Bv(n.config,a):`${n.config.apiScheme}://${a}`;return sz.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function rz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class az{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Mi(this.auth,"network-request-failed")),iz.get())})}}function af(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Mi(n,e,s);return a.customData._tokenResponse=t,a}function aS(n){return n!==void 0&&n.enterprise!==void 0}class oz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lz(n,e){return to(n,"GET","/v2/recaptchaConfig",eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(n,e){return to(n,"POST","/v1/accounts:delete",e)}async function tm(n,e){return to(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uz(n,e=!1){const t=pn(n),s=await t.getIdToken(e),a=Fv(s);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:a,token:s,authTime:Zu(Iy(a.auth_time)),issuedAtTime:Zu(Iy(a.iat)),expirationTime:Zu(Iy(a.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Iy(n){return Number(n)*1e3}function Fv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return xf("JWT malformed, contained fewer than 3 sections"),null;try{const a=XR(t);return a?JSON.parse(a):(xf("Failed to decode base64 JWT payload"),null)}catch(a){return xf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function oS(n){const e=Fv(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Zr&&hz(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function hz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(n){var e;const t=n.auth,s=await n.getIdToken(),a=await hh(n,tm(t,{idToken:s}));qe(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fC(o.providerUserInfo):[],h=mz(n.providerData,c),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new v0(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function fz(n){const e=pn(n);await nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mz(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function fC(n){return n.map(e=>{var{providerId:t}=e,s=jv(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pz(n,e){const t=await hC(n,{},async()=>{const s=Ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await dC(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:s};return n.emulatorConfig&&Ec(n.emulatorConfig.host)&&(f.credentials="include"),uC.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gz(n,e){return to(n,"POST","/v2/accounts:revokeToken",eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=oS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:o}=await pz(e,t);this.updateTokensAndExpiration(s,a,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:o}=t,c=new rc;return s&&(qe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(qe(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rc,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,o=jv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new v0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await hh(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uz(this,e)}reload(){return fz(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await nm(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ks(this.auth.app))return Promise.reject(Gr(this.auth));const e=await this.getIdToken();return await hh(this,cz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,o,c,h,f,p,y;const _=(s=t.displayName)!==null&&s!==void 0?s:void 0,w=(a=t.email)!==null&&a!==void 0?a:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(c=t.photoURL)!==null&&c!==void 0?c:void 0,k=(h=t.tenantId)!==null&&h!==void 0?h:void 0,O=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,B=(p=t.createdAt)!==null&&p!==void 0?p:void 0,V=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:H,emailVerified:G,isAnonymous:F,providerData:te,stsTokenManager:S}=t;qe(H&&S,e,"internal-error");const R=rc.fromJSON(this.name,S);qe(typeof H=="string",e,"internal-error"),Ca(_,e.name),Ca(w,e.name),qe(typeof G=="boolean",e,"internal-error"),qe(typeof F=="boolean",e,"internal-error"),Ca(x,e.name),Ca(C,e.name),Ca(k,e.name),Ca(O,e.name),Ca(B,e.name),Ca(V,e.name);const I=new Ni({uid:H,auth:e,email:w,emailVerified:G,displayName:_,isAnonymous:F,photoURL:C,phoneNumber:x,tenantId:k,stsTokenManager:R,createdAt:B,lastLoginAt:V});return te&&Array.isArray(te)&&(I.providerData=te.map(P=>Object.assign({},P))),O&&(I._redirectEventId=O),I}static async _fromIdTokenResponse(e,t,s=!1){const a=new rc;a.updateFromServerResponse(t);const o=new Ni({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await nm(o),o}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?fC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new rc;h.updateFromIdToken(s);const f=new Ni({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new v0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new Map;function Hr(n){Yr(n instanceof Function,"Expected a class definition");let e=lS.get(n);return e?(Yr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mC.type="NONE";const cS=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n,e,t){return`firebase:${n}:${e}:${t}`}class ac{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:o}=this.auth;this.fullUserKey=Sf(this.userKey,a.apiKey,o),this.fullPersistenceKey=Sf("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tm(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ac(Hr(cS),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||Hr(cS);const c=Sf(s,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const w=await tm(e,{idToken:y}).catch(()=>{});if(!w)break;_=await Ni._fromGetAccountInfoResponse(e,w,y)}else _=Ni._fromJSON(e,y);p!==o&&(h=_),o=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new ac(o,e,s):(o=f[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new ac(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bC(e))return"Blackberry";if(wC(e))return"Webos";if(gC(e))return"Safari";if((e.includes("chrome/")||yC(e))&&!e.includes("edge/"))return"Chrome";if(_C(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function pC(n=gs()){return/firefox\//i.test(n)}function gC(n=gs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yC(n=gs()){return/crios\//i.test(n)}function vC(n=gs()){return/iemobile/i.test(n)}function _C(n=gs()){return/android/i.test(n)}function bC(n=gs()){return/blackberry/i.test(n)}function wC(n=gs()){return/webos/i.test(n)}function Hv(n=gs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yz(n=gs()){var e;return Hv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vz(){return I4()&&document.documentMode===10}function EC(n=gs()){return Hv(n)||_C(n)||wC(n)||bC(n)||/windows phone/i.test(n)||vC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n,e=[]){let t;switch(n){case"Browser":t=uS(gs());break;case"Worker":t=`${uS(gs())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((c,h)=>{try{const f=e(o);c(f)}catch(f){h(f)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(n,e={}){return to(n,"GET","/v2/passwordPolicy",eo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=6;class Ez{constructor(e){var t,s,a,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:wz,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,o,c,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(s=f.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hS(this),this.idTokenSubscription=new hS(this),this.beforeStateQueue=new _z(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hr(t)),this._initializationPromise=this.queue(async()=>{var s,a,o;if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tm(this,{idToken:e}),s=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ks(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===h)&&(f!=null&&f.user)&&(a=f.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ks(this.app))return Promise.reject(Gr(this));const t=e?pn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ks(this.app)?Promise.reject(Gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ks(this.app)?Promise.reject(Gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bz(this),t=new Ez(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await gz(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hr(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,a);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Qj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function no(n){return pn(n)}class hS{constructor(e){this.auth=e,this.observer=null,this.addObserver=V4(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xz(n){Pm=n}function xC(n){return Pm.loadJS(n)}function Sz(){return Pm.recaptchaEnterpriseScript}function Az(){return Pm.gapiScript}function Rz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Cz{constructor(){this.enterprise=new Iz}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Iz{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Nz="recaptcha-enterprise",SC="NO_RECAPTCHA";class kz{constructor(e){this.type=Nz,this.auth=no(e)}async verify(e="verify",t=!1){async function s(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{lz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new oz(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,c(p.siteKey)}}).catch(f=>{h(f)})})}function a(o,c,h){const f=window.grecaptcha;aS(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{c(p)}).catch(()=>{c(SC)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cz().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{s(this.auth).then(h=>{if(!t&&aS(window.grecaptcha))a(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Sz();f.length!==0&&(f+=h),xC(f).then(()=>{a(h,o,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function dS(n,e,t,s=!1,a=!1){const o=new kz(n);let c;if(a)c=SC;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function _0(n,e,t,s,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await dS(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await dS(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(n,e){const t=Vv(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Wo(o,e??{}))return a;bi(a,"already-initialized")}return t.initialize({options:e})}function Oz(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Hr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Dz(n,e,t){const s=no(n);qe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,o=AC(e),{host:c,port:h}=Pz(e),f=h===null?"":`:${h}`,p={url:`${o}//${c}${f}/`},y=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){qe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),qe(Wo(p,s.config.emulator)&&Wo(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,Ec(c)?(eC(`${o}//${c}${f}`),tC("Auth",!0)):Lz()}function AC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Pz(n){const e=AC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const o=a[1];return{host:o,port:fS(s.substr(o.length+1))}}else{const[o,c]=s.split(":");return{host:o,port:fS(c)}}}function fS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Lz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function Vz(n,e){return to(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(n,e){return Ch(n,"POST","/v1/accounts:signInWithPassword",eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zz(n,e){return Ch(n,"POST","/v1/accounts:signInWithEmailLink",eo(n,e))}async function Uz(n,e){return Ch(n,"POST","/v1/accounts:signInWithEmailLink",eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends qv{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new dh(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new dh(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _0(e,t,"signInWithPassword",jz);case"emailLink":return zz(e,{email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _0(e,s,"signUpPassword",Vz);case"emailLink":return Uz(e,{idToken:t,email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(n,e){return Ch(n,"POST","/v1/accounts:signInWithIdp",eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz="http://localhost";class Xo extends qv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,o=jv(t,["providerId","signInMethod"]);if(!s||!a)return null;const c=new Xo(s,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return oc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,oc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oc(e,t)}buildRequest(){const e={requestUri:Bz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ah(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Hz(n){const e=Mu(Ou(n)).link,t=e?Mu(Ou(e)).deep_link_id:null,s=Mu(Ou(n)).deep_link_id;return(s?Mu(Ou(s)).link:null)||s||t||e||n}class $v{constructor(e){var t,s,a,o,c,h;const f=Mu(Ou(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,y=(s=f.oobCode)!==null&&s!==void 0?s:null,_=Fz((a=f.mode)!==null&&a!==void 0?a:null);qe(p&&y&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=y,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=Hz(e);try{return new $v(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.providerId=xc.PROVIDER_ID}static credential(e,t){return dh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=$v.parseLink(t);return qe(s,"argument-error"),dh._fromEmailAndCode(e,s.code,s.tenantId)}}xc.PROVIDER_ID="password";xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends Gv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends Ih{constructor(){super("facebook.com")}static credential(e){return Xo._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ma.credential(e.oauthAccessToken)}catch{return null}}}Ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ma.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xo._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Br.credential(t,s)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Ih{constructor(){super("github.com")}static credential(e){return Xo._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oa.credential(e.oauthAccessToken)}catch{return null}}}Oa.GITHUB_SIGN_IN_METHOD="github.com";Oa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Ih{constructor(){super("twitter.com")}static credential(e,t){return Xo._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Da.credential(t,s)}catch{return null}}}Da.TWITTER_SIGN_IN_METHOD="twitter.com";Da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qz(n,e){return Ch(n,"POST","/v1/accounts:signUp",eo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const o=await Ni._fromIdTokenResponse(e,s,a),c=mS(s);return new Qo({user:o,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=mS(s);return new Qo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function mS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends Zr{constructor(e,t,s,a){var o;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,sm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new sm(e,t,s,a)}}function RC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sm._fromErrorAndOperation(n,o,e,s):o})}async function $z(n,e,t=!1){const s=await hh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(n,e,t=!1){const{auth:s}=n;if(Ks(s.app))return Promise.reject(Gr(s));const a="reauthenticate";try{const o=await hh(n,RC(s,a,e,n),t);qe(o.idToken,s,"internal-error");const c=Fv(o.idToken);qe(c,s,"internal-error");const{sub:h}=c;return qe(n.uid===h,s,"user-mismatch"),Qo._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&bi(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(n,e,t=!1){if(Ks(n.app))return Promise.reject(Gr(n));const s="signIn",a=await RC(n,s,e),o=await Qo._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(o.user),o}async function Kz(n,e){return CC(no(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(n){const e=no(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wz(n,e,t){if(Ks(n.app))return Promise.reject(Gr(n));const s=no(n),c=await _0(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qz).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&IC(n),f}),h=await Qo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(h.user),h}function Yz(n,e,t){return Ks(n.app)?Promise.reject(Gr(n)):Kz(pn(n),xc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&IC(n),s})}function Xz(n,e,t,s){return pn(n).onIdTokenChanged(e,t,s)}function Qz(n,e,t){return pn(n).beforeAuthStateChanged(e,t)}function NC(n,e,t,s){return pn(n).onAuthStateChanged(e,t,s)}function Zz(n){return pn(n).signOut()}const im="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(im,"1"),this.storage.removeItem(im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=1e3,e3=10;class MC extends kC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},o=this.storage.getItem(s);vz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,e3):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Jz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}MC.type="LOCAL";const t3=MC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends kC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}OC.type="SESSION";const DC=OC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Lm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(c).map(async p=>p(t.origin,o)),f=await n3(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,f)=>{const p=Kv("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(_){const w=_;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(w.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function i3(n){ir().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function r3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a3(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function o3(){return PC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firebaseLocalStorageDb",l3=1,rm="firebaseLocalStorage",VC="fbase_key";class Nh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vm(n,e){return n.transaction([rm],e?"readwrite":"readonly").objectStore(rm)}function c3(){const n=indexedDB.deleteDatabase(LC);return new Nh(n).toPromise()}function b0(){const n=indexedDB.open(LC,l3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(rm,{keyPath:VC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(rm)?e(s):(s.close(),await c3(),e(await b0()))})})}async function pS(n,e,t){const s=Vm(n,!0).put({[VC]:e,value:t});return new Nh(s).toPromise()}async function u3(n,e){const t=Vm(n,!1).get(e),s=await new Nh(t).toPromise();return s===void 0?null:s.value}function gS(n,e){const t=Vm(n,!0).delete(e);return new Nh(t).toPromise()}const h3=800,d3=3;class jC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>d3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(o3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await r3(),!this.activeServiceWorker)return;this.sender=new s3(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b0();return await pS(e,im,"1"),await gS(e,im),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>pS(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>u3(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Vm(a,!1).getAll();return new Nh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jC.type="LOCAL";const f3=jC;new Rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n,e){return e?Hr(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends qv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m3(n){return CC(n.auth,new Wv(n),n.bypassAuthState)}function p3(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),Gz(t,new Wv(n),n.bypassAuthState)}async function g3(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),$z(t,new Wv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t,s,a,o=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m3;case"linkViaPopup":case"linkViaRedirect":return g3;case"reauthViaPopup":case"reauthViaRedirect":return p3;default:bi(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new Rh(2e3,1e4);async function v3(n,e,t){if(Ks(n.app))return Promise.reject(Mi(n,"operation-not-supported-in-this-environment"));const s=no(n);Zj(n,e,Gv);const a=zC(s,t);return new Bo(s,"signInViaPopup",e,a).executeNotNull()}class Bo extends UC{constructor(e,t,s,a,o){super(e,t,a,o),this.provider=s,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y3.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="pendingRedirect",Af=new Map;class b3 extends UC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const s=await w3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w3(n,e){const t=x3(e),s=T3(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function E3(n,e){Af.set(n._key(),e)}function T3(n){return Hr(n._redirectPersistence)}function x3(n){return Sf(_3,n.config.apiKey,n.name)}async function S3(n,e,t=!1){if(Ks(n.app))return Promise.reject(Gr(n));const s=no(n),a=zC(s,e),c=await new b3(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=10*60*1e3;class R3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!BC(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Mi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A3&&this.cachedEventUids.clear(),this.cachedEventUids.has(yS(e))}saveEventToCache(e){this.cachedEventUids.add(yS(e)),this.lastProcessedEventTime=Date.now()}}function yS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(n,e={}){return to(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k3=/^https?/;async function M3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await I3(n);for(const t of e)try{if(O3(t))return}catch{}bi(n,"unauthorized-domain")}function O3(n){const e=y0(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!k3.test(t))return!1;if(N3.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new Rh(3e4,6e4);function vS(){const n=ir().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function P3(n){return new Promise((e,t)=>{var s,a,o;function c(){vS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vS(),t(Mi(n,"network-request-failed"))},timeout:D3.get()})}if(!((a=(s=ir().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=ir().gapi)===null||o===void 0)&&o.load)c();else{const h=Rz("iframefcb");return ir()[h]=()=>{gapi.load?c():t(Mi(n,"network-request-failed"))},xC(`${Az()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Rf=null,e})}let Rf=null;function L3(n){return Rf=Rf||P3(n),Rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new Rh(5e3,15e3),j3="__/auth/iframe",z3="emulator/auth/iframe",U3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F3(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bv(e,z3):`https://${n.config.authDomain}/${j3}`,s={apiKey:e.apiKey,appName:n.name,v:Tc},a=B3.get(n.config.apiHost);a&&(s.eid=a);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${Ah(s).slice(1)}`}async function H3(n){const e=await L3(n),t=ir().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:F3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U3,dontclear:!0},s=>new Promise(async(a,o)=>{await s.restyle({setHideOnLeave:!1});const c=Mi(n,"network-request-failed"),h=ir().setTimeout(()=>{o(c)},V3.get());function f(){ir().clearTimeout(h),a(s)}s.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$3=500,G3=600,K3="_blank",W3="http://localhost";class _S{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y3(n,e,t,s=$3,a=G3){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const f=Object.assign(Object.assign({},q3),{width:s.toString(),height:a.toString(),top:o,left:c}),p=gs().toLowerCase();t&&(h=yC(p)?K3:t),pC(p)&&(e=e||W3,f.scrollbars="yes");const y=Object.entries(f).reduce((w,[x,C])=>`${w}${x}=${C},`,"");if(yz(p)&&h!=="_self")return X3(e||"",h),new _S(null);const _=window.open(e||"",h,y);qe(_,n,"popup-blocked");try{_.focus()}catch{}return new _S(_)}function X3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="__/auth/handler",Z3="emulator/auth/handler",J3=encodeURIComponent("fac");async function bS(n,e,t,s,a,o){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Tc,eventId:a};if(e instanceof Gv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",L4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Ih){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),p=f?`#${J3}=${encodeURIComponent(f)}`:"";return`${eU(n)}?${Ah(h).slice(1)}${p}`}function eU({config:n}){return n.emulator?Bv(n,Z3):`https://${n.authDomain}/${Q3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="webStorageSupport";class tU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DC,this._completeRedirectFn=S3,this._overrideRedirectResult=E3}async _openPopup(e,t,s,a){var o;Yr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await bS(e,t,s,y0(),a);return Y3(e,c,Kv())}async _openRedirect(e,t,s,a){await this._originValidation(e);const o=await bS(e,t,s,y0(),a);return i3(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Yr(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await H3(e),s=new R3(e);return t.register("authEvent",a=>(qe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ny,{type:Ny},a=>{var o;const c=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Ny];c!==void 0&&t(!!c),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=M3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return EC()||gC()||Hv()}}const nU=tU;var wS="@firebase/auth",ES="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rU(n){fc(new Yo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=s.options;qe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TC(n)},p=new Tz(s,a,o,f);return Oz(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),fc(new Yo("auth-internal",e=>{const t=no(e.getProvider("auth").getImmediate());return(s=>new sU(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ua(wS,ES,iU(n)),Ua(wS,ES,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=5*60,oU=JR("authIdTokenMaxAge")||aU;let TS=null;const lU=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>oU)return;const a=t==null?void 0:t.token;TS!==a&&(TS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function cU(n=rC()){const e=Vv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Mz(n,{popupRedirectResolver:nU,persistence:[f3,t3,DC]}),s=JR("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const c=lU(o.toString());Qz(t,c,()=>c(t.currentUser)),Xz(t,h=>c(h))}}const a=QR("auth");return a&&Dz(t,`http://${a}`),t}function uU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}xz({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const o=Mi("internal-error");o.customData=a,t(o)},s.type="text/javascript",s.charset="UTF-8",uU().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rU("Browser");var xS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ba,FC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,R){function I(){}I.prototype=R.prototype,S.D=R.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(P,L,z){for(var D=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)D[Ne-2]=arguments[Ne];return R.prototype[L].apply(P,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,R,I){I||(I=0);var P=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)P[L]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(L=0;16>L;++L)P[L]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=S.g[0],I=S.g[1],L=S.g[2];var z=S.g[3],D=R+(z^I&(L^z))+P[0]+3614090360&4294967295;R=I+(D<<7&4294967295|D>>>25),D=z+(L^R&(I^L))+P[1]+3905402710&4294967295,z=R+(D<<12&4294967295|D>>>20),D=L+(I^z&(R^I))+P[2]+606105819&4294967295,L=z+(D<<17&4294967295|D>>>15),D=I+(R^L&(z^R))+P[3]+3250441966&4294967295,I=L+(D<<22&4294967295|D>>>10),D=R+(z^I&(L^z))+P[4]+4118548399&4294967295,R=I+(D<<7&4294967295|D>>>25),D=z+(L^R&(I^L))+P[5]+1200080426&4294967295,z=R+(D<<12&4294967295|D>>>20),D=L+(I^z&(R^I))+P[6]+2821735955&4294967295,L=z+(D<<17&4294967295|D>>>15),D=I+(R^L&(z^R))+P[7]+4249261313&4294967295,I=L+(D<<22&4294967295|D>>>10),D=R+(z^I&(L^z))+P[8]+1770035416&4294967295,R=I+(D<<7&4294967295|D>>>25),D=z+(L^R&(I^L))+P[9]+2336552879&4294967295,z=R+(D<<12&4294967295|D>>>20),D=L+(I^z&(R^I))+P[10]+4294925233&4294967295,L=z+(D<<17&4294967295|D>>>15),D=I+(R^L&(z^R))+P[11]+2304563134&4294967295,I=L+(D<<22&4294967295|D>>>10),D=R+(z^I&(L^z))+P[12]+1804603682&4294967295,R=I+(D<<7&4294967295|D>>>25),D=z+(L^R&(I^L))+P[13]+4254626195&4294967295,z=R+(D<<12&4294967295|D>>>20),D=L+(I^z&(R^I))+P[14]+2792965006&4294967295,L=z+(D<<17&4294967295|D>>>15),D=I+(R^L&(z^R))+P[15]+1236535329&4294967295,I=L+(D<<22&4294967295|D>>>10),D=R+(L^z&(I^L))+P[1]+4129170786&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^L&(R^I))+P[6]+3225465664&4294967295,z=R+(D<<9&4294967295|D>>>23),D=L+(R^I&(z^R))+P[11]+643717713&4294967295,L=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(L^z))+P[0]+3921069994&4294967295,I=L+(D<<20&4294967295|D>>>12),D=R+(L^z&(I^L))+P[5]+3593408605&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^L&(R^I))+P[10]+38016083&4294967295,z=R+(D<<9&4294967295|D>>>23),D=L+(R^I&(z^R))+P[15]+3634488961&4294967295,L=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(L^z))+P[4]+3889429448&4294967295,I=L+(D<<20&4294967295|D>>>12),D=R+(L^z&(I^L))+P[9]+568446438&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^L&(R^I))+P[14]+3275163606&4294967295,z=R+(D<<9&4294967295|D>>>23),D=L+(R^I&(z^R))+P[3]+4107603335&4294967295,L=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(L^z))+P[8]+1163531501&4294967295,I=L+(D<<20&4294967295|D>>>12),D=R+(L^z&(I^L))+P[13]+2850285829&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^L&(R^I))+P[2]+4243563512&4294967295,z=R+(D<<9&4294967295|D>>>23),D=L+(R^I&(z^R))+P[7]+1735328473&4294967295,L=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(L^z))+P[12]+2368359562&4294967295,I=L+(D<<20&4294967295|D>>>12),D=R+(I^L^z)+P[5]+4294588738&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^L)+P[8]+2272392833&4294967295,z=R+(D<<11&4294967295|D>>>21),D=L+(z^R^I)+P[11]+1839030562&4294967295,L=z+(D<<16&4294967295|D>>>16),D=I+(L^z^R)+P[14]+4259657740&4294967295,I=L+(D<<23&4294967295|D>>>9),D=R+(I^L^z)+P[1]+2763975236&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^L)+P[4]+1272893353&4294967295,z=R+(D<<11&4294967295|D>>>21),D=L+(z^R^I)+P[7]+4139469664&4294967295,L=z+(D<<16&4294967295|D>>>16),D=I+(L^z^R)+P[10]+3200236656&4294967295,I=L+(D<<23&4294967295|D>>>9),D=R+(I^L^z)+P[13]+681279174&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^L)+P[0]+3936430074&4294967295,z=R+(D<<11&4294967295|D>>>21),D=L+(z^R^I)+P[3]+3572445317&4294967295,L=z+(D<<16&4294967295|D>>>16),D=I+(L^z^R)+P[6]+76029189&4294967295,I=L+(D<<23&4294967295|D>>>9),D=R+(I^L^z)+P[9]+3654602809&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^L)+P[12]+3873151461&4294967295,z=R+(D<<11&4294967295|D>>>21),D=L+(z^R^I)+P[15]+530742520&4294967295,L=z+(D<<16&4294967295|D>>>16),D=I+(L^z^R)+P[2]+3299628645&4294967295,I=L+(D<<23&4294967295|D>>>9),D=R+(L^(I|~z))+P[0]+4096336452&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~L))+P[7]+1126891415&4294967295,z=R+(D<<10&4294967295|D>>>22),D=L+(R^(z|~I))+P[14]+2878612391&4294967295,L=z+(D<<15&4294967295|D>>>17),D=I+(z^(L|~R))+P[5]+4237533241&4294967295,I=L+(D<<21&4294967295|D>>>11),D=R+(L^(I|~z))+P[12]+1700485571&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~L))+P[3]+2399980690&4294967295,z=R+(D<<10&4294967295|D>>>22),D=L+(R^(z|~I))+P[10]+4293915773&4294967295,L=z+(D<<15&4294967295|D>>>17),D=I+(z^(L|~R))+P[1]+2240044497&4294967295,I=L+(D<<21&4294967295|D>>>11),D=R+(L^(I|~z))+P[8]+1873313359&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~L))+P[15]+4264355552&4294967295,z=R+(D<<10&4294967295|D>>>22),D=L+(R^(z|~I))+P[6]+2734768916&4294967295,L=z+(D<<15&4294967295|D>>>17),D=I+(z^(L|~R))+P[13]+1309151649&4294967295,I=L+(D<<21&4294967295|D>>>11),D=R+(L^(I|~z))+P[4]+4149444226&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~L))+P[11]+3174756917&4294967295,z=R+(D<<10&4294967295|D>>>22),D=L+(R^(z|~I))+P[2]+718787259&4294967295,L=z+(D<<15&4294967295|D>>>17),D=I+(z^(L|~R))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+R&4294967295,S.g[1]=S.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+L&4294967295,S.g[3]=S.g[3]+z&4294967295}s.prototype.u=function(S,R){R===void 0&&(R=S.length);for(var I=R-this.blockSize,P=this.B,L=this.h,z=0;z<R;){if(L==0)for(;z<=I;)a(this,S,z),z+=this.blockSize;if(typeof S=="string"){for(;z<R;)if(P[L++]=S.charCodeAt(z++),L==this.blockSize){a(this,P),L=0;break}}else for(;z<R;)if(P[L++]=S[z++],L==this.blockSize){a(this,P),L=0;break}}this.h=L,this.o+=R},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var R=1;R<S.length-8;++R)S[R]=0;var I=8*this.o;for(R=S.length-8;R<S.length;++R)S[R]=I&255,I/=256;for(this.u(S),S=Array(16),R=I=0;4>R;++R)for(var P=0;32>P;P+=8)S[I++]=this.g[R]>>>P&255;return S};function o(S,R){var I=h;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=R(S)}function c(S,R){this.h=R;for(var I=[],P=!0,L=S.length-1;0<=L;L--){var z=S[L]|0;P&&z==R||(I[L]=z,P=!1)}this.g=I}var h={};function f(S){return-128<=S&&128>S?o(S,function(R){return new c([R|0],0>R?-1:0)}):new c([S|0],0>S?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return _;if(0>S)return O(p(-S));for(var R=[],I=1,P=0;S>=I;P++)R[P]=S/I|0,I*=4294967296;return new c(R,0)}function y(S,R){if(S.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(S.charAt(0)=="-")return O(y(S.substring(1),R));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(R,8)),P=_,L=0;L<S.length;L+=8){var z=Math.min(8,S.length-L),D=parseInt(S.substring(L,L+z),R);8>z?(z=p(Math.pow(R,z)),P=P.j(z).add(p(D))):(P=P.j(I),P=P.add(p(D)))}return P}var _=f(0),w=f(1),x=f(16777216);n=c.prototype,n.m=function(){if(k(this))return-O(this).m();for(var S=0,R=1,I=0;I<this.g.length;I++){var P=this.i(I);S+=(0<=P?P:4294967296+P)*R,R*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C(this))return"0";if(k(this))return"-"+O(this).toString(S);for(var R=p(Math.pow(S,6)),I=this,P="";;){var L=G(I,R).g;I=B(I,L.j(R));var z=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=L,C(I))return z+P;for(;6>z.length;)z="0"+z;P=z+P}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function C(S){if(S.h!=0)return!1;for(var R=0;R<S.g.length;R++)if(S.g[R]!=0)return!1;return!0}function k(S){return S.h==-1}n.l=function(S){return S=B(this,S),k(S)?-1:C(S)?0:1};function O(S){for(var R=S.g.length,I=[],P=0;P<R;P++)I[P]=~S.g[P];return new c(I,~S.h).add(w)}n.abs=function(){return k(this)?O(this):this},n.add=function(S){for(var R=Math.max(this.g.length,S.g.length),I=[],P=0,L=0;L<=R;L++){var z=P+(this.i(L)&65535)+(S.i(L)&65535),D=(z>>>16)+(this.i(L)>>>16)+(S.i(L)>>>16);P=D>>>16,z&=65535,D&=65535,I[L]=D<<16|z}return new c(I,I[I.length-1]&-2147483648?-1:0)};function B(S,R){return S.add(O(R))}n.j=function(S){if(C(this)||C(S))return _;if(k(this))return k(S)?O(this).j(O(S)):O(O(this).j(S));if(k(S))return O(this.j(O(S)));if(0>this.l(x)&&0>S.l(x))return p(this.m()*S.m());for(var R=this.g.length+S.g.length,I=[],P=0;P<2*R;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<S.g.length;L++){var z=this.i(P)>>>16,D=this.i(P)&65535,Ne=S.i(L)>>>16,Le=S.i(L)&65535;I[2*P+2*L]+=D*Le,V(I,2*P+2*L),I[2*P+2*L+1]+=z*Le,V(I,2*P+2*L+1),I[2*P+2*L+1]+=D*Ne,V(I,2*P+2*L+1),I[2*P+2*L+2]+=z*Ne,V(I,2*P+2*L+2)}for(P=0;P<R;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=R;P<2*R;P++)I[P]=0;return new c(I,0)};function V(S,R){for(;(S[R]&65535)!=S[R];)S[R+1]+=S[R]>>>16,S[R]&=65535,R++}function H(S,R){this.g=S,this.h=R}function G(S,R){if(C(R))throw Error("division by zero");if(C(S))return new H(_,_);if(k(S))return R=G(O(S),R),new H(O(R.g),O(R.h));if(k(R))return R=G(S,O(R)),new H(O(R.g),R.h);if(30<S.g.length){if(k(S)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var I=w,P=R;0>=P.l(S);)I=F(I),P=F(P);var L=te(I,1),z=te(P,1);for(P=te(P,2),I=te(I,2);!C(P);){var D=z.add(P);0>=D.l(S)&&(L=L.add(I),z=D),P=te(P,1),I=te(I,1)}return R=B(S,L.j(R)),new H(L,R)}for(L=_;0<=S.l(R);){for(I=Math.max(1,Math.floor(S.m()/R.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),z=p(I),D=z.j(R);k(D)||0<D.l(S);)I-=P,z=p(I),D=z.j(R);C(z)&&(z=w),L=L.add(z),S=B(S,D)}return new H(L,S)}n.A=function(S){return G(this,S).h},n.and=function(S){for(var R=Math.max(this.g.length,S.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)&S.i(P);return new c(I,this.h&S.h)},n.or=function(S){for(var R=Math.max(this.g.length,S.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)|S.i(P);return new c(I,this.h|S.h)},n.xor=function(S){for(var R=Math.max(this.g.length,S.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)^S.i(P);return new c(I,this.h^S.h)};function F(S){for(var R=S.g.length+1,I=[],P=0;P<R;P++)I[P]=S.i(P)<<1|S.i(P-1)>>>31;return new c(I,S.h)}function te(S,R){var I=R>>5;R%=32;for(var P=S.g.length-I,L=[],z=0;z<P;z++)L[z]=0<R?S.i(z+I)>>>R|S.i(z+I+1)<<32-R:S.i(z+I);return new c(L,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,FC=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ba=c}).apply(typeof xS<"u"?xS:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HC,Du,qC,Cf,w0,$C,GC,KC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,b,E){return d==Array.prototype||d==Object.prototype||(d[b]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var b=0;b<d.length;++b){var E=d[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function a(d,b){if(b)e:{var E=s;d=d.split(".");for(var N=0;N<d.length-1;N++){var W=d[N];if(!(W in E))break e;E=E[W]}d=d[d.length-1],N=E[d],b=b(N),b!=N&&b!=null&&e(E,d,{configurable:!0,writable:!0,value:b})}}function o(d,b){d instanceof String&&(d+="");var E=0,N=!1,W={next:function(){if(!N&&E<d.length){var ie=E++;return{value:b(ie,d[ie]),done:!1}}return N=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}a("Array.prototype.values",function(d){return d||function(){return o(this,function(b,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function f(d){var b=typeof d;return b=b!="object"?b:d?Array.isArray(d)?"array":b:"null",b=="array"||b=="object"&&typeof d.length=="number"}function p(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function y(d,b,E){return d.call.apply(d.bind,arguments)}function _(d,b,E){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,N),d.apply(b,W)}}return function(){return d.apply(b,arguments)}}function w(d,b,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,w.apply(null,arguments)}function x(d,b){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function C(d,b){function E(){}E.prototype=b.prototype,d.aa=b.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(N,W,ie){for(var Ee=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)Ee[gt-2]=arguments[gt];return b.prototype[W].apply(N,Ee)}}function k(d){const b=d.length;if(0<b){const E=Array(b);for(let N=0;N<b;N++)E[N]=d[N];return E}return[]}function O(d,b){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(f(N)){const W=d.length||0,ie=N.length||0;d.length=W+ie;for(let Ee=0;Ee<ie;Ee++)d[W+Ee]=N[Ee]}else d.push(N)}}class B{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(d){return/^[\s\xa0]*$/.test(d)}function H(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function G(d){return G[" "](d),d}G[" "]=function(){};var F=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function te(d,b,E){for(const N in d)b.call(E,d[N],N,d)}function S(d,b){for(const E in d)b.call(void 0,d[E],E,d)}function R(d){const b={};for(const E in d)b[E]=d[E];return b}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,b){let E,N;for(let W=1;W<arguments.length;W++){N=arguments[W];for(E in N)d[E]=N[E];for(let ie=0;ie<I.length;ie++)E=I[ie],Object.prototype.hasOwnProperty.call(N,E)&&(d[E]=N[E])}}function L(d){var b=1;d=d.split(":");const E=[];for(;0<b&&d.length;)E.push(d.shift()),b--;return d.length&&E.push(d.join(":")),E}function z(d){h.setTimeout(()=>{throw d},0)}function D(){var d=Ae;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Ne{constructor(){this.h=this.g=null}add(b,E){const N=Le.get();N.set(b,E),this.h?this.h.next=N:this.g=N,this.h=N}}var Le=new B(()=>new Q,d=>d.reset());class Q{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ae=!1,Ae=new Ne,M=()=>{const d=h.Promise.resolve(void 0);se=()=>{d.then(Y)}};var Y=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(E){z(E)}var b=Le;b.j(d),100>b.h&&(b.h++,d.next=b.g,b.g=d)}ae=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};h.addEventListener("test",E,b),h.removeEventListener("test",E,b)}catch{}return d}();function Me(d,b){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget){if(F){e:{try{G(b.nodeName);var W=!0;break e}catch{}W=!1}W||(b=null)}}else E=="mouseover"?b=d.fromElement:E=="mouseout"&&(b=d.toElement);this.relatedTarget=b,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:he[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Me.aa.h.call(this)}}C(Me,le);var he={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Ge(d,b,E,N,W){this.listener=d,this.proxy=null,this.src=b,this.type=E,this.capture=!!N,this.ha=W,this.key=++xe,this.da=this.fa=!1}function tt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Xe(d){this.src=d,this.g={},this.h=0}Xe.prototype.add=function(d,b,E,N,W){var ie=d.toString();d=this.g[ie],d||(d=this.g[ie]=[],this.h++);var Ee=nn(d,b,N,W);return-1<Ee?(b=d[Ee],E||(b.fa=!1)):(b=new Ge(b,this.src,ie,!!N,W),b.fa=E,d.push(b)),b};function cn(d,b){var E=b.type;if(E in d.g){var N=d.g[E],W=Array.prototype.indexOf.call(N,b,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(N,W,1),ie&&(tt(b),d.g[E].length==0&&(delete d.g[E],d.h--))}}function nn(d,b,E,N){for(var W=0;W<d.length;++W){var ie=d[W];if(!ie.da&&ie.listener==b&&ie.capture==!!E&&ie.ha==N)return W}return-1}var Pt="closure_lm_"+(1e6*Math.random()|0),Li={};function Lt(d,b,E,N,W){if(Array.isArray(b)){for(var ie=0;ie<b.length;ie++)Lt(d,b[ie],E,N,W);return null}return E=Tn(E),d&&d[ve]?d.K(b,E,p(N)?!!N.capture:!1,W):Wt(d,b,E,!1,N,W)}function Wt(d,b,E,N,W,ie){if(!b)throw Error("Invalid event type");var Ee=p(W)?!!W.capture:!!W,gt=Ft(d);if(gt||(d[Pt]=gt=new Xe(d)),E=gt.add(b,E,N,Ee,ie),E.proxy)return E;if(N=Vt(),E.proxy=N,N.src=d,N.listener=E,d.addEventListener)ge||(W=Ee),W===void 0&&(W=!1),d.addEventListener(b.toString(),N,W);else if(d.attachEvent)d.attachEvent(ss(b.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Vt(){function d(E){return b.call(d.src,d.listener,E)}const b=Bt;return d}function Yt(d,b,E,N,W){if(Array.isArray(b))for(var ie=0;ie<b.length;ie++)Yt(d,b[ie],E,N,W);else N=p(N)?!!N.capture:!!N,E=Tn(E),d&&d[ve]?(d=d.i,b=String(b).toString(),b in d.g&&(ie=d.g[b],E=nn(ie,E,N,W),-1<E&&(tt(ie[E]),Array.prototype.splice.call(ie,E,1),ie.length==0&&(delete d.g[b],d.h--)))):d&&(d=Ft(d))&&(b=d.g[b.toString()],d=-1,b&&(d=nn(b,E,N,W)),(E=-1<d?b[d]:null)&&sn(E))}function sn(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[ve])cn(b.i,d);else{var E=d.type,N=d.proxy;b.removeEventListener?b.removeEventListener(E,N,d.capture):b.detachEvent?b.detachEvent(ss(E),N):b.addListener&&b.removeListener&&b.removeListener(N),(E=Ft(b))?(cn(E,d),E.h==0&&(E.src=null,b[Pt]=null)):tt(d)}}}function ss(d){return d in Li?Li[d]:Li[d]="on"+d}function Bt(d,b){if(d.da)d=!0;else{b=new Me(b,this);var E=d.listener,N=d.ha||d.src;d.fa&&sn(d),d=E.call(N,b)}return d}function Ft(d){return d=d[Pt],d instanceof Xe?d:null}var ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(d){return typeof d=="function"?d:(d[ot]||(d[ot]=function(b){return d.handleEvent(b)}),d[ot])}function lt(){re.call(this),this.i=new Xe(this),this.M=this,this.F=null}C(lt,re),lt.prototype[ve]=!0,lt.prototype.removeEventListener=function(d,b,E,N){Yt(this,d,b,E,N)};function pt(d,b){var E,N=d.F;if(N)for(E=[];N;N=N.F)E.push(N);if(d=d.M,N=b.type||b,typeof b=="string")b=new le(b,d);else if(b instanceof le)b.target=b.target||d;else{var W=b;b=new le(N,d),P(b,W)}if(W=!0,E)for(var ie=E.length-1;0<=ie;ie--){var Ee=b.g=E[ie];W=is(Ee,N,!0,b)&&W}if(Ee=b.g=d,W=is(Ee,N,!0,b)&&W,W=is(Ee,N,!1,b)&&W,E)for(ie=0;ie<E.length;ie++)Ee=b.g=E[ie],W=is(Ee,N,!1,b)&&W}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var d=this.i,b;for(b in d.g){for(var E=d.g[b],N=0;N<E.length;N++)tt(E[N]);delete d.g[b],d.h--}}this.F=null},lt.prototype.K=function(d,b,E,N){return this.i.add(String(d),b,!1,E,N)},lt.prototype.L=function(d,b,E,N){return this.i.add(String(d),b,!0,E,N)};function is(d,b,E,N){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();for(var W=!0,ie=0;ie<b.length;++ie){var Ee=b[ie];if(Ee&&!Ee.da&&Ee.capture==E){var gt=Ee.listener,An=Ee.ha||Ee.src;Ee.fa&&cn(d.i,Ee),W=gt.call(An,N)!==!1&&W}}return W&&!N.defaultPrevented}function On(d,b,E){if(typeof d=="function")E&&(d=w(d,E));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:h.setTimeout(d,b||0)}function il(d){d.g=On(()=>{d.g=null,d.i&&(d.i=!1,il(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class kc extends re{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:il(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(d){re.call(this),this.h=d,this.g={}}C(hr,re);var dr=[];function Vi(d){te(d.g,function(b,E){this.g.hasOwnProperty(E)&&sn(b)},d),d.g={}}hr.prototype.N=function(){hr.aa.N.call(this),Vi(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ms=h.JSON.stringify,Jr=h.JSON.parse,fr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function mr(){}mr.prototype.h=null;function ea(d){return d.h||(d.h=d.i())}function ta(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Js(){le.call(this,"d")}C(Js,le);function ei(){le.call(this,"c")}C(ei,le);var U={},ue=null;function _e(){return ue=ue||new lt}U.La="serverreachability";function je(d){le.call(this,U.La,d)}C(je,le);function At(d){const b=_e();pt(b,new je(b))}U.STAT_EVENT="statevent";function Ht(d,b){le.call(this,U.STAT_EVENT,d),this.stat=b}C(Ht,le);function be(d){const b=_e();pt(b,new Ht(b,d))}U.Ma="timingevent";function we(d,b){le.call(this,U.Ma,d),this.size=b}C(we,le);function Ce(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},b)}function Tt(){this.g=!0}Tt.prototype.xa=function(){this.g=!1};function qt(d,b,E,N,W,ie){d.info(function(){if(d.g)if(ie)for(var Ee="",gt=ie.split("&"),An=0;An<gt.length;An++){var yt=gt[An].split("=");if(1<yt.length){var Vn=yt[0];yt=yt[1];var Rn=Vn.split("_");Ee=2<=Rn.length&&Rn[1]=="type"?Ee+(Vn+"="+yt+"&"):Ee+(Vn+"=redacted&")}}else Ee=null;else Ee=ie;return"XMLHTTP REQ ("+N+") [attempt "+W+"]: "+b+`
`+E+`
`+Ee})}function pr(d,b,E,N,W,ie,Ee){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+W+"]: "+b+`
`+E+`
`+ie+" "+Ee})}function ti(d,b,E,N){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+gr(d,E)+(N?" "+N:"")})}function na(d,b){d.info(function(){return"TIMEOUT: "+b})}Tt.prototype.info=function(){};function gr(d,b){if(!d.g)return b;if(!b)return null;try{var E=JSON.parse(b);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var N=E[d];if(!(2>N.length)){var W=N[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var Ee=1;Ee<W.length;Ee++)W[Ee]=""}}}}return Ms(E)}catch{return b}}var ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function ii(){}C(ii,mr),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},si=new ii;function Dn(d,b,E,N){this.j=d,this.i=b,this.l=E,this.R=N||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $t}function $t(){this.i=null,this.g="",this.h=!1}var ao={},sa={};function Os(d,b,E){d.L=1,d.v=br(_s(b)),d.m=E,d.P=!0,Pn(d,null)}function Pn(d,b){d.F=Date.now(),yr(d),d.A=_s(d.v);var E=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),mt(E.i,"t",N),d.C=0,E=d.j.J,d.h=new $t,d.g=Qh(d.j,E?b:null,!d.m),0<d.O&&(d.M=new kc(w(d.Y,d,d.g),d.O)),b=d.U,E=d.g,N=d.ca;var W="readystatechange";Array.isArray(W)||(W&&(dr[0]=W.toString()),W=dr);for(var ie=0;ie<W.length;ie++){var Ee=Lt(E,W[ie],N||b.handleEvent,!1,b.h||b);if(!Ee)break;b.g[Ee.key]=Ee}b=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,b)):(d.u="GET",d.g.ea(d.A,d.u,null,b)),At(),qt(d.i,d.u,d.A,d.l,d.R,d.m)}Dn.prototype.ca=function(d){d=d.target;const b=this.M;b&&oi(d)==3?b.j():this.Y(d)},Dn.prototype.Y=function(d){try{if(d==this.g)e:{const Rn=oi(this.g);var b=this.g.Ba();const xr=this.g.Z();if(!(3>Rn)&&(Rn!=3||this.g&&(this.h.h||this.g.oa()||Hh(this.g)))){this.J||Rn!=4||b==7||(b==8||0>=xr?At(3):At(2)),ji(this);var E=this.g.Z();this.X=E;t:if(oo(this)){var N=Hh(this.g);d="";var W=N.length,ie=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),ys(this);var Ee="";break t}this.h.i=new h.TextDecoder}for(b=0;b<W;b++)this.h.h=!0,d+=this.h.i.decode(N[b],{stream:!(ie&&b==W-1)});N.length=0,this.h.g+=d,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=E==200,pr(this.i,this.u,this.A,this.l,this.R,Rn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,An=this.g;if((gt=An.g?An.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(gt)){var yt=gt;break t}}yt=null}if(E=yt)ti(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pe(this,E);else{this.o=!1,this.s=3,be(12),xn(this),ys(this);break e}}if(this.P){E=!0;let qn;for(;!this.J&&this.C<Ee.length;)if(qn=lo(this,Ee),qn==sa){Rn==4&&(this.s=4,be(14),E=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==ao){this.s=4,be(15),ti(this.i,this.l,Ee,"[Invalid Chunk]"),E=!1;break}else ti(this.i,this.l,qn,null),pe(this,qn);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rn!=4||Ee.length!=0||this.h.h||(this.s=1,be(16),E=!1),this.o=this.o&&E,!E)ti(this.i,this.l,Ee,"[Invalid Chunked Response]"),xn(this),ys(this);else if(0<Ee.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),go(Vn),Vn.M=!0,be(11))}}else ti(this.i,this.l,Ee,null),pe(this,Ee);Rn==4&&xn(this),this.o&&!this.J&&(Rn==4?Wh(this.j,this):(this.o=!1,yr(this)))}else dp(this.g),E==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),xn(this),ys(this)}}}catch{}finally{}};function oo(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function lo(d,b){var E=d.C,N=b.indexOf(`
`,E);return N==-1?sa:(E=Number(b.substring(E,N)),isNaN(E)?ao:(N+=1,N+E>b.length?sa:(b=b.slice(N,N+E),d.C=N+E,b)))}Dn.prototype.cancel=function(){this.J=!0,xn(this)};function yr(d){d.S=Date.now()+d.I,rl(d,d.I)}function rl(d,b){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ce(w(d.ba,d),b)}function ji(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Dn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(na(this.i,this.A),this.L!=2&&(At(),be(17)),xn(this),this.s=2,ys(this)):rl(this,this.S-d)};function ys(d){d.j.G==0||d.J||Wh(d.j,d)}function xn(d){ji(d);var b=d.M;b&&typeof b.ma=="function"&&b.ma(),d.M=null,Vi(d.U),d.g&&(b=d.g,d.g=null,b.abort(),b.ma())}function pe(d,b){try{var E=d.j;if(E.G!=0&&(E.g==d||Hn(E.h,d))){if(!d.K&&Hn(E.h,d)&&E.G==3){try{var N=E.Da.g.parse(b)}catch{N=null}if(Array.isArray(N)&&N.length==3){var W=N;if(W[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)dl(E),ul(E);else break e;Vc(E),be(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ce(w(E.Za,E),6e3));if(1>=Gt(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Tr(E,11)}else if((d.K||E.g==d)&&dl(E),!V(b))for(W=E.Da.g.parse(b),b=0;b<W.length;b++){let yt=W[b];if(E.T=yt[0],yt=yt[1],E.G==2)if(yt[0]=="c"){E.K=yt[1],E.ia=yt[2];const Vn=yt[3];Vn!=null&&(E.la=Vn,E.j.info("VER="+E.la));const Rn=yt[4];Rn!=null&&(E.Aa=Rn,E.j.info("SVER="+E.Aa));const xr=yt[5];xr!=null&&typeof xr=="number"&&0<xr&&(N=1.5*xr,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const qn=d.g;if(qn){const Gi=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var ie=N.h;ie.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(vs(ie,ie.h),ie.h=null))}if(N.D){const zc=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;zc&&(N.ya=zc,st(N.I,N.D,zc))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var Ee=d;if(N.qa=Xh(N,N.J?N.ia:null,N.W),Ee.K){gn(N.h,Ee);var gt=Ee,An=N.L;An&&(gt.I=An),gt.B&&(ji(gt),yr(gt)),N.g=Ee}else Gh(N);0<E.i.length&&hl(E)}else yt[0]!="stop"&&yt[0]!="close"||Tr(E,7);else E.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Tr(E,7):Pc(E):yt[0]!="noop"&&E.l&&E.l.ta(yt),E.v=0)}}At(4)}catch{}}var Oe=class{constructor(d,b){this.g=d,this.map=b}};function Je(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gt(d){return d.h?1:d.g?d.g.size:0}function Hn(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function vs(d,b){d.g?d.g.add(b):d.h=b}function gn(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Je.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Sn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const E of d.g.values())b=b.concat(E.D);return b}return k(d.i)}function Ts(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var b=[],E=d.length,N=0;N<E;N++)b.push(d[N]);return b}b=[],E=0;for(N in d)b[E++]=d[N];return b}function vr(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var b=[];d=d.length;for(var E=0;E<d;E++)b.push(E);return b}b=[],E=0;for(const N in d)b[E++]=N;return b}}}function ia(d,b){if(d.forEach&&typeof d.forEach=="function")d.forEach(b,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,b,void 0);else for(var E=vr(d),N=Ts(d),W=N.length,ie=0;ie<W;ie++)b.call(void 0,N[ie],E&&E[ie],d)}var zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc(d,b){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var N=d[E].indexOf("="),W=null;if(0<=N){var ie=d[E].substring(0,N);W=d[E].substring(N+1)}else ie=d[E];b(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function rn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof rn){this.h=d.h,_r(this,d.j),this.o=d.o,this.g=d.g,Ds(this,d.s),this.l=d.l;var b=d.i,E=new Ps;E.i=b.i,b.g&&(E.g=new Map(b.g),E.h=b.h),ri(this,E),this.m=d.m}else d&&(b=String(d).match(zi))?(this.h=!1,_r(this,b[1]||"",!0),this.o=rs(b[2]||""),this.g=rs(b[3]||"",!0),Ds(this,b[4]),this.l=rs(b[5]||"",!0),ri(this,b[6]||"",!0),this.m=rs(b[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}rn.prototype.toString=function(){var d=[],b=this.j;b&&d.push(ze(b,Zt,!0),":");var E=this.g;return(E||b=="file")&&(d.push("//"),(b=this.o)&&d.push(ze(b,Zt,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ze(E,E.charAt(0)=="/"?ra:wt,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ze(E,Ui)),d.join("")};function _s(d){return new rn(d)}function _r(d,b,E){d.j=E?rs(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Ds(d,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);d.s=b}else d.s=null}function ri(d,b,E){b instanceof Ps?(d.i=b,xs(d.i,d.h)):(E||(b=ze(b,Ti)),d.i=new Ps(b,d.h))}function st(d,b,E){d.i.set(b,E)}function br(d){return st(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function rs(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ze(d,b,E){return typeof d=="string"?(d=encodeURI(d).replace(b,co),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function co(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zt=/[#\/\?@]/g,wt=/[#\?:]/g,ra=/[#\?]/g,Ti=/[#\?@]/g,Ui=/#/g;function Ps(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function ye(d){d.g||(d.g=new Map,d.h=0,d.i&&Mc(d.i,function(b,E){d.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}n=Ps.prototype,n.add=function(d,b){ye(this),this.i=null,d=jt(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(b),this.h+=1,this};function Ie(d,b){ye(d),b=jt(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function He(d,b){return ye(d),b=jt(d,b),d.g.has(b)}n.forEach=function(d,b){ye(this),this.g.forEach(function(E,N){E.forEach(function(W){d.call(b,W,N,this)},this)},this)},n.na=function(){ye(this);const d=Array.from(this.g.values()),b=Array.from(this.g.keys()),E=[];for(let N=0;N<b.length;N++){const W=d[N];for(let ie=0;ie<W.length;ie++)E.push(b[N])}return E},n.V=function(d){ye(this);let b=[];if(typeof d=="string")He(this,d)&&(b=b.concat(this.g.get(jt(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)b=b.concat(d[E])}return b},n.set=function(d,b){return ye(this),this.i=null,d=jt(this,d),He(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},n.get=function(d,b){return d?(d=this.V(d),0<d.length?String(d[0]):b):b};function mt(d,b,E){Ie(d,b),0<E.length&&(d.i=null,d.g.set(jt(d,b),k(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(var E=0;E<b.length;E++){var N=b[E];const ie=encodeURIComponent(String(N)),Ee=this.V(N);for(N=0;N<Ee.length;N++){var W=ie;Ee[N]!==""&&(W+="="+encodeURIComponent(String(Ee[N]))),d.push(W)}}return this.i=d.join("&")};function jt(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function xs(d,b){b&&!d.j&&(ye(d),d.i=null,d.g.forEach(function(E,N){var W=N.toLowerCase();N!=W&&(Ie(this,N),mt(this,W,E))},d)),d.j=b}function wr(d,b){const E=new Tt;if(h.Image){const N=new Image;N.onload=x(ai,E,"TestLoadImage: loaded",!0,b,N),N.onerror=x(ai,E,"TestLoadImage: error",!1,b,N),N.onabort=x(ai,E,"TestLoadImage: abort",!1,b,N),N.ontimeout=x(ai,E,"TestLoadImage: timeout",!1,b,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else b(!1)}function Ls(d,b){const E=new Tt,N=new AbortController,W=setTimeout(()=>{N.abort(),ai(E,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:N.signal}).then(ie=>{clearTimeout(W),ie.ok?ai(E,"TestPingServer: ok",!0,b):ai(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(W),ai(E,"TestPingServer: error",!1,b)})}function ai(d,b,E,N,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),N(E)}catch{}}function uo(){this.g=new fr}function Bi(d,b,E){const N=E||"";try{ia(d,function(W,ie){let Ee=W;p(W)&&(Ee=Ms(W)),b.push(N+ie+"="+encodeURIComponent(Ee))})}catch(W){throw b.push(N+"type="+encodeURIComponent("_badmap")),W}}function aa(d){this.l=d.Ub||null,this.j=d.eb||!1}C(aa,mr),aa.prototype.g=function(){return new Er(this.l,this.j)},aa.prototype.i=function(d){return function(){return d}}({});function Er(d,b){lt.call(this),this.D=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Er,lt),n=Er.prototype,n.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=b,this.readyState=1,Hi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(b.body=d),(this.D||h).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fi(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oc(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oc(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Fi(this):Hi(this),this.readyState==3&&Oc(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Fi(this))},n.Qa=function(d){this.g&&(this.response=d,Fi(this))},n.ga=function(){this.g&&Fi(this)};function Fi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Hi(d)}n.setRequestHeader=function(d,b){this.u.append(d,b)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=b.next();return d.join(`\r
`)};function Hi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Dc(d){let b="";return te(d,function(E,N){b+=N,b+=":",b+=E,b+=`\r
`}),b}function Ln(d,b,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=Dc(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):st(d,b,E))}function Rt(d){lt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Rt,lt);var al=/^https?$/i,ho=["POST","PUT"];n=Rt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,b,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?ea(this.o):ea(si),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(ie){Fh(this,ie);return}if(d=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var W in N)E.set(W,N[W]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ie of N.keys())E.set(ie,N.get(ie));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ho,b,void 0))||N||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ee]of E)this.g.setRequestHeader(ie,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fo(this),this.u=!0,this.g.send(d),this.u=!1}catch(ie){Fh(this,ie)}};function Fh(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.m=5,ol(d),qi(d)}function ol(d){d.A||(d.A=!0,pt(d,"complete"),pt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,pt(this,"complete"),pt(this,"abort"),qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ll(this):this.bb())},n.bb=function(){ll(this)};function ll(d){if(d.h&&typeof c<"u"&&(!d.v[1]||oi(d)!=4||d.Z()!=2)){if(d.u&&oi(d)==4)On(d.Ea,0,d);else if(pt(d,"readystatechange"),oi(d)==4){d.h=!1;try{const Ee=d.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var E;if(!(E=b)){var N;if(N=Ee===0){var W=String(d.D).match(zi)[1]||null;!W&&h.self&&h.self.location&&(W=h.self.location.protocol.slice(0,-1)),N=!al.test(W?W.toLowerCase():"")}E=N}if(E)pt(d,"complete"),pt(d,"success");else{d.m=6;try{var ie=2<oi(d)?d.g.statusText:""}catch{ie=""}d.l=ie+" ["+d.Z()+"]",ol(d)}}finally{qi(d)}}}}function qi(d,b){if(d.g){fo(d);const E=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,b||pt(d,"ready");try{E.onreadystatechange=N}catch{}}}function fo(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function oi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Jr(b)}};function Hh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function dp(d){const b={};d=(d.g&&2<=oi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(V(d[N]))continue;var E=L(d[N]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ie=b[W]||[];b[W]=ie,ie.push(E)}S(b,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mo(d,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||b}function cl(d){this.Aa=0,this.i=[],this.j=new Tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mo("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mo("baseRetryDelayMs",5e3,d),this.cb=mo("retryDelaySeedMs",1e4,d),this.Wa=mo("forwardChannelMaxRetries",2,d),this.wa=mo("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(d&&d.concurrentRequestLimit),this.Da=new uo,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=cl.prototype,n.la=8,n.G=1,n.connect=function(d,b,E,N){be(0),this.W=d,this.H=b||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=Xh(this,null,this.W),hl(this)};function Pc(d){if(qh(d),d.G==3){var b=d.U++,E=_s(d.I);if(st(E,"SID",d.K),st(E,"RID",b),st(E,"TYPE","terminate"),po(d,E),b=new Dn(d,d.j,b),b.L=2,b.v=br(_s(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(b.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=b.v,E=!0),E||(b.g=Qh(b.j,null),b.g.ea(b.v)),b.F=Date.now(),yr(b)}Yh(d)}function ul(d){d.g&&(go(d),d.g.cancel(),d.g=null)}function qh(d){ul(d),d.u&&(h.clearTimeout(d.u),d.u=null),dl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function hl(d){if(!bt(d.h)&&!d.s){d.s=!0;var b=d.Ga;se||M(),ae||(se(),ae=!0),Ae.add(b,d),d.B=0}}function fp(d,b){return Gt(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=b.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ce(w(d.Ga,d,b),jc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const W=new Dn(this,this.j,d);let ie=this.o;if(this.S&&(ie?(ie=R(ie),P(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var b=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(b+=N,4096<b){b=E;break e}if(b===4096||E===this.i.length-1){b=E+1;break e}}b=1e3}else b=1e3;b=$h(this,W,b),E=_s(this.I),st(E,"RID",d),st(E,"CVER",22),this.D&&st(E,"X-HTTP-Session-Id",this.D),po(this,E),ie&&(this.O?b="headers="+encodeURIComponent(String(Dc(ie)))+"&"+b:this.m&&Ln(E,this.m,ie)),vs(this.h,W),this.Ua&&st(E,"TYPE","init"),this.P?(st(E,"$req",b),st(E,"SID","null"),W.T=!0,Os(W,E,null)):Os(W,E,b),this.G=2}}else this.G==3&&(d?Lc(this,d):this.i.length==0||bt(this.h)||Lc(this))};function Lc(d,b){var E;b?E=b.l:E=d.U++;const N=_s(d.I);st(N,"SID",d.K),st(N,"RID",E),st(N,"AID",d.T),po(d,N),d.m&&d.o&&Ln(N,d.m,d.o),E=new Dn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),b&&(d.i=b.D.concat(d.i)),b=$h(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),vs(d.h,E),Os(E,N,b)}function po(d,b){d.H&&te(d.H,function(E,N){st(b,N,E)}),d.l&&ia({},function(E,N){st(b,N,E)})}function $h(d,b,E){E=Math.min(d.i.length,E);var N=d.l?w(d.l.Na,d.l,d):null;e:{var W=d.i;let ie=-1;for(;;){const Ee=["count="+E];ie==-1?0<E?(ie=W[0].g,Ee.push("ofs="+ie)):ie=0:Ee.push("ofs="+ie);let gt=!0;for(let An=0;An<E;An++){let yt=W[An].g;const Vn=W[An].map;if(yt-=ie,0>yt)ie=Math.max(0,W[An].g-100),gt=!1;else try{Bi(Vn,Ee,"req"+yt+"_")}catch{N&&N(Vn)}}if(gt){N=Ee.join("&");break e}}}return d=d.i.splice(0,E),b.D=d,N}function Gh(d){if(!d.g&&!d.u){d.Y=1;var b=d.Fa;se||M(),ae||(se(),ae=!0),Ae.add(b,d),d.v=0}}function Vc(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ce(w(d.Fa,d),jc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Kh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ce(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),ul(this),Kh(this))};function go(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function Kh(d){d.g=new Dn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var b=_s(d.qa);st(b,"RID","rpc"),st(b,"SID",d.K),st(b,"AID",d.T),st(b,"CI",d.F?"0":"1"),!d.F&&d.ja&&st(b,"TO",d.ja),st(b,"TYPE","xmlhttp"),po(d,b),d.m&&d.o&&Ln(b,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=br(_s(b)),E.m=null,E.P=!0,Pn(E,d)}n.Za=function(){this.C!=null&&(this.C=null,ul(this),Vc(this),be(19))};function dl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Wh(d,b){var E=null;if(d.g==b){dl(d),go(d),d.g=null;var N=2}else if(Hn(d.h,b))E=b.D,gn(d.h,b),N=1;else return;if(d.G!=0){if(b.o)if(N==1){E=b.m?b.m.length:0,b=Date.now()-b.F;var W=d.B;N=_e(),pt(N,new we(N,E)),hl(d)}else Gh(d);else if(W=b.s,W==3||W==0&&0<b.X||!(N==1&&fp(d,b)||N==2&&Vc(d)))switch(E&&0<E.length&&(b=d.h,b.i=b.i.concat(E)),W){case 1:Tr(d,5);break;case 4:Tr(d,10);break;case 3:Tr(d,6);break;default:Tr(d,2)}}}function jc(d,b){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*b}function Tr(d,b){if(d.j.info("Error code "+b),b==2){var E=w(d.fb,d),N=d.Xa;const W=!N;N=new rn(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||_r(N,"https"),br(N),W?wr(N.toString(),E):Ls(N.toString(),E)}else be(2);d.G=0,d.l&&d.l.sa(b),Yh(d),qh(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function Yh(d){if(d.G=0,d.ka=[],d.l){const b=Sn(d.h);(b.length!=0||d.i.length!=0)&&(O(d.ka,b),O(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function Xh(d,b,E){var N=E instanceof rn?_s(E):new rn(E);if(N.g!="")b&&(N.g=b+"."+N.g),Ds(N,N.s);else{var W=h.location;N=W.protocol,b=b?b+"."+W.hostname:W.hostname,W=+W.port;var ie=new rn(null);N&&_r(ie,N),b&&(ie.g=b),W&&Ds(ie,W),E&&(ie.l=E),N=ie}return E=d.D,b=d.ya,E&&b&&st(N,E,b),st(N,"VER",d.la),po(d,N),N}function Qh(d,b,E){if(b&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Ca&&!d.pa?new Rt(new aa({eb:E})):new Rt(d.pa),b.Ha(d.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zh(){}n=Zh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fl(){}fl.prototype.g=function(d,b){return new bs(d,b)};function bs(d,b){lt.call(this),this.g=new cl(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(d?d["X-WebChannel-Client-Profile"]=b.va:d={"X-WebChannel-Client-Profile":b.va}),this.g.S=d,(d=b&&b.Sb)&&!V(d)&&(this.g.m=d),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.D=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new $i(this)}C(bs,lt),bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bs.prototype.close=function(){Pc(this.g)},bs.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Ms(d),d=E);b.i.push(new Oe(b.Ya++,d)),b.G==3&&hl(b)},bs.prototype.N=function(){this.g.l=null,delete this.j,Pc(this.g),delete this.g,bs.aa.N.call(this)};function Jh(d){Js.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const E in b){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}C(Jh,Js);function ed(){ei.call(this),this.status=1}C(ed,ei);function $i(d){this.g=d}C($i,Zh),$i.prototype.ua=function(){pt(this.g,"a")},$i.prototype.ta=function(d){pt(this.g,new Jh(d))},$i.prototype.sa=function(d){pt(this.g,new ed)},$i.prototype.ra=function(){pt(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,bs.prototype.send=bs.prototype.o,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,KC=function(){return new fl},GC=function(){return _e()},$C=U,w0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ni.NO_ERROR=0,ni.TIMEOUT=8,ni.HTTP_ERROR=6,Cf=ni,Ei.COMPLETE="complete",qC=Ei,ta.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Du=ta,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,HC=Rt}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});const SS="@firebase/firestore",AS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fs.UNAUTHENTICATED=new fs(null),fs.GOOGLE_CREDENTIALS=new fs("google-credentials-uid"),fs.FIRST_PARTY=new fs("first-party-uid"),fs.MOCK_USER=new fs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Pv("@firebase/firestore");function Gl(){return Zo.logLevel}function Re(n,...e){if(Zo.logLevel<=dt.DEBUG){const t=e.map(Yv);Zo.debug(`Firestore (${Sc}): ${n}`,...t)}}function Xr(n,...e){if(Zo.logLevel<=dt.ERROR){const t=e.map(Yv);Zo.error(`Firestore (${Sc}): ${n}`,...t)}}function $a(n,...e){if(Zo.logLevel<=dt.WARN){const t=e.map(Yv);Zo.warn(`Firestore (${Sc}): ${n}`,...t)}}function Yv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,WC(n,s,t)}function WC(n,e,t){let s=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Xr(s),new Error(s)}function St(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||WC(e,a,s)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fs.UNAUTHENTICATED))}shutdown(){}}class dU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fU{constructor(e){this.t=e,this.currentUser=fs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){St(this.o===void 0,42304);let s=this.i;const a=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let o=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rr,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},h=f=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(St(typeof s.accessToken=="string",31837,{l:s}),new YC(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new fs(e)}}class mU{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=fs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pU{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new mU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){St(this.o===void 0,3512);const s=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>s(o))};const a=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new RS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new RS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=yU(40);for(let o=0;o<a.length;++o)s.length<20&&a[o]<t&&(s+=e.charAt(a[o]%62))}return s}}function rt(n,e){return n<e?-1:n>e?1:0}function E0(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return rt(s,a);{const o=XC(),c=vU(o.encode(CS(n,t)),o.encode(CS(e,t)));return c!==0?c:rt(s,a)}}t+=s>65535?2:1}return rt(n.length,e.length)}function CS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function vU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return rt(n[t],e[t]);return rt(n.length,e.length)}function mc(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="__name__";class Ji{constructor(e,t,s){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&$e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const o=Ji.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return rt(e.length,t.length)}static compareSegments(e,t){const s=Ji.isNumericId(e),a=Ji.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ji.extractNumericId(e).compare(Ji.extractNumericId(t)):E0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ba.fromString(e.substring(4,e.length-2))}}class Ot extends Ji{construct(e,t,s){return new Ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Ot(t)}static emptyPath(){return new Ot([])}}const _U=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class es extends Ji{construct(e,t,s){return new es(e,t,s)}static isValidIdentifier(e){return _U.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),es.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IS}static keyField(){return new es([IS])}static fromServerFormat(e){const t=[];let s="",a=0;const o=()=>{if(s.length===0)throw new Te(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Te(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Te(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(s+=h,a++):(o(),a++)}if(o(),c)throw new Te(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new es(t)}static emptyPath(){return new es([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Ot.fromString(e))}static fromName(e){return new Pe(Ot.fromString(e).popFirst(5))}static empty(){return new Pe(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n,e,t){if(!t)throw new Te(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bU(n,e,t,s){if(e===!0&&s===!0)throw new Te(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NS(n){if(!Pe.isDocumentKey(n))throw new Te(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kS(n){if(Pe.isDocumentKey(n))throw new Te(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$e(12329,{type:typeof n})}function Qs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jm(n);throw new Te(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wU(n,e){if(e<=0)throw new Te(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function kh(n,e){if(!QC(n))throw new Te(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new Te(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=-62135596800,OS=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*OS);return new Dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<MS)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OS}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kh(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-MS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:wn("string",Dt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Dt(0,0))}static max(){return new et(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=-1;function EU(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=et.fromTimestamp(s===1e9?new Dt(t+1,0):new Dt(t,s));return new Ga(a,Pe.empty(),e)}function TU(n){return new Ga(n.readTime,n.key,fh)}class Ga{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ga(et.min(),Pe.empty(),fh)}static max(){return new Ga(et.max(),Pe.empty(),fh)}}function xU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:rt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==SU)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((s,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,s)=>{t(e)})}static reject(e){return new me((t,s)=>{s(e)})}static waitFor(e){return new me((t,s)=>{let a=0,o=0,c=!1;e.forEach(h=>{++a,h.next(()=>{++o,c&&o===a&&t()},f=>s(f))}),c=!0,o===a&&t()})}static or(e){let t=me.resolve(!1);for(const s of e)t=t.next(a=>a?me.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,o)=>{s.push(t.call(this,a,o))}),this.waitFor(s)}static mapArray(e,t){return new me((s,a)=>{const o=e.length,c=new Array(o);let h=0;for(let f=0;f<o;f++){const p=f;t(e[p]).next(y=>{c[p]=y,++h,h===o&&s(c)},y=>a(y))}})}static doWhile(e,t){return new me((s,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):s()};o()})}}function RU(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Rc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=-1;function Um(n){return n==null}function am(n){return n===0&&1/n==-1/0}function CU(n){return typeof n=="number"&&Number.isInteger(n)&&!am(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="";function IU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DS(e)),e=NU(n.get(t),e);return DS(e)}function NU(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case ZC:t+="";break;default:t+=o}}return t}function DS(n){return n+ZC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function so(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kU(n,e){const t=[];for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.push(e(n[s],s,n));return t}function JC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.comparator=e,this.root=t||Jn.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,t,s,a,o){this.key=e,this.value=t,this.color=s??Jn.RED,this.left=a??Jn.EMPTY,this.right=o??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,o){return new Jn(e??this.key,t??this.value,s??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const o=s(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,s),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Jn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,s,a,o){return this}insert(e,t,s){return new Jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LS(this.data.getIterator())}getIteratorFrom(e){return new LS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class LS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.fields=e,e.sort(es.comparator)}static empty(){return new Ys([])}unionWith(e){let t=new Mn(es.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eI("Invalid base64 string: "+o):o}}(e);return new ts(t)}static fromUint8Array(e){const t=function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o}(e);return new ts(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ts.EMPTY_BYTE_STRING=new ts("");const MU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(n){if(St(!!n,39018),typeof n=="string"){let e=0;const t=MU.exec(n);if(St(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wa(n){return typeof n=="string"?ts.fromBase64String(n):ts.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="server_timestamp",nI="__type__",sI="__previous_value__",iI="__local_write_time__";function Bm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nI])===null||t===void 0?void 0:t.stringValue)===tI}function Fm(n){const e=n.mapValue.fields[sI];return Bm(e)?Fm(e):e}function mh(n){const e=Ka(n.mapValue.fields[iI].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,t,s,a,o,c,h,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const om="(default)";class ph{constructor(e,t){this.projectId=e,this.database=t||om}static empty(){return new ph("","")}get isDefaultDatabase(){return this.database===om}isEqual(e){return e instanceof ph&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="__type__",DU="__max__",cf={mapValue:{}},aI="__vector__",lm="value";function Ya(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bm(n)?4:LU(n)?9007199254740991:PU(n)?10:11:$e(28295,{value:n})}function ur(n,e){if(n===e)return!0;const t=Ya(n);if(t!==Ya(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mh(n).isEqual(mh(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=Ka(a.timestampValue),h=Ka(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return Wa(a.bytesValue).isEqual(Wa(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return fn(a.geoPointValue.latitude)===fn(o.geoPointValue.latitude)&&fn(a.geoPointValue.longitude)===fn(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return fn(a.integerValue)===fn(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=fn(a.doubleValue),h=fn(o.doubleValue);return c===h?am(c)===am(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return mc(n.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if(PS(c)!==PS(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!ur(c[f],h[f])))return!1;return!0}(n,e);default:return $e(52216,{left:n})}}function gh(n,e){return(n.values||[]).find(t=>ur(t,e))!==void 0}function pc(n,e){if(n===e)return 0;const t=Ya(n),s=Ya(e);if(t!==s)return rt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=fn(o.integerValue||o.doubleValue),f=fn(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return VS(n.timestampValue,e.timestampValue);case 4:return VS(mh(n),mh(e));case 5:return E0(n.stringValue,e.stringValue);case 6:return function(o,c){const h=Wa(o),f=Wa(c);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),f=c.split("/");for(let p=0;p<h.length&&p<f.length;p++){const y=rt(h[p],f[p]);if(y!==0)return y}return rt(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=rt(fn(o.latitude),fn(c.latitude));return h!==0?h:rt(fn(o.longitude),fn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jS(n.arrayValue,e.arrayValue);case 10:return function(o,c){var h,f,p,y;const _=o.fields||{},w=c.fields||{},x=(h=_[lm])===null||h===void 0?void 0:h.arrayValue,C=(f=w[lm])===null||f===void 0?void 0:f.arrayValue,k=rt(((p=x==null?void 0:x.values)===null||p===void 0?void 0:p.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:jS(x,C)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===cf.mapValue&&c===cf.mapValue)return 0;if(o===cf.mapValue)return 1;if(c===cf.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),p=c.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const w=E0(f[_],y[_]);if(w!==0)return w;const x=pc(h[f[_]],p[y[_]]);if(x!==0)return x}return rt(f.length,y.length)}(n.mapValue,e.mapValue);default:throw $e(23264,{le:t})}}function VS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return rt(n,e);const t=Ka(n),s=Ka(e),a=rt(t.seconds,s.seconds);return a!==0?a:rt(t.nanos,s.nanos)}function jS(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const o=pc(t[a],s[a]);if(o)return o}return rt(t.length,s.length)}function gc(n){return T0(n)}function T0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Ka(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const o of t.values||[])a?a=!1:s+=",",s+=T0(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of s)o?o=!1:a+=",",a+=`${c}:${T0(t.fields[c])}`;return a+"}"}(n.mapValue):$e(61005,{value:n})}function If(n){switch(Ya(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fm(n);return e?16+If(e):16;case 5:return 2*n.stringValue.length;case 6:return Wa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,o)=>a+If(o),0)}(n.arrayValue);case 10:case 11:return function(s){let a=0;return so(s.fields,(o,c)=>{a+=o.length+If(c)}),a}(n.mapValue);default:throw $e(13486,{value:n})}}function cm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function x0(n){return!!n&&"integerValue"in n}function Jv(n){return!!n&&"arrayValue"in n}function zS(n){return!!n&&"nullValue"in n}function US(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nf(n){return!!n&&"mapValue"in n}function PU(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rI])===null||t===void 0?void 0:t.stringValue)===aI}function Ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return so(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ju(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.value=e}static empty(){return new Ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=es.emptyPath(),s={},a=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,s,a),s={},a=[],t=h.popLast()}c?s[h.lastSegment()]=Ju(c):a.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,s,a)}delete(e){const t=this.field(e.popLast());Nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Nf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){so(t,(a,o)=>e[a]=o);for(const a of s)delete e[a]}clone(){return new Ns(Ju(this.value))}}function oI(n){const e=[];return so(n.fields,(t,s)=>{const a=new es([t]);if(Nf(s)){const o=oI(s.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)}),new Ys(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,s,a,o,c,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new ms(e,0,et.min(),et.min(),et.min(),Ns.empty(),0)}static newFoundDocument(e,t,s,a){return new ms(e,1,t,et.min(),s,a,0)}static newNoDocument(e,t){return new ms(e,2,t,et.min(),et.min(),Ns.empty(),0)}static newUnknownDocument(e,t){return new ms(e,3,t,et.min(),et.min(),Ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ms&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ms(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.position=e,this.inclusive=t}}function BS(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?s=Pe.comparator(Pe.fromName(c.referenceValue),t.key):s=pc(c,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function FS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ur(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function VU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{}class bn extends lI{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new zU(e,t,s):t==="array-contains"?new FU(e,s):t==="in"?new HU(e,s):t==="not-in"?new qU(e,s):t==="array-contains-any"?new $U(e,s):new bn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new UU(e,s):new BU(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pc(t,this.value)):t!==null&&Ya(this.value)===Ya(t)&&this.matchesComparison(pc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends lI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Di(e,t)}matches(e){return cI(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function cI(n){return n.op==="and"}function uI(n){return jU(n)&&cI(n)}function jU(n){for(const e of n.filters)if(e instanceof Di)return!1;return!0}function S0(n){if(n instanceof bn)return n.field.canonicalString()+n.op.toString()+gc(n.value);if(uI(n))return n.filters.map(e=>S0(e)).join(",");{const e=n.filters.map(t=>S0(t)).join(",");return`${n.op}(${e})`}}function hI(n,e){return n instanceof bn?function(s,a){return a instanceof bn&&s.op===a.op&&s.field.isEqual(a.field)&&ur(s.value,a.value)}(n,e):n instanceof Di?function(s,a){return a instanceof Di&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((o,c,h)=>o&&hI(c,a.filters[h]),!0):!1}(n,e):void $e(19439)}function dI(n){return n instanceof bn?function(t){return`${t.field.canonicalString()} ${t.op} ${gc(t.value)}`}(n):n instanceof Di?function(t){return t.op.toString()+" {"+t.getFilters().map(dI).join(" ,")+"}"}(n):"Filter"}class zU extends bn{constructor(e,t,s){super(e,t,s),this.key=Pe.fromName(s.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class UU extends bn{constructor(e,t){super(e,"in",t),this.keys=fI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BU extends bn{constructor(e,t){super(e,"not-in",t),this.keys=fI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Pe.fromName(s.referenceValue))}class FU extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jv(t)&&gh(t.arrayValue,this.value)}}class HU extends bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gh(this.value.arrayValue,t)}}class qU extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gh(this.value.arrayValue,t)}}class $U extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>gh(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,t=null,s=[],a=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.Pe=null}}function HS(n,e=null,t=[],s=[],a=null,o=null,c=null){return new GU(n,e,t,s,a,o,c)}function e_(n){const e=Ze(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>S0(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),Um(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>gc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>gc(s)).join(",")),e.Pe=t}return e.Pe}function t_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FS(n.startAt,e.startAt)&&FS(n.endAt,e.endAt)}function A0(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t=null,s=[],a=[],o=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function KU(n,e,t,s,a,o,c,h){return new io(n,e,t,s,a,o,c,h)}function Hm(n){return new io(n)}function qS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n_(n){return n.collectionGroup!==null}function lc(n){const e=Ze(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Mn(es.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new yh(o,s))}),t.has(es.keyField().canonicalString())||e.Te.push(new yh(es.keyField(),s))}return e.Te}function ar(n){const e=Ze(n);return e.Ie||(e.Ie=mI(e,lc(n))),e.Ie}function WU(n){const e=Ze(n);return e.de||(e.de=mI(e,n.explicitOrderBy)),e.de}function mI(n,e){if(n.limitType==="F")return HS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new yh(a.field,o)});const t=n.endAt?new yc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new yc(n.startAt.position,n.startAt.inclusive):null;return HS(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function R0(n,e){const t=n.filters.concat([e]);return new io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function um(n,e,t){return new io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qm(n,e){return t_(ar(n),ar(e))&&n.limitType===e.limitType}function pI(n){return`${e_(ar(n))}|lt:${n.limitType}`}function Kl(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>dI(a)).join(", ")}]`),Um(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>gc(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>gc(a)).join(",")),`Target(${s})`}(ar(n))}; limitType=${n.limitType})`}function $m(n,e){return e.isFoundDocument()&&function(s,a){const o=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):Pe.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(n,e)&&function(s,a){for(const o of lc(s))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(s,a){for(const o of s.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(s,a){return!(s.startAt&&!function(c,h,f){const p=BS(c,h,f);return c.inclusive?p<=0:p<0}(s.startAt,lc(s),a)||s.endAt&&!function(c,h,f){const p=BS(c,h,f);return c.inclusive?p>=0:p>0}(s.endAt,lc(s),a))}(n,e)}function YU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gI(n){return(e,t)=>{let s=!1;for(const a of lc(n)){const o=XU(a,e,t);if(o!==0)return o;s=s||a.field.isKeyField()}return 0}}function XU(n,e,t){const s=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(o,c,h){const f=c.data.field(o),p=h.data.field(o);return f!==null&&p!==null?pc(f,p):$e(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return $e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,o]of s)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(t,s)=>{for(const[a,o]of s)e(a,o)})}isEmpty(){return JC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new tn(Pe.comparator);function Qr(){return QU}const yI=new tn(Pe.comparator);function Pu(...n){let e=yI;for(const t of n)e=e.insert(t.key,t);return e}function vI(n){let e=yI;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Fo(){return eh()}function _I(){return eh()}function eh(){return new nl(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZU=new tn(Pe.comparator),JU=new Mn(Pe.comparator);function ft(...n){let e=JU;for(const t of n)e=e.add(t);return e}const e6=new Mn(rt);function t6(){return e6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:am(e)?"-0":e}}function bI(n){return{integerValue:""+n}}function n6(n,e){return CU(e)?bI(e):s_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this._=void 0}}function s6(n,e,t){return n instanceof hm?function(a,o){const c={fields:{[nI]:{stringValue:tI},[iI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Bm(o)&&(o=Fm(o)),o&&(c.fields[sI]=o),{mapValue:c}}(t,e):n instanceof vh?EI(n,e):n instanceof _h?TI(n,e):function(a,o){const c=wI(a,o),h=$S(c)+$S(a.Ee);return x0(c)&&x0(a.Ee)?bI(h):s_(a.serializer,h)}(n,e)}function i6(n,e,t){return n instanceof vh?EI(n,e):n instanceof _h?TI(n,e):t}function wI(n,e){return n instanceof dm?function(s){return x0(s)||function(o){return!!o&&"doubleValue"in o}(s)}(e)?e:{integerValue:0}:null}class hm extends Gm{}class vh extends Gm{constructor(e){super(),this.elements=e}}function EI(n,e){const t=xI(e);for(const s of n.elements)t.some(a=>ur(a,s))||t.push(s);return{arrayValue:{values:t}}}class _h extends Gm{constructor(e){super(),this.elements=e}}function TI(n,e){let t=xI(e);for(const s of n.elements)t=t.filter(a=>!ur(a,s));return{arrayValue:{values:t}}}class dm extends Gm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function $S(n){return fn(n.integerValue||n.doubleValue)}function xI(n){return Jv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function r6(n,e){return n.field.isEqual(e.field)&&function(s,a){return s instanceof vh&&a instanceof vh||s instanceof _h&&a instanceof _h?mc(s.elements,a.elements,ur):s instanceof dm&&a instanceof dm?ur(s.Ee,a.Ee):s instanceof hm&&a instanceof hm}(n.transform,e.transform)}class a6{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Km{}function SI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new i_(n.key,_i.none()):new Mh(n.key,n.data,_i.none());{const t=n.data,s=Ns.empty();let a=new Mn(es.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?s.delete(o):s.set(o,c),a=a.add(o)}return new ro(n.key,s,new Ys(a.toArray()),_i.none())}}function o6(n,e,t){n instanceof Mh?function(a,o,c){const h=a.value.clone(),f=KS(a.fieldTransforms,o,c.transformResults);h.setAll(f),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ro?function(a,o,c){if(!kf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=KS(a.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(AI(a)),f.setAll(h),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function th(n,e,t,s){return n instanceof Mh?function(o,c,h,f){if(!kf(o.precondition,c))return h;const p=o.value.clone(),y=WS(o.fieldTransforms,f,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,s):n instanceof ro?function(o,c,h,f){if(!kf(o.precondition,c))return h;const p=WS(o.fieldTransforms,f,c),y=c.data;return y.setAll(AI(o)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,s):function(o,c,h){return kf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function l6(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),o=wI(s.transform,a||null);o!=null&&(t===null&&(t=Ns.empty()),t.set(s.field,o))}return t||null}function GS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&mc(s,a,(o,c)=>r6(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mh extends Km{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ro extends Km{constructor(e,t,s,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function KS(n,e,t){const s=new Map;St(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,h=e.data.field(o.field);s.set(o.field,i6(c,h,t[a]))}return s}function WS(n,e,t){const s=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);s.set(a.field,s6(o,c,e))}return s}class i_ extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c6 extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&o6(o,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=th(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=th(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_I();return this.mutations.forEach(a=>{const o=e.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(a.key)?null:h;const f=SI(c,h);f!==null&&s.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(et.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,(t,s)=>GS(t,s))&&mc(this.baseMutations,e.baseMutations,(t,s)=>GS(t,s))}}class r_{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){St(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=function(){return ZU}();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,s[c].version);return new r_(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,_t;function m6(n){switch(n){case oe.OK:return $e(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return $e(15467,{code:n})}}function RI(n){if(n===void 0)return Xr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case _n.OK:return oe.OK;case _n.CANCELLED:return oe.CANCELLED;case _n.UNKNOWN:return oe.UNKNOWN;case _n.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case _n.INTERNAL:return oe.INTERNAL;case _n.UNAVAILABLE:return oe.UNAVAILABLE;case _n.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case _n.NOT_FOUND:return oe.NOT_FOUND;case _n.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case _n.ABORTED:return oe.ABORTED;case _n.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case _n.DATA_LOSS:return oe.DATA_LOSS;default:return $e(39323,{code:n})}}(_t=_n||(_n={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new Ba([4294967295,4294967295],0);function YS(n){const e=XC().encode(n),t=new FC;return t.update(e),new Uint8Array(t.digest())}function XS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ba([t,s],0),new Ba([a,o],0)]}class a_{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Lu(`Invalid padding: ${t}`);if(s<0)throw new Lu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ba.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(Ba.fromNumber(s)));return a.compare(p6)===1&&(a=new Ba([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=YS(e),[s,a]=XS(t);for(let o=0;o<this.hashCount;o++){const c=this.pe(s,a,o);if(!this.ye(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new a_(o,a,t);return s.forEach(h=>c.insert(h)),c}insert(e){if(this.fe===0)return;const t=YS(e),[s,a]=XS(t);for(let o=0;o<this.hashCount;o++){const c=this.pe(s,a,o);this.we(c)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,s,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wm(et.min(),a,new tn(rt),Qr(),ft())}}class Oh{constructor(e,t,s,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Oh(s,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class CI{constructor(e,t){this.targetId=e,this.De=t}}class II{constructor(e,t,s=ts.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class QS{constructor(){this.ve=0,this.Ce=ZS(),this.Fe=ts.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ft(),t=ft(),s=ft();return this.Ce.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:$e(38017,{changeType:o})}}),new Oh(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=ZS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class g6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qr(),this.je=uf(),this.Je=uf(),this.He=new tn(rt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:$e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const o=a.target;if(A0(o))if(s===0){const c=new Pe(o.path);this.Xe(t,c,ms.newNoDocument(c,et.min()))}else St(s===1,20013,{expectedCount:s});else{const c=this.ot(t);if(c!==s){const h=this._t(e),f=h?this.ut(h,e,c):1;if(f!==0){this.rt(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=t;let c,h;try{c=Wa(s).toUint8Array()}catch(f){if(f instanceof eI)return $a("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new a_(c,a,o)}catch(f){return $a(f instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach(o=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,o,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((o,c)=>{const h=this.st(c);if(h){if(o.current&&A0(h.target)){const f=new Pe(h.target.path);this.Tt(f).has(c)||this.It(c,f)||this.Xe(c,f,ms.newNoDocument(f,e))}o.Ne&&(t.set(c,o.Le()),o.ke())}});let s=ft();this.Je.forEach((o,c)=>{let h=!0;c.forEachWhile(f=>{const p=this.st(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(s=s.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));const a=new Wm(e,t,this.He,this.ze,s);return this.ze=Qr(),this.je=uf(),this.Je=uf(),this.He=new tn(rt),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new QS,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Mn(rt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Mn(rt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new QS),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function uf(){return new tn(Pe.comparator)}function ZS(){return new tn(Pe.comparator)}const y6={asc:"ASCENDING",desc:"DESCENDING"},v6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_6={and:"AND",or:"OR"};class b6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function C0(n,e){return n.useProto3Json||Um(e)?e:{value:e}}function fm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function w6(n,e){return fm(n,e.toTimestamp())}function or(n){return St(!!n,49232),et.fromTimestamp(function(t){const s=Ka(t);return new Dt(s.seconds,s.nanos)}(n))}function o_(n,e){return I0(n,e).canonicalString()}function I0(n,e){const t=function(a){return new Ot(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kI(n){const e=Ot.fromString(n);return St(VI(e),10190,{key:e.toString()}),e}function N0(n,e){return o_(n.databaseId,e.path)}function ky(n,e){const t=kI(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(OI(t))}function MI(n,e){return o_(n.databaseId,e)}function E6(n){const e=kI(n);return e.length===4?Ot.emptyPath():OI(e)}function k0(n){return new Ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OI(n){return St(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JS(n,e,t){return{name:N0(n,e),fields:t.value.mapValue.fields}}function T6(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:$e(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(St(y===void 0||typeof y=="string",58123),ts.fromBase64String(y||"")):(St(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ts.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const y=p.code===void 0?oe.UNKNOWN:RI(p.code);return new Te(y,p.message||"")}(c);t=new II(s,a,o,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=ky(n,s.document.name),o=or(s.document.updateTime),c=s.document.createTime?or(s.document.createTime):et.min(),h=new Ns({mapValue:{fields:s.document.fields}}),f=ms.newFoundDocument(a,o,c,h),p=s.targetIds||[],y=s.removedTargetIds||[];t=new Mf(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=ky(n,s.document),o=s.readTime?or(s.readTime):et.min(),c=ms.newNoDocument(a,o),h=s.removedTargetIds||[];t=new Mf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=ky(n,s.document),o=s.removedTargetIds||[];t=new Mf([],o,a,null)}else{if(!("filter"in e))return $e(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:o}=s,c=new f6(a,o),h=s.targetId;t=new CI(h,c)}}return t}function x6(n,e){let t;if(e instanceof Mh)t={update:JS(n,e.key,e.value)};else if(e instanceof i_)t={delete:N0(n,e.key)};else if(e instanceof ro)t={update:JS(n,e.key,e.data),updateMask:O6(e.fieldMask)};else{if(!(e instanceof c6))return $e(16599,{Rt:e.type});t={verify:N0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(o,c){const h=c.transform;if(h instanceof hm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof vh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof _h)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof dm)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw $e(20930,{transform:c.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:w6(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$e(27497)}(n,e.precondition)),t}function S6(n,e){return n&&n.length>0?(St(e!==void 0,14353),n.map(t=>function(a,o){let c=a.updateTime?or(a.updateTime):or(o);return c.isEqual(et.min())&&(c=or(o)),new a6(c,a.transformResults||[])}(t,e))):[]}function A6(n,e){return{documents:[MI(n,e.path)]}}function DI(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=MI(n,a);const o=function(p){if(p.length!==0)return LI(Di.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(p){if(p.length!==0)return p.map(y=>function(w){return{field:Pa(w.field),direction:N6(w.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=C0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:a}}function R6(n,e,t,s){const{Vt:a,parent:o}=DI(n,e),c={},h=[];let f=0;return t.forEach(p=>{const y="aggregate_"+f++;c[y]=p.alias,p.aggregateType==="count"?h.push({alias:y,count:{}}):p.aggregateType==="avg"?h.push({alias:y,avg:{field:Pa(p.fieldPath)}}):p.aggregateType==="sum"&&h.push({alias:y,sum:{field:Pa(p.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:h,structuredQuery:a.structuredQuery},parent:a.parent},ft:c,parent:o}}function C6(n){let e=E6(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){St(s===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(_){const w=PI(_);return w instanceof Di&&uI(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(_){return _.map(w=>function(C){return new yh(Wl(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(w))}(t.orderBy));let h=null;t.limit&&(h=function(_){let w;return w=typeof _=="object"?_.value:_,Um(w)?null:w}(t.limit));let f=null;t.startAt&&(f=function(_){const w=!!_.before,x=_.values||[];return new yc(x,w)}(t.startAt));let p=null;return t.endAt&&(p=function(_){const w=!_.before,x=_.values||[];return new yc(x,w)}(t.endAt)),KU(e,a,c,o,h,"F",f,p)}function I6(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Wl(t.unaryFilter.field);return bn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Wl(t.unaryFilter.field);return bn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wl(t.unaryFilter.field);return bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Wl(t.unaryFilter.field);return bn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}}(n):n.fieldFilter!==void 0?function(t){return bn.create(Wl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Di.create(t.compositeFilter.filters.map(s=>PI(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return $e(1026)}}(t.compositeFilter.op))}(n):$e(30097,{filter:n})}function N6(n){return y6[n]}function k6(n){return v6[n]}function M6(n){return _6[n]}function Pa(n){return{fieldPath:n.canonicalString()}}function Wl(n){return es.fromServerFormat(n.fieldPath)}function LI(n){return n instanceof bn?function(t){if(t.op==="=="){if(US(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NAN"}};if(zS(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(US(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NAN"}};if(zS(t.value))return{unaryFilter:{field:Pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(t.field),op:k6(t.op),value:t.value}}}(n):n instanceof Di?function(t){const s=t.getFilters().map(a=>LI(a));return s.length===1?s[0]:{compositeFilter:{op:M6(t.op),filters:s}}}(n):$e(54877,{filter:n})}function O6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,s,a,o=et.min(),c=et.min(),h=ts.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new La(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.gt=e}}function P6(n){const e=C6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.Dn=new V6}addToCollectionParentIndex(e,t){return this.Dn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Ga.min())}updateCollectionGroup(e,t,s){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class V6{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Mn(Ot.comparator),o=!a.has(s);return this.index[t]=a.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Mn(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jI=41943040;class Cs{static withCacheSize(e){return new Cs(e,Cs.DEFAULT_COLLECTION_PERCENTILE,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs.DEFAULT_COLLECTION_PERCENTILE=10,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cs.DEFAULT=new Cs(jI,Cs.DEFAULT_COLLECTION_PERCENTILE,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cs.DISABLED=new Cs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new vc(0)}static ur(){return new vc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="LruGarbageCollector",j6=1048576;function nA([n,e],[t,s]){const a=rt(n,t);return a===0?rt(e,s):a}class z6{constructor(e){this.Tr=e,this.buffer=new Mn(nA),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();nA(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Re(tA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rc(t)?Re(tA,"Ignoring IndexedDB error during garbage collection: ",t):await Ac(t)}await this.Rr(3e5)})}}class B6{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return me.resolve(zm.ue);const s=new z6(t);return this.Vr.forEachTarget(e,a=>s.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>s.Er(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(eA)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,o,c,h,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a))).next(_=>(s=_,h=Date.now(),this.removeTargets(e,s,t))).next(_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(e,s))).next(_=>(p=Date.now(),Gl()<=dt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:_})))}}function F6(n,e){return new B6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.changes=new nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ms.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?me.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&th(s.mutation,a,Ys.empty(),Dt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ft()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ft()){const a=Fo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(o=>{let c=Pu();return o.forEach((h,f)=>{c=c.insert(h,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const s=Fo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ft()))}populateOverlays(e,t,s){const a=[];return s.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,s,a){let o=Qr();const c=eh(),h=function(){return eh()}();return t.forEach((f,p)=>{const y=s.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ro)?o=o.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),th(y.mutation,p,y.mutation.getFieldMask(),Dt.now())):c.set(p.key,Ys.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((p,y)=>c.set(p,y)),t.forEach((p,y)=>{var _;return h.set(p,new q6(y,(_=c.get(p))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){const s=eh();let a=new tn((c,h)=>c-h),o=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let y=s.get(f)||Ys.empty();y=h.applyToLocalView(p,y),s.set(f,y);const _=(a.get(h.batchId)||ft()).add(f);a=a.insert(h.batchId,_)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,y=f.value,_=_I();y.forEach(w=>{if(!o.has(w)){const x=SI(t.get(w),s.get(w));x!==null&&_.set(w,x),o=o.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return me.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(c){return Pe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-o.size):me.resolve(Fo());let h=fh,f=o;return c.next(p=>me.forEach(p,(y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(y)?me.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{f=f.insert(y,w)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,f,p,ft())).next(y=>({batchId:h,changes:vI(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(s=>{let a=Pu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const o=t.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(e,o).next(h=>me.forEach(h,f=>{const p=function(_,w){return new io(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next(y=>{y.forEach((_,w)=>{c=c.insert(_,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,a))).next(c=>{o.forEach((f,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,ms.newInvalidDocument(y)))});let h=Pu();return c.forEach((f,p)=>{const y=o.get(f);y!==void 0&&th(y.mutation,p,Ys.empty(),Dt.now()),$m(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return me.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:or(a.createTime)}}(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:P6(a.bundledQuery),readTime:or(a.readTime)}}(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.overlays=new tn(Pe.comparator),this.kr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Fo();return me.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&s.set(a,o)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,o)=>{this.wt(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(s)),me.resolve()}getOverlaysForCollection(e,t,s){const a=Fo(),o=t.length+1,c=new Pe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>s&&a.set(f.getKey(),f)}return me.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let o=new tn((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let y=o.get(p.largestBatchId);y===null&&(y=Fo(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Fo(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=a)););return me.resolve(h)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new h6(t,s));let o=this.kr.get(t);o===void 0&&(o=ft(),this.kr.set(t,o)),this.kr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.sessionToken=ts.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.qr=new Mn(Fn.Qr),this.$r=new Mn(Fn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Fn(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new Fn(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new Pe(new Ot([])),s=new Fn(t,e),a=new Fn(t,e+1),o=[];return this.$r.forEachInRange([s,a],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Pe(new Ot([])),s=new Fn(t,e),a=new Fn(t,e+1);let o=ft();return this.$r.forEachInRange([s,a],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Fn(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Fn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Pe.comparator(e.key,t.key)||rt(e.Hr,t.Hr)}static Ur(e,t){return rt(e.Hr,t.Hr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Mn(Fn.Qr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new u6(o,t,s,a);this.mutationQueue.push(c);for(const h of a)this.Yr=this.Yr.add(new Fn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),o=a<0?0:a;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Zv:this.er-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Fn(t,0),a=new Fn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([s,a],c=>{const h=this.Zr(c.Hr);o.push(h)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Mn(rt);return t.forEach(a=>{const o=new Fn(a,0),c=new Fn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],h=>{s=s.add(h.Hr)})}),me.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let o=s;Pe.isDocumentKey(o)||(o=o.child(""));const c=new Fn(new Pe(o),0);let h=new Mn(rt);return this.Yr.forEachWhile(f=>{const p=f.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(h=h.add(f.Hr)),!0)},c),me.resolve(this.ei(h))}ei(e){const t=[];return e.forEach(s=>{const a=this.Zr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){St(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return me.forEach(t.mutations,a=>{const o=new Fn(a.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new Fn(t,0),a=this.Yr.firstAfterOrEqual(s);return me.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.ni=e,this.docs=function(){return new tn(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),o=a?a.size:0,c=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return me.resolve(s?s.document.mutableCopy():ms.newInvalidDocument(t))}getEntries(e,t){let s=Qr();return t.forEach(a=>{const o=this.docs.get(a);s=s.insert(a,o?o.document.mutableCopy():ms.newInvalidDocument(a))}),me.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let o=Qr();const c=t.path,h=new Pe(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||xU(TU(y),s)<=0||(a.has(y.key)||$m(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,s,a){$e(9500)}ri(e,t){return me.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Q6(this)}getSize(e){return me.resolve(this.size)}}class Q6 extends H6{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)}),me.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.persistence=e,this.ii=new nl(t=>e_(t),t_),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.si=0,this.oi=new l_,this.targetCount=0,this._i=vc.ar()}forEachTarget(e,t){return this.ii.forEach((s,a)=>t(a)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),me.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.hr(t),me.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,s){let a=0;const o=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),me.waitFor(o).next(()=>a)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return me.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),me.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(c=>{o.push(a.markPotentiallyOrphaned(e,c))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return me.resolve(s)}containsKey(e,t){return me.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.ai={},this.overlays={},this.ui=new zm(0),this.ci=!1,this.ci=!0,this.li=new W6,this.referenceDelegate=e(this),this.hi=new Z6(this),this.indexManager=new L6,this.remoteDocumentCache=function(a){return new X6(a)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new D6(t),this.Ti=new G6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new Y6(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){Re("MemoryPersistence","Starting transaction:",e);const a=new J6(this.ui.next());return this.referenceDelegate.Ii(),s(a).next(o=>this.referenceDelegate.di(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}Ei(e,t){return me.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class J6 extends AU{constructor(e){super(),this.currentSequenceNumber=e}}class c_{constructor(e){this.persistence=e,this.Ai=new l_,this.Ri=null}static Vi(e){return new c_(e)}get mi(){if(this.Ri)return this.Ri;throw $e(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),me.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.mi.add(o.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.mi,s=>{const a=Pe.fromPath(s);return this.fi(e,a).next(o=>{o||t.removeEntry(a,et.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return me.or([()=>me.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class mm{constructor(e,t){this.persistence=e,this.gi=new nl(s=>IU(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=F6(this,t)}static Vi(e,t){return new mm(e,t)}Ii(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return me.forEach(this.gi,(s,a)=>this.Sr(e,s,a).next(o=>o?me.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ri(e,c=>this.Sr(e,c,t).next(h=>{h||(s++,o.removeEntry(c,et.min()))})).next(()=>o.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),me.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),me.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=If(e.data.value)),t}Sr(e,t,s){return me.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return me.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=ft(),a=ft();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new u_(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return N4()?8:RU(gs())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const o={result:null};return this.ps(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,t,a,s).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new e5;return this.ws(e,t,c).next(h=>{if(o.result=h,this.Rs)return this.Ss(e,t,c,h.size)})}).next(()=>o.result)}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(Gl()<=dt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(Gl()<=dt.DEBUG&&Re("QueryEngine","Query:",Kl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(Gl()<=dt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(t))):me.resolve())}ps(e,t){if(qS(t))return me.resolve(null);let s=ar(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=um(t,null,"F"),s=ar(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(o=>{const c=ft(...o);return this.gs.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,s).next(f=>{const p=this.bs(t,h);return this.Ds(t,p,c,f.readTime)?this.ps(e,um(t,null,"F")):this.vs(e,p,t,f)}))})))}ys(e,t,s,a){return qS(t)||a.isEqual(et.min())?me.resolve(null):this.gs.getDocuments(e,s).next(o=>{const c=this.bs(t,o);return this.Ds(t,c,s,a)?me.resolve(null):(Gl()<=dt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Kl(t)),this.vs(e,c,t,EU(a,fh)).next(h=>h))})}bs(e,t){let s=new Mn(gI(e));return t.forEach((a,o)=>{$m(e,o)&&(s=s.add(o))}),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}ws(e,t,s){return Gl()<=dt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Kl(t)),this.gs.getDocumentsMatchingQuery(e,t,Ga.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="LocalStore",n5=3e8;class s5{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new tn(rt),this.Ms=new nl(o=>e_(o),t_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function i5(n,e,t,s){return new s5(n,e,t,s)}async function UI(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(o=>(a=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(o=>{const c=[],h=[];let f=ft();for(const p of a){c.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(s,f).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:h}))})})}function r5(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,p,y){const _=p.batch,w=_.keys();let x=me.resolve();return w.forEach(C=>{x=x.next(()=>y.getEntry(f,C)).next(k=>{const O=p.docVersions.get(C);St(O!==null,48541),k.version.compareTo(O)<0&&(_.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),y.addEntry(k)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(f,_))}(t,s,e,o).next(()=>o.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(h){let f=ft();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function BI(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function a5(n,e){const t=Ze(n),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const h=[];e.targetChanges.forEach((y,_)=>{const w=a.get(_);if(!w)return;h.push(t.hi.removeMatchingKeys(o,y.removedDocuments,_).next(()=>t.hi.addMatchingKeys(o,y.addedDocuments,_)));let x=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?x=x.withResumeToken(ts.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,s)),a=a.insert(_,x),function(k,O,B){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=n5?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(w,x,y)&&h.push(t.hi.updateTargetData(o,x))});let f=Qr(),p=ft();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(o5(o,c,e.documentUpdates).next(y=>{f=y.Ls,p=y.ks})),!s.isEqual(et.min())){const y=t.hi.getLastRemoteSnapshotVersion(o).next(_=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,s));h.push(y)}return me.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,p)).next(()=>f)}).then(o=>(t.Fs=a,o))}function o5(n,e,t){let s=ft(),a=ft();return t.forEach(o=>s=s.add(o)),e.getEntries(n,s).next(o=>{let c=Qr();return t.forEach((h,f)=>{const p=o.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),f.isNoDocument()&&f.version.isEqual(et.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):Re(h_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Ls:c,ks:a}})}function l5(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Zv),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function c5(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.hi.getTargetData(s,e).next(o=>o?(a=o,me.resolve(a)):t.hi.allocateTargetId(s).next(c=>(a=new La(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function M0(n,e,t){const s=Ze(n),a=s.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,c=>s.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Rc(c))throw c;Re(h_,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function sA(n,e,t){const s=Ze(n);let a=et.min(),o=ft();return s.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,y){const _=Ze(f),w=_.Ms.get(y);return w!==void 0?me.resolve(_.Fs.get(w)):_.hi.getTargetData(p,y)}(s,c,ar(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(c,h.targetId).next(f=>{o=f})}).next(()=>s.Cs.getDocumentsMatchingQuery(c,e,t?a:et.min(),t?o:ft())).next(h=>(u5(s,YU(e),h),{documents:h,qs:o})))}function u5(n,e,t){let s=n.xs.get(e)||et.min();t.forEach((a,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)}),n.xs.set(e,s)}class iA{constructor(){this.activeTargetIds=t6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h5{constructor(){this.Fo=new iA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new iA,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="ConnectivityMonitor";class aA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Re(rA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Re(rA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function O0(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="RestConnection",f5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m5{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===om?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,o){const c=O0(),h=this.Go(e,t.toUriEncodedString());Re(My,`Sending RPC '${e}' ${c}:`,h,s);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,a,o);const{host:p}=new URL(h),y=Ec(p);return this.jo(e,h,f,s,y).then(_=>(Re(My,`Received RPC '${e}' ${c}: `,_),_),_=>{throw $a(My,`RPC '${e}' ${c} failed with error: `,_,"url: ",h,"request:",s),_})}Jo(e,t,s,a,o,c){return this.Wo(e,t,s,a,o)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),s&&s.headers.forEach((a,o)=>e[o]=a)}Go(e,t){const s=f5[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="WebChannelConnection";class g5 extends m5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,o){const c=O0();return new Promise((h,f)=>{const p=new HC;p.setWithCredentials(!0),p.listenOnce(qC.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Cf.NO_ERROR:const _=p.getResponseJson();Re(ls,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),h(_);break;case Cf.TIMEOUT:Re(ls,`RPC '${e}' ${c} timed out`),f(new Te(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const w=p.getStatus();if(Re(ls,`RPC '${e}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x==null?void 0:x.error;if(C&&C.status&&C.message){const k=function(B){const V=B.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(V)>=0?V:oe.UNKNOWN}(C.status);f(new Te(k,C.message))}else f(new Te(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new Te(oe.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{Re(ls,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);Re(ls,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,s,15)})}P_(e,t,s){const a=O0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=KC(),h=GC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=o.join("");Re(ls,`Creating RPC '${e}' stream ${a}: ${y}`,f);const _=c.createWebChannel(y,f);this.T_(_);let w=!1,x=!1;const C=new p5({Ho:O=>{x?Re(ls,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(w||(Re(ls,`Opening RPC '${e}' stream ${a} transport.`),_.open(),w=!0),Re(ls,`RPC '${e}' stream ${a} sending:`,O),_.send(O))},Yo:()=>_.close()}),k=(O,B,V)=>{O.listen(B,H=>{try{V(H)}catch(G){setTimeout(()=>{throw G},0)}})};return k(_,Du.EventType.OPEN,()=>{x||(Re(ls,`RPC '${e}' stream ${a} transport opened.`),C.s_())}),k(_,Du.EventType.CLOSE,()=>{x||(x=!0,Re(ls,`RPC '${e}' stream ${a} transport closed`),C.__(),this.I_(_))}),k(_,Du.EventType.ERROR,O=>{x||(x=!0,$a(ls,`RPC '${e}' stream ${a} transport errored. Name:`,O.name,"Message:",O.message),C.__(new Te(oe.UNAVAILABLE,"The operation could not be completed")))}),k(_,Du.EventType.MESSAGE,O=>{var B;if(!x){const V=O.data[0];St(!!V,16349);const H=V,G=(H==null?void 0:H.error)||((B=H[0])===null||B===void 0?void 0:B.error);if(G){Re(ls,`RPC '${e}' stream ${a} received error:`,G);const F=G.status;let te=function(I){const P=_n[I];if(P!==void 0)return RI(P)}(F),S=G.message;te===void 0&&(te=oe.INTERNAL,S="Unknown error status: "+F+" with message "+G.message),x=!0,C.__(new Te(te,S)),_.close()}else Re(ls,`RPC '${e}' stream ${a} received:`,V),C.a_(V)}}),k(h,$C.STAT_EVENT,O=>{O.stat===w0.PROXY?Re(ls,`RPC '${e}' stream ${a} detected buffering proxy`):O.stat===w0.NOPROXY&&Re(ls,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Oy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n){return new b6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t,s=1e3,a=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&Re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="PersistentStream";class HI{constructor(e,t,s,a,o,c,h,f){this.Fi=e,this.w_=s,this.S_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new FI(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.b_===t&&this.W_(s,a)},s=>{e(()=>{const a=new Te(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{s(()=>this.G_(a))}),this.stream.onMessage(a=>{s(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Re(oA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Re(oA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y5 extends HI{constructor(e,t,s,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=T6(this.serializer,e),s=function(o){if(!("targetChange"in o))return et.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?et.min():c.readTime?or(c.readTime):et.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=k0(this.serializer),t.addTarget=function(o,c){let h;const f=c.target;if(h=A0(f)?{documents:A6(o,f)}:{query:DI(o,f).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=NI(o,c.resumeToken);const p=C0(o,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(et.min())>0){h.readTime=fm(o,c.snapshotVersion.toTimestamp());const p=C0(o,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const s=I6(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=k0(this.serializer),t.removeTarget=e,this.k_(t)}}class v5 extends HI{constructor(e,t,s,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=S6(e.writeResults,e.commitTime),s=or(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=k0(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>x6(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{}class b5 extends _5{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,I0(t,s),a,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(oe.UNKNOWN,o.toString())})}Jo(e,t,s,a,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(e,I0(t,s),a,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(oe.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class w5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xr(t),this._a=!1):Re("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RemoteStore";class E5{constructor(e,t,s,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{s.enqueueAndForget(async()=>{sl(this)&&(Re(Jo,"Restarting streams for network reachability change."),await async function(f){const p=Ze(f);p.Ia.add(4),await Dh(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Xm(p)}(this))})}),this.Aa=new w5(s,a)}}async function Xm(n){if(sl(n))for(const e of n.da)await e(!0)}async function Dh(n){for(const e of n.da)await e(!1)}function qI(n,e){const t=Ze(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),p_(t)?m_(t):Cc(t).x_()&&f_(t,e))}function d_(n,e){const t=Ze(n),s=Cc(t);t.Ta.delete(e),s.x_()&&$I(t,e),t.Ta.size===0&&(s.x_()?s.B_():sl(t)&&t.Aa.set("Unknown"))}function f_(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cc(n).H_(e)}function $I(n,e){n.Ra.$e(e),Cc(n).Y_(e)}function m_(n){n.Ra=new g6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Cc(n).start(),n.Aa.aa()}function p_(n){return sl(n)&&!Cc(n).M_()&&n.Ta.size>0}function sl(n){return Ze(n).Ia.size===0}function GI(n){n.Ra=void 0}async function T5(n){n.Aa.set("Online")}async function x5(n){n.Ta.forEach((e,t)=>{f_(n,e)})}async function S5(n,e){GI(n),p_(n)?(n.Aa.la(e),m_(n)):n.Aa.set("Unknown")}async function A5(n,e,t){if(n.Aa.set("Online"),e instanceof II&&e.state===2&&e.cause)try{await async function(a,o){const c=o.cause;for(const h of o.targetIds)a.Ta.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ta.delete(h),a.Ra.removeTarget(h))}(n,e)}catch(s){Re(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pm(n,s)}else if(e instanceof Mf?n.Ra.Ye(e):e instanceof CI?n.Ra.it(e):n.Ra.et(e),!t.isEqual(et.min()))try{const s=await BI(n.localStore);t.compareTo(s)>=0&&await function(o,c){const h=o.Ra.Pt(c);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ta.get(p);y&&o.Ta.set(p,y.withResumeToken(f.resumeToken,c))}}),h.targetMismatches.forEach((f,p)=>{const y=o.Ta.get(f);if(!y)return;o.Ta.set(f,y.withResumeToken(ts.EMPTY_BYTE_STRING,y.snapshotVersion)),$I(o,f);const _=new La(y.target,f,p,y.sequenceNumber);f_(o,_)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(s){Re(Jo,"Failed to raise snapshot:",s),await pm(n,s)}}async function pm(n,e,t){if(!Rc(e))throw e;n.Ia.add(1),await Dh(n),n.Aa.set("Offline"),t||(t=()=>BI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re(Jo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Xm(n)})}function KI(n,e){return e().catch(t=>pm(n,t,e))}async function Qm(n){const e=Ze(n),t=Xa(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zv;for(;R5(e);)try{const a=await l5(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,C5(e,a)}catch(a){await pm(e,a)}WI(e)&&YI(e)}function R5(n){return sl(n)&&n.Pa.length<10}function C5(n,e){n.Pa.push(e);const t=Xa(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function WI(n){return sl(n)&&!Xa(n).M_()&&n.Pa.length>0}function YI(n){Xa(n).start()}async function I5(n){Xa(n).na()}async function N5(n){const e=Xa(n);for(const t of n.Pa)e.X_(t.mutations)}async function k5(n,e,t){const s=n.Pa.shift(),a=r_.from(s,e,t);await KI(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Qm(n)}async function M5(n,e){e&&Xa(n).Z_&&await async function(s,a){if(function(c){return m6(c)&&c!==oe.ABORTED}(a.code)){const o=s.Pa.shift();Xa(s).N_(),await KI(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Qm(s)}}(n,e),WI(n)&&YI(n)}async function lA(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Re(Jo,"RemoteStore received new credentials");const s=sl(t);t.Ia.add(3),await Dh(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Xm(t)}async function O5(n,e){const t=Ze(n);e?(t.Ia.delete(2),await Xm(t)):e||(t.Ia.add(2),await Dh(t),t.Aa.set("Unknown"))}function Cc(n){return n.Va||(n.Va=function(t,s,a){const o=Ze(t);return o.ia(),new y5(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Zo:T5.bind(null,n),e_:x5.bind(null,n),n_:S5.bind(null,n),J_:A5.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),p_(n)?m_(n):n.Aa.set("Unknown")):(await n.Va.stop(),GI(n))})),n.Va}function Xa(n){return n.ma||(n.ma=function(t,s,a){const o=Ze(t);return o.ia(),new v5(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:I5.bind(null,n),n_:M5.bind(null,n),ea:N5.bind(null,n),ta:k5.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Qm(n)):(await n.ma.stop(),n.Pa.length>0&&(Re(Jo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t,s,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=o,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,o){const c=Date.now()+s,h=new g_(e,t,c,a,o);return h.start(s),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y_(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),Rc(n))return new Te(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{static emptySet(e){return new cc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Pe.comparator(t.key,s.key):(t,s)=>Pe.comparator(t.key,s.key),this.keyedMap=Pu(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new cc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.fa=new tn(Pe.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):$e(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class _c{constructor(e,t,s,a,o,c,h,f,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new _c(e,t,cc.emptySet(t),c,s,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class P5{constructor(){this.queries=uA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=Ze(t),o=a.queries;a.queries=uA(),o.forEach((c,h)=>{for(const f of h.wa)f.onError(s)})})(this,new Te(oe.ABORTED,"Firestore shutting down"))}}function uA(){return new nl(n=>pI(n),qm)}async function v_(n,e){const t=Ze(n);let s=3;const a=e.query;let o=t.queries.get(a);o?!o.Sa()&&e.ba()&&(s=2):(o=new D5,s=e.ba()?0:1);try{switch(s){case 0:o.ya=await t.onListen(a,!0);break;case 1:o.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=y_(c,`Initialization of query '${Kl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&b_(t)}async function __(n,e){const t=Ze(n),s=e.query;let a=3;const o=t.queries.get(s);if(o){const c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?a=e.ba()?0:1:!o.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function L5(n,e){const t=Ze(n);let s=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const h of c.wa)h.Ca(a)&&(s=!0);c.ya=a}}s&&b_(t)}function V5(n,e,t){const s=Ze(n),a=s.queries.get(e);if(a)for(const o of a.wa)o.onError(t);s.queries.delete(e)}function b_(n){n.Da.forEach(e=>{e.next()})}var D0,hA;(hA=D0||(D0={})).Fa="default",hA.Cache="cache";class w_{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new _c(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==D0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.key=e}}class QI{constructor(e){this.key=e}}class j5{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ft(),this.mutatedKeys=ft(),this.Xa=gI(e),this.eu=new cc(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new cA,a=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,_)=>{const w=a.get(y),x=$m(this.query,_)?_:null,C=!!w&&this.mutatedKeys.has(w.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let O=!1;w&&x?w.data.isEqual(x.data)?C!==k&&(s.track({type:3,doc:x}),O=!0):this.iu(w,x)||(s.track({type:2,doc:x}),O=!0,(f&&this.Xa(x,f)>0||p&&this.Xa(x,p)<0)&&(h=!0)):!w&&x?(s.track({type:0,doc:x}),O=!0):w&&!x&&(s.track({type:1,doc:w}),O=!0,(f||p)&&(h=!0)),O&&(x?(c=c.add(x),o=k?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),s.track({type:1,doc:y})}return{eu:c,ru:s,Ds:h,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((y,_)=>function(x,C){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{At:O})}};return k(x)-k(C)}(y.type,_.type)||this.Xa(y.doc,_.doc)),this.su(s),a=a!=null&&a;const h=t&&!a?this.ou():[],f=this.Za.size===0&&this.current&&!a?1:0,p=f!==this.Ya;return this.Ya=f,c.length!==0||p?{snapshot:new _c(this.query,e.eu,o,c,e.mutatedKeys,f===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ft(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new QI(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new XI(s))}),t}uu(e){this.Ha=e.qs,this.Za=ft();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return _c.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const E_="SyncEngine";class z5{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class U5{constructor(e){this.key=e,this.lu=!1}}class B5{constructor(e,t,s,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new nl(h=>pI(h),qm),this.Tu=new Map,this.Iu=new Set,this.du=new tn(Pe.comparator),this.Eu=new Map,this.Au=new l_,this.Ru={},this.Vu=new Map,this.mu=vc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function F5(n,e,t=!0){const s=sN(n);let a;const o=s.Pu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.cu()):a=await ZI(s,e,t,!0),a}async function H5(n,e){const t=sN(n);await ZI(t,e,!0,!1)}async function ZI(n,e,t,s){const a=await c5(n.localStore,ar(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return s&&(h=await q5(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&qI(n.remoteStore,a),h}async function q5(n,e,t,s,a){n.gu=(_,w,x)=>async function(k,O,B,V){let H=O.view.nu(B);H.Ds&&(H=await sA(k.localStore,O.query,!1).then(({documents:S})=>O.view.nu(S,H)));const G=V&&V.targetChanges.get(O.targetId),F=V&&V.targetMismatches.get(O.targetId)!=null,te=O.view.applyChanges(H,k.isPrimaryClient,G,F);return fA(k,O.targetId,te._u),te.snapshot}(n,_,w,x);const o=await sA(n.localStore,e,!0),c=new j5(e,o.qs),h=c.nu(o.documents),f=Oh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,f);fA(n,t,p._u);const y=new z5(e,t,c);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function $5(n,e,t){const s=Ze(n),a=s.Pu.get(e),o=s.Tu.get(a.targetId);if(o.length>1)return s.Tu.set(a.targetId,o.filter(c=>!qm(c,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await M0(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&d_(s.remoteStore,a.targetId),P0(s,a.targetId)}).catch(Ac)):(P0(s,a.targetId),await M0(s.localStore,a.targetId,!0))}async function G5(n,e){const t=Ze(n),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),d_(t.remoteStore,s.targetId))}async function K5(n,e,t){const s=e9(n);try{const a=await function(c,h){const f=Ze(c),p=Dt.now(),y=h.reduce((x,C)=>x.add(C.key),ft());let _,w;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=Qr(),k=ft();return f.Os.getEntries(x,y).next(O=>{C=O,C.forEach((B,V)=>{V.isValidDocument()||(k=k.add(B))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,C)).next(O=>{_=O;const B=[];for(const V of h){const H=l6(V,_.get(V.key).overlayedDocument);H!=null&&B.push(new ro(V.key,H,oI(H.value.mapValue),_i.exists(!0)))}return f.mutationQueue.addMutationBatch(x,p,B,h)}).next(O=>{w=O;const B=O.applyToLocalDocumentSet(_,k);return f.documentOverlayCache.saveOverlays(x,O.batchId,B)})}).then(()=>({batchId:w.batchId,changes:vI(_)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,h,f){let p=c.Ru[c.currentUser.toKey()];p||(p=new tn(rt)),p=p.insert(h,f),c.Ru[c.currentUser.toKey()]=p}(s,a.batchId,t),await Ph(s,a.changes),await Qm(s.remoteStore)}catch(a){const o=y_(a,"Failed to persist write");t.reject(o)}}async function JI(n,e){const t=Ze(n);try{const s=await a5(t.localStore,e);e.targetChanges.forEach((a,o)=>{const c=t.Eu.get(o);c&&(St(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?St(c.lu,14607):a.removedDocuments.size>0&&(St(c.lu,42227),c.lu=!1))}),await Ph(t,s,e)}catch(s){await Ac(s)}}function dA(n,e,t){const s=Ze(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach((o,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)}),function(c,h){const f=Ze(c);f.onlineState=h;let p=!1;f.queries.forEach((y,_)=>{for(const w of _.wa)w.va(h)&&(p=!0)}),p&&b_(f)}(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function W5(n,e,t){const s=Ze(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),o=a&&a.key;if(o){let c=new tn(Pe.comparator);c=c.insert(o,ms.newNoDocument(o,et.min()));const h=ft().add(o),f=new Wm(et.min(),new Map,new tn(rt),c,h);await JI(s,f),s.du=s.du.remove(o),s.Eu.delete(e),T_(s)}else await M0(s.localStore,e,!1).then(()=>P0(s,e,t)).catch(Ac)}async function Y5(n,e){const t=Ze(n),s=e.batch.batchId;try{const a=await r5(t.localStore,e);tN(t,s,null),eN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ph(t,a)}catch(a){await Ac(a)}}async function X5(n,e,t){const s=Ze(n);try{const a=await function(c,h){const f=Ze(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,h).next(_=>(St(_!==null,37113),y=_.keys(),f.mutationQueue.removeMutationBatch(p,_))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(s.localStore,e);tN(s,e,t),eN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ph(s,a)}catch(a){await Ac(a)}}function eN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function tN(n,e,t){const s=Ze(n);let a=s.Ru[s.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function P0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(s=>{n.Au.containsKey(s)||nN(n,s)})}function nN(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(d_(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),T_(n))}function fA(n,e,t){for(const s of t)s instanceof XI?(n.Au.addReference(s.key,e),Q5(n,s)):s instanceof QI?(Re(E_,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||nN(n,s.key)):$e(19791,{yu:s})}function Q5(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(Re(E_,"New document in limbo: "+t),n.Iu.add(s),T_(n))}function T_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Pe(Ot.fromString(e)),s=n.mu.next();n.Eu.set(s,new U5(t)),n.du=n.du.insert(t,s),qI(n.remoteStore,new La(ar(Hm(t.path)),s,"TargetPurposeLimboResolution",zm.ue))}}async function Ph(n,e,t){const s=Ze(n),a=[],o=[],c=[];s.Pu.isEmpty()||(s.Pu.forEach((h,f)=>{c.push(s.gu(f,e,t).then(p=>{var y;if((p||t)&&s.isPrimaryClient){const _=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;s.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){a.push(p);const _=u_.Es(f.targetId,p);o.push(_)}}))}),await Promise.all(c),s.hu.J_(a),await async function(f,p){const y=Ze(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>me.forEach(p,w=>me.forEach(w.Is,x=>y.persistence.referenceDelegate.addReference(_,w.targetId,x)).next(()=>me.forEach(w.ds,x=>y.persistence.referenceDelegate.removeReference(_,w.targetId,x)))))}catch(_){if(!Rc(_))throw _;Re(h_,"Failed to update sequence numbers: "+_)}for(const _ of p){const w=_.targetId;if(!_.fromCache){const x=y.Fs.get(w),C=x.snapshotVersion,k=x.withLastLimboFreeSnapshotVersion(C);y.Fs=y.Fs.insert(w,k)}}}(s.localStore,o))}async function Z5(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Re(E_,"User change. New user:",e.toKey());const s=await UI(t.localStore,e);t.currentUser=e,function(o,c){o.Vu.forEach(h=>{h.forEach(f=>{f.reject(new Te(oe.CANCELLED,c))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ph(t,s.Bs)}}function J5(n,e){const t=Ze(n),s=t.Eu.get(e);if(s&&s.lu)return ft().add(s.key);{let a=ft();const o=t.Tu.get(e);if(!o)return a;for(const c of o){const h=t.Pu.get(c);a=a.unionWith(h.view.tu)}return a}}function sN(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W5.bind(null,e),e.hu.J_=L5.bind(null,e.eventManager),e.hu.pu=V5.bind(null,e.eventManager),e}function e9(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X5.bind(null,e),e}class gm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ym(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return i5(this.persistence,new t5,e.initialUser,this.serializer)}Du(e){return new zI(c_.Vi,this.serializer)}bu(e){return new h5}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gm.provider={build:()=>new gm};class t9 extends gm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){St(this.persistence.referenceDelegate instanceof mm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new U6(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Cs.withCacheSize(this.cacheSizeBytes):Cs.DEFAULT;return new zI(s=>mm.Vi(s,t),this.serializer)}}class L0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>dA(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z5.bind(null,this.syncEngine),await O5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P5}()}createDatastore(e){const t=Ym(e.databaseInfo.databaseId),s=function(o){return new g5(o)}(e.databaseInfo);return function(o,c,h,f){return new b5(o,c,h,f)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,o,c,h){return new E5(s,a,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>dA(this.syncEngine,t,0),function(){return aA.C()?new aA:new d5}())}createSyncEngine(e,t){return function(a,o,c,h,f,p,y){const _=new B5(a,o,c,h,f,p);return y&&(_.fu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=Ze(a);Re(Jo,"RemoteStore shutting down."),o.Ia.add(5),await Dh(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}L0.provider={build:()=>new L0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="FirestoreClient";class n9{constructor(e,t,s,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=fs.UNAUTHENTICATED,this.clientId=Xv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,async c=>{Re(Qa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(Re(Qa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=y_(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Dy(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Qa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async a=>{s.isEqual(a)||(await UI(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>{$a("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{$a("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=e}async function mA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await s9(n);Re(Qa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>lA(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>lA(e.remoteStore,a)),n._onlineComponents=e}async function s9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Qa,"Using user provided OfflineComponentProvider");try{await Dy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),await Dy(n,new gm)}}else Re(Qa,"Using default OfflineComponentProvider"),await Dy(n,new t9(void 0));return n._offlineComponents}async function S_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Qa,"Using user provided OnlineComponentProvider"),await mA(n,n._uninitializedComponentsProvider._online)):(Re(Qa,"Using default OnlineComponentProvider"),await mA(n,new L0))),n._onlineComponents}function i9(n){return S_(n).then(e=>e.syncEngine)}function r9(n){return S_(n).then(e=>e.datastore)}async function ym(n){const e=await S_(n),t=e.eventManager;return t.onListen=F5.bind(null,e.syncEngine),t.onUnlisten=$5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=H5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G5.bind(null,e.syncEngine),t}function a9(n,e,t={}){const s=new rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,f,p){const y=new x_({next:w=>{y.Ou(),c.enqueueAndForget(()=>__(o,_));const x=w.docs.has(h);!x&&w.fromCache?p.reject(new Te(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&w.fromCache&&f&&f.source==="server"?p.reject(new Te(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),_=new w_(Hm(h.path),y,{includeMetadataChanges:!0,ka:!0});return v_(o,_)}(await ym(n),n.asyncQueue,e,t,s)),s.promise}function o9(n,e,t={}){const s=new rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,f,p){const y=new x_({next:w=>{y.Ou(),c.enqueueAndForget(()=>__(o,_)),w.fromCache&&f.source==="server"?p.reject(new Te(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),_=new w_(h,y,{includeMetadataChanges:!0,ka:!0});return v_(o,_)}(await ym(n),n.asyncQueue,e,t,s)),s.promise}function l9(n,e,t){const s=new rr;return n.asyncQueue.enqueueAndForget(async()=>{try{const a=await r9(n);s.resolve(async function(c,h,f){var p;const y=Ze(c),{request:_,ft:w,parent:x}=R6(y.serializer,WU(h),f);y.connection.Qo||delete _.parent;const C=(await y.Jo("RunAggregationQuery",y.serializer.databaseId,x,_,1)).filter(O=>!!O.result);St(C.length===1,64727);const k=(p=C[0].result)===null||p===void 0?void 0:p.aggregateFields;return Object.keys(k).reduce((O,B)=>(O[w[B]]=k[B],O),{})}(a,e,t))}catch(a){s.reject(a)}}),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firestore.googleapis.com",gA=!0;class yA{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rN,this.ssl=gA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<j6)throw new Te(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iN((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new hU;switch(s.type){case"firstParty":return new pU(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=pA.get(t);s&&(Re("ComponentProvider","Removing Datastore"),pA.delete(t),s.terminate())}(this),Promise.resolve()}}function c9(n,e,t,s={}){var a;n=Qs(n,Lh);const o=Ec(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;o&&(eC(`https://${f}`),tC("Firestore",!0)),c.host!==rN&&c.host!==f&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:o,emulatorOptions:s});if(!Wo(p,h)&&(n._setSettings(p),s.mockUserToken)){let y,_;if(typeof s.mockUserToken=="string")y=s.mockUserToken,_=fs.MOCK_USER;else{y=w4(s.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new Te(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fs(w)}n._authCredentials=new dU(new YC(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class mn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(kh(t,mn._jsonSchema))return new mn(e,s||null,new Pe(Ot.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:wn("string",mn._jsonSchemaVersion),referencePath:wn("string")};class Fa extends Pi{constructor(e,t,s){super(e,t,Hm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Pe(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function cs(n,e,...t){if(n=pn(n),Qv("collection","path",e),n instanceof Lh){const s=Ot.fromString(e,...t);return kS(s),new Fa(n,null,s)}{if(!(n instanceof mn||n instanceof Fa))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ot.fromString(e,...t));return kS(s),new Fa(n.firestore,null,s)}}function Py(n,e){if(n=Qs(n,Lh),Qv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,function(s){return new io(Ot.emptyPath(),s)}(e))}function hs(n,e,...t){if(n=pn(n),arguments.length===1&&(e=Xv.newId()),Qv("doc","path",e),n instanceof Lh){const s=Ot.fromString(e,...t);return NS(s),new mn(n,null,new Pe(s))}{if(!(n instanceof mn||n instanceof Fa))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ot.fromString(e,...t));return NS(s),new mn(n.firestore,n instanceof Fa?n.converter:null,new Pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="AsyncQueue";class _A{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new FI(this,"async_queue_retry"),this.oc=()=>{const s=Oy();s&&Re(vA,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Oy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Oy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new rr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Rc(e))throw e;Re(vA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Xr("INTERNAL UNHANDLED ERROR: ",bA(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=g_.createAndSchedule(this,e,t,s,o=>this.lc(o));return this.ec.push(a),a}ac(){this.tc&&$e(47125,{hc:bA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function bA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const o of s)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Za extends Lh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new _A,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _A(e),this._firestoreClient=void 0,await e}}}function u9(n,e){const t=typeof n=="object"?n:rC(),s=typeof n=="string"?n:om,a=Vv(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const o=_4("firestore");o&&c9(a,...o)}return a}function Ic(n){if(n._terminated)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||h9(n),n._firestoreClient}function h9(n){var e,t,s;const a=n._freezeSettings(),o=function(h,f,p,y){return new OU(h,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,iN(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new n9(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class f9{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(ts.fromBase64String(e))}catch(t){throw new Te(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yi(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kh(e,yi._jsonSchema))return yi.fromBase64String(e.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:wn("string",yi._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new es(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lr._jsonSchemaVersion}}static fromJSON(e){if(kh(e,lr._jsonSchema))return new lr(e.latitude,e.longitude)}}lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:wn("string",lr._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==a[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kh(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new cr(e.vectorValues);throw new Te(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:wn("string",cr._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=/^__.*__$/;class p9{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mh(e,this.data,t,this.fieldTransforms)}}class aN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ro(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ec:n})}}class R_{constructor(e,t,s,a,o,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new R_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return vm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(oN(this.Ec)&&m9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class g9{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ym(e)}Dc(e,t,s,a=!1){return new R_({Ec:e,methodName:t,bc:s,path:es.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(n){const e=n._freezeSettings(),t=Ym(n._databaseId);return new g9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lN(n,e,t,s,a,o={}){const c=n.Dc(o.merge||o.mergeFields?2:0,e,t,a);C_("Data must be an object, but it was:",c,s);const h=uN(s,c);let f,p;if(o.merge)f=new Ys(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const w=V0(e,_,t);if(!c.contains(w))throw new Te(oe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);dN(y,w)||y.push(w)}f=new Ys(y),p=c.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,p=c.fieldTransforms;return new p9(new Ns(h),f,p)}class ep extends A_{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ep}}function y9(n,e,t,s){const a=n.Dc(1,e,t);C_("Data must be an object, but it was:",a,s);const o=[],c=Ns.empty();so(s,(f,p)=>{const y=I_(e,f,t);p=pn(p);const _=a.gc(y);if(p instanceof ep)o.push(y);else{const w=Vh(p,_);w!=null&&(o.push(y),c.set(y,w))}});const h=new Ys(o);return new aN(c,h,a.fieldTransforms)}function v9(n,e,t,s,a,o){const c=n.Dc(1,e,t),h=[V0(e,s,t)],f=[a];if(o.length%2!=0)throw new Te(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)h.push(V0(e,o[w])),f.push(o[w+1]);const p=[],y=Ns.empty();for(let w=h.length-1;w>=0;--w)if(!dN(p,h[w])){const x=h[w];let C=f[w];C=pn(C);const k=c.gc(x);if(C instanceof ep)p.push(x);else{const O=Vh(C,k);O!=null&&(p.push(x),y.set(x,O))}}const _=new Ys(p);return new aN(y,_,c.fieldTransforms)}function cN(n,e,t,s=!1){return Vh(t,n.Dc(s?4:3,e))}function Vh(n,e){if(hN(n=pn(n)))return C_("Unsupported field value:",e,n),uN(n,e);if(n instanceof A_)return function(s,a){if(!oN(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,a){const o=[];let c=0;for(const h of s){let f=Vh(h,a.yc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}}(n,e)}return function(s,a){if((s=pn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return n6(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Dt.fromDate(s);return{timestampValue:fm(a.serializer,o)}}if(s instanceof Dt){const o=new Dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fm(a.serializer,o)}}if(s instanceof lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yi)return{bytesValue:NI(a.serializer,s._byteString)};if(s instanceof mn){const o=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(o))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:o_(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof cr)return function(c,h){return{mapValue:{fields:{[rI]:{stringValue:aI},[lm]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.wc("VectorValues must only contain numeric values.");return s_(h.serializer,p)})}}}}}}(s,a);throw a.wc(`Unsupported field value: ${jm(s)}`)}(n,e)}function uN(n,e){const t={};return JC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(n,(s,a)=>{const o=Vh(a,e.Vc(s));o!=null&&(t[s]=o)}),{mapValue:{fields:t}}}function hN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof lr||n instanceof yi||n instanceof mn||n instanceof A_||n instanceof cr)}function C_(n,e,t){if(!hN(t)||!QC(t)){const s=jm(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function V0(n,e,t){if((e=pn(e))instanceof Zm)return e._internalPath;if(typeof e=="string")return I_(n,e);throw vm("Field path arguments must be of type string or ",n,!1,void 0,t)}const _9=new RegExp("[~\\*/\\[\\]]");function I_(n,e,t){if(e.search(_9)>=0)throw vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zm(...e.split("."))._internalPath}catch{throw vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vm(n,e,t,s,a){const o=s&&!s.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${s}`),c&&(f+=` in document ${a}`),f+=")"),new Te(oe.INVALID_ARGUMENT,h+n+f)}function dN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,t,s,a,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b9 extends N_{data(){return super.data()}}function tp(n,e){return typeof e=="string"?I_(n,e):e instanceof Zm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k_{}class np extends k_{}function us(n,e,...t){let s=[];e instanceof k_&&s.push(e),s=s.concat(t),function(o){const c=o.filter(f=>f instanceof M_).length,h=o.filter(f=>f instanceof sp).length;if(c>1||c>0&&h>0)throw new Te(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class sp extends np{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new sp(e,t,s)}_apply(e){const t=this._parse(e);return mN(e._query,t),new Pi(e.firestore,e.converter,R0(e._query,t))}_parse(e){const t=Jm(e.firestore);return function(o,c,h,f,p,y,_){let w;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Te(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){xA(_,y);const C=[];for(const k of _)C.push(TA(f,o,k));w={arrayValue:{values:C}}}else w=TA(f,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||xA(_,y),w=cN(h,c,_,y==="in"||y==="not-in");return bn.create(p,y,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ri(n,e,t){const s=e,a=tp("where",n);return sp._create(a,s,t)}class M_ extends k_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new M_(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,o){let c=a;const h=o.getFlattenedFilters();for(const f of h)mN(c,f),c=R0(c,f)}(e._query,t),new Pi(e.firestore,e.converter,R0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class O_ extends np{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new O_(e,t)}_apply(e){const t=function(a,o,c){if(a.startAt!==null)throw new Te(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Te(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yh(o,c)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(a,o){const c=a.explicitOrderBy.concat([o]);return new io(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Oo(n,e="asc"){const t=e,s=tp("orderBy",n);return O_._create(s,t)}class D_ extends np{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new D_(e,t,s)}_apply(e){return new Pi(e.firestore,e.converter,um(e._query,this._limit,this._limitType))}}function df(n){return wU("limit",n),D_._create("limit",n,"F")}class P_ extends np{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new P_(e,t,s)}_apply(e){const t=w9(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,function(a,o){return new io(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,o,a.endAt)}(e._query,t))}}function EA(...n){return P_._create("startAfter",n,!1)}function w9(n,e,t,s){if(t[0]=pn(t[0]),t[0]instanceof N_)return function(o,c,h,f,p){if(!f)throw new Te(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const _ of lc(o))if(_.field.isKeyField())y.push(cm(c,f.key));else{const w=f.data.field(_.field);if(Bm(w))throw new Te(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const x=_.field.canonicalString();throw new Te(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(w)}return new yc(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Jm(n.firestore);return function(c,h,f,p,y,_){const w=c.explicitOrderBy;if(y.length>w.length)throw new Te(oe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let C=0;C<y.length;C++){const k=y[C];if(w[C].field.isKeyField()){if(typeof k!="string")throw new Te(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof k}`);if(!n_(c)&&k.indexOf("/")!==-1)throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${k}' contains a slash.`);const O=c.path.child(Ot.fromString(k));if(!Pe.isDocumentKey(O))throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const B=new Pe(O);x.push(cm(h,B))}else{const O=cN(f,p,k);x.push(O)}}return new yc(x,_)}(n._query,n.firestore._databaseId,a,e,t,s)}}function TA(n,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new Te(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n_(e)&&t.indexOf("/")!==-1)throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ot.fromString(t));if(!Pe.isDocumentKey(s))throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return cm(n,new Pe(s))}if(t instanceof mn)return cm(n,t._key);throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(t)}.`)}function xA(n,e){if(!Array.isArray(n)||n.length===0)throw new Te(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mN(n,e){const t=function(a,o){for(const c of a)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Te(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class E9{convertValue(e,t="none"){switch(Ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return so(e,(a,o)=>{s[a]=this.convertValue(o,t)}),s}convertVectorValue(e){var t,s,a;const o=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[lm].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(c=>fn(c.doubleValue));return new cr(o)}convertGeoPoint(e){return new lr(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Fm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(mh(e));default:return null}}convertTimestamp(e){const t=Ka(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ot.fromString(e);St(VI(s),9688,{name:e});const a=new ph(s.get(1),s.get(3)),o=new Pe(s.popFirst(5));return a.isEqual(t)||Xr(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}function T9(){return new d9("count")}class Vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Go extends N_{constructor(e,t,s,a,o,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(tp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Go._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Go._jsonSchemaVersion="firestore/documentSnapshot/1.0",Go._jsonSchema={type:wn("string",Go._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class Of extends Go{data(e={}){return super.data(e)}}class Ko{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Vu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Of(this._firestore,this._userDataWriter,s.key,s,new Vu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const f=new Of(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Vu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new Of(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Vu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:x9(h.type),doc:f,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(n){n=Qs(n,mn);const e=Qs(n.firestore,Za);return a9(Ic(e),n._key).then(t=>vN(e,n,t))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:wn("string",Ko._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class ip extends E9{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Do(n){n=Qs(n,Pi);const e=Qs(n.firestore,Za),t=Ic(e),s=new ip(e);return fN(n._query),o9(t,n._query).then(a=>new Ko(e,s,n,a))}function Df(n,e,t){n=Qs(n,mn);const s=Qs(n.firestore,Za),a=pN(n.converter,e,t);return yN(s,[lN(Jm(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,_i.none())])}function gN(n,...e){var t,s,a;n=pn(n);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||wA(e[c])||(o=e[c++]);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(wA(e[c])){const _=e[c];e[c]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[c+1]=(s=_.error)===null||s===void 0?void 0:s.bind(_),e[c+2]=(a=_.complete)===null||a===void 0?void 0:a.bind(_)}let f,p,y;if(n instanceof mn)p=Qs(n.firestore,Za),y=Hm(n._key.path),f={next:_=>{e[c]&&e[c](vN(p,n,_))},error:e[c+1],complete:e[c+2]};else{const _=Qs(n,Pi);p=Qs(_.firestore,Za),y=_._query;const w=new ip(p);f={next:x=>{e[c]&&e[c](new Ko(p,w,_,x))},error:e[c+1],complete:e[c+2]},fN(n._query)}return function(w,x,C,k){const O=new x_(k),B=new w_(x,O,C);return w.asyncQueue.enqueueAndForget(async()=>v_(await ym(w),B)),()=>{O.Ou(),w.asyncQueue.enqueueAndForget(async()=>__(await ym(w),B))}}(Ic(p),y,h,f)}function yN(n,e){return function(s,a){const o=new rr;return s.asyncQueue.enqueueAndForget(async()=>K5(await i9(s),a,o)),o.promise}(Ic(n),e)}function vN(n,e,t){const s=t.docs.get(e._key),a=new ip(n);return new Go(n,a,e._key,s,new Vu(t.hasPendingWrites,t.fromCache),e.converter)}function jr(n){return A9(n,{count:T9()})}function A9(n,e){const t=Qs(n.firestore,Za),s=Ic(t),a=kU(e,(o,c)=>new d6(c,o.aggregateType,o._internalFieldPath));return l9(s,n._query,a).then(o=>function(h,f,p){const y=new ip(h);return new f9(f,y,p)}(t,n,o))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jm(e)}set(e,t,s){this._verifyNotCommitted();const a=Ly(e,this._firestore),o=pN(a.converter,t,s),c=lN(this._dataReader,"WriteBatch.set",a._key,o,a.converter!==null,s);return this._mutations.push(c.toMutation(a._key,_i.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const o=Ly(e,this._firestore);let c;return c=typeof(t=pn(t))=="string"||t instanceof Zm?v9(this._dataReader,"WriteBatch.update",o._key,t,s,a):y9(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ly(e,this._firestore);return this._mutations=this._mutations.concat(new i_(t._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ly(n,e){if((n=pn(n)).firestore!==e)throw new Te(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){return Ic(n=Qs(n,Za)),new R9(n,e=>yN(n,e))}(function(e,t=!0){(function(a){Sc=a})(Tc),fc(new Yo("firestore",(s,{instanceIdentifier:a,options:o})=>{const c=s.getProvider("app").getImmediate(),h=new Za(new fU(s.getProvider("auth-internal")),new gU(c,s.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Te(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ph(p.options.projectId,y)}(c,a),c);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Ua(SS,AS,e),Ua(SS,AS,"esm2017")})();const C9={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},L_=iC(C9),Va=cU(L_),I9=new Br,Wn=u9(L_),N9=({user:n,onOpenAuthModal:e,onSignOutClick:t})=>{const s=async()=>{try{await v3(Va,I9)}catch(a){console.error("Error signing in with Google:",a)}};return v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-zinc-900 dark:text-white",children:"Account"}),n?v.jsxs("div",{className:"space-y-4",children:[v.jsxs("p",{children:["You are signed in as ",v.jsx("span",{className:"font-semibold",children:n.email}),"."]}),v.jsx(ks,{onClick:t,variant:"destructive",children:"Sign Out"})]}):v.jsxs("div",{className:"space-y-4",children:[v.jsx("p",{children:"Sign in to sync your history and preferences across devices."}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[v.jsxs(ks,{onClick:s,className:"gap-2 flex-1",children:[v.jsx(r1,{className:"w-5 h-5"}),"Sign in with Google"]}),v.jsxs(ks,{variant:"secondary",className:"gap-2 flex-1",onClick:e,children:[v.jsx(n1,{className:"w-5 h-5"}),"Sign in with Email"]})]})]})]})},k9=({label:n,value:e,onChange:t,maxLength:s,placeholder:a})=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-zinc-800 dark:text-zinc-300 mb-1",children:n}),v.jsxs("div",{className:"relative",children:[v.jsx("textarea",{value:e,onChange:o=>t(o.target.value),maxLength:s,placeholder:a,className:"w-full bg-zinc-100 dark:bg-zinc-800/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 min-h-[120px] resize-y thin-scrollbar"}),v.jsxs("span",{className:"absolute right-3 bottom-2 text-xs text-zinc-500 dark:text-zinc-400",children:[e.length,"/",s]})]})]}),M9=({label:n,description:e,isOn:t,onToggle:s})=>v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-medium text-zinc-900 dark:text-white",children:n}),v.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:e})]}),v.jsx("button",{type:"button",role:"switch","aria-checked":t,onClick:s,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 dark:ring-offset-zinc-800 ${t?"bg-pink-500":"bg-zinc-300 dark:bg-zinc-700"}`,children:v.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-5":"translate-x-0"}`})})]}),j0=({label:n,description:e,options:t,selected:s,onSelect:a,animationsDisabled:o,disabledOptions:c})=>{const[h,f]=$.useState(!1),p=$.useRef(null);$.useEffect(()=>{const w=x=>{p.current&&!p.current.contains(x.target)&&f(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]);const y=w=>{a(w),f(!1)},_={enter:{opacity:1,y:0,transition:{duration:o?0:.2}},exit:{opacity:0,y:-5,transition:{duration:o?0:.15}}};return v.jsxs("div",{ref:p,children:[v.jsx("h4",{className:"font-medium text-zinc-900 dark:text-white",children:n}),v.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-2",children:e}),v.jsxs("div",{className:"relative",children:[v.jsxs("button",{type:"button",onClick:()=>f(!h),className:"w-full flex items-center justify-between text-left bg-zinc-100 dark:bg-zinc-800/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500",children:[v.jsx("span",{children:s}),v.jsx(ev,{className:`w-4 h-4 text-zinc-500 transition-transform duration-200 ${h?"rotate-180":""}`})]}),v.jsx(Oi,{children:h&&v.jsx(Ut.div,{variants:_,initial:"exit",animate:"enter",exit:"exit",className:"absolute z-10 mt-1 w-full bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-zinc-200 dark:border-zinc-700 overflow-hidden",children:v.jsx("ul",{className:"py-1 max-h-60 overflow-y-auto thin-scrollbar",children:t.map(w=>{const x=(c==null?void 0:c.includes(w))||!1;return v.jsx("li",{children:v.jsxs("button",{onClick:()=>!x&&y(w),disabled:x,className:`w-full text-left flex items-center justify-between px-3 py-2 text-sm transition-colors ${x?"text-zinc-400 dark:text-zinc-600 cursor-not-allowed":"text-zinc-900 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-700 cursor-pointer"}`,children:[v.jsx("span",{children:w}),s===w&&v.jsx(J0,{className:"w-4 h-4 text-pink-500"})]})},w)})})})})]})]})},O9=({options:n,value:e,onChange:t,animationsDisabled:s})=>{const a=Math.min(...n.map(f=>f.value)),o=Math.max(...n.map(f=>f.value)),c=.01,h=f=>{const p=parseFloat(f.target.value);let y=n[0],_=Math.abs(p-n[0].value);for(const w of n){const x=Math.abs(p-w.value);x<_&&(_=x,y=w)}t(y.value)};return n.find(f=>f.value===e)||n[0],v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"range",min:a,max:o,step:c,value:e,onChange:h,className:"w-full h-2 bg-zinc-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer slider"}),v.jsx("div",{className:"flex justify-between mt-2",children:n.map(f=>v.jsx("span",{className:`text-xs text-center ${e===f.value?"text-pink-500 font-medium":"text-zinc-500 dark:text-zinc-400"} ${s?"":"transition-colors duration-200"}`,children:f.label},f.value))})]})})},D9=({mainFont:n})=>v.jsxs("div",{className:"p-6 bg-zinc-100 dark:bg-zinc-800/50 rounded-lg",children:[v.jsx("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-white mb-2",children:"Main Font Preview"}),v.jsx("p",{style:{fontFamily:n},className:"text-base text-zinc-900 dark:text-zinc-100",children:"The quick brown fox jumps over the lazy dog. This is how your main text will appear in the application."})]}),P9=({settings:n,updateSettings:e})=>{const[t,s]=$.useState(n.customInstruction),[a,o]=$.useState(!1);$.useEffect(()=>{s(n.customInstruction)},[n.customInstruction]);const c=()=>{e({customInstruction:t}),o(!0),setTimeout(()=>o(!1),2e3)},h=["Montserrat","Lato","Open Sans","Roboto","Source Sans Pro"];return v.jsxs("div",{children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:"Customize O-Chat"}),v.jsx("div",{className:"space-y-6 mt-6",children:v.jsx(k9,{label:"Custom Instruction",value:t,onChange:s,maxLength:3e3,placeholder:"You are a helpful assistant..."})}),v.jsx("div",{className:"flex justify-start items-center gap-3 mt-4",children:v.jsx(ks,{onClick:c,children:a?"Saved!":"Save Preferences"})})]}),v.jsx(VR,{className:"my-8"}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:"Visual Options"}),v.jsxs("div",{className:"space-y-6 mt-6",children:[v.jsx(M9,{label:"Disable Animation",description:"Disables all animations throughout the app for a simpler experience.",isOn:n.animationsDisabled,onToggle:()=>e({animationsDisabled:!n.animationsDisabled})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start pt-2",children:[v.jsx("div",{className:"space-y-6",children:v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-medium text-zinc-900 dark:text-white",children:"Font Size"}),v.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Adjust the overall text size throughout the app."})]})}),v.jsx("div",{className:"space-y-2",children:v.jsx(O9,{options:[{value:1,label:"Default"},{value:1.15,label:"Big"},{value:1.3,label:"Large"}],value:n.fontSize,onChange:f=>e({fontSize:f}),animationsDisabled:n.animationsDisabled})})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start pt-2",children:[v.jsx("div",{className:"space-y-6",children:v.jsx(j0,{label:"Main Text Font",description:"Used in general text throughout the app.",options:h.map(f=>f==="Montserrat"?`${f} (default)`:f),selected:n.mainFont==="Montserrat"?`${n.mainFont} (default)`:n.mainFont,onSelect:f=>e({mainFont:f.replace(" (default)","")}),animationsDisabled:n.animationsDisabled})}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-medium text-zinc-900 dark:text-white",children:"Fonts Preview"}),v.jsx(D9,{mainFont:n.mainFont})]})]})]})]})]})},Vy=({name:n,description:e,features:t,isEnabled:s,onToggle:a,animationsDisabled:o=!1,logo:c,disabled:h=!1,hideScroll:f=!1})=>{const p=_=>{switch(_.toLowerCase()){case"tool calling":return"bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-400";case"reasoning":return"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-400";case"vision":return"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400";case"search url":return"bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-400";default:return"bg-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:text-zinc-300"}},y=()=>c==="google"?v.jsx("div",{className:"w-10 h-10 bg-white dark:bg-zinc-700 rounded-lg flex items-center justify-center border border-zinc-200 dark:border-zinc-600",children:v.jsx(r1,{className:"w-6 h-6 text-blue-500"})}):v.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-600 rounded-lg flex items-center justify-center",children:v.jsx("span",{className:"text-white font-bold text-lg",children:n.charAt(0)})});return v.jsx("div",{className:"bg-zinc-50 dark:bg-zinc-800/30 rounded-xl p-6 border border-zinc-200 dark:border-zinc-700 h-full flex flex-col",children:v.jsxs("div",{className:"flex flex-col gap-2 flex-1 min-h-0",children:[v.jsxs("div",{className:"flex items-center justify-between gap-2",children:[v.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[v.jsx("div",{style:{minWidth:"40px"},children:y()}),v.jsx("div",{children:v.jsx("h3",{className:"font-semibold text-zinc-900 dark:text-white line-clamp-1 text-left",title:n,children:n})})]}),v.jsx("button",{type:"button",role:"switch","aria-checked":s,onClick:()=>!h&&a(!s),disabled:h,className:`relative inline-flex h-6 w-11 flex-shrink-0 rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 dark:ring-offset-zinc-800 ${h?`cursor-not-allowed ${s?"bg-purple-300 dark:bg-purple-600/50":"bg-zinc-300 dark:bg-zinc-600"}`:`cursor-pointer ${s?"bg-pink-500":"bg-zinc-300 dark:bg-zinc-600"}`}`,children:v.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${s?"translate-x-5":"translate-x-0"}`})})]}),v.jsxs("div",{className:"flex-1 flex flex-col gap-3 min-h-0",children:[v.jsx("div",{className:"flex-1",style:{maxHeight:f?"auto":"150px"},children:v.jsx("p",{className:`text-left text-sm text-zinc-600 dark:text-zinc-400 leading-relaxed h-full ${f?"":"overflow-y-auto thin-scrollbar"}`,children:e})}),v.jsx("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:t.map(_=>v.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${p(_)}`,children:_},_))})]})]})})},AA=n=>{const e=n.map(t=>t.toLowerCase());return{hasTools:e.some(t=>t.includes("tools")||t.includes("tool_choice")),hasReasoning:e.some(t=>t.includes("reasoning")||t.includes("include_reasoning")),hasVision:e.some(t=>t.includes("vision")||t.includes("image"))}},L9=async n=>{const e="base_url"in n;if(n=n,!e)return console.log(`Built-in provider ${n.label} - models fetching not implemented yet`),[];const t=n;if(!t.base_url||!t.value)throw new Error("Custom provider must have base_url and API key (value)");try{const s=`${t.base_url.replace(/\/$/,"")}/models`,a=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${t.value}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch models: ${a.status} ${a.statusText}`);const o=await a.json();return Array.isArray(o)?o:o.data&&Array.isArray(o.data)?o.data.map(c=>({id:c.id||c.model||"",name:c.name||c.id||c.model||"",description:c.description||"",supported_parameters:c.supported_parameters||[]})):(console.warn("Unexpected response format from models API:",o),[])}catch(s){throw console.error(`Error fetching models from ${t.label}:`,s),s}},_N=n=>`models_${n}`,V9=n=>{if(!n)return[];try{const e=_N(n),t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(e){return console.error("Error loading selected models from localStorage:",e),[]}},j9=(n,e)=>{if(n)try{const t=_N(n);localStorage.setItem(t,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{key:t,value:e}}))}catch(t){console.error("Error saving selected models to localStorage:",t)}},z9=({settings:n})=>{var Ae;const[e,t]=$.useState([]),[s,a]=$.useState(""),[o,c]=$.useState("available"),[h,f]=$.useState([]),[p,y]=$.useState([]),[_,w]=$.useState(!1),[x,C]=$.useState(null),[k,O]=$.useState(""),[B,V]=$.useState(1),[H]=$.useState(6),[G]=$.useState(["Gemini 1.5 Flash","Gemini 1.5 Flash 8B"]),[F,te]=$.useState([]);$.useEffect(()=>{const M=V9(s);te(M)},[s]),$.useEffect(()=>{s&&j9(s,F)},[s,F]),$.useEffect(()=>{(()=>{let Y=[];try{const re=localStorage.getItem("builtin_api_providers");if(re){const ge=JSON.parse(re).map(Me=>{var he;return{...Me,disabled:!((he=Me.value)!=null&&he.trim())}});Y=[...Y,...ge]}else Y.push({label:"Anthropic",value:"anthropic",disabled:!0,id:"anthropic",base_url:null},{label:"OpenAI",value:"openai",disabled:!0,id:"openai",base_url:null})}catch(re){console.error("Error loading built-in providers:",re),Y.push({label:"Anthropic",value:"anthropic",disabled:!0,id:"anthropic",base_url:null},{label:"OpenAI",value:"openai",disabled:!0,id:"openai",base_url:null})}try{const re=localStorage.getItem("custom_api_providers");re&&JSON.parse(re).forEach(ge=>{var Me,he,ve;(Me=ge.label)!=null&&Me.trim()&&((he=ge.value)!=null&&he.trim())&&((ve=ge.base_url)!=null&&ve.trim())&&Y.push({label:ge.label,value:null,disabled:!1,id:ge.id,base_url:null})})}catch(re){console.error("Error loading custom providers:",re)}f(Y)})()},[]),$.useEffect(()=>{(async()=>{if(!s){y([]),C(null);return}if(!s.includes("-")){y([]),C(null);return}w(!0),C(null);try{const re=localStorage.getItem("custom_api_providers");if(!re)throw new Error("No custom providers found");const ge=JSON.parse(re).find(he=>he.id===s);if(!ge)throw new Error("Selected provider not found");const Me=await L9(ge);y(Me)}catch(re){console.error("Error fetching models:",re),C(re instanceof Error?re.message:"Failed to fetch models"),y([])}finally{w(!1)}})()},[s]),$.useEffect(()=>{V(1)},[k,s,e]);const S=[{name:"Gemini 1.5 Flash",description:"Google's fast and efficient model optimized for high-frequency tasks with multimodal capabilities.",features:["Text Generation","Tool Calling"],category:"server",logo:"google"},{name:"Gemini 1.5 Flash 8B",description:"A smaller, faster version of Gemini 1.5 Flash with 8 billion parameters for quick responses.",features:["Text Generation","Tool Calling"],category:"server",logo:"google"}],R=["Tool Calling","Reasoning","Vision"],I=$.useMemo(()=>{const M=S.filter(ve=>ve.category==="server");let Y=[];if(s&&(s.includes("-")?Y=p.map(xe=>{const Ge=AA(xe.supported_parameters);return{name:xe.name,description:xe.description,features:["Text Generation",...Ge.hasTools?["Tool Calling"]:[],...Ge.hasReasoning?["Reasoning"]:[],...Ge.hasVision?["Vision"]:[]],category:"byok",id:xe.id,providerId:s}}):Y=S.filter(xe=>xe.category==="byok")),e.length>0&&(Y=Y.filter(ve=>e.every(xe=>ve.features.includes(xe)))),k.trim()){const ve=k.toLowerCase();Y=Y.filter(xe=>xe.name.toLowerCase().includes(ve)||xe.description.toLowerCase().includes(ve)||xe.features.some(Ge=>Ge.toLowerCase().includes(ve)))}const re=Y.length,le=Math.ceil(re/H),ge=(B-1)*H,Me=ge+H,he=Y.slice(ge,Me);return{serverModels:M,byokModels:he,totalItems:re,totalPages:le,currentPage:B,hasNextPage:B<le,hasPreviousPage:B>1}},[s,e,k,B,p,H]),P=$.useMemo(()=>{if(!s)return[];const M=s.includes("-");let Y=[];return M?Y=p.map(re=>{const le=AA(re.supported_parameters);return{name:re.name,description:re.description,features:["Text Generation",...le.hasTools?["Tool Calling"]:[],...le.hasReasoning?["Reasoning"]:[],...le.hasVision?["Vision"]:[]],category:"byok",id:re.id,providerId:s}}):Y=S.filter(re=>re.category==="byok"),Y.filter(re=>F.some(le=>le.id===re.id))},[s,p,F]),L=$.useMemo(()=>{const M=P.length,Y=Math.ceil(M/H),re=(B-1)*H,le=re+H;return{models:P.slice(re,le),totalItems:M,totalPages:Y,currentPage:B,hasNextPage:B<Y,hasPreviousPage:B>1}},[P,B,H]),z=(M,Y,re)=>{te(re?le=>[...le,{id:M,name:Y}]:le=>le.filter(ge=>ge.id!==M))},D=()=>{te([])},Ne=M=>{t([M])},Le=M=>{O(M.target.value)},Q=M=>{V(M)},se=(M,Y=!1)=>v.jsx("button",{onClick:()=>Q(M),className:`
                px-3 py-2 text-sm font-medium rounded-lg min-w-[40px] border transition-colors
                ${Y?"bg-gradient-to-r from-pink-600 to-purple-600 text-white border-transparent":"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 border-zinc-300 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700"}
            `,children:M},M),ae=()=>{const M=o==="selected"?L:I,{totalPages:Y,currentPage:re,hasPreviousPage:le,hasNextPage:ge}=M,Me=[],he=window.innerWidth<640?3:5;let ve=Math.max(1,re-Math.floor(he/2)),xe=Math.min(Y,ve+he-1);xe-ve+1<he&&(ve=Math.max(1,xe-he+1));for(let Ge=ve;Ge<=xe;Ge++)Me.push(se(Ge,Ge===re));return v.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-6",children:[v.jsxs("div",{className:"text-xs sm:text-sm text-zinc-600 dark:text-zinc-400 order-2 sm:order-1",children:["Showing"," ",Math.min((re-1)*H+1,M.totalItems)," ","to ",Math.min(re*H,M.totalItems)," ","of ",M.totalItems," models"]}),v.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 order-1 sm:order-2",children:[v.jsx("button",{onClick:()=>Q(re-1),disabled:!le,className:`
                            px-3 py-2 text-sm font-medium rounded-lg border transition-colors
                            ${le?"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 border-zinc-300 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-600 border-zinc-200 dark:border-zinc-700 cursor-not-allowed"}
                        `,children:"Previous"}),ve>1&&v.jsxs(v.Fragment,{children:[se(1),ve>2&&v.jsx("span",{className:"px-2 text-zinc-400 text-sm",children:"..."})]}),Me,xe<Y&&v.jsxs(v.Fragment,{children:[xe<Y-1&&v.jsx("span",{className:"px-2 text-zinc-400 text-sm",children:"..."}),se(Y)]}),v.jsx("button",{onClick:()=>Q(re+1),disabled:!ge,className:`
                            px-3 py-2 text-sm font-medium rounded-lg border transition-colors
                            ${ge?"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 border-zinc-300 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-600 border-zinc-200 dark:border-zinc-700 cursor-not-allowed"}
                        `,children:"Next"})]})]})};return v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:"Available Models"}),v.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:"Choose which models appear in your model selector. This won't affect existing conversations."}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center gap-2 mb-4",children:v.jsx("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white",children:"From Our Servers"})}),v.jsx("div",{className:"space-y-4 grid grid-cols-1 lg:grid-cols-2 gap-4 items-start",children:I.serverModels.map(M=>v.jsx(Vy,{name:M.name,description:M.description,features:M.features,isEnabled:G.includes(M.name),onToggle:()=>{},animationsDisabled:n.animationsDisabled,logo:M.logo,disabled:!0,hideScroll:!0},M.name))})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-white mb-4",children:"BYOK Models"}),v.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 mb-4",children:[v.jsx("div",{className:"w-full sm:w-48",children:v.jsx(j0,{label:"",description:"",options:h.map(M=>M.label),disabledOptions:h.filter(M=>M.disabled).map(M=>M.label),selected:s&&((Ae=h.find(M=>M.id===s))==null?void 0:Ae.label)||"Select Provider",onSelect:M=>{const Y=h.find(re=>re.label===M);Y&&!Y.disabled&&a(Y.id??"")},animationsDisabled:n.animationsDisabled})}),v.jsx("div",{className:"w-full sm:w-64",children:v.jsx(j0,{label:"",description:"",options:["All Features",...R],selected:e.length===0?"All Features":e[0],onSelect:M=>{M==="All Features"?t([]):Ne(M)},animationsDisabled:n.animationsDisabled})})]}),v.jsxs("div",{className:"flex border-b border-zinc-200 dark:border-zinc-800 mb-6",children:[v.jsxs("button",{onClick:()=>c("available"),className:`relative px-4 py-2.5 text-sm font-semibold whitespace-nowrap transition-colors focus:outline-none 
                ${o==="available"?"text-pink-500":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white"}`,children:["Available",o==="available"&&v.jsx(Ut.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500",transition:{duration:n.animationsDisabled?0:.2}})]}),v.jsxs("button",{onClick:()=>s&&c("selected"),className:`relative px-4 py-2.5 text-sm font-semibold whitespace-nowrap transition-colors focus:outline-none 
                ${o==="selected"?"text-pink-500":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white"}`,children:["Selected ",s&&`(${F.length})`,o==="selected"&&v.jsx(Ut.div,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-pink-500",transition:{duration:n.animationsDisabled?0:.2}})]})]}),v.jsx("div",{className:"mb-4 sm:mb-6",children:v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[v.jsxs("div",{className:"relative flex-1",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx("svg",{className:"h-5 w-5 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),v.jsx("input",{type:"text",disabled:!s,placeholder:"Search models by name, description, or features...",value:k,onChange:Le,className:`
                        w-full pl-10 pr-4 py-2 border border-zinc-300 dark:border-zinc-600 
                        rounded-md bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100
                        placeholder-zinc-500 dark:placeholder-zinc-400 text-sm sm:text-base
                        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
                        ${n.animationsDisabled?"":"transition-colors duration-200"}
                    `})]}),v.jsx("button",{onClick:s?D:()=>{},className:`
                        w-full sm:w-auto px-4 py-2 text-sm font-medium text-zinc-700 dark:text-zinc-300 
                        hover:text-zinc-900 dark:hover:text-zinc-100 bg-zinc-100 dark:bg-zinc-800/50 
                        rounded-lg border border-zinc-300 dark:border-zinc-700 whitespace-nowrap
                        ${n.animationsDisabled?"":"transition-colors duration-200"}
                    `,children:"Unselect All"})]})}),v.jsxs("div",{className:"flex flex-col flex-1 min-h-[300px]",children:[" ",v.jsx("div",{className:"text-center py-2 text-zinc-500 dark:text-zinc-400 flex-1 flex flex-col items-center justify-center",children:s?v.jsx(v.Fragment,{children:x?v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-lg mb-2 text-red-500 dark:text-red-400",children:"Error Loading Models"}),v.jsx("p",{className:"text-sm",children:x})]}):_?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[v.jsx("div",{className:"w-5 h-5 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"}),v.jsx("p",{className:"text-lg",children:"Loading Models..."})]}),v.jsx("p",{className:"text-sm",children:"Fetching available models from the selected provider."})]}):v.jsx(Oi,{mode:"wait",children:v.jsx(Ut.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:o==="selected"?L.models.length===0?v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-lg mb-2",children:"No Selected Models"}),v.jsx("p",{className:"text-sm",children:"You haven't selected any models yet. Switch to the Available tab to select models."})]}):v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-start",children:L.models.map(M=>v.jsx("div",{className:"h-full flex",children:v.jsx(Vy,{name:M.name,description:M.description,features:M.features,isEnabled:!0,onToggle:Y=>z(M.id,M.name,Y),animationsDisabled:n.animationsDisabled})},M.id||M.name))}):I.byokModels.length===0?v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-lg mb-2",children:k.trim()?"No Models Found":"No Models Available"}),v.jsx("p",{className:"text-sm",children:k.trim()?"No models match your search criteria. Try adjusting your search terms or filters.":"No models match the selected provider and feature filters."})]}):v.jsx(Ut.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-start",layout:!0,transition:{duration:n.animationsDisabled?0:.3,ease:"easeInOut"},children:I.byokModels.map(M=>v.jsx("div",{className:"h-full flex",children:v.jsx(Vy,{name:M.name,description:M.description,features:M.features,isEnabled:F.some(Y=>Y.id===M.id),onToggle:Y=>z(M.id,M.name,Y),animationsDisabled:n.animationsDisabled})},M.id||M.name))})},o==="selected"?`selected-${L.currentPage}`:`available-${I.currentPage}`)})}):v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-lg mb-2",children:"No Provider Selected"}),v.jsx("p",{className:"text-sm",children:"Please select a provider from the dropdown above to view available models."})]})})]}),ae()]})]})]})},U9=()=>v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:"Attachments"}),v.jsx("p",{className:"mt-4",children:"Settings for Attachments are not implemented yet."})]}),B9=()=>v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:"Contact Us"}),v.jsx("p",{className:"mt-4",children:"Settings for Contact Us are not implemented yet."})]}),Am=class Am{static saveConversationToLocal(e){try{const t=this.getConversationsFromLocal(),s=t.findIndex(a=>a.id===e.id);s>=0?t[s]=e:t.unshift(e),localStorage.setItem(this.CONVERSATIONS_KEY,JSON.stringify(t)),localStorage.setItem(`${this.MESSAGES_KEY_PREFIX}${e.id}`,JSON.stringify(e.messages))}catch(t){console.error("Error saving conversation to localStorage:",t)}}static getConversationsFromLocal(){try{const e=localStorage.getItem(this.CONVERSATIONS_KEY);return e?JSON.parse(e).map(s=>({...s,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt),messages:[]})):[]}catch(e){return console.error("Error loading conversations from localStorage:",e),[]}}static getMessagesFromLocal(e){try{const t=localStorage.getItem(`${this.MESSAGES_KEY_PREFIX}${e}`);return t?JSON.parse(t).map(o=>({...o,timestamp:new Date(o.timestamp)})).sort((o,c)=>o.timestamp.getTime()-c.timestamp.getTime()):[]}catch(t){return console.error("Error loading messages from localStorage:",t),[]}}static deleteConversationFromLocal(e){try{const s=this.getConversationsFromLocal().filter(a=>a.id!==e);localStorage.setItem(this.CONVERSATIONS_KEY,JSON.stringify(s)),localStorage.removeItem(`${this.MESSAGES_KEY_PREFIX}${e}`)}catch(t){console.error("Error deleting conversation from localStorage:",t)}}static async saveConversationToFirestore(e,t){try{const s=hs(Wn,"chats",t),a=hs(cs(s,"conversations"),e.id);await Df(a,{id:e.id,title:e.title,model:e.model,source:e.source||"server",createdAt:Dt.fromDate(e.createdAt),updatedAt:Dt.fromDate(e.updatedAt),messageCount:e.messages.length});const o=SA(Wn),c=cs(a,"messages");e.messages.forEach(h=>{const f=hs(c,h.id);o.set(f,{id:h.id,role:h.role,content:h.content,timestamp:Dt.fromDate(h.timestamp),model:h.model||null,modelName:h.modelName||null,isError:h.isError||!1,source:h.source||"server",userId:t,reasoning:h.reasoning||null})}),await o.commit()}catch(s){throw console.error("Error saving conversation to Firestore:",s),s}}static async getConversationsFromFirestore(e){try{const t=hs(Wn,"chats",e),s=cs(t,"conversations"),a=us(s,Oo("updatedAt","desc")),o=await Do(a),c=[];for(const h of o.docs){const f=h.data(),p=await this.getMessagesFromFirestore(e,f.id);c.push({id:f.id,title:f.title,model:f.model,createdAt:f.createdAt.toDate(),updatedAt:f.updatedAt.toDate(),messages:p})}return c}catch(t){return console.error("Error loading conversations from Firestore:",t),[]}}static async getMessagesFromFirestore(e,t){try{const s=hs(Wn,"chats",e),a=hs(cs(s,"conversations"),t),o=cs(a,"messages"),c=us(o,Oo("timestamp","asc"));return(await Do(c)).docs.map(p=>{const y=p.data();return{id:y.id,role:y.role,content:y.content,timestamp:y.timestamp.toDate(),model:y.model,modelName:y.modelName,isError:y.isError||!1,source:y.source||"server",reasoning:y.reasoning}}).sort((p,y)=>{const _=p.timestamp.getTime()-y.timestamp.getTime();return _!==0?_:p.role==="user"&&y.role==="assistant"?-1:p.role==="assistant"&&y.role==="user"?1:0})}catch(s){return console.error("Error loading messages from Firestore:",s),[]}}static async deleteConversationFromFirestore(e,t){try{const s=hs(Wn,"chats",e),a=hs(cs(s,"conversations"),t),o=cs(a,"messages"),c=await Do(o),h=SA(Wn);c.docs.forEach(f=>{h.delete(f.ref)}),h.delete(a),await h.commit()}catch(s){throw console.error("Error deleting conversation from Firestore:",s),s}}static async migrateLocalDataToFirestore(e){try{const t=this.getConversationsFromLocal();for(const s of t){const a=this.getMessagesFromLocal(s.id),o={...s,messages:a};await this.saveConversationToFirestore(o,e)}this.clearLocalStorage()}catch(t){throw console.error("Error migrating data to Firestore:",t),t}}static clearLocalStorage(){try{Object.keys(localStorage).forEach(t=>{(t===this.CONVERSATIONS_KEY||t.startsWith(this.MESSAGES_KEY_PREFIX))&&localStorage.removeItem(t)})}catch(e){console.error("Error clearing localStorage:",e)}}static async saveConversation(e,t){t?await this.saveConversationToFirestore(e,t.uid):this.saveConversationToLocal(e)}static async loadConversationsPaginated(e,t=20,s){if(e)return await this.getConversationsFromFirestorePaginated(e.uid,t,s);{const a=this.getConversationsFromLocal(),o=s?s.index+1:0,c=o+t,h=a.slice(o,c);return{conversations:h.map(f=>({...f,messages:[]})),hasMore:c<a.length,lastDoc:h.length>0?{index:c-1}:null}}}static async getConversationsFromFirestorePaginated(e,t,s){try{const a=hs(Wn,"chats",e),o=cs(a,"conversations");let c=us(o,Oo("updatedAt","desc"),df(t));s&&(c=us(o,Oo("updatedAt","desc"),EA(s),df(t)));const h=await Do(c),f=[];return h.docs.forEach(p=>{const y=p.data();f.push({id:y.id,title:y.title,model:y.model,source:y.source||"server",createdAt:y.createdAt.toDate(),updatedAt:y.updatedAt.toDate(),messages:[]})}),{conversations:f,hasMore:h.docs.length===t,lastDoc:h.docs[h.docs.length-1]||null}}catch(a){return console.error("Error loading conversations from Firestore:",a),{conversations:[],hasMore:!1,lastDoc:null}}}static async loadMessagesPaginated(e,t,s=30,a){if(t)return await this.getMessagesFromFirestorePaginated(t.uid,e,s,a);{const o=this.getMessagesFromLocal(e);if(a){const c=a.timestamp,h=o.filter(p=>p.timestamp.getTime()<c),f=h.slice(-s);return{messages:f,hasMore:h.length>s,lastDoc:f.length>0?{timestamp:f[0].timestamp.getTime(),index:a.index-f.length}:null}}else{const c=o.slice(-s);return{messages:c,hasMore:o.length>s,lastDoc:c.length>0?{timestamp:c[0].timestamp.getTime(),index:o.length-c.length}:null}}}}static async getMessagesFromFirestorePaginated(e,t,s,a){try{const o=hs(Wn,"chats",e),c=hs(cs(o,"conversations"),t),h=cs(c,"messages");let f=us(h,Oo("timestamp","desc"),df(s));a&&(f=us(h,Oo("timestamp","desc"),EA(a),df(s)));const p=await Do(f),y=p.docs.map(_=>{const w=_.data();return{id:w.id,role:w.role,content:w.content,timestamp:w.timestamp.toDate(),model:w.model,modelName:w.modelName,isError:w.isError||!1,source:w.source||"server",reasoning:w.reasoning}});return y.reverse(),{messages:y,hasMore:p.docs.length===s,lastDoc:p.docs[p.docs.length-1]||null}}catch(o){return console.error("Error loading messages from Firestore:",o),{messages:[],hasMore:!1,lastDoc:null}}}static async loadConversations(e){return e?await this.getConversationsFromFirestore(e.uid):this.getConversationsFromLocal().map(s=>({...s,messages:this.getMessagesFromLocal(s.id)}))}static async deleteConversation(e,t){t?await this.deleteConversationFromFirestore(t.uid,e):this.deleteConversationFromLocal(e)}static async handleUserLogin(e){try{this.getConversationsFromLocal().length>0?(await this.getConversationsFromFirestore(e.uid)).length===0?await this.migrateLocalDataToFirestore(e.uid):await this.migrateLocalDataToFirestore(e.uid):console.log("No local data to migrate")}catch(t){console.error("Error handling user login:",t)}}static handleUserLogout(){}static subscribeToConversations(e,t){const s=hs(Wn,"chats",e.uid),a=cs(s,"conversations"),o=us(a,Oo("updatedAt","desc"));return gN(o,async c=>{const h=[];for(const f of c.docs){const p=f.data(),y=await this.getMessagesFromFirestore(e.uid,p.id);h.push({id:p.id,title:p.title,model:p.model,source:p.source||"server",createdAt:p.createdAt.toDate(),updatedAt:p.updatedAt.toDate(),messages:y})}t(h)})}static async getConversationCounts(e){try{const t=hs(Wn,"chats",e),s=cs(t,"conversations"),o=(await jr(s)).data().count,c=us(s,Ri("source","==","server")),f=(await jr(c)).data().count,p=us(s,Ri("source","==","byok")),_=(await jr(p)).data().count;return{server:f,byok:_,total:o}}catch(t){return console.error("Error getting conversation counts:",t),{server:0,byok:0,total:0}}}static async getMessageCounts(e){try{const t=hs(Wn,"chats",e),s=cs(t,"conversations"),a=us(s,Ri("source","==","server")),o=await Do(a),c=us(s,Ri("source","==","byok")),h=await Do(c);let f=0,p=0;for(const y of o.docs){const _=cs(y.ref,"messages"),w=us(_,Ri("role","==","user")),x=await jr(w);f+=x.data().count}for(const y of h.docs){const _=cs(y.ref,"messages"),w=us(_,Ri("role","==","user")),x=await jr(w);p+=x.data().count}return{server:f,byok:p}}catch(t){return console.error("Error getting message counts:",t),{server:0,byok:0}}}static async getUserChatStats(e){try{const[t,s,a,o]=await Promise.all([jr(cs(Wn,`chats/${e}/conversations`)),jr(us(Py(Wn,"messages"),Ri("userId","==",e))),jr(us(Py(Wn,"messages"),Ri("userId","==",e),Ri("source","==","server"))),jr(us(Py(Wn,"messages"),Ri("userId","==",e),Ri("source","==","byok")))]);return{totalConversations:t.data().count,totalMessages:s.data().count,serverMessages:a.data().count,byokMessages:o.data().count}}catch(t){throw console.error("Error getting user chat stats:",t),t}}};Am.CONVERSATIONS_KEY="chat_conversations",Am.MESSAGES_KEY_PREFIX="chat_messages_";let Yn=Am;const F9=({onClose:n,user:e,initialTab:t,onOpenAuthModal:s,onSignOutClick:a,settings:o,updateSettings:c})=>{var te;const[h,f]=$.useState(t||"Customization"),[p,y]=$.useState(0),[_,w]=$.useState(0),[x,C]=$.useState(0),[k,O]=$.useState(!0),B=["Account","Customization","Models","API Keys","Attachments","Contact Us"];$.useEffect(()=>{V()},[e]);const V=async()=>{O(!0);try{if(e){const S=await Yn.getUserChatStats(e.uid);y(S.serverMessages),w(S.byokMessages),C(S.totalConversations)}else{const S=H();let R=0,I=0;S.forEach(P=>{G(P.id).filter(D=>D.role==="user").forEach(D=>{D.source==="server"?R++:D.source==="byok"&&I++})}),y(R),w(I),C(S.length)}}catch(S){console.error("Error loading usage data:",S)}finally{O(!1)}},H=()=>{try{const S=localStorage.getItem("chat_conversations");return S?JSON.parse(S).map(I=>({...I,createdAt:new Date(I.createdAt),updatedAt:new Date(I.updatedAt)})):[]}catch(S){return console.error("Error loading conversations from localStorage:",S),[]}},G=S=>{try{const R=localStorage.getItem(`chat_messages_${S}`);return R?JSON.parse(R).map(P=>({...P,timestamp:new Date(P.timestamp),source:P.source||"server"})):[]}catch(R){return console.error("Error loading messages from localStorage:",R),[]}},F=()=>{let S;switch(h){case"Account":S=v.jsx(N9,{user:e,onOpenAuthModal:s,onSignOutClick:a});break;case"Customization":S=v.jsx(P9,{settings:o,updateSettings:c});break;case"Models":S=v.jsx(z9,{settings:o});break;case"API Keys":S=v.jsx(u4,{});break;case"Attachments":S=v.jsx(U9,{});break;case"Contact Us":S=v.jsx(B9,{});break;default:S=v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-1 text-zinc-900 dark:text-white",children:h}),v.jsxs("p",{className:"mt-4",children:["Settings for ",h," are not implemented yet."]})]});break}return v.jsx(Ut.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:o.animationsDisabled?0:.2},children:S},h)};return v.jsx("div",{className:"fixed inset-0 z-70 bg-white dark:bg-[#1c1c1c] text-zinc-900 dark:text-zinc-200 font-sans overflow-y-auto custom-scrollbar",children:v.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[v.jsx("div",{className:"flex items-center justify-between mb-8",children:v.jsxs(ks,{variant:"ghost",size:"sm",onClick:n,className:"gap-2",children:[v.jsx(CM,{className:"w-4 h-4"}),"Back to Chat"]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[v.jsx("aside",{className:"lg:col-span-3",children:v.jsxs("div",{className:"space-y-6",children:[e?v.jsxs("div",{className:"flex flex-col items-center p-6 bg-zinc-100 dark:bg-zinc-800/50 rounded-2xl text-center",children:[v.jsx("img",{src:e.photoURL||`https://ui-avatars.com/api/?name=${e.displayName||((te=e.email)==null?void 0:te.charAt(0).toUpperCase())||"U"}&background=random`,alt:e.displayName||e.email||"User",className:"w-24 h-24 rounded-full mb-4 ring-4 ring-white dark:ring-zinc-700"}),v.jsx("h2",{className:"font-bold text-xl text-zinc-900 dark:text-white truncate max-w-full",children:e.displayName||e.email}),e.displayName&&v.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate max-w-full",children:e.email}),v.jsx("span",{className:"mt-3 text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400 py-1 px-3 rounded-full",children:"Signed In"}),v.jsxs(ks,{variant:"ghost",size:"sm",onClick:a,className:"gap-2 mt-3",children:["Sign out",v.jsx(IM,{className:"w-4 h-4"})]})]}):v.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-zinc-100 dark:bg-zinc-800/50 rounded-2xl",children:[v.jsx("h2",{className:"font-bold text-xl text-zinc-900 dark:text-white",children:"Not Signed In"}),v.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-2",children:"Sign in to sync your data and unlock features."}),v.jsx(ks,{onClick:()=>f("Account"),className:"mt-4",children:"Go to Account Tab"})]}),v.jsx("div",{className:"p-6 bg-zinc-100 dark:bg-zinc-800/50 rounded-2xl",children:v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center mb-2",children:v.jsx("h3",{className:"font-semibold text-sm text-zinc-900 dark:text-white",children:"Usage"})}),k?v.jsx("div",{className:"flex items-center justify-center py-8",children:v.jsx("div",{className:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"})}):v.jsxs(Ut.div,{className:"space-y-4",initial:o.animationsDisabled?{}:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:o.animationsDisabled?0:.3},children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between text-xs font-medium mb-1",children:[v.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Conversations"}),v.jsx("span",{className:"text-zinc-500 dark:text-zinc-400",children:x})]}),v.jsx("div",{className:"w-full bg-zinc-200 dark:bg-zinc-700 rounded-full h-1.5",children:v.jsx(Ut.div,{className:"bg-zinc-400 dark:bg-zinc-500 h-1.5 rounded-full",initial:o.animationsDisabled?{}:{width:0},animate:{width:`${Math.min(x/100*100,100)}%`},transition:{duration:o.animationsDisabled?0:.8,ease:"easeOut"}})}),v.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[x," total conversations"]})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between text-xs font-medium mb-1",children:[v.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Backed by Us"}),v.jsxs("span",{className:"text-zinc-500 dark:text-zinc-400",children:[p," / unlimited"]})]}),v.jsx("div",{className:"w-full bg-zinc-200 dark:bg-zinc-700 rounded-full h-1.5",children:v.jsx(Ut.div,{className:"bg-zinc-400 dark:bg-zinc-500 h-1.5 rounded-full",initial:o.animationsDisabled?{}:{width:0},animate:{width:`${Math.min(p/1e3*100,100)}%`},transition:{duration:o.animationsDisabled?0:.8,ease:"easeOut",delay:o.animationsDisabled?0:.1}})}),v.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[p," messages usage"]})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between text-xs font-medium mb-1",children:[v.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300 flex items-center gap-1",children:["Your Own Api",v.jsx(AT,{className:"w-3.5 h-3.5 text-pink-500"})]}),v.jsx("span",{className:"text-zinc-500 dark:text-zinc-400",children:_})]}),v.jsx("div",{className:"w-full bg-zinc-200 dark:bg-zinc-700 rounded-full h-1.5",children:v.jsx(Ut.div,{className:"bg-pink-500 h-1.5 rounded-full",initial:o.animationsDisabled?{}:{width:0},animate:{width:`${Math.min(_/1e3*100,100)}%`},transition:{duration:o.animationsDisabled?0:.8,ease:"easeOut",delay:o.animationsDisabled?0:.2}})}),v.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[_," messages"]})]}),v.jsxs("div",{className:"bg-zinc-200/50 dark:bg-zinc-900/50 rounded-lg p-3 flex items-start gap-2.5",children:[v.jsx(AT,{className:"w-4 h-4 text-zinc-500 dark:text-zinc-400 mt-0.5 flex-shrink-0"}),v.jsx("p",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:"Messages sent using your own API key are managed by yourself. Please be mindful of your billing as we are not responsible for any charges incurred."})]})]})]})})]})}),v.jsxs("main",{className:"lg:col-span-9",children:[v.jsx("div",{className:"flex border-b border-zinc-200 dark:border-zinc-800 overflow-x-auto mb-6 [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden",children:B.map(S=>v.jsx(s4,{label:S,isActive:h===S,onClick:()=>f(S),animationsDisabled:o.animationsDisabled},S))}),v.jsx(Oi,{mode:"wait",children:F()}),v.jsx("div",{className:"hidden lg:block h-24"})]})]})]})})},jy=({icon:n,className:e,...t})=>v.jsxs("div",{className:"relative",children:[n&&v.jsx("span",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 z-10",children:n}),v.jsx("input",{...t,className:`w-full bg-zinc-100 dark:bg-zinc-800/50 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2.5 px-4 text-sm text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-500 dark:placeholder:text-zinc-400 focus:outline-none focus:ring-1 focus:ring-pink-500 focus:border-pink-500 transition-colors ${n?"pl-10":""} ${e}`})]}),H9=({isOpen:n,onClose:e})=>{const[t,s]=$.useState("Login"),[a,o]=$.useState(""),[c,h]=$.useState(""),[f,p]=$.useState(""),[y,_]=$.useState(null),[w,x]=$.useState(!1),C=async V=>{if(V.preventDefault(),_(null),x(!0),t==="Register"){if(c!==f){_("Passwords do not match."),x(!1);return}try{await Wz(Va,a,c)}catch(H){_(H.message.replace("Firebase: ",""))}}else try{await Yz(Va,a,c)}catch(H){_(H.message.replace("Firebase: ",""))}x(!1)},k=()=>{o(""),h(""),p(""),_(null),s("Login"),x(!1)},O=()=>{k(),e()},B=V=>{k(),s(V)};return v.jsx(Oi,{children:n&&v.jsx(Ut.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:O,className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:v.jsxs(Ut.div,{initial:{scale:.95,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:20,opacity:0},transition:{duration:.2,ease:"easeOut"},onClick:V=>V.stopPropagation(),className:"relative w-full max-w-md p-8 bg-white dark:bg-[#212121] rounded-2xl shadow-xl border border-zinc-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:O,className:"absolute top-4 right-4 p-2 rounded-full text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-pink-500",children:v.jsx(ic,{className:"w-5 h-5"})}),v.jsxs("div",{className:"flex mb-6 border-b border-zinc-200 dark:border-zinc-800",children:[v.jsx(RA,{title:"Login",activeTab:t,setActiveTab:B}),v.jsx(RA,{title:"Register",activeTab:t,setActiveTab:B})]}),v.jsxs("form",{onSubmit:C,className:"space-y-4",children:[v.jsx(jy,{id:"email",type:"email",placeholder:"Email address",value:a,onChange:V=>o(V.target.value),icon:v.jsx(UM,{className:"w-4 h-4 text-zinc-400"}),required:!0}),v.jsx(jy,{id:"password",type:"password",placeholder:"Password",value:c,onChange:V=>h(V.target.value),icon:v.jsx(RT,{className:"w-4 h-4 text-zinc-400"}),required:!0}),t==="Register"&&v.jsx(Oi,{children:v.jsx(Ut.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(jy,{id:"confirmPassword",type:"password",placeholder:"Confirm Password",value:f,onChange:V=>p(V.target.value),icon:v.jsx(RT,{className:"w-4 h-4 text-zinc-400"}),required:!0})})}),y&&v.jsx("p",{className:"text-sm text-red-500 text-center pt-1",children:y}),v.jsx("div",{className:"pt-2",children:v.jsx(ks,{type:"submit",className:"w-full gap-2",disabled:w,children:w?"Processing...":t==="Login"?"Sign In":"Create Account"})})]})]})})})},RA=({title:n,activeTab:e,setActiveTab:t})=>{const s=e===n;return v.jsxs("button",{type:"button",onClick:()=>t(n),className:`relative w-1/2 py-3 text-sm font-semibold text-center transition-colors focus:outline-none
                ${s?"text-pink-500":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white"}`,children:[n,s&&v.jsx(Ut.div,{className:"absolute bottom-[-1px] left-0 right-0 h-0.5 bg-pink-500",layoutId:"auth-tab-indicator"})]})},q9=({isOpen:n,onClose:e,onConfirm:t,title:s,children:a,confirmText:o="Confirm",confirmVariant:c="primary",cancelText:h="Cancel",onCancel:f})=>{const p=f||e;return v.jsx(Oi,{children:n&&v.jsx(Ut.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:v.jsxs(Ut.div,{initial:{scale:.95,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:20,opacity:0},transition:{duration:.2,ease:"easeOut"},onClick:y=>y.stopPropagation(),className:"relative w-full max-w-sm p-6 bg-white dark:bg-[#212121] rounded-2xl shadow-xl border border-zinc-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-pink-500",children:v.jsx(ic,{className:"w-5 h-5"})}),v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:s}),v.jsx("div",{className:"mt-2 text-sm text-zinc-600 dark:text-zinc-400",children:a})]}),v.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row-reverse gap-3",children:[v.jsx(ks,{onClick:t,variant:c,className:"w-full sm:w-auto",children:o}),v.jsx(ks,{onClick:p,variant:"secondary",className:"w-full sm:w-auto",children:h})]})]})})})};function We(n,e,t,s,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function J(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}let bN=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return bN=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};function z0(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const U0=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Ye extends Error{}class ns extends Ye{constructor(e,t,s,a){super(`${ns.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=t;const o=t;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new rp({message:s,cause:U0(t)});const o=t==null?void 0:t.error;return e===400?new wN(e,o,s,a):e===401?new EN(e,o,s,a):e===403?new TN(e,o,s,a):e===404?new xN(e,o,s,a):e===409?new SN(e,o,s,a):e===422?new AN(e,o,s,a):e===429?new RN(e,o,s,a):e>=500?new CN(e,o,s,a):new ns(e,o,s,a)}}class vi extends ns{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class rp extends ns{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class V_ extends rp{constructor({message:e}={}){super({message:e??"Request timed out."})}}class wN extends ns{}class EN extends ns{}class TN extends ns{}class xN extends ns{}class SN extends ns{}class AN extends ns{}class RN extends ns{}class CN extends ns{}class IN extends Ye{constructor(){super("Could not parse response content as the length limit was reached")}}class NN extends Ye{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ju extends Error{constructor(e){super(e)}}const $9=/^[a-z][a-z0-9+.-]*:/i,G9=n=>$9.test(n);let Is=n=>(Is=Array.isArray,Is(n)),CA=Is;function K9(n){return typeof n!="object"?{}:n??{}}function W9(n){if(!n)return!0;for(const e in n)return!1;return!0}function Y9(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function zy(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const X9=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ye(`${n} must be an integer`);if(e<0)throw new Ye(`${n} must be a positive integer`);return e},Q9=n=>{try{return JSON.parse(n)}catch{return}},jh=n=>new Promise(e=>setTimeout(e,n)),Yl="5.9.0",Z9=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function J9(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eB=()=>{var t;const n=J9();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":NA(Deno.build.os),"X-Stainless-Arch":IA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":NA(globalThis.process.platform??"unknown"),"X-Stainless-Arch":IA(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=tB();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tB(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,o=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${o}.${c}`}}}return null}const IA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",NA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let kA;const nB=()=>kA??(kA=eB());function sB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kN(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function MN(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return kN({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function ON(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function iB(n){var s,a;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((a=(s=n[Symbol.asyncIterator]()).return)==null?void 0:a.call(s));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const rB=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),DN="RFC3986",PN=n=>String(n),MA={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:PN},aB="RFC1738";let B0=(n,e)=>(B0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),B0(n,e));const Zi=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),Uy=1024,oB=(n,e,t,s,a)=>{if(n.length===0)return n;let o=n;if(typeof n=="symbol"?o=Symbol.prototype.toString.call(n):typeof n!="string"&&(o=String(n)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let c="";for(let h=0;h<o.length;h+=Uy){const f=o.length>=Uy?o.slice(h,h+Uy):o,p=[];for(let y=0;y<f.length;++y){let _=f.charCodeAt(y);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===aB&&(_===40||_===41)){p[p.length]=f.charAt(y);continue}if(_<128){p[p.length]=Zi[_];continue}if(_<2048){p[p.length]=Zi[192|_>>6]+Zi[128|_&63];continue}if(_<55296||_>=57344){p[p.length]=Zi[224|_>>12]+Zi[128|_>>6&63]+Zi[128|_&63];continue}y+=1,_=65536+((_&1023)<<10|f.charCodeAt(y)&1023),p[p.length]=Zi[240|_>>18]+Zi[128|_>>12&63]+Zi[128|_>>6&63]+Zi[128|_&63]}c+=p.join("")}return c};function lB(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function OA(n,e){if(Is(n)){const t=[];for(let s=0;s<n.length;s+=1)t.push(e(n[s]));return t}return e(n)}const LN={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},VN=function(n,e){Array.prototype.push.apply(n,Is(e)?e:[e])};let DA;const kn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:oB,encodeValuesOnly:!1,format:DN,formatter:PN,indices:!1,serializeDate(n){return(DA??(DA=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function cB(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const By={};function jN(n,e,t,s,a,o,c,h,f,p,y,_,w,x,C,k,O,B){let V=n,H=B,G=0,F=!1;for(;(H=H.get(By))!==void 0&&!F;){const P=H.get(n);if(G+=1,typeof P<"u"){if(P===G)throw new RangeError("Cyclic object value");F=!0}typeof H.get(By)>"u"&&(G=0)}if(typeof p=="function"?V=p(e,V):V instanceof Date?V=w==null?void 0:w(V):t==="comma"&&Is(V)&&(V=OA(V,function(P){return P instanceof Date?w==null?void 0:w(P):P})),V===null){if(o)return f&&!k?f(e,kn.encoder,O,"key",x):e;V=""}if(cB(V)||lB(V)){if(f){const P=k?e:f(e,kn.encoder,O,"key",x);return[(C==null?void 0:C(P))+"="+(C==null?void 0:C(f(V,kn.encoder,O,"value",x)))]}return[(C==null?void 0:C(e))+"="+(C==null?void 0:C(String(V)))]}const te=[];if(typeof V>"u")return te;let S;if(t==="comma"&&Is(V))k&&f&&(V=OA(V,f)),S=[{value:V.length>0?V.join(",")||null:void 0}];else if(Is(p))S=p;else{const P=Object.keys(V);S=y?P.sort(y):P}const R=h?String(e).replace(/\./g,"%2E"):String(e),I=s&&Is(V)&&V.length===1?R+"[]":R;if(a&&Is(V)&&V.length===0)return I+"[]";for(let P=0;P<S.length;++P){const L=S[P],z=typeof L=="object"&&typeof L.value<"u"?L.value:V[L];if(c&&z===null)continue;const D=_&&h?L.replace(/\./g,"%2E"):L,Ne=Is(V)?typeof t=="function"?t(I,D):I:I+(_?"."+D:"["+D+"]");B.set(n,G);const Le=new WeakMap;Le.set(By,B),VN(te,jN(z,Ne,t,s,a,o,c,h,t==="comma"&&k&&Is(V)?null:f,p,y,_,w,x,C,k,O,Le))}return te}function uB(n=kn){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||kn.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=DN;if(typeof n.format<"u"){if(!B0(MA,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const s=MA[t];let a=kn.filter;(typeof n.filter=="function"||Is(n.filter))&&(a=n.filter);let o;if(n.arrayFormat&&n.arrayFormat in LN?o=n.arrayFormat:"indices"in n?o=n.indices?"indices":"repeat":o=kn.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:kn.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:kn.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:kn.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:kn.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?kn.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:kn.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:kn.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:kn.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:kn.encodeValuesOnly,filter:a,format:t,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:kn.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:kn.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:kn.strictNullHandling}}function hB(n,e={}){let t=n;const s=uB(e);let a,o;typeof s.filter=="function"?(o=s.filter,t=o("",t)):Is(s.filter)&&(o=s.filter,a=o);const c=[];if(typeof t!="object"||t===null)return"";const h=LN[s.arrayFormat],f=h==="comma"&&s.commaRoundTrip;a||(a=Object.keys(t)),s.sort&&a.sort(s.sort);const p=new WeakMap;for(let w=0;w<a.length;++w){const x=a[w];s.skipNulls&&t[x]===null||VN(c,jN(t[x],x,h,f,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,p))}const y=c.join(s.delimiter);let _=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),y.length>0?_+y:""}function dB(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let PA;function j_(n){let e;return(PA??(e=new globalThis.TextEncoder,PA=e.encode.bind(e)))(n)}let LA;function VA(n){let e;return(LA??(e=new globalThis.TextDecoder,LA=e.decode.bind(e)))(n)}var qs,$s;class ap{constructor(){qs.set(this,void 0),$s.set(this,void 0),We(this,qs,new Uint8Array),We(this,$s,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?j_(e):e;We(this,qs,dB([J(this,qs,"f"),t]));const s=[];let a;for(;(a=fB(J(this,qs,"f"),J(this,$s,"f")))!=null;){if(a.carriage&&J(this,$s,"f")==null){We(this,$s,a.index);continue}if(J(this,$s,"f")!=null&&(a.index!==J(this,$s,"f")+1||a.carriage)){s.push(VA(J(this,qs,"f").subarray(0,J(this,$s,"f")-1))),We(this,qs,J(this,qs,"f").subarray(J(this,$s,"f"))),We(this,$s,null);continue}const o=J(this,$s,"f")!==null?a.preceding-1:a.preceding,c=VA(J(this,qs,"f").subarray(0,o));s.push(c),We(this,qs,J(this,qs,"f").subarray(a.index)),We(this,$s,null)}return s}flush(){return J(this,qs,"f").length?this.decode(`
`):[]}}qs=new WeakMap,$s=new WeakMap;ap.NEWLINE_CHARS=new Set([`
`,"\r"]);ap.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function fB(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function mB(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const _m={off:0,error:200,warn:300,info:400,debug:500},jA=(n,e,t)=>{if(n){if(Y9(_m,n))return n;Qn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(_m))}`)}};function zu(){}function ff(n,e,t){return!e||_m[n]>_m[t]?zu:e[n].bind(e)}const pB={error:zu,warn:zu,info:zu,debug:zu};let zA=new WeakMap;function Qn(n){const e=n.logger,t=n.logLevel??"off";if(!e)return pB;const s=zA.get(e);if(s&&s[0]===t)return s[1];const a={error:ff("error",e,t),warn:ff("warn",e,t),info:ff("info",e,t),debug:ff("debug",e,t)};return zA.set(e,[t,a]),a}const jo=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Cu;class tr{constructor(e,t,s){this.iterator=e,Cu.set(this,void 0),this.controller=t,We(this,Cu,s)}static fromSSEResponse(e,t,s){let a=!1;const o=s?Qn(s):console;async function*c(){if(a)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let h=!1;try{for await(const f of gB(e,t))if(!h){if(f.data.startsWith("[DONE]")){h=!0;continue}if(f.event===null||f.event.startsWith("response.")||f.event.startsWith("transcript.")){let p;try{p=JSON.parse(f.data)}catch(y){throw o.error("Could not parse message into JSON:",f.data),o.error("From chunk:",f.raw),y}if(p&&p.error)throw new ns(void 0,p.error,void 0,e.headers);yield p}else{let p;try{p=JSON.parse(f.data)}catch(y){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),y}if(f.event=="error")throw new ns(void 0,p.error,p.message,void 0);yield{event:f.event,data:p}}}h=!0}catch(f){if(z0(f))return;throw f}finally{h||t.abort()}}return new tr(c,t,s)}static fromReadableStream(e,t,s){let a=!1;async function*o(){const h=new ap,f=ON(e);for await(const p of f)for(const y of h.decode(p))yield y;for(const p of h.flush())yield p}async function*c(){if(a)throw new Ye("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let h=!1;try{for await(const f of o())h||f&&(yield JSON.parse(f));h=!0}catch(f){if(z0(f))return;throw f}finally{h||t.abort()}}return new tr(c,t,s)}[(Cu=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=o=>({next:()=>{if(o.length===0){const c=s.next();e.push(c),t.push(c)}return o.shift()}});return[new tr(()=>a(e),this.controller,J(this,Cu,"f")),new tr(()=>a(t),this.controller,J(this,Cu,"f"))]}toReadableStream(){const e=this;let t;return kN({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await t.next();if(o)return s.close();const c=j_(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*gB(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ye("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ye("Attempted to iterate over a response with no body");const t=new vB,s=new ap,a=ON(n.body);for await(const o of yB(a))for(const c of s.decode(o)){const h=t.decode(c);h&&(yield h)}for(const o of s.flush()){const c=t.decode(o);c&&(yield c)}}async function*yB(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?j_(t):t;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let o;for(;(o=mB(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class vB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=_B(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function _B(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function zN(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:o}=e,c=await(async()=>{var _;if(e.options.stream)return Qn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):tr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),f=(_=h==null?void 0:h.split(";")[0])==null?void 0:_.trim();if((f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))){const w=await t.json();return UN(w,t)}return await t.text()})();return Qn(n).debug(`[${s}] response parsed`,jo({retryOfRequestLogID:a,url:t.url,status:t.status,body:c,durationMs:Date.now()-o})),c}function UN(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Uu;class op extends Promise{constructor(e,t,s=zN){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,Uu.set(this,void 0),We(this,Uu,e)}_thenUnwrap(e){return new op(J(this,Uu,"f"),this.responsePromise,async(t,s)=>UN(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(J(this,Uu,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Uu=new WeakMap;var mf;class BN{constructor(e,t,s,a){mf.set(this,void 0),We(this,mf,e),this.options=a,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ye("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await J(this,mf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(mf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class bB extends op{constructor(e,t,s){super(e,t,async(a,o)=>new s(a,o.response,await zN(a,o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class lp extends BN{constructor(e,t,s,a){super(e,t,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class En extends BN{constructor(e,t,s,a){super(e,t,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),t=(s=e[e.length-1])==null?void 0:s.id;return t?{...this.options,query:{...K9(this.options.query),after:t}}:null}}const FN=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nh(n,e,t){return FN(),new File(n,e??"unknown_file",t)}function Pf(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const HN=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",el=async(n,e)=>({...n,body:await EB(n.body,e)}),UA=new WeakMap;function wB(n){const e=typeof n=="function"?n:n.fetch,t=UA.get(e);if(t)return t;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new a(o).text()}catch{return!0}})();return UA.set(e,s),s}const EB=async(n,e)=>{if(!await wB(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([s,a])=>F0(t,s,a))),t},TB=n=>n instanceof Blob&&"name"in n,F0=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,nh([await t.blob()],Pf(t)));else if(HN(t))n.append(e,nh([await new Response(MN(t)).blob()],Pf(t)));else if(TB(t))n.append(e,t,Pf(t));else if(Array.isArray(t))await Promise.all(t.map(s=>F0(n,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,a])=>F0(n,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},qN=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",xB=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&qN(n),SB=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function AB(n,e,t){if(FN(),n=await n,xB(n))return n instanceof File?n:nh([await n.arrayBuffer()],n.name);if(SB(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),nh(await H0(a),e,t)}const s=await H0(n);if(e||(e=Pf(n)),!(t!=null&&t.type)){const a=s.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(t={...t,type:a})}return nh(s,e,t)}async function H0(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(qN(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(HN(n))for await(const s of n)e.push(...await H0(s));else{const s=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${RB(n)}`)}return e}function RB(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class Qe{constructor(e){this._client=e}}function $N(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const BA=Object.freeze(Object.create(null)),CB=(n=$N)=>function(t,...s){if(t.length===1)return t[0];let a=!1;const o=[],c=t.reduce((y,_,w)=>{var k;/[?#]/.test(_)&&(a=!0);const x=s[w];let C=(a?encodeURIComponent:n)(""+x);return w!==s.length&&(x==null||typeof x=="object"&&x.toString===((k=Object.getPrototypeOf(Object.getPrototypeOf(x.hasOwnProperty??BA)??BA))==null?void 0:k.toString))&&(C=x+"",o.push({start:y.length+_.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),y+_+(w===s.length?"":C)},""),h=c.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=f.exec(h))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((y,_)=>y.start-_.start),o.length>0){let y=0;const _=o.reduce((w,x)=>{const C=" ".repeat(x.start-y),k="^".repeat(x.length);return y=x.start+x.length,w+C+k},"");throw new Ye(`Path parameters result in path with invalid segments:
${o.map(w=>w.error).join(`
`)}
${c}
${_}`)}return c},Se=CB($N);let GN=class extends Qe{list(e,t={},s){return this._client.getAPIList(Se`/chat/completions/${e}/messages`,En,{query:t,...s})}};function IB(n){return typeof n.parse=="function"}const bm=n=>(n==null?void 0:n.role)==="assistant",KN=n=>(n==null?void 0:n.role)==="tool";var q0,Lf,Vf,Bu,Fu,jf,Hu,Ur,qu,wm,Em,Xl,WN;class z_{constructor(){q0.add(this),this.controller=new AbortController,Lf.set(this,void 0),Vf.set(this,()=>{}),Bu.set(this,()=>{}),Fu.set(this,void 0),jf.set(this,()=>{}),Hu.set(this,()=>{}),Ur.set(this,{}),qu.set(this,!1),wm.set(this,!1),Em.set(this,!1),Xl.set(this,!1),We(this,Lf,new Promise((e,t)=>{We(this,Vf,e,"f"),We(this,Bu,t,"f")})),We(this,Fu,new Promise((e,t)=>{We(this,jf,e,"f"),We(this,Hu,t,"f")})),J(this,Lf,"f").catch(()=>{}),J(this,Fu,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},J(this,q0,"m",WN).bind(this))},0)}_connected(){this.ended||(J(this,Vf,"f").call(this),this._emit("connect"))}get ended(){return J(this,qu,"f")}get errored(){return J(this,wm,"f")}get aborted(){return J(this,Em,"f")}abort(){this.controller.abort()}on(e,t){return(J(this,Ur,"f")[e]||(J(this,Ur,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=J(this,Ur,"f")[e];if(!s)return this;const a=s.findIndex(o=>o.listener===t);return a>=0&&s.splice(a,1),this}once(e,t){return(J(this,Ur,"f")[e]||(J(this,Ur,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{We(this,Xl,!0),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){We(this,Xl,!0),await J(this,Fu,"f")}_emit(e,...t){if(J(this,qu,"f"))return;e==="end"&&(We(this,qu,!0),J(this,jf,"f").call(this));const s=J(this,Ur,"f")[e];if(s&&(J(this,Ur,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...t))),e==="abort"){const a=t[0];!J(this,Xl,"f")&&!(s!=null&&s.length)&&Promise.reject(a),J(this,Bu,"f").call(this,a),J(this,Hu,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=t[0];!J(this,Xl,"f")&&!(s!=null&&s.length)&&Promise.reject(a),J(this,Bu,"f").call(this,a),J(this,Hu,"f").call(this,a),this._emit("end")}}_emitFinal(){}}Lf=new WeakMap,Vf=new WeakMap,Bu=new WeakMap,Fu=new WeakMap,jf=new WeakMap,Hu=new WeakMap,Ur=new WeakMap,qu=new WeakMap,wm=new WeakMap,Em=new WeakMap,Xl=new WeakMap,q0=new WeakSet,WN=function(e){if(We(this,wm,!0),e instanceof Error&&e.name==="AbortError"&&(e=new vi),e instanceof vi)return We(this,Em,!0),this._emit("abort",e);if(e instanceof Ye)return this._emit("error",e);if(e instanceof Error){const t=new Ye(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ye(String(e)))};function U_(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function zh(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function NB(n,e){return!e||!YN(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:B_(n,e)}function B_(n,e){const t=n.choices.map(s=>{var a;if(s.finish_reason==="length")throw new IN;if(s.finish_reason==="content_filter")throw new NN;return{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((a=s.message.tool_calls)==null?void 0:a.map(o=>MB(e,o)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?kB(e,s.message.content):null}}});return{...n,choices:t}}function kB(n,e){var t,s;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((s=n.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function MB(n,e){var s;const t=(s=n.tools)==null?void 0:s.find(a=>{var o;return((o=a.function)==null?void 0:o.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:zh(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function OB(n,e){var s;if(!n)return!1;const t=(s=n.tools)==null?void 0:s.find(a=>{var o;return((o=a.function)==null?void 0:o.name)===e.function.name});return zh(t)||(t==null?void 0:t.function.strict)||!1}function YN(n){var e;return U_(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>zh(t)||t.type==="function"&&t.function.strict===!0))??!1}function DB(n){for(const e of n??[]){if(e.type!=="function")throw new Ye(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ye(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Es,$0,Tm,G0,K0,W0,XN,QN;const PB=10;class ZN extends z_{constructor(){super(...arguments),Es.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(s=e.choices[0])==null?void 0:s.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),KN(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(bm(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),J(this,Es,"m",$0).call(this)}async finalMessage(){return await this.done(),J(this,Es,"m",Tm).call(this)}async finalFunctionToolCall(){return await this.done(),J(this,Es,"m",G0).call(this)}async finalFunctionToolCallResult(){return await this.done(),J(this,Es,"m",K0).call(this)}async totalUsage(){return await this.done(),J(this,Es,"m",W0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=J(this,Es,"m",Tm).call(this);t&&this._emit("finalMessage",t);const s=J(this,Es,"m",$0).call(this);s&&this._emit("finalContent",s);const a=J(this,Es,"m",G0).call(this);a&&this._emit("finalFunctionToolCall",a);const o=J(this,Es,"m",K0).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",J(this,Es,"m",W0).call(this))}async _createChatCompletion(e,t,s){const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),J(this,Es,"m",XN).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(B_(o,t))}async _runChatCompletion(e,t,s){for(const a of t.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,t,s)}async _runTools(e,t,s){var x,C,k;const a="tool",{tool_choice:o="auto",stream:c,...h}=t,f=typeof o!="string"&&((x=o==null?void 0:o.function)==null?void 0:x.name),{maxChatCompletions:p=PB}=s||{},y=t.tools.map(O=>{if(zh(O)){if(!O.$callback)throw new Ye("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:O.$callback,name:O.function.name,description:O.function.description||"",parameters:O.function.parameters,parse:O.$parseRaw,strict:!0}}}return O}),_={};for(const O of y)O.type==="function"&&(_[O.function.name||O.function.function.name]=O.function);const w="tools"in t?y.map(O=>O.type==="function"?{type:"function",function:{name:O.function.name||O.function.function.name,parameters:O.function.parameters,description:O.function.description,strict:O.function.strict}}:O):void 0;for(const O of t.messages)this._addMessage(O,!1);for(let O=0;O<p;++O){const V=(C=(await this._createChatCompletion(e,{...h,tool_choice:o,tools:w,messages:[...this.messages]},s)).choices[0])==null?void 0:C.message;if(!V)throw new Ye("missing message in ChatCompletion response");if(!((k=V.tool_calls)!=null&&k.length))return;for(const H of V.tool_calls){if(H.type!=="function")continue;const G=H.id,{name:F,arguments:te}=H.function,S=_[F];if(S){if(f&&f!==F){const L=`Invalid tool_call: ${JSON.stringify(F)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:G,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(F)}. Available options are: ${Object.keys(_).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:G,content:L});continue}let R;try{R=IB(S)?await S.parse(te):te}catch(L){const z=L instanceof Error?L.message:String(L);this._addMessage({role:a,tool_call_id:G,content:z});continue}const I=await S.function(R,this),P=J(this,Es,"m",QN).call(this,I);if(this._addMessage({role:a,tool_call_id:G,content:P}),f)return}}}}Es=new WeakSet,$0=function(){return J(this,Es,"m",Tm).call(this).content??null},Tm=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(bm(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Ye("stream ended without producing a ChatCompletionMessage with role=assistant")},G0=function(){var e,t;for(let s=this.messages.length-1;s>=0;s--){const a=this.messages[s];if(bm(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(t=a.tool_calls.at(-1))==null?void 0:t.function}},K0=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(KN(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(s=>{var a;return s.role==="assistant"&&((a=s.tool_calls)==null?void 0:a.some(o=>o.type==="function"&&o.id===t.tool_call_id))}))return t.content}},W0=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},XN=function(e){if(e.n!=null&&e.n>1)throw new Ye("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},QN=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class F_ extends ZN{static runTools(e,t,s){const a=new F_,o={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,t,o)),a}_addMessage(e,t=!0){super._addMessage(e,t),bm(e)&&e.content&&this._emit("content",e.content)}}const JN=1,e2=2,t2=4,n2=8,s2=16,i2=32,r2=64,a2=128,o2=256,l2=a2|o2,c2=s2|i2|l2|r2,u2=JN|e2|c2,h2=t2|n2,LB=u2|h2,Bn={STR:JN,NUM:e2,ARR:t2,OBJ:n2,NULL:s2,BOOL:i2,NAN:r2,INFINITY:a2,MINUS_INFINITY:o2,INF:l2,SPECIAL:c2,ATOM:u2,COLLECTION:h2,ALL:LB};class VB extends Error{}class jB extends Error{}function zB(n,e=Bn.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return UB(n.trim(),e)}const UB=(n,e)=>{const t=n.length;let s=0;const a=w=>{throw new VB(`${w} at position ${s}`)},o=w=>{throw new jB(`${w} at position ${s}`)},c=()=>(_(),s>=t&&a("Unexpected end of input"),n[s]==='"'?h():n[s]==="{"?f():n[s]==="["?p():n.substring(s,s+4)==="null"||Bn.NULL&e&&t-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||Bn.BOOL&e&&t-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||Bn.BOOL&e&&t-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||Bn.INFINITY&e&&t-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||Bn.MINUS_INFINITY&e&&1<t-s&&t-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||Bn.NAN&e&&t-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):y()),h=()=>{const w=s;let x=!1;for(s++;s<t&&(n[s]!=='"'||x&&n[s-1]==="\\");)x=n[s]==="\\"?!x:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(w,++s-Number(x)))}catch(C){o(String(C))}else if(Bn.STR&e)try{return JSON.parse(n.substring(w,s-Number(x))+'"')}catch{return JSON.parse(n.substring(w,n.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{s++,_();const w={};try{for(;n[s]!=="}";){if(_(),s>=t&&Bn.OBJ&e)return w;const x=h();_(),s++;try{const C=c();Object.defineProperty(w,x,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(Bn.OBJ&e)return w;throw C}_(),n[s]===","&&s++}}catch{if(Bn.OBJ&e)return w;a("Expected '}' at end of object")}return s++,w},p=()=>{s++;const w=[];try{for(;n[s]!=="]";)w.push(c()),_(),n[s]===","&&s++}catch{if(Bn.ARR&e)return w;a("Expected ']' at end of array")}return s++,w},y=()=>{if(s===0){n==="-"&&Bn.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(n)}catch(x){if(Bn.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}o(String(x))}}const w=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==t&&!(Bn.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(n.substring(w,s))}catch{n.substring(w,s)==="-"&&Bn.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(n.substring(w,n.lastIndexOf("e")))}catch(C){o(String(C))}}},_=()=>{for(;s<t&&` 
\r	`.includes(n[s]);)s++};return c()},FA=n=>zB(n,Bn.ALL^Bn.NUM);var Nn,zr,Fl,Ia,Fy,pf,Hy,qy,$y,gf,Gy,HA;class bh extends ZN{constructor(e){super(),Nn.add(this),zr.set(this,void 0),Fl.set(this,void 0),Ia.set(this,void 0),We(this,zr,e),We(this,Fl,[])}get currentChatCompletionSnapshot(){return J(this,Ia,"f")}static fromReadableStream(e){const t=new bh(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const a=new bh(t);return a._run(()=>a._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,t,s){var c;super._createChatCompletion;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),J(this,Nn,"m",Fy).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const h of o)J(this,Nn,"m",Hy).call(this,h);if((c=o.controller.signal)!=null&&c.aborted)throw new vi;return this._addChatCompletion(J(this,Nn,"m",gf).call(this))}async _fromReadableStream(e,t){var c;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),J(this,Nn,"m",Fy).call(this),this._connected();const a=tr.fromReadableStream(e,this.controller);let o;for await(const h of a)o&&o!==h.id&&this._addChatCompletion(J(this,Nn,"m",gf).call(this)),J(this,Nn,"m",Hy).call(this,h),o=h.id;if((c=a.controller.signal)!=null&&c.aborted)throw new vi;return this._addChatCompletion(J(this,Nn,"m",gf).call(this))}[(zr=new WeakMap,Fl=new WeakMap,Ia=new WeakMap,Nn=new WeakSet,Fy=function(){this.ended||We(this,Ia,void 0)},pf=function(t){let s=J(this,Fl,"f")[t.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},J(this,Fl,"f")[t.index]=s,s)},Hy=function(t){var a,o,c,h,f,p,y,_,w,x,C,k,O,B,V;if(this.ended)return;const s=J(this,Nn,"m",HA).call(this,t);this._emit("chunk",t,s);for(const H of t.choices){const G=s.choices[H.index];H.delta.content!=null&&((a=G.message)==null?void 0:a.role)==="assistant"&&((o=G.message)!=null&&o.content)&&(this._emit("content",H.delta.content,G.message.content),this._emit("content.delta",{delta:H.delta.content,snapshot:G.message.content,parsed:G.message.parsed})),H.delta.refusal!=null&&((c=G.message)==null?void 0:c.role)==="assistant"&&((h=G.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:H.delta.refusal,snapshot:G.message.refusal}),((f=H.logprobs)==null?void 0:f.content)!=null&&((p=G.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(y=H.logprobs)==null?void 0:y.content,snapshot:((_=G.logprobs)==null?void 0:_.content)??[]}),((w=H.logprobs)==null?void 0:w.refusal)!=null&&((x=G.message)==null?void 0:x.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(C=H.logprobs)==null?void 0:C.refusal,snapshot:((k=G.logprobs)==null?void 0:k.refusal)??[]});const F=J(this,Nn,"m",pf).call(this,G);G.finish_reason&&(J(this,Nn,"m",$y).call(this,G),F.current_tool_call_index!=null&&J(this,Nn,"m",qy).call(this,G,F.current_tool_call_index));for(const te of H.delta.tool_calls??[])F.current_tool_call_index!==te.index&&(J(this,Nn,"m",$y).call(this,G),F.current_tool_call_index!=null&&J(this,Nn,"m",qy).call(this,G,F.current_tool_call_index)),F.current_tool_call_index=te.index;for(const te of H.delta.tool_calls??[]){const S=(O=G.message.tool_calls)==null?void 0:O[te.index];S!=null&&S.type&&((S==null?void 0:S.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(B=S.function)==null?void 0:B.name,index:te.index,arguments:S.function.arguments,parsed_arguments:S.function.parsed_arguments,arguments_delta:((V=te.function)==null?void 0:V.arguments)??""}):(S==null||S.type,void 0))}}},qy=function(t,s){var c,h,f;if(J(this,Nn,"m",pf).call(this,t).done_tool_calls.has(s))return;const o=(c=t.message.tool_calls)==null?void 0:c[s];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const p=(f=(h=J(this,zr,"f"))==null?void 0:h.tools)==null?void 0:f.find(y=>y.type==="function"&&y.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:s,arguments:o.function.arguments,parsed_arguments:zh(p)?p.$parseRaw(o.function.arguments):p!=null&&p.function.strict?JSON.parse(o.function.arguments):null})}else o.type},$y=function(t){var a,o;const s=J(this,Nn,"m",pf).call(this,t);if(t.message.content&&!s.content_done){s.content_done=!0;const c=J(this,Nn,"m",Gy).call(this);this._emit("content.done",{content:t.message.content,parsed:c?c.$parseRaw(t.message.content):null})}t.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(a=t.logprobs)!=null&&a.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(o=t.logprobs)!=null&&o.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},gf=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const t=J(this,Ia,"f");if(!t)throw new Ye("request ended without sending any chunks");return We(this,Ia,void 0),We(this,Fl,[]),BB(t,J(this,zr,"f"))},Gy=function(){var s;const t=(s=J(this,zr,"f"))==null?void 0:s.response_format;return U_(t)?t:null},HA=function(t){var s,a,o,c;let h=J(this,Ia,"f");const{choices:f,...p}=t;h?Object.assign(h,p):h=We(this,Ia,{...p,choices:[]});for(const{delta:y,finish_reason:_,index:w,logprobs:x=null,...C}of t.choices){let k=h.choices[w];if(k||(k=h.choices[w]={finish_reason:_,index:w,message:{},logprobs:x,...C}),x)if(!k.logprobs)k.logprobs=Object.assign({},x);else{const{content:te,refusal:S,...R}=x;Object.assign(k.logprobs,R),te&&((s=k.logprobs).content??(s.content=[]),k.logprobs.content.push(...te)),S&&((a=k.logprobs).refusal??(a.refusal=[]),k.logprobs.refusal.push(...S))}if(_&&(k.finish_reason=_,J(this,zr,"f")&&YN(J(this,zr,"f")))){if(_==="length")throw new IN;if(_==="content_filter")throw new NN}if(Object.assign(k,C),!y)continue;const{content:O,refusal:B,function_call:V,role:H,tool_calls:G,...F}=y;if(Object.assign(k.message,F),B&&(k.message.refusal=(k.message.refusal||"")+B),H&&(k.message.role=H),V&&(k.message.function_call?(V.name&&(k.message.function_call.name=V.name),V.arguments&&((o=k.message.function_call).arguments??(o.arguments=""),k.message.function_call.arguments+=V.arguments)):k.message.function_call=V),O&&(k.message.content=(k.message.content||"")+O,!k.message.refusal&&J(this,Nn,"m",Gy).call(this)&&(k.message.parsed=FA(k.message.content))),G){k.message.tool_calls||(k.message.tool_calls=[]);for(const{index:te,id:S,type:R,function:I,...P}of G){const L=(c=k.message.tool_calls)[te]??(c[te]={});Object.assign(L,P),S&&(L.id=S),R&&(L.type=R),I&&(L.function??(L.function={name:I.name??"",arguments:""})),I!=null&&I.name&&(L.function.name=I.name),I!=null&&I.arguments&&(L.function.arguments+=I.arguments,OB(J(this,zr,"f"),L)&&(L.function.parsed_arguments=FA(L.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",a=>{const o=t.shift();o?o.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{s=!0;for(const o of t)o.reject(a);t.length=0}),this.on("error",a=>{s=!0;for(const o of t)o.reject(a);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((o,c)=>t.push({resolve:o,reject:c})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function BB(n,e){const{id:t,choices:s,created:a,model:o,system_fingerprint:c,...h}=n,f={...h,id:t,choices:s.map(({message:p,finish_reason:y,index:_,logprobs:w,...x})=>{if(!y)throw new Ye(`missing finish_reason for choice ${_}`);const{content:C=null,function_call:k,tool_calls:O,...B}=p,V=p.role;if(!V)throw new Ye(`missing role for choice ${_}`);if(k){const{arguments:H,name:G}=k;if(H==null)throw new Ye(`missing function_call.arguments for choice ${_}`);if(!G)throw new Ye(`missing function_call.name for choice ${_}`);return{...x,message:{content:C,function_call:{arguments:H,name:G},role:V,refusal:p.refusal??null},finish_reason:y,index:_,logprobs:w}}return O?{...x,index:_,finish_reason:y,logprobs:w,message:{...B,role:V,content:C,refusal:p.refusal??null,tool_calls:O.map((H,G)=>{const{function:F,type:te,id:S,...R}=H,{arguments:I,name:P,...L}=F||{};if(S==null)throw new Ye(`missing choices[${_}].tool_calls[${G}].id
${yf(n)}`);if(te==null)throw new Ye(`missing choices[${_}].tool_calls[${G}].type
${yf(n)}`);if(P==null)throw new Ye(`missing choices[${_}].tool_calls[${G}].function.name
${yf(n)}`);if(I==null)throw new Ye(`missing choices[${_}].tool_calls[${G}].function.arguments
${yf(n)}`);return{...R,id:S,type:te,function:{...L,name:P,arguments:I}}})}}:{...x,message:{...B,content:C,role:V,refusal:p.refusal??null},finish_reason:y,index:_,logprobs:w}}),created:a,model:o,object:"chat.completion",...c?{system_fingerprint:c}:{}};return NB(f,e)}function yf(n){return JSON.stringify(n)}class xm extends bh{static fromReadableStream(e){const t=new xm(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,s){const a=new xm(t),o={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,t,o)),a}}let H_=class extends Qe{constructor(){super(...arguments),this.messages=new GN(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(Se`/chat/completions/${e}`,t)}update(e,t,s){return this._client.post(Se`/chat/completions/${e}`,{body:t,...s})}list(e={},t){return this._client.getAPIList("/chat/completions",En,{query:e,...t})}delete(e,t){return this._client.delete(Se`/chat/completions/${e}`,t)}parse(e,t){return DB(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>B_(s,e))}runTools(e,t){return e.stream?xm.runTools(this._client,e,t):F_.runTools(this._client,e,t)}stream(e,t){return bh.createChatCompletion(this._client,e,t)}};H_.Messages=GN;class q_ extends Qe{constructor(){super(...arguments),this.completions=new H_(this._client)}}q_.Completions=H_;const d2=Symbol("brand.privateNullableHeaders");function*FB(n){if(!n)return;if(d2 in n){const{values:s,nulls:a}=n;yield*s.entries();for(const o of a)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():CA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=CA(s[1])?s[1]:[s[1]];let c=!1;for(const h of o)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const Ve=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[o,c]of FB(s)){const h=o.toLowerCase();a.has(h)||(e.delete(o),a.add(h)),c===null?(e.delete(o),t.add(h)):(e.append(o,c),t.delete(h))}}return{[d2]:!0,values:e,nulls:t}};class f2 extends Qe{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:Ve([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class m2 extends Qe{create(e,t){return this._client.post("/audio/transcriptions",el({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class p2 extends Qe{create(e,t){return this._client.post("/audio/translations",el({body:e,...t,__metadata:{model:e.model}},this._client))}}class Uh extends Qe{constructor(){super(...arguments),this.transcriptions=new m2(this._client),this.translations=new p2(this._client),this.speech=new f2(this._client)}}Uh.Transcriptions=m2;Uh.Translations=p2;Uh.Speech=f2;class g2 extends Qe{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(Se`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",En,{query:e,...t})}cancel(e,t){return this._client.post(Se`/batches/${e}/cancel`,t)}}class y2 extends Qe{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(Se`/assistants/${e}`,{...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(Se`/assistants/${e}`,{body:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},t){return this._client.getAPIList("/assistants",En,{query:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(Se`/assistants/${e}`,{...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class v2 extends Qe{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class _2 extends Qe{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}class cp extends Qe{constructor(){super(...arguments),this.sessions=new v2(this._client),this.transcriptionSessions=new _2(this._client)}}cp.Sessions=v2;cp.TranscriptionSessions=_2;class b2 extends Qe{create(e,t,s){return this._client.post(Se`/threads/${e}/messages`,{body:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{thread_id:a}=t;return this._client.get(Se`/threads/${a}/messages/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{thread_id:a,...o}=t;return this._client.post(Se`/threads/${a}/messages/${e}`,{body:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(Se`/threads/${e}/messages`,En,{query:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t,s){const{thread_id:a}=t;return this._client.delete(Se`/threads/${a}/messages/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class w2 extends Qe{retrieve(e,t,s){const{thread_id:a,run_id:o,...c}=t;return this._client.get(Se`/threads/${a}/runs/${o}/steps/${e}`,{query:c,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t,s){const{thread_id:a,...o}=t;return this._client.getAPIList(Se`/threads/${a}/runs/${e}/steps`,En,{query:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const HB=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,s=new Uint8Array(t);for(let a=0;a<t;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var Ky={};const Hl=n=>{var e,t,s,a;if(typeof globalThis.process<"u")return((e=Ky==null?void 0:Ky[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(s=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:s.call(t,n))==null?void 0:a.trim()};var Zn,Ho,Y0,er,zf,Ii,qo,sc,zo,Sm,Gs,Uf,Bf,sh,$u,Gu,qA,$A,GA,KA,WA,YA,XA;class ih extends z_{constructor(){super(...arguments),Zn.add(this),Y0.set(this,[]),er.set(this,{}),zf.set(this,{}),Ii.set(this,void 0),qo.set(this,void 0),sc.set(this,void 0),zo.set(this,void 0),Sm.set(this,void 0),Gs.set(this,void 0),Uf.set(this,void 0),Bf.set(this,void 0),sh.set(this,void 0)}[(Y0=new WeakMap,er=new WeakMap,zf=new WeakMap,Ii=new WeakMap,qo=new WeakMap,sc=new WeakMap,zo=new WeakMap,Sm=new WeakMap,Gs=new WeakMap,Uf=new WeakMap,Bf=new WeakMap,sh=new WeakMap,Zn=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",a=>{const o=t.shift();o?o.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{s=!0;for(const o of t)o.reject(a);t.length=0}),this.on("error",a=>{s=!0;for(const o of t)o.reject(a);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((o,c)=>t.push({resolve:o,reject:c})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Ho;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var o;const s=t==null?void 0:t.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=tr.fromReadableStream(e,this.controller);for await(const c of a)J(this,Zn,"m",$u).call(this,c);if((o=a.controller.signal)!=null&&o.aborted)throw new vi;return this._addRun(J(this,Zn,"m",Gu).call(this))}toReadableStream(){return new tr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,s,a){const o=new Ho;return o._run(()=>o._runToolAssistantStream(e,t,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,s,a){var f;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},h=await e.submitToolOutputs(t,c,{...a,signal:this.controller.signal});this._connected();for await(const p of h)J(this,Zn,"m",$u).call(this,p);if((f=h.controller.signal)!=null&&f.aborted)throw new vi;return this._addRun(J(this,Zn,"m",Gu).call(this))}static createThreadAssistantStream(e,t,s){const a=new Ho;return a._run(()=>a._threadAssistantStream(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,t,s,a){const o=new Ho;return o._run(()=>o._runAssistantStream(e,t,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return J(this,Uf,"f")}currentRun(){return J(this,Bf,"f")}currentMessageSnapshot(){return J(this,Ii,"f")}currentRunStepSnapshot(){return J(this,sh,"f")}async finalRunSteps(){return await this.done(),Object.values(J(this,er,"f"))}async finalMessages(){return await this.done(),Object.values(J(this,zf,"f"))}async finalRun(){if(await this.done(),!J(this,qo,"f"))throw Error("Final run was not received.");return J(this,qo,"f")}async _createThreadAssistantStream(e,t,s){var h;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},c=await e.createAndRun(o,{...s,signal:this.controller.signal});this._connected();for await(const f of c)J(this,Zn,"m",$u).call(this,f);if((h=c.controller.signal)!=null&&h.aborted)throw new vi;return this._addRun(J(this,Zn,"m",Gu).call(this))}async _createAssistantStream(e,t,s,a){var f;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},h=await e.create(t,c,{...a,signal:this.controller.signal});this._connected();for await(const p of h)J(this,Zn,"m",$u).call(this,p);if((f=h.controller.signal)!=null&&f.aborted)throw new vi;return this._addRun(J(this,Zn,"m",Gu).call(this))}static accumulateDelta(e,t){for(const[s,a]of Object.entries(t)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let o=e[s];if(o==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof o=="string"&&typeof a=="string")o+=a;else if(typeof o=="number"&&typeof a=="number")o+=a;else if(zy(o)&&zy(a))o=this.accumulateDelta(o,a);else if(Array.isArray(o)&&Array.isArray(a)){if(o.every(c=>typeof c=="string"||typeof c=="number")){o.push(...a);continue}for(const c of a){if(!zy(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const h=c.index;if(h==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const f=o[h];f==null?o.push(c):o[h]=this.accumulateDelta(f,c)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${o}`);e[s]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,t,s){return await this._createThreadAssistantStream(t,e,s)}async _runAssistantStream(e,t,s,a){return await this._createAssistantStream(t,e,s,a)}async _runToolAssistantStream(e,t,s,a){return await this._createToolAssistantStream(t,e,s,a)}}Ho=ih,$u=function(e){if(!this.ended)switch(We(this,Uf,e),J(this,Zn,"m",GA).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":J(this,Zn,"m",XA).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":J(this,Zn,"m",$A).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":J(this,Zn,"m",qA).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Gu=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");if(!J(this,qo,"f"))throw Error("Final run has not been received");return J(this,qo,"f")},qA=function(e){const[t,s]=J(this,Zn,"m",WA).call(this,e,J(this,Ii,"f"));We(this,Ii,t),J(this,zf,"f")[t.id]=t;for(const a of s){const o=t.content[a.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let o=a.text,c=t.content[a.index];if(c&&c.type=="text")this._emit("textDelta",o,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=J(this,sc,"f")){if(J(this,zo,"f"))switch(J(this,zo,"f").type){case"text":this._emit("textDone",J(this,zo,"f").text,J(this,Ii,"f"));break;case"image_file":this._emit("imageFileDone",J(this,zo,"f").image_file,J(this,Ii,"f"));break}We(this,sc,a.index)}We(this,zo,t.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(J(this,sc,"f")!==void 0){const a=e.data.content[J(this,sc,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,J(this,Ii,"f"));break;case"text":this._emit("textDone",a.text,J(this,Ii,"f"));break}}J(this,Ii,"f")&&this._emit("messageDone",e.data),We(this,Ii,void 0)}},$A=function(e){const t=J(this,Zn,"m",KA).call(this,e);switch(We(this,sh,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const o of s.step_details.tool_calls)o.index==J(this,Sm,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):(J(this,Gs,"f")&&this._emit("toolCallDone",J(this,Gs,"f")),We(this,Sm,o.index),We(this,Gs,t.step_details.tool_calls[o.index]),J(this,Gs,"f")&&this._emit("toolCallCreated",J(this,Gs,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":We(this,sh,void 0),e.data.step_details.type=="tool_calls"&&J(this,Gs,"f")&&(this._emit("toolCallDone",J(this,Gs,"f")),We(this,Gs,void 0)),this._emit("runStepDone",e.data,t);break}},GA=function(e){J(this,Y0,"f").push(e),this._emit("event",e)},KA=function(e){switch(e.event){case"thread.run.step.created":return J(this,er,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=J(this,er,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=Ho.accumulateDelta(t,s.delta);J(this,er,"f")[e.data.id]=a}return J(this,er,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":J(this,er,"f")[e.data.id]=e.data;break}if(J(this,er,"f")[e.data.id])return J(this,er,"f")[e.data.id];throw new Error("No snapshot available")},WA=function(e,t){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const o of a.delta.content)if(o.index in t.content){let c=t.content[o.index];t.content[o.index]=J(this,Zn,"m",YA).call(this,o,c)}else t.content[o.index]=o,s.push(o);return[t,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},YA=function(e,t){return Ho.accumulateDelta(t,e)},XA=function(e){switch(We(this,Bf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":We(this,qo,e.data),J(this,Gs,"f")&&(this._emit("toolCallDone",J(this,Gs,"f")),We(this,Gs,void 0));break}};let $_=class extends Qe{constructor(){super(...arguments),this.steps=new w2(this._client)}create(e,t,s){const{include:a,...o}=t;return this._client.post(Se`/threads/${e}/runs`,{query:{include:a},body:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:t.stream??!1})}retrieve(e,t,s){const{thread_id:a}=t;return this._client.get(Se`/threads/${a}/runs/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{thread_id:a,...o}=t;return this._client.post(Se`/threads/${a}/runs/${e}`,{body:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(Se`/threads/${e}/runs`,En,{query:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,t,s){const{thread_id:a}=t;return this._client.post(Se`/threads/${a}/runs/${e}/cancel`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const a=await this.create(e,t,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,t,s){return ih.createAssistantStream(e,this._client.beta.threads.runs,t,s)}async poll(e,t,s){var o;const a=Ve([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=s==null?void 0:s.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const{data:c,response:h}=await this.retrieve(e,t,{...s,headers:{...s==null?void 0:s.headers,...a}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let f=5e3;if(s!=null&&s.pollIntervalMs)f=s.pollIntervalMs;else{const p=h.headers.get("openai-poll-after-ms");if(p){const y=parseInt(p);isNaN(y)||(f=y)}}await jh(f);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(e,t,s){return ih.createAssistantStream(e,this._client.beta.threads.runs,t,s)}submitToolOutputs(e,t,s){const{thread_id:a,...o}=t;return this._client.post(Se`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,s){const a=await this.submitToolOutputs(e,t,s);return await this.poll(a.id,t,s)}submitToolOutputsStream(e,t,s){return ih.createToolAssistantStream(e,this._client.beta.threads.runs,t,s)}};$_.Steps=w2;class up extends Qe{constructor(){super(...arguments),this.runs=new $_(this._client),this.messages=new b2(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(Se`/threads/${e}`,{...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(Se`/threads/${e}`,{body:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t){return this._client.delete(Se`/threads/${e}`,{...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const s=await this.createAndRun(e,t);return await this.runs.poll(s.id,{thread_id:s.thread_id},t)}createAndRunStream(e,t){return ih.createThreadAssistantStream(e,this._client.beta.threads,t)}}up.Runs=$_;up.Messages=b2;class Bh extends Qe{constructor(){super(...arguments),this.realtime=new cp(this._client),this.assistants=new y2(this._client),this.threads=new up(this._client)}}Bh.Realtime=cp;Bh.Assistants=y2;Bh.Threads=up;class E2 extends Qe{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class T2 extends Qe{retrieve(e,t,s){const{container_id:a}=t;return this._client.get(Se`/containers/${a}/files/${e}/content`,{...s,headers:Ve([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let G_=class extends Qe{constructor(){super(...arguments),this.content=new T2(this._client)}create(e,t,s){return this._client.post(Se`/containers/${e}/files`,el({body:t,...s},this._client))}retrieve(e,t,s){const{container_id:a}=t;return this._client.get(Se`/containers/${a}/files/${e}`,s)}list(e,t={},s){return this._client.getAPIList(Se`/containers/${e}/files`,En,{query:t,...s})}delete(e,t,s){const{container_id:a}=t;return this._client.delete(Se`/containers/${a}/files/${e}`,{...s,headers:Ve([{Accept:"*/*"},s==null?void 0:s.headers])})}};G_.Content=T2;class K_ extends Qe{constructor(){super(...arguments),this.files=new G_(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(Se`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",En,{query:e,...t})}delete(e,t){return this._client.delete(Se`/containers/${e}`,{...t,headers:Ve([{Accept:"*/*"},t==null?void 0:t.headers])})}}K_.Files=G_;class x2 extends Qe{create(e,t){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&Qn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:a},...t});return s?o:(Qn(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(c=>(c&&c.data&&c.data.forEach(h=>{const f=h.embedding;h.embedding=HB(f)}),c)))}}class S2 extends Qe{retrieve(e,t,s){const{eval_id:a,run_id:o}=t;return this._client.get(Se`/evals/${a}/runs/${o}/output_items/${e}`,s)}list(e,t,s){const{eval_id:a,...o}=t;return this._client.getAPIList(Se`/evals/${a}/runs/${e}/output_items`,En,{query:o,...s})}}class W_ extends Qe{constructor(){super(...arguments),this.outputItems=new S2(this._client)}create(e,t,s){return this._client.post(Se`/evals/${e}/runs`,{body:t,...s})}retrieve(e,t,s){const{eval_id:a}=t;return this._client.get(Se`/evals/${a}/runs/${e}`,s)}list(e,t={},s){return this._client.getAPIList(Se`/evals/${e}/runs`,En,{query:t,...s})}delete(e,t,s){const{eval_id:a}=t;return this._client.delete(Se`/evals/${a}/runs/${e}`,s)}cancel(e,t,s){const{eval_id:a}=t;return this._client.post(Se`/evals/${a}/runs/${e}`,s)}}W_.OutputItems=S2;class Y_ extends Qe{constructor(){super(...arguments),this.runs=new W_(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(Se`/evals/${e}`,t)}update(e,t,s){return this._client.post(Se`/evals/${e}`,{body:t,...s})}list(e={},t){return this._client.getAPIList("/evals",En,{query:e,...t})}delete(e,t){return this._client.delete(Se`/evals/${e}`,t)}}Y_.Runs=W_;let A2=class extends Qe{create(e,t){return this._client.post("/files",el({body:e,...t},this._client))}retrieve(e,t){return this._client.get(Se`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",En,{query:e,...t})}delete(e,t){return this._client.delete(Se`/files/${e}`,t)}content(e,t){return this._client.get(Se`/files/${e}/content`,{...t,headers:Ve([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),o=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await jh(t),c=await this.retrieve(e),Date.now()-o>s)throw new V_({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return c}};class R2 extends Qe{}let C2=class extends Qe{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class X_ extends Qe{constructor(){super(...arguments),this.graders=new C2(this._client)}}X_.Graders=C2;class I2 extends Qe{create(e,t,s){return this._client.getAPIList(Se`/fine_tuning/checkpoints/${e}/permissions`,lp,{body:t,method:"post",...s})}retrieve(e,t={},s){return this._client.get(Se`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...s})}delete(e,t,s){const{fine_tuned_model_checkpoint:a}=t;return this._client.delete(Se`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let Q_=class extends Qe{constructor(){super(...arguments),this.permissions=new I2(this._client)}};Q_.Permissions=I2;class N2 extends Qe{list(e,t={},s){return this._client.getAPIList(Se`/fine_tuning/jobs/${e}/checkpoints`,En,{query:t,...s})}}class Z_ extends Qe{constructor(){super(...arguments),this.checkpoints=new N2(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(Se`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",En,{query:e,...t})}cancel(e,t){return this._client.post(Se`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return this._client.getAPIList(Se`/fine_tuning/jobs/${e}/events`,En,{query:t,...s})}pause(e,t){return this._client.post(Se`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(Se`/fine_tuning/jobs/${e}/resume`,t)}}Z_.Checkpoints=N2;class Nc extends Qe{constructor(){super(...arguments),this.methods=new R2(this._client),this.jobs=new Z_(this._client),this.checkpoints=new Q_(this._client),this.alpha=new X_(this._client)}}Nc.Methods=R2;Nc.Jobs=Z_;Nc.Checkpoints=Q_;Nc.Alpha=X_;class k2 extends Qe{}class J_ extends Qe{constructor(){super(...arguments),this.graderModels=new k2(this._client)}}J_.GraderModels=k2;class M2 extends Qe{createVariation(e,t){return this._client.post("/images/variations",el({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",el({body:e,...t},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class O2 extends Qe{retrieve(e,t){return this._client.get(Se`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",lp,e)}delete(e,t){return this._client.delete(Se`/models/${e}`,t)}}class D2 extends Qe{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function qB(n,e){return!e||!GB(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(s=>({...s,parsed:null}))}:t)}:P2(n,e)}function P2(n,e){const t=n.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:YB(e,a)};if(a.type==="message"){const o=a.content.map(c=>c.type==="output_text"?{...c,parsed:$B(e,c.text)}:c);return{...a,content:o}}return a}),s=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||X0(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const o of a.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),s}function $B(n,e){var t,s,a,o;return((s=(t=n.text)==null?void 0:t.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((a=n.text)==null?void 0:a.format)?((o=n.text)==null?void 0:o.format).$parseRaw(e):JSON.parse(e)}function GB(n){var e;return!!U_((e=n.text)==null?void 0:e.format)}function KB(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function WB(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function YB(n,e){const t=WB(n.tools??[],e.name);return{...e,...e,parsed_arguments:KB(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function X0(n){const e=[];for(const t of n.output)if(t.type==="message")for(const s of t.content)s.type==="output_text"&&e.push(s.text);n.output_text=e.join("")}var ql,vf,Na,_f,QA,ZA,JA,e1;class eb extends z_{constructor(e){super(),ql.add(this),vf.set(this,void 0),Na.set(this,void 0),_f.set(this,void 0),We(this,vf,e)}static createResponse(e,t,s){const a=new eb(t);return a._run(()=>a._createOrRetrieveResponse(e,t,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,t,s){var h;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),J(this,ql,"m",QA).call(this);let o,c=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),c=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const f of o)J(this,ql,"m",ZA).call(this,f,c);if((h=o.controller.signal)!=null&&h.aborted)throw new vi;return J(this,ql,"m",JA).call(this)}[(vf=new WeakMap,Na=new WeakMap,_f=new WeakMap,ql=new WeakSet,QA=function(){this.ended||We(this,Na,void 0)},ZA=function(t,s){if(this.ended)return;const a=(c,h)=>{(s==null||h.sequence_number>s)&&this._emit(c,h)},o=J(this,ql,"m",e1).call(this,t);switch(a("event",t),t.type){case"response.output_text.delta":{const c=o.output[t.output_index];if(!c)throw new Ye(`missing output at index ${t.output_index}`);if(c.type==="message"){const h=c.content[t.content_index];if(!h)throw new Ye(`missing content at index ${t.content_index}`);if(h.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${h.type}`);a("response.output_text.delta",{...t,snapshot:h.text})}break}case"response.function_call_arguments.delta":{const c=o.output[t.output_index];if(!c)throw new Ye(`missing output at index ${t.output_index}`);c.type==="function_call"&&a("response.function_call_arguments.delta",{...t,snapshot:c.arguments});break}default:a(t.type,t);break}},JA=function(){if(this.ended)throw new Ye("stream has ended, this shouldn't happen");const t=J(this,Na,"f");if(!t)throw new Ye("request ended without sending any events");We(this,Na,void 0);const s=XB(t,J(this,vf,"f"));return We(this,_f,s),s},e1=function(t){let s=J(this,Na,"f");if(!s){if(t.type!=="response.created")throw new Ye(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return s=We(this,Na,t.response),s}switch(t.type){case"response.output_item.added":{s.output.push(t.item);break}case"response.content_part.added":{const a=s.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);a.type==="message"&&a.content.push(t.part);break}case"response.output_text.delta":{const a=s.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);if(a.type==="message"){const o=a.content[t.content_index];if(!o)throw new Ye(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new Ye(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{const a=s.output[t.output_index];if(!a)throw new Ye(`missing output at index ${t.output_index}`);a.type==="function_call"&&(a.arguments+=t.delta);break}case"response.completed":{We(this,Na,t.response);break}}return s},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",a=>{const o=t.shift();o?o.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{s=!0;for(const o of t)o.reject(a);t.length=0}),this.on("error",a=>{s=!0;for(const o of t)o.reject(a);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((o,c)=>t.push({resolve:o,reject:c})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=J(this,_f,"f");if(!e)throw new Ye("stream ended without producing a ChatCompletion");return e}}function XB(n,e){return qB(n,e)}class L2 extends Qe{list(e,t={},s){return this._client.getAPIList(Se`/responses/${e}/input_items`,En,{query:t,...s})}}class tb extends Qe{constructor(){super(...arguments),this.inputItems=new L2(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&X0(s),s))}retrieve(e,t={},s){return this._client.get(Se`/responses/${e}`,{query:t,...s,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&X0(a),a))}delete(e,t){return this._client.delete(Se`/responses/${e}`,{...t,headers:Ve([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(s=>P2(s,e))}stream(e,t){return eb.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(Se`/responses/${e}/cancel`,t)}}tb.InputItems=L2;class V2 extends Qe{create(e,t,s){return this._client.post(Se`/uploads/${e}/parts`,el({body:t,...s},this._client))}}class nb extends Qe{constructor(){super(...arguments),this.parts=new V2(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(Se`/uploads/${e}/cancel`,t)}complete(e,t,s){return this._client.post(Se`/uploads/${e}/complete`,{body:t,...s})}}nb.Parts=V2;const QB=async n=>{const e=await Promise.allSettled(n),t=e.filter(a=>a.status==="rejected");if(t.length){for(const a of t)console.error(a.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class j2 extends Qe{create(e,t,s){return this._client.post(Se`/vector_stores/${e}/file_batches`,{body:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{vector_store_id:a}=t;return this._client.get(Se`/vector_stores/${a}/file_batches/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,t,s){const{vector_store_id:a}=t;return this._client.post(Se`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const a=await this.create(e,t);return await this.poll(e,a.id,s)}listFiles(e,t,s){const{vector_store_id:a,...o}=t;return this._client.getAPIList(Se`/vector_stores/${a}/file_batches/${e}/files`,En,{query:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,t,s){var o;const a=Ve([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=s==null?void 0:s.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const{data:c,response:h}=await this.retrieve(t,{vector_store_id:e},{...s,headers:a}).withResponse();switch(c.status){case"in_progress":let f=5e3;if(s!=null&&s.pollIntervalMs)f=s.pollIntervalMs;else{const p=h.headers.get("openai-poll-after-ms");if(p){const y=parseInt(p);isNaN(y)||(f=y)}}await jh(f);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(e,{files:t,fileIds:s=[]},a){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=(a==null?void 0:a.maxConcurrency)??5,c=Math.min(o,t.length),h=this._client,f=t.values(),p=[...s];async function y(w){for(let x of w){const C=await h.files.create({file:x,purpose:"assistants"},a);p.push(C.id)}}const _=Array(c).fill(f).map(y);return await QB(_),await this.createAndPoll(e,{file_ids:p})}}class z2 extends Qe{create(e,t,s){return this._client.post(Se`/vector_stores/${e}/files`,{body:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,t,s){const{vector_store_id:a}=t;return this._client.get(Se`/vector_stores/${a}/files/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,t,s){const{vector_store_id:a,...o}=t;return this._client.post(Se`/vector_stores/${a}/files/${e}`,{body:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,t={},s){return this._client.getAPIList(Se`/vector_stores/${e}/files`,En,{query:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,t,s){const{vector_store_id:a}=t;return this._client.delete(Se`/vector_stores/${a}/files/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,t,s){const a=await this.create(e,t,s);return await this.poll(e,a.id,s)}async poll(e,t,s){var o;const a=Ve([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=s==null?void 0:s.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const c=await this.retrieve(t,{vector_store_id:e},{...s,headers:a}).withResponse(),h=c.data;switch(h.status){case"in_progress":let f=5e3;if(s!=null&&s.pollIntervalMs)f=s.pollIntervalMs;else{const p=c.response.headers.get("openai-poll-after-ms");if(p){const y=parseInt(p);isNaN(y)||(f=y)}}await jh(f);break;case"failed":case"completed":return h}}}async upload(e,t,s){const a=await this._client.files.create({file:t,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,t,s){const a=await this.upload(e,t,s);return await this.poll(e,a.id,s)}content(e,t,s){const{vector_store_id:a}=t;return this._client.getAPIList(Se`/vector_stores/${a}/files/${e}/content`,lp,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class hp extends Qe{constructor(){super(...arguments),this.files=new z2(this._client),this.fileBatches=new j2(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(Se`/vector_stores/${e}`,{...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,s){return this._client.post(Se`/vector_stores/${e}`,{body:t,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",En,{query:e,...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(Se`/vector_stores/${e}`,{...t,headers:Ve([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,s){return this._client.getAPIList(Se`/vector_stores/${e}/search`,lp,{body:t,method:"post",...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}hp.Files=z2;hp.FileBatches=j2;var Ql,U2,Ff;class B2 extends Qe{constructor(){super(...arguments),Ql.add(this)}async unwrap(e,t,s=this._client.webhookSecret,a=300){return await this.verifySignature(e,t,s,a),JSON.parse(e)}async verifySignature(e,t,s=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");J(this,Ql,"m",U2).call(this,s);const o=Ve([t]).values,c=J(this,Ql,"m",Ff).call(this,o,"webhook-signature"),h=J(this,Ql,"m",Ff).call(this,o,"webhook-timestamp"),f=J(this,Ql,"m",Ff).call(this,o,"webhook-id"),p=parseInt(h,10);if(isNaN(p))throw new ju("Invalid webhook timestamp format");const y=Math.floor(Date.now()/1e3);if(y-p>a)throw new ju("Webhook timestamp is too old");if(p>y+a)throw new ju("Webhook timestamp is too new");const _=c.split(" ").map(k=>k.startsWith("v1,")?k.substring(3):k),w=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),x=f?`${f}.${h}.${e}`:`${h}.${e}`,C=await crypto.subtle.importKey("raw",w,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const k of _)try{const O=Buffer.from(k,"base64");if(await crypto.subtle.verify("HMAC",C,O,new TextEncoder().encode(x)))return}catch{continue}throw new ju("The given webhook signature does not match the expected signature")}}Ql=new WeakSet,U2=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Ff=function(e,t){if(!e)throw new Error("Headers are required");const s=e.get(t);if(s==null)throw new Error(`Missing required header: ${t}`);return s};var Q0,sb,Hf,F2;class ht{constructor({baseURL:e=Hl("OPENAI_BASE_URL"),apiKey:t=Hl("OPENAI_API_KEY"),organization:s=Hl("OPENAI_ORG_ID")??null,project:a=Hl("OPENAI_PROJECT_ID")??null,webhookSecret:o=Hl("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(Q0.add(this),Hf.set(this,void 0),this.completions=new E2(this),this.chat=new q_(this),this.embeddings=new x2(this),this.files=new A2(this),this.images=new M2(this),this.audio=new Uh(this),this.moderations=new D2(this),this.models=new O2(this),this.fineTuning=new Nc(this),this.graders=new J_(this),this.vectorStores=new hp(this),this.webhooks=new B2(this),this.beta=new Bh(this),this.batches=new g2(this),this.uploads=new nb(this),this.responses=new tb(this),this.evals=new Y_(this),this.containers=new K_(this),t===void 0)throw new Ye("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const h={apiKey:t,organization:s,project:a,webhookSecret:o,...c,baseURL:e||"https://api.openai.com/v1"};if(!h.dangerouslyAllowBrowser&&Z9())throw new Ye(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=h.baseURL,this.timeout=h.timeout??sb.DEFAULT_TIMEOUT,this.logger=h.logger??console;const f="warn";this.logLevel=f,this.logLevel=jA(h.logLevel,"ClientOptions.logLevel",this)??jA(Hl("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=h.fetchOptions,this.maxRetries=h.maxRetries??2,this.fetch=h.fetch??sB(),We(this,Hf,rB),this._options=h,this.apiKey=t,this.organization=s,this.project=a,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return Ve([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return hB(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Yl}`}defaultIdempotencyKey(){return`stainless-node-retry-${bN()}`}makeStatusError(e,t,s,a){return ns.generate(e,t,s,a)}buildURL(e,t,s){const a=!J(this,Q0,"m",F2).call(this)&&s||this.baseURL,o=G9(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return W9(c)||(t={...c,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:t,...a})))}request(e,t=null){return new op(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var B,V;const a=await e,o=a.maxRetries??this.maxRetries;t==null&&(t=o),await this.prepareOptions(a);const{req:c,url:h,timeout:f}=await this.buildRequest(a,{retryCount:o-t});await this.prepareRequest(c,{url:h,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=s===void 0?"":`, retryOf: ${s}`,_=Date.now();if(Qn(this).debug(`[${p}] sending request`,jo({retryOfRequestLogID:s,method:a.method,url:h,options:a,headers:c.headers})),(B=a.signal)!=null&&B.aborted)throw new vi;const w=new AbortController,x=await this.fetchWithTimeout(h,c,f,w).catch(U0),C=Date.now();if(x instanceof Error){const H=`retrying, ${t} attempts remaining`;if((V=a.signal)!=null&&V.aborted)throw new vi;const G=z0(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(t)return Qn(this).info(`[${p}] connection ${G?"timed out":"failed"} - ${H}`),Qn(this).debug(`[${p}] connection ${G?"timed out":"failed"} (${H})`,jo({retryOfRequestLogID:s,url:h,durationMs:C-_,message:x.message})),this.retryRequest(a,t,s??p);throw Qn(this).info(`[${p}] connection ${G?"timed out":"failed"} - error; no more retries left`),Qn(this).debug(`[${p}] connection ${G?"timed out":"failed"} (error; no more retries left)`,jo({retryOfRequestLogID:s,url:h,durationMs:C-_,message:x.message})),G?new V_:new rp({cause:x})}const k=[...x.headers.entries()].filter(([H])=>H==="x-request-id").map(([H,G])=>", "+H+": "+JSON.stringify(G)).join(""),O=`[${p}${y}${k}] ${c.method} ${h} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${C-_}ms`;if(!x.ok){const H=await this.shouldRetry(x);if(t&&H){const I=`retrying, ${t} attempts remaining`;return await iB(x.body),Qn(this).info(`${O} - ${I}`),Qn(this).debug(`[${p}] response error (${I})`,jo({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:C-_})),this.retryRequest(a,t,s??p,x.headers)}const G=H?"error; no more retries left":"error; not retryable";Qn(this).info(`${O} - ${G}`);const F=await x.text().catch(I=>U0(I).message),te=Q9(F),S=te?void 0:F;throw Qn(this).debug(`[${p}] response error (${G})`,jo({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,message:S,durationMs:Date.now()-_})),this.makeStatusError(x.status,te,S,x.headers)}return Qn(this).info(O),Qn(this).debug(`[${p}] response start`,jo({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:C-_})),{response:x,options:a,controller:w,requestLogID:p,retryOfRequestLogID:s,startTime:_}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){const s=this.makeRequest(t,null,void 0);return new bB(this,s,e)}async fetchWithTimeout(e,t,s,a){const{signal:o,method:c,...h}=t||{};o&&o.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),p=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y={signal:a.signal,...p?{duplex:"half"}:{},method:"GET",...h};c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){let o;const c=a==null?void 0:a.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(o=f)}const h=a==null?void 0:a.get("retry-after");if(h&&!o){const f=parseFloat(h);Number.isNaN(f)?o=Date.parse(h)-Date.now():o=f*1e3}if(!(o&&0<=o&&o<60*1e3)){const f=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,f)}return await jh(o),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,c=Math.min(.5*Math.pow(2,o),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:t=0}={}){const s={...e},{method:a,path:o,query:c,defaultBaseURL:h}=s,f=this.buildURL(o,c,h);"timeout"in s&&X9("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:p,body:y}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:a,bodyHeaders:p,retryCount:t});return{req:{method:a,headers:_,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"},...y&&{body:y},...this.fetchOptions??{},...s.fetchOptions??{}},url:f,timeout:s.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const c=Ve([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...nB(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ve([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:MN(e)}:J(this,Hf,"f").call(this,{body:e,headers:s})}}sb=ht,Hf=new WeakMap,Q0=new WeakSet,F2=function(){return this.baseURL!=="https://api.openai.com/v1"};ht.OpenAI=sb;ht.DEFAULT_TIMEOUT=6e5;ht.OpenAIError=Ye;ht.APIError=ns;ht.APIConnectionError=rp;ht.APIConnectionTimeoutError=V_;ht.APIUserAbortError=vi;ht.NotFoundError=xN;ht.ConflictError=SN;ht.RateLimitError=RN;ht.BadRequestError=wN;ht.AuthenticationError=EN;ht.InternalServerError=CN;ht.PermissionDeniedError=TN;ht.UnprocessableEntityError=AN;ht.InvalidWebhookSignatureError=ju;ht.toFile=AB;ht.Completions=E2;ht.Chat=q_;ht.Embeddings=x2;ht.Files=A2;ht.Images=M2;ht.Audio=Uh;ht.Moderations=D2;ht.Models=O2;ht.FineTuning=Nc;ht.Graders=J_;ht.VectorStores=hp;ht.Webhooks=B2;ht.Beta=Bh;ht.Batches=g2;ht.Uploads=nb;ht.Responses=tb;ht.Evals=Y_;ht.Containers=K_;class ZB{static createOpenAIInstance(e,t,s){const a={};return e&&(a.Authorization=`Bearer ${e}`),new ht({apiKey:s||"",baseURL:t||"https://api-3ujaavqala-uc.a.run.app",defaultHeaders:a,dangerouslyAllowBrowser:!0})}static getProviderConfig(e,t){if(e==="system")return{baseURL:"https://api-3ujaavqala-uc.a.run.app",apiKey:"",requiresAuth:!0};if(e==="builtin"&&t)try{const s=localStorage.getItem("builtin_api_providers");if(s){const o=JSON.parse(s).find(c=>c.id===t);if(o&&o.value){if(t==="openai")return{baseURL:"https://api.openai.com/v1",apiKey:o.value,requiresAuth:!1};if(t==="anthropic")return{baseURL:"https://api.anthropic.com/v1",apiKey:o.value,requiresAuth:!1}}}}catch(s){console.error("Error loading built-in provider config:",s)}if(e==="custom"&&t)try{const s=localStorage.getItem("custom_api_providers");if(s){const o=JSON.parse(s).find(c=>c.id===t);if(o&&o.value&&o.base_url)return{baseURL:o.base_url,apiKey:o.value,requiresAuth:!1}}}catch(s){console.error("Error loading custom provider config:",s)}return{baseURL:"https://api-3ujaavqala-uc.a.run.app",apiKey:"",requiresAuth:!0}}static async sendMessage(e,t,s,a,o,c,h,f="system",p,y){var _,w,x,C;try{const k=this.getProviderConfig(f,p);let O;if(k.requiresAuth&&c)try{O=await c.getIdToken()}catch(G){if(console.warn("Failed to get Firebase ID token:",G),f==="system")throw new Error("Authentication required for system models")}const B=this.createOpenAIInstance(O,k.baseURL,k.apiKey);let V=t;f==="builtin"&&p==="anthropic"&&(V=t);const H=await B.chat.completions.create({model:e,messages:V,stream:!0},{signal:h==null?void 0:h.signal});for await(const G of H)(w=(_=G.choices[0])==null?void 0:_.delta)!=null&&w.reasoning&&y&&y(G.choices[0].delta.reasoning),(C=(x=G.choices[0])==null?void 0:x.delta)!=null&&C.content&&s(G.choices[0].delta.content);a()}catch(k){if(k instanceof Error&&k.name==="AbortError")return;o(k)}}}const JB=n=>{const[e,t]=$.useState([]),[s,a]=$.useState(null),[o,c]=$.useState(!0),[h,f]=$.useState(!1),[p,y]=$.useState(!0),[_,w]=$.useState(null),[x,C]=$.useState(!1),[k,O]=$.useState(!1),[B,V]=$.useState(!0),[H,G]=$.useState(null),[F,te]=$.useState(!1),[S,R]=$.useState(null),[I,P]=$.useState({isStreaming:!1,currentMessageId:null,controller:null}),L=$.useRef(""),z=$.useRef(""),D=he=>["gemini-1.5-flash","gemini-1.5-flash-8b"].includes(he)?"server":"byok";Ws.useEffect(()=>NC(Va,ve=>{R(ve),!ve&&S&&a(null)}),[S]);const Ne=$.useCallback(async()=>{try{c(!0);const he=await Yn.loadConversationsPaginated(S,20);t(he.conversations),y(he.hasMore),w(he.lastDoc)}catch(he){console.error("Error loading conversations:",he)}finally{c(!1)}},[S]);Ws.useEffect(()=>{Ne()},[Ne]),Ws.useEffect(()=>{S?Yn.handleUserLogin(S).then(()=>{Ne()}):Yn.handleUserLogout()},[S,Ne]);const Le=$.useCallback(async()=>{if(!(!p||h))try{f(!0);const he=await Yn.loadConversationsPaginated(S,20,_);t(ve=>[...ve,...he.conversations]),y(he.hasMore),w(he.lastDoc)}catch(he){console.error("Error loading more conversations:",he)}finally{f(!1)}},[S,p,h,_]),Q=$.useCallback(async he=>{console.log("loadConversationMessages called for:",he);try{C(!0);const ve=await Yn.loadMessagesPaginated(he,S,100);t(xe=>{const Ge=xe.map(tt=>tt.id===he?{...tt,messages:ve.messages}:tt);return console.log("Updated conversations with messages for:",he,"message count:",ve.messages.length),Ge}),a(xe=>xe&&xe.id===he?{...xe,messages:ve.messages}:xe),V(ve.hasMore),G(ve.lastDoc)}catch(ve){console.error("Error loading conversation messages:",ve)}finally{C(!1)}},[S]),se=$.useCallback(async()=>{if(!(!s||!B||k))try{O(!0);const he=await Yn.loadMessagesPaginated(s.id,S,100,H);t(ve=>ve.map(xe=>xe.id===s.id?{...xe,messages:[...he.messages,...xe.messages]}:xe)),a(ve=>ve?{...ve,messages:[...he.messages,...ve.messages]}:null),V(he.hasMore),G(he.lastDoc)}catch(he){console.error("Error loading more messages:",he)}finally{O(!1)}},[s,S,B,k,H]),ae=()=>Date.now().toString()+Math.random().toString(36).substr(2,9),Ae=$.useCallback((he="New Chat",ve="gemini-1.5-flash")=>{if(F)return s;if(!s||s.messages.length===0){const Ge=s||{id:ae(),title:he,messages:[],createdAt:new Date,updatedAt:new Date,model:ve,source:D(ve)};return s||(V(!1),G(null)),Ge}te(!0);const xe={id:ae(),title:he,messages:[],createdAt:new Date,updatedAt:new Date,model:ve,source:D(ve)};return V(!1),G(null),t(Ge=>Ge.some(Xe=>Xe.id===xe.id)?Ge:[xe,...Ge]),a(xe),Yn.saveConversation(xe,S).catch(Ge=>{console.error("Error saving new conversation:",Ge)}).finally(()=>{te(!1)}),xe},[S,F,s]),M=$.useCallback((he,ve,xe)=>{let Ge=null;t(tt=>tt.map(Xe=>Xe.id===he?Ge={...Xe,messages:Xe.messages.map(cn=>cn.id===ve?{...cn,content:xe}:cn),updatedAt:new Date}:Xe)),a(tt=>tt&&tt.id===he?Ge={...tt,messages:tt.messages.map(Xe=>Xe.id===ve?{...Xe,content:xe}:Xe),updatedAt:new Date}:tt),Ge&&Yn.saveConversation(Ge,S).catch(tt=>{console.error("Error saving updated conversation:",tt)})},[S]),Y=$.useCallback((he,ve,xe)=>{let Ge=null;t(tt=>tt.map(Xe=>Xe.id===he?Ge={...Xe,messages:Xe.messages.map(cn=>cn.id===ve?{...cn,reasoning:xe}:cn),updatedAt:new Date}:Xe)),a(tt=>tt&&tt.id===he?Ge={...tt,messages:tt.messages.map(Xe=>Xe.id===ve?{...Xe,reasoning:xe}:Xe),updatedAt:new Date}:tt),Ge&&Yn.saveConversation(Ge,S).catch(tt=>{console.error("Error saving conversation with reasoning:",tt)})},[S]),re=$.useCallback(async(he,ve,xe="system",Ge)=>{if(!he.trim())return;let tt=ve;if(xe==="custom"&&Ge)try{const Lt=localStorage.getItem("custom_api_providers");if(Lt&&JSON.parse(Lt).find(Yt=>Yt.id===Ge)){const Yt=`models_${Ge}`,sn=localStorage.getItem(Yt);if(sn){const ss=JSON.parse(sn),Ft=(ss.length>0&&typeof ss[0]=="string"?ss.map(ot=>({id:ot,name:ot})):ss).find(ot=>ot.id===ve);Ft&&(tt=Ft.name)}}}catch(Lt){console.error("Error getting model name:",Lt)}let Xe=s;if(Xe){if(Xe.messages.length===0&&Xe.title==="New Chat"){const Lt=he.slice(0,50)+(he.length>50?"...":"");Xe={...Xe,title:Lt,updatedAt:new Date},a(Xe),t(Wt=>Wt.map(Vt=>Vt.id===Xe.id?Xe:Vt))}}else{const Lt=he.slice(0,50)+(he.length>50?"...":"");Xe={id:ae(),title:Lt,messages:[],createdAt:new Date,updatedAt:new Date,model:ve,source:D(ve)},a(Xe)}const cn={id:ae(),role:"user",content:he.trim(),timestamp:new Date,source:D(ve)},nn={id:ae(),role:"assistant",content:"",model:ve,modelName:xe==="custom"?tt:void 0,isStreaming:!0,timestamp:new Date(Date.now()+1),source:D(ve),reasoning:"",isReasoningComplete:!1},Pt={...Xe,messages:[...Xe.messages,cn,nn],updatedAt:new Date};t(Lt=>{const Wt=Lt.findIndex(Vt=>Vt.id===Xe.id);if(Wt>=0){const Vt=[...Lt];return Vt[Wt]=Pt,Vt}else return[Pt,...Lt]}),a(Pt);try{await Yn.saveConversation({...Pt,messages:[...Xe.messages,cn]},S)}catch(Lt){console.error("Error saving user message:",Lt)}const Li=new AbortController;P({isStreaming:!0,currentMessageId:nn.id,controller:Li}),L.current="",z.current="";try{const Lt=[...Xe.messages,cn].map(Bt=>({role:Bt.role,content:Bt.content}));let Wt=Lt;n&&n.customInstruction&&n.customInstruction.trim()&&(Wt=[{role:"system",content:n.customInstruction.trim()},...Lt]);const Vt=Bt=>{L.current+=Bt,M(Pt.id,nn.id,L.current)},Yt=Bt=>{z.current+=Bt,Y(Pt.id,nn.id,z.current)},sn=()=>{t(Bt=>Bt.map(Ft=>Ft.id===Pt.id?{...Ft,messages:Ft.messages.map(ot=>ot.id===nn.id?{...ot,isStreaming:!1,isReasoningComplete:!0}:ot)}:Ft)),a(Bt=>Bt&&Bt.id===Pt.id?{...Bt,messages:Bt.messages.map(Ft=>Ft.id===nn.id?{...Ft,isStreaming:!1,isReasoningComplete:!0}:Ft)}:Bt),t(Bt=>{const Ft=Bt.find(ot=>ot.id===Pt.id);return Ft&&Yn.saveConversation(Ft,S).catch(ot=>{console.error("Error saving final conversation:",ot)}),Bt}),P({isStreaming:!1,currentMessageId:null,controller:null}),L.current="",z.current=""},ss=Bt=>{const Ft=`Error: ${Bt.message}`;M(Pt.id,nn.id,Ft),t(ot=>ot.map(Tn=>Tn.id===Pt.id?{...Tn,messages:Tn.messages.map(lt=>lt.id===nn.id?{...lt,isError:!0,isStreaming:!1}:lt)}:Tn)),a(ot=>ot&&ot.id===Pt.id?{...ot,messages:ot.messages.map(Tn=>Tn.id===nn.id?{...Tn,isError:!0,isStreaming:!1}:Tn)}:ot),t(ot=>{const Tn=ot.find(lt=>lt.id===Pt.id);return Tn&&Yn.saveConversation(Tn,S).catch(lt=>{console.error("Error saving error conversation:",lt)}),ot}),P({isStreaming:!1,currentMessageId:null,controller:null}),L.current="",z.current=""};await ZB.sendMessage(ve,Wt,Vt,sn,ss,S,Li,xe,Ge,Yt)}catch(Lt){const Wt=Lt instanceof Error?Lt.message:"Unknown error";M(Pt.id,nn.id,`Error: ${Wt}`),t(Vt=>Vt.map(Yt=>Yt.id===Pt.id?{...Yt,messages:Yt.messages.map(sn=>sn.id===nn.id?{...sn,isError:!0,isStreaming:!1}:sn)}:Yt)),a(Vt=>Vt&&Vt.id===Pt.id?{...Vt,messages:Vt.messages.map(Yt=>Yt.id===nn.id?{...Yt,isError:!0,isStreaming:!1}:Yt)}:Vt),t(Vt=>{const Yt=Vt.find(sn=>sn.id===Pt.id);return Yt&&Yn.saveConversation(Yt,S).catch(sn=>{console.error("Error saving error conversation:",sn)}),Vt}),P({isStreaming:!1,currentMessageId:null,controller:null}),L.current="",z.current=""}},[s,Ae,M,Y,S,n]),le=$.useCallback(()=>{I.controller&&I.controller.abort(),P({isStreaming:!1,currentMessageId:null,controller:null}),L.current="",z.current=""},[I]),ge=$.useCallback(he=>{a(he),V(!0),G(null),he&&(C(!0),Q(he.id))},[Q]),Me=$.useCallback(he=>{t(ve=>ve.filter(xe=>xe.id!==he)),(s==null?void 0:s.id)===he&&a(null),Yn.deleteConversation(he,S).catch(ve=>{console.error("Error deleting conversation:",ve)})},[s,S]);return{conversations:e,currentConversation:s,streamingState:I,isLoading:o,isLoadingMore:h,hasMoreConversations:p,isLoadingMessages:x,isLoadingMoreMessages:k,hasMoreMessages:B,isCreatingNewChat:F,sendMessage:re,stopStreaming:le,createNewConversation:Ae,selectConversation:ge,deleteConversation:Me,loadConversations:Ne,loadMoreConversations:Le,loadMoreMessages:se}};class eF{constructor(){this.isExtension=typeof browser<"u"&&browser.storage}async getItem(e){if(this.isExtension)try{return(await browser.storage.local.get(e))[e]||null}catch(t){return console.error("Extension storage getItem error:",t),null}else return localStorage.getItem(e)}async setItem(e,t){const s=typeof t=="string"?t:JSON.stringify(t);if(this.isExtension)try{await browser.storage.local.set({[e]:s})}catch(a){console.error("Extension storage setItem error:",a)}else localStorage.setItem(e,s)}async removeItem(e){if(this.isExtension)try{await browser.storage.local.remove(e)}catch(t){console.error("Extension storage removeItem error:",t)}else localStorage.removeItem(e)}async getMultiple(e){if(this.isExtension)try{const t=await browser.storage.local.get(e),s={};return e.forEach(a=>{s[a]=t[a]||null}),s}catch(t){return console.error("Extension storage getMultiple error:",t),{}}else{const t={};return e.forEach(s=>{t[s]=localStorage.getItem(s)}),t}}async setMultiple(e){if(this.isExtension)try{const t={};Object.entries(e).forEach(([s,a])=>{t[s]=typeof a=="string"?a:JSON.stringify(a)}),await browser.storage.local.set(t)}catch(t){console.error("Extension storage setMultiple error:",t)}else Object.entries(e).forEach(([t,s])=>{const a=typeof s=="string"?s:JSON.stringify(s);localStorage.setItem(t,a)})}}const bf=new eF,t1={title:"",description:"",onConfirm:()=>{},confirmText:"Confirm",confirmVariant:"primary",cancelText:"Cancel",onCancel:void 0},tF=()=>{const[n,e]=$.useState(!1),[t,s]=$.useState(!1),[a,o]=$.useState(!1),[c,h]=$.useState("Customization"),[f,p]=$.useState(null),[y,_]=$.useState(!1),[w,x]=$.useState(!1),[C,k]=$.useState(t1),[O,B]=$.useState(null),[V,H]=$.useState(!1),G=$.useRef(null),F=async()=>{const se=["theme","mainFont","codeFont","fontSize","animationsDisabled","customInstruction","hidePersonalInfo","disableLinkWarning"],ae=await bf.getMultiple(se);return{theme:ae.theme||"system",mainFont:ae.mainFont||"Montserrat",codeFont:ae.codeFont||"JetBrains Mono (default)",fontSize:parseFloat(ae.fontSize||"1"),animationsDisabled:ae.animationsDisabled==="true",customInstruction:ae.customInstruction||"",hidePersonalInfo:ae.hidePersonalInfo==="true",disableLinkWarning:ae.disableLinkWarning==="true"}},[te,S]=$.useState({theme:"system",mainFont:"Montserrat",codeFont:"JetBrains Mono (default)",fontSize:1,animationsDisabled:!1,customInstruction:"",hidePersonalInfo:!1,disableLinkWarning:!1}),R=JB(V?te:void 0),I=async()=>{const se=["theme","mainFont","codeFont","fontSize","animationsDisabled","customInstruction","hidePersonalInfo","disableLinkWarning"];for(const ae of se)await bf.removeItem(ae)},P=async se=>{const ae={...te,...se};if(S(ae),Va.currentUser){const Ae=hs(Wn,"settings",Va.currentUser.uid);await Df(Ae,se,{merge:!0})}else await bf.setMultiple(se)};$.useEffect(()=>{F().then(se=>{S(se),H(!0)})},[]),$.useEffect(()=>{O&&(O(),B(null));const se=NC(Va,async ae=>{if(p(ae),O&&(O(),B(null)),ae){_(!1);const Ae=await F(),M=["theme","mainFont","codeFont","fontSize","animationsDisabled","customInstruction","hidePersonalInfo","disableLinkWarning"],Y=Object.values(await bf.getMultiple(M)).some(ge=>ge!==null),re=hs(Wn,"settings",ae.uid),le=()=>{const ge=gN(re,Me=>{if(Me.exists()){const he=Me.data();S(ve=>({...ve,...he})),H(!0)}});B(()=>ge)};try{const ge=await S9(re);if(ge.exists()&&Y){const Me={...await F(),...ge.data()};JSON.stringify(Ae)!==JSON.stringify(Me)?Le({title:"Choose Your Settings",description:"You have settings saved on this device and in the cloud. Which version would you like to use?",onConfirm:()=>{S(Me),H(!0),I(),x(!1),le()},confirmText:"Use Cloud",confirmVariant:"primary",cancelText:"Use Local",onCancel:async()=>{S(Ae),H(!0),await Df(re,Ae),I(),x(!1),le()}}):(S(Ae),H(!0),le())}else if(ge.exists()){const Me={...await F(),...ge.data()};S(Me),H(!0),le()}else Y?(await Df(re,Ae),S(Ae),H(!0),I(),le()):(S(await F()),H(!0),le())}catch(ge){console.error("Error handling user settings sync:",ge),S(await F()),H(!0)}}else S(await F()),H(!0)});return()=>{se(),O&&O()}},[]);const L=(se="Customization")=>{h(se),o(!0)},z=()=>{o(!1)};$.useEffect(()=>{console.log("Firebase Initialized in Extension:",L_.name)},[]);const D=()=>{const se=["light","dark","system"],ae=se.indexOf(te.theme),Ae=se[(ae+1)%se.length];P({theme:Ae})};$.useEffect(()=>{const se=window.document.documentElement,ae=te.theme==="dark"||te.theme==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;se.classList.remove(ae?"light":"dark"),se.classList.add(ae?"dark":"light")},[te.theme]),$.useEffect(()=>{document.documentElement.style.setProperty("--font-main",te.mainFont),document.documentElement.style.setProperty("--font-size-scale",te.fontSize.toString())},[te.mainFont,te.fontSize]);const Ne=async()=>{try{await Zz(Va),R.selectConversation(null),x(!1),z()}catch(se){console.error("Error signing out:",se)}},Le=se=>{k({...t1,...se}),x(!0)},Q=()=>{Le({title:"Confirm Sign Out",description:"Are you sure you want to sign out? Your session will be ended.",onConfirm:Ne,confirmText:"Sign Out",confirmVariant:"destructive"})};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex h-full w-full bg-white dark:bg-[#1c1c1c] text-zinc-900 dark:text-zinc-200 font-sans overflow-hidden",children:[v.jsx(o1,{ref:G,isMobileMenuOpen:n,setIsMobileMenuOpen:e,isCollapsed:t,user:f,onLoginClick:()=>L("Account"),onSignOutClick:Q,chat:R}),v.jsx(n4,{onMenuClick:()=>e(!0),toggleSidebar:()=>s(!t),isSidebarCollapsed:t,onOpenSettings:L,theme:te.theme,toggleTheme:D,user:f,animationsDisabled:te.animationsDisabled,chat:R}),n&&v.jsx("div",{className:"fixed inset-0 bg-black/60 z-30 md:hidden",onClick:()=>e(!1),"aria-hidden":"true"})]}),a&&v.jsx(F9,{onClose:z,user:f,initialTab:c,settings:te,updateSettings:P,onOpenAuthModal:()=>_(!0),onSignOutClick:Q}),v.jsx(H9,{isOpen:y,onClose:()=>_(!1)}),v.jsx(q9,{isOpen:w,onClose:()=>x(!1),onConfirm:C.onConfirm,title:C.title,confirmText:C.confirmText,confirmVariant:C.confirmVariant,onCancel:C.onCancel,cancelText:C.cancelText,children:C.description})]})};console.log("O-Chat Extension initializing...");const H2=document.getElementById("root");if(!H2)throw new Error("Could not find root element to mount to");const nF=RM.createRoot(H2);nF.render(v.jsx(Ws.StrictMode,{children:v.jsx(tF,{})}));export{$l as _,Rm as g};
