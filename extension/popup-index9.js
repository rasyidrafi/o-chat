import{f as O,s as sn,c as Dn,p as G,r as _n,n as fn,b as wn,a as ft,t as gt}from"./popup-blank-line.js";import{c as w,e as nn,d as v,f as En,g as xt,m as B,h as kt,i as dt,j as Tn,a as $}from"./popup-index.js";import{s as yn}from"./popup-index3.js";const Rn=document.createElement("i");function Bn(n){const r="&"+n+";";Rn.innerHTML=r;const t=Rn.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===r?!1:t}function $n(n,r){const t=Number.parseInt(n,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}const St={tokenize:bt};function bt(n){const r=n.attempt(this.parser.constructs.contentInitial,e,a);let t;return r;function e(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),O(n,r,"linePrefix")}function a(s){return n.enter("paragraph"),i(s)}function i(s){const f=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,u(s)}function u(s){if(s===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(s);return}return w(s)?(n.consume(s),n.exit("chunkText"),i):(n.consume(s),u)}}const yt={tokenize:It},qn={tokenize:wt};function It(n){const r=this,t=[];let e=0,a,i,u;return s;function s(b){if(e<t.length){const M=t[e];return r.containerState=M[1],n.attempt(M[0].continuation,f,h)(b)}return h(b)}function f(b){if(e++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,a&&q();const M=r.events.length;let D=M,k;for(;D--;)if(r.events[D][0]==="exit"&&r.events[D][1].type==="chunkFlow"){k=r.events[D][1].end;break}S(e);let _=M;for(;_<r.events.length;)r.events[_][1].end={...k},_++;return sn(r.events,D+1,0,r.events.slice(M)),r.events.length=_,h(b)}return s(b)}function h(b){if(e===t.length){if(!a)return g(b);if(a.currentConstruct&&a.currentConstruct.concrete)return T(b);r.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(qn,m,p)(b)}function m(b){return a&&q(),S(e),g(b)}function p(b){return r.parser.lazy[r.now().line]=e!==t.length,u=r.now().offset,T(b)}function g(b){return r.containerState={},n.attempt(qn,c,T)(b)}function c(b){return e++,t.push([r.currentConstruct,r.containerState]),g(b)}function T(b){if(b===null){a&&q(),S(0),n.consume(b);return}return a=a||r.parser.flow(r.now()),n.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),F(b)}function F(b){if(b===null){R(n.exit("chunkFlow"),!0),S(0),n.consume(b);return}return w(b)?(n.consume(b),R(n.exit("chunkFlow")),e=0,r.interrupt=void 0,s):(n.consume(b),F)}function R(b,M){const D=r.sliceStream(b);if(M&&D.push(null),b.previous=i,i&&(i.next=b),i=b,a.defineSkip(b.start),a.write(D),r.parser.lazy[b.start.line]){let k=a.events.length;for(;k--;)if(a.events[k][1].start.offset<u&&(!a.events[k][1].end||a.events[k][1].end.offset>u))return;const _=r.events.length;let H=_,A,L;for(;H--;)if(r.events[H][0]==="exit"&&r.events[H][1].type==="chunkFlow"){if(A){L=r.events[H][1].end;break}A=!0}for(S(e),k=_;k<r.events.length;)r.events[k][1].end={...L},k++;sn(r.events,H+1,0,r.events.slice(_)),r.events.length=k}}function S(b){let M=t.length;for(;M-- >b;){const D=t[M];r.containerState=D[1],D[0].exit.call(r,n)}t.length=b}function q(){a.write([null]),i=void 0,a=void 0,r.containerState._closeFlow=void 0}}function wt(n,r,t){return O(n,n.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Fn={name:"attention",resolveAll:zt,tokenize:Ct};function zt(n,r){let t=-1,e,a,i,u,s,f,h,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(e=t;e--;)if(n[e][0]==="exit"&&n[e][1].type==="attentionSequence"&&n[e][1]._open&&r.sliceSerialize(n[e][1]).charCodeAt(0)===r.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[e][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[e][1].end.offset-n[e][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;f=n[e][1].end.offset-n[e][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const p={...n[e][1].end},g={...n[t][1].start};Hn(p,-f),Hn(g,f),u={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...n[e][1].end}},s={type:f>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:g},i={type:f>1?"strongText":"emphasisText",start:{...n[e][1].end},end:{...n[t][1].start}},a={type:f>1?"strong":"emphasis",start:{...u.start},end:{...s.end}},n[e][1].end={...u.start},n[t][1].start={...s.end},h=[],n[e][1].end.offset-n[e][1].start.offset&&(h=G(h,[["enter",n[e][1],r],["exit",n[e][1],r]])),h=G(h,[["enter",a,r],["enter",u,r],["exit",u,r],["enter",i,r]]),h=G(h,_n(r.parser.constructs.insideSpan.null,n.slice(e+1,t),r)),h=G(h,[["exit",i,r],["enter",s,r],["exit",s,r],["exit",a,r]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,h=G(h,[["enter",n[t][1],r],["exit",n[t][1],r]])):m=0,sn(n,e-1,t-e+3,h),t=e+h.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function Ct(n,r){const t=this.parser.constructs.attentionMarkers.null,e=this.previous,a=Dn(e);let i;return u;function u(f){return i=f,n.enter("attentionSequence"),s(f)}function s(f){if(f===i)return n.consume(f),s;const h=n.exit("attentionSequence"),m=Dn(f),p=!m||m===2&&a||t.includes(f),g=!a||a===2&&m||t.includes(e);return h._open=!!(i===42?p:p&&(a||!g)),h._close=!!(i===42?g:g&&(m||!p)),r(f)}}function Hn(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const Et={name:"autolink",tokenize:Tt};function Tt(n,r,t){let e=0;return a;function a(c){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),i}function i(c){return nn(c)?(n.consume(c),u):c===64?t(c):h(c)}function u(c){return c===43||c===45||c===46||v(c)?(e=1,s(c)):h(c)}function s(c){return c===58?(n.consume(c),e=0,f):(c===43||c===45||c===46||v(c))&&e++<32?(n.consume(c),s):(e=0,h(c))}function f(c){return c===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.exit("autolink"),r):c===null||c===32||c===60||En(c)?t(c):(n.consume(c),f)}function h(c){return c===64?(n.consume(c),m):xt(c)?(n.consume(c),h):t(c)}function m(c){return v(c)?p(c):t(c)}function p(c){return c===46?(n.consume(c),e=0,m):c===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.exit("autolink"),r):g(c)}function g(c){if((c===45||v(c))&&e++<63){const T=c===45?g:p;return n.consume(c),T}return t(c)}}const Gn={continuation:{tokenize:_t},exit:Bt,name:"blockQuote",tokenize:Ft};function Ft(n,r,t){const e=this;return a;function a(u){if(u===62){const s=e.containerState;return s.open||(n.enter("blockQuote",{_container:!0}),s.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(u),n.exit("blockQuoteMarker"),i}return t(u)}function i(u){return B(u)?(n.enter("blockQuotePrefixWhitespace"),n.consume(u),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(u))}}function _t(n,r,t){const e=this;return a;function a(u){return B(u)?O(n,i,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):i(u)}function i(u){return n.attempt(Gn,r,t)(u)}}function Bt(n){n.exit("blockQuote")}const Jn={name:"characterEscape",tokenize:At};function At(n,r,t){return e;function e(i){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(i),n.exit("escapeMarker"),a}function a(i){return kt(i)?(n.enter("characterEscapeValue"),n.consume(i),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):t(i)}}const Kn={name:"characterReference",tokenize:Pt};function Pt(n,r,t){const e=this;let a=0,i,u;return s;function s(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),f}function f(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),i=31,u=v,m(p))}function h(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),i=6,u=dt,m):(n.enter("characterReferenceValue"),i=7,u=Tn,m(p))}function m(p){if(p===59&&a){const g=n.exit("characterReferenceValue");return u===v&&!Bn(e.sliceSerialize(g))?t(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)}return u(p)&&a++<i?(n.consume(p),m):t(p)}}const Vn={partial:!0,tokenize:Ot},Qn={concrete:!0,name:"codeFenced",tokenize:Lt};function Lt(n,r,t){const e=this,a={partial:!0,tokenize:D};let i=0,u=0,s;return f;function f(k){return h(k)}function h(k){const _=e.events[e.events.length-1];return i=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,s=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(k)}function m(k){return k===s?(u++,n.consume(k),m):u<3?t(k):(n.exit("codeFencedFenceSequence"),B(k)?O(n,p,"whitespace")(k):p(k))}function p(k){return k===null||w(k)?(n.exit("codeFencedFence"),e.interrupt?r(k):n.check(Vn,F,M)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||w(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(k)):B(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),O(n,c,"whitespace")(k)):k===96&&k===s?t(k):(n.consume(k),g)}function c(k){return k===null||w(k)?p(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),T(k))}function T(k){return k===null||w(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(k)):k===96&&k===s?t(k):(n.consume(k),T)}function F(k){return n.attempt(a,M,R)(k)}function R(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),S}function S(k){return i>0&&B(k)?O(n,q,"linePrefix",i+1)(k):q(k)}function q(k){return k===null||w(k)?n.check(Vn,F,M)(k):(n.enter("codeFlowValue"),b(k))}function b(k){return k===null||w(k)?(n.exit("codeFlowValue"),q(k)):(n.consume(k),b)}function M(k){return n.exit("codeFenced"),r(k)}function D(k,_,H){let A=0;return L;function L(E){return k.enter("lineEnding"),k.consume(E),k.exit("lineEnding"),I}function I(E){return k.enter("codeFencedFence"),B(E)?O(k,y,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):y(E)}function y(E){return E===s?(k.enter("codeFencedFenceSequence"),N(E)):H(E)}function N(E){return E===s?(A++,k.consume(E),N):A>=u?(k.exit("codeFencedFenceSequence"),B(E)?O(k,V,"whitespace")(E):V(E)):H(E)}function V(E){return E===null||w(E)?(k.exit("codeFencedFence"),_(E)):H(E)}}}function Ot(n,r,t){const e=this;return a;function a(u){return u===null?t(u):(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),i)}function i(u){return e.parser.lazy[e.now().line]?t(u):r(u)}}const zn={name:"codeIndented",tokenize:Nt},Mt={partial:!0,tokenize:Dt};function Nt(n,r,t){const e=this;return a;function a(h){return n.enter("codeIndented"),O(n,i,"linePrefix",5)(h)}function i(h){const m=e.events[e.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?u(h):t(h)}function u(h){return h===null?f(h):w(h)?n.attempt(Mt,u,f)(h):(n.enter("codeFlowValue"),s(h))}function s(h){return h===null||w(h)?(n.exit("codeFlowValue"),u(h)):(n.consume(h),s)}function f(h){return n.exit("codeIndented"),r(h)}}function Dt(n,r,t){const e=this;return a;function a(u){return e.parser.lazy[e.now().line]?t(u):w(u)?(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),a):O(n,i,"linePrefix",5)(u)}function i(u){const s=e.events[e.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?r(u):w(u)?a(u):t(u)}}const Rt={name:"codeText",previous:Ht,resolve:qt,tokenize:Vt};function qt(n){let r=n.length-4,t=3,e,a;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(e=t;++e<r;)if(n[e][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(e=t-1,r++;++e<=r;)a===void 0?e!==r&&n[e][1].type!=="lineEnding"&&(a=e):(e===r||n[e][1].type==="lineEnding")&&(n[a][1].type="codeTextData",e!==a+2&&(n[a][1].end=n[e-1][1].end,n.splice(a+2,e-a-2),r-=e-a-2,e=a+2),a=void 0);return n}function Ht(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Vt(n,r,t){let e=0,a,i;return u;function u(p){return n.enter("codeText"),n.enter("codeTextSequence"),s(p)}function s(p){return p===96?(n.consume(p),e++,s):(n.exit("codeTextSequence"),f(p))}function f(p){return p===null?t(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),f):p===96?(i=n.enter("codeTextSequence"),a=0,m(p)):w(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),f):(n.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||w(p)?(n.exit("codeTextData"),f(p)):(n.consume(p),h)}function m(p){return p===96?(n.consume(p),a++,m):a===e?(n.exit("codeTextSequence"),n.exit("codeText"),r(p)):(i.type="codeTextData",h(p))}}class Qt{constructor(r){this.left=r?[...r]:[],this.right=[]}get(r){if(r<0||r>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+r+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return r<this.left.length?this.left[r]:this.right[this.right.length-r+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(r,t){const e=t??Number.POSITIVE_INFINITY;return e<this.left.length?this.left.slice(r,e):r>this.left.length?this.right.slice(this.right.length-e+this.left.length,this.right.length-r+this.left.length).reverse():this.left.slice(r).concat(this.right.slice(this.right.length-e+this.left.length).reverse())}splice(r,t,e){const a=t||0;this.setCursor(Math.trunc(r));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return e&&dn(this.left,e),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(r){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(r)}pushMany(r){this.setCursor(Number.POSITIVE_INFINITY),dn(this.left,r)}unshift(r){this.setCursor(0),this.right.push(r)}unshiftMany(r){this.setCursor(0),dn(this.right,r.reverse())}setCursor(r){if(!(r===this.left.length||r>this.left.length&&this.right.length===0||r<0&&this.left.length===0))if(r<this.left.length){const t=this.left.splice(r,Number.POSITIVE_INFINITY);dn(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-r,Number.POSITIVE_INFINITY);dn(this.left,t.reverse())}}}function dn(n,r){let t=0;if(r.length<1e4)n.push(...r);else for(;t<r.length;)n.push(...r.slice(t,t+1e4)),t+=1e4}function Xn(n){const r={};let t=-1,e,a,i,u,s,f,h;const m=new Qt(n);for(;++t<m.length;){for(;t in r;)t=r[t];if(e=m.get(t),t&&e[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(f=e[1]._tokenizer.events,i=0,i<f.length&&f[i][1].type==="lineEndingBlank"&&(i+=2),i<f.length&&f[i][1].type==="content"))for(;++i<f.length&&f[i][1].type!=="content";)f[i][1].type==="chunkText"&&(f[i][1]._isInFirstContentOfListItem=!0,i++);if(e[0]==="enter")e[1].contentType&&(Object.assign(r,jt(m,t)),t=r[t],h=!0);else if(e[1]._container){for(i=t,a=void 0;i--;)if(u=m.get(i),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(a&&(m.get(a)[1].type="lineEndingBlank"),u[1].type="lineEnding",a=i);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;a&&(e[1].end={...m.get(a)[1].start},s=m.slice(a,t),s.unshift(e),m.splice(a,t-a+1,s))}}return sn(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function jt(n,r){const t=n.get(r)[1],e=n.get(r)[2];let a=r-1;const i=[];let u=t._tokenizer;u||(u=e.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const s=u.events,f=[],h={};let m,p,g=-1,c=t,T=0,F=0;const R=[F];for(;c;){for(;n.get(++a)[1]!==c;);i.push(a),c._tokenizer||(m=e.sliceStream(c),c.next||m.push(null),p&&u.defineSkip(c.start),c._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(m),c._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),p=c,c=c.next}for(c=t;++g<s.length;)s[g][0]==="exit"&&s[g-1][0]==="enter"&&s[g][1].type===s[g-1][1].type&&s[g][1].start.line!==s[g][1].end.line&&(F=g+1,R.push(F),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(u.events=[],c?(c._tokenizer=void 0,c.previous=void 0):R.pop(),g=R.length;g--;){const S=s.slice(R[g],R[g+1]),q=i.pop();f.push([q,q+S.length-1]),n.splice(q,2,S)}for(f.reverse(),g=-1;++g<f.length;)h[T+f[g][0]]=T+f[g][1],T+=f[g][1]-f[g][0]-1;return h}const Ut={resolve:Yt,tokenize:$t},Wt={partial:!0,tokenize:Gt};function Yt(n){return Xn(n),n}function $t(n,r){let t;return e;function e(s){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),a(s)}function a(s){return s===null?i(s):w(s)?n.check(Wt,u,i)(s):(n.consume(s),a)}function i(s){return n.exit("chunkContent"),n.exit("content"),r(s)}function u(s){return n.consume(s),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,a}}function Gt(n,r,t){const e=this;return a;function a(u){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),O(n,i,"linePrefix")}function i(u){if(u===null||w(u))return t(u);const s=e.events[e.events.length-1];return!e.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?r(u):n.interrupt(e.parser.constructs.flow,t,r)(u)}}function Zn(n,r,t,e,a,i,u,s,f){const h=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(S){return S===60?(n.enter(e),n.enter(a),n.enter(i),n.consume(S),n.exit(i),g):S===null||S===32||S===41||En(S)?t(S):(n.enter(e),n.enter(u),n.enter(s),n.enter("chunkString",{contentType:"string"}),F(S))}function g(S){return S===62?(n.enter(i),n.consume(S),n.exit(i),n.exit(a),n.exit(e),r):(n.enter(s),n.enter("chunkString",{contentType:"string"}),c(S))}function c(S){return S===62?(n.exit("chunkString"),n.exit(s),g(S)):S===null||S===60||w(S)?t(S):(n.consume(S),S===92?T:c)}function T(S){return S===60||S===62||S===92?(n.consume(S),c):c(S)}function F(S){return!m&&(S===null||S===41||$(S))?(n.exit("chunkString"),n.exit(s),n.exit(u),n.exit(e),r(S)):m<h&&S===40?(n.consume(S),m++,F):S===41?(n.consume(S),m--,F):S===null||S===32||S===40||En(S)?t(S):(n.consume(S),S===92?R:F)}function R(S){return S===40||S===41||S===92?(n.consume(S),F):F(S)}}function vn(n,r,t,e,a,i){const u=this;let s=0,f;return h;function h(c){return n.enter(e),n.enter(a),n.consume(c),n.exit(a),n.enter(i),m}function m(c){return s>999||c===null||c===91||c===93&&!f||c===94&&!s&&"_hiddenFootnoteSupport"in u.parser.constructs?t(c):c===93?(n.exit(i),n.enter(a),n.consume(c),n.exit(a),n.exit(e),r):w(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),p(c))}function p(c){return c===null||c===91||c===93||w(c)||s++>999?(n.exit("chunkString"),m(c)):(n.consume(c),f||(f=!B(c)),c===92?g:p)}function g(c){return c===91||c===92||c===93?(n.consume(c),s++,p):p(c)}}function nt(n,r,t,e,a,i){let u;return s;function s(g){return g===34||g===39||g===40?(n.enter(e),n.enter(a),n.consume(g),n.exit(a),u=g===40?41:g,f):t(g)}function f(g){return g===u?(n.enter(a),n.consume(g),n.exit(a),n.exit(e),r):(n.enter(i),h(g))}function h(g){return g===u?(n.exit(i),f(u)):g===null?t(g):w(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),O(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===u||g===null||w(g)?(n.exit("chunkString"),h(g)):(n.consume(g),g===92?p:m)}function p(g){return g===u||g===92?(n.consume(g),m):m(g)}}function Sn(n,r){let t;return e;function e(a){return w(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),t=!0,e):B(a)?O(n,e,t?"linePrefix":"lineSuffix")(a):r(a)}}const Jt={name:"definition",tokenize:Xt},Kt={partial:!0,tokenize:Zt};function Xt(n,r,t){const e=this;let a;return i;function i(c){return n.enter("definition"),u(c)}function u(c){return vn.call(e,n,s,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function s(c){return a=fn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)),c===58?(n.enter("definitionMarker"),n.consume(c),n.exit("definitionMarker"),f):t(c)}function f(c){return $(c)?Sn(n,h)(c):h(c)}function h(c){return Zn(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function m(c){return n.attempt(Kt,p,p)(c)}function p(c){return B(c)?O(n,g,"whitespace")(c):g(c)}function g(c){return c===null||w(c)?(n.exit("definition"),e.parser.defined.push(a),r(c)):t(c)}}function Zt(n,r,t){return e;function e(s){return $(s)?Sn(n,a)(s):t(s)}function a(s){return nt(n,i,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function i(s){return B(s)?O(n,u,"whitespace")(s):u(s)}function u(s){return s===null||w(s)?r(s):t(s)}}const vt={name:"hardBreakEscape",tokenize:ne};function ne(n,r,t){return e;function e(i){return n.enter("hardBreakEscape"),n.consume(i),a}function a(i){return w(i)?(n.exit("hardBreakEscape"),r(i)):t(i)}}const te={name:"headingAtx",resolve:ee,tokenize:re};function ee(n,r){let t=n.length-2,e=3,a,i;return n[e][1].type==="whitespace"&&(e+=2),t-2>e&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(e===t-1||t-4>e&&n[t-2][1].type==="whitespace")&&(t-=e+1===t?2:4),t>e&&(a={type:"atxHeadingText",start:n[e][1].start,end:n[t][1].end},i={type:"chunkText",start:n[e][1].start,end:n[t][1].end,contentType:"text"},sn(n,e,t-e+1,[["enter",a,r],["enter",i,r],["exit",i,r],["exit",a,r]])),n}function re(n,r,t){let e=0;return a;function a(m){return n.enter("atxHeading"),i(m)}function i(m){return n.enter("atxHeadingSequence"),u(m)}function u(m){return m===35&&e++<6?(n.consume(m),u):m===null||$(m)?(n.exit("atxHeadingSequence"),s(m)):t(m)}function s(m){return m===35?(n.enter("atxHeadingSequence"),f(m)):m===null||w(m)?(n.exit("atxHeading"),r(m)):B(m)?O(n,s,"whitespace")(m):(n.enter("atxHeadingText"),h(m))}function f(m){return m===35?(n.consume(m),f):(n.exit("atxHeadingSequence"),s(m))}function h(m){return m===null||m===35||$(m)?(n.exit("atxHeadingText"),s(m)):(n.consume(m),h)}}const ie=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],jn=["pre","script","style","textarea"],ue={concrete:!0,name:"htmlFlow",resolveTo:se,tokenize:oe},ae={partial:!0,tokenize:he},le={partial:!0,tokenize:ce};function se(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function oe(n,r,t){const e=this;let a,i,u,s,f;return h;function h(o){return m(o)}function m(o){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(o),p}function p(o){return o===33?(n.consume(o),g):o===47?(n.consume(o),i=!0,F):o===63?(n.consume(o),a=3,e.interrupt?r:l):nn(o)?(n.consume(o),u=String.fromCharCode(o),R):t(o)}function g(o){return o===45?(n.consume(o),a=2,c):o===91?(n.consume(o),a=5,s=0,T):nn(o)?(n.consume(o),a=4,e.interrupt?r:l):t(o)}function c(o){return o===45?(n.consume(o),e.interrupt?r:l):t(o)}function T(o){const X="CDATA[";return o===X.charCodeAt(s++)?(n.consume(o),s===X.length?e.interrupt?r:y:T):t(o)}function F(o){return nn(o)?(n.consume(o),u=String.fromCharCode(o),R):t(o)}function R(o){if(o===null||o===47||o===62||$(o)){const X=o===47,on=u.toLowerCase();return!X&&!i&&jn.includes(on)?(a=1,e.interrupt?r(o):y(o)):ie.includes(u.toLowerCase())?(a=6,X?(n.consume(o),S):e.interrupt?r(o):y(o)):(a=7,e.interrupt&&!e.parser.lazy[e.now().line]?t(o):i?q(o):b(o))}return o===45||v(o)?(n.consume(o),u+=String.fromCharCode(o),R):t(o)}function S(o){return o===62?(n.consume(o),e.interrupt?r:y):t(o)}function q(o){return B(o)?(n.consume(o),q):L(o)}function b(o){return o===47?(n.consume(o),L):o===58||o===95||nn(o)?(n.consume(o),M):B(o)?(n.consume(o),b):L(o)}function M(o){return o===45||o===46||o===58||o===95||v(o)?(n.consume(o),M):D(o)}function D(o){return o===61?(n.consume(o),k):B(o)?(n.consume(o),D):b(o)}function k(o){return o===null||o===60||o===61||o===62||o===96?t(o):o===34||o===39?(n.consume(o),f=o,_):B(o)?(n.consume(o),k):H(o)}function _(o){return o===f?(n.consume(o),f=null,A):o===null||w(o)?t(o):(n.consume(o),_)}function H(o){return o===null||o===34||o===39||o===47||o===60||o===61||o===62||o===96||$(o)?D(o):(n.consume(o),H)}function A(o){return o===47||o===62||B(o)?b(o):t(o)}function L(o){return o===62?(n.consume(o),I):t(o)}function I(o){return o===null||w(o)?y(o):B(o)?(n.consume(o),I):t(o)}function y(o){return o===45&&a===2?(n.consume(o),U):o===60&&a===1?(n.consume(o),Q):o===62&&a===4?(n.consume(o),K):o===63&&a===3?(n.consume(o),l):o===93&&a===5?(n.consume(o),tn):w(o)&&(a===6||a===7)?(n.exit("htmlFlowData"),n.check(ae,en,N)(o)):o===null||w(o)?(n.exit("htmlFlowData"),N(o)):(n.consume(o),y)}function N(o){return n.check(le,V,en)(o)}function V(o){return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),E}function E(o){return o===null||w(o)?N(o):(n.enter("htmlFlowData"),y(o))}function U(o){return o===45?(n.consume(o),l):y(o)}function Q(o){return o===47?(n.consume(o),u="",J):y(o)}function J(o){if(o===62){const X=u.toLowerCase();return jn.includes(X)?(n.consume(o),K):y(o)}return nn(o)&&u.length<8?(n.consume(o),u+=String.fromCharCode(o),J):y(o)}function tn(o){return o===93?(n.consume(o),l):y(o)}function l(o){return o===62?(n.consume(o),K):o===45&&a===2?(n.consume(o),l):y(o)}function K(o){return o===null||w(o)?(n.exit("htmlFlowData"),en(o)):(n.consume(o),K)}function en(o){return n.exit("htmlFlow"),r(o)}}function ce(n,r,t){const e=this;return a;function a(u){return w(u)?(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),i):t(u)}function i(u){return e.parser.lazy[e.now().line]?t(u):r(u)}}function he(n,r,t){return e;function e(a){return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),n.attempt(wn,r,t)}}const pe={name:"htmlText",tokenize:me};function me(n,r,t){const e=this;let a,i,u;return s;function s(l){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(l),f}function f(l){return l===33?(n.consume(l),h):l===47?(n.consume(l),D):l===63?(n.consume(l),b):nn(l)?(n.consume(l),H):t(l)}function h(l){return l===45?(n.consume(l),m):l===91?(n.consume(l),i=0,T):nn(l)?(n.consume(l),q):t(l)}function m(l){return l===45?(n.consume(l),c):t(l)}function p(l){return l===null?t(l):l===45?(n.consume(l),g):w(l)?(u=p,Q(l)):(n.consume(l),p)}function g(l){return l===45?(n.consume(l),c):p(l)}function c(l){return l===62?U(l):l===45?g(l):p(l)}function T(l){const K="CDATA[";return l===K.charCodeAt(i++)?(n.consume(l),i===K.length?F:T):t(l)}function F(l){return l===null?t(l):l===93?(n.consume(l),R):w(l)?(u=F,Q(l)):(n.consume(l),F)}function R(l){return l===93?(n.consume(l),S):F(l)}function S(l){return l===62?U(l):l===93?(n.consume(l),S):F(l)}function q(l){return l===null||l===62?U(l):w(l)?(u=q,Q(l)):(n.consume(l),q)}function b(l){return l===null?t(l):l===63?(n.consume(l),M):w(l)?(u=b,Q(l)):(n.consume(l),b)}function M(l){return l===62?U(l):b(l)}function D(l){return nn(l)?(n.consume(l),k):t(l)}function k(l){return l===45||v(l)?(n.consume(l),k):_(l)}function _(l){return w(l)?(u=_,Q(l)):B(l)?(n.consume(l),_):U(l)}function H(l){return l===45||v(l)?(n.consume(l),H):l===47||l===62||$(l)?A(l):t(l)}function A(l){return l===47?(n.consume(l),U):l===58||l===95||nn(l)?(n.consume(l),L):w(l)?(u=A,Q(l)):B(l)?(n.consume(l),A):U(l)}function L(l){return l===45||l===46||l===58||l===95||v(l)?(n.consume(l),L):I(l)}function I(l){return l===61?(n.consume(l),y):w(l)?(u=I,Q(l)):B(l)?(n.consume(l),I):A(l)}function y(l){return l===null||l===60||l===61||l===62||l===96?t(l):l===34||l===39?(n.consume(l),a=l,N):w(l)?(u=y,Q(l)):B(l)?(n.consume(l),y):(n.consume(l),V)}function N(l){return l===a?(n.consume(l),a=void 0,E):l===null?t(l):w(l)?(u=N,Q(l)):(n.consume(l),N)}function V(l){return l===null||l===34||l===39||l===60||l===61||l===96?t(l):l===47||l===62||$(l)?A(l):(n.consume(l),V)}function E(l){return l===47||l===62||$(l)?A(l):t(l)}function U(l){return l===62?(n.consume(l),n.exit("htmlTextData"),n.exit("htmlText"),r):t(l)}function Q(l){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),J}function J(l){return B(l)?O(n,tn,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):tn(l)}function tn(l){return n.enter("htmlTextData"),u(l)}}const An={name:"labelEnd",resolveAll:ke,resolveTo:de,tokenize:Se},fe={tokenize:be},ge={tokenize:ye},xe={tokenize:Ie};function ke(n){let r=-1;const t=[];for(;++r<n.length;){const e=n[r][1];if(t.push(n[r]),e.type==="labelImage"||e.type==="labelLink"||e.type==="labelEnd"){const a=e.type==="labelImage"?4:2;e.type="data",r+=a}}return n.length!==t.length&&sn(n,0,n.length,t),n}function de(n,r){let t=n.length,e=0,a,i,u,s;for(;t--;)if(a=n[t][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;n[t][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(u){if(n[t][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=t,a.type!=="labelLink")){e=2;break}}else a.type==="labelEnd"&&(u=t);const f={type:n[i][1].type==="labelLink"?"link":"image",start:{...n[i][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[i][1].start},end:{...n[u][1].end}},m={type:"labelText",start:{...n[i+e+2][1].end},end:{...n[u-2][1].start}};return s=[["enter",f,r],["enter",h,r]],s=G(s,n.slice(i+1,i+e+3)),s=G(s,[["enter",m,r]]),s=G(s,_n(r.parser.constructs.insideSpan.null,n.slice(i+e+4,u-3),r)),s=G(s,[["exit",m,r],n[u-2],n[u-1],["exit",h,r]]),s=G(s,n.slice(u+1)),s=G(s,[["exit",f,r]]),sn(n,i,n.length,s),n}function Se(n,r,t){const e=this;let a=e.events.length,i,u;for(;a--;)if((e.events[a][1].type==="labelImage"||e.events[a][1].type==="labelLink")&&!e.events[a][1]._balanced){i=e.events[a][1];break}return s;function s(g){return i?i._inactive?p(g):(u=e.parser.defined.includes(fn(e.sliceSerialize({start:i.end,end:e.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),f):t(g)}function f(g){return g===40?n.attempt(fe,m,u?m:p)(g):g===91?n.attempt(ge,m,u?h:p)(g):u?m(g):p(g)}function h(g){return n.attempt(xe,m,p)(g)}function m(g){return r(g)}function p(g){return i._balanced=!0,t(g)}}function be(n,r,t){return e;function e(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),a}function a(p){return $(p)?Sn(n,i)(p):i(p)}function i(p){return p===41?m(p):Zn(n,u,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function u(p){return $(p)?Sn(n,f)(p):m(p)}function s(p){return t(p)}function f(p){return p===34||p===39||p===40?nt(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return $(p)?Sn(n,m)(p):m(p)}function m(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),r):t(p)}}function ye(n,r,t){const e=this;return a;function a(s){return vn.call(e,n,i,u,"reference","referenceMarker","referenceString")(s)}function i(s){return e.parser.defined.includes(fn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)))?r(s):t(s)}function u(s){return t(s)}}function Ie(n,r,t){return e;function e(i){return n.enter("reference"),n.enter("referenceMarker"),n.consume(i),n.exit("referenceMarker"),a}function a(i){return i===93?(n.enter("referenceMarker"),n.consume(i),n.exit("referenceMarker"),n.exit("reference"),r):t(i)}}const we={name:"labelStartImage",resolveAll:An.resolveAll,tokenize:ze};function ze(n,r,t){const e=this;return a;function a(s){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(s),n.exit("labelImageMarker"),i}function i(s){return s===91?(n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelImage"),u):t(s)}function u(s){return s===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(s):r(s)}}const Ce={name:"labelStartLink",resolveAll:An.resolveAll,tokenize:Ee};function Ee(n,r,t){const e=this;return a;function a(u){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(u),n.exit("labelMarker"),n.exit("labelLink"),i}function i(u){return u===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(u):r(u)}}const Cn={name:"lineEnding",tokenize:Te};function Te(n,r){return t;function t(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),O(n,r,"linePrefix")}}const In={name:"thematicBreak",tokenize:Fe};function Fe(n,r,t){let e=0,a;return i;function i(h){return n.enter("thematicBreak"),u(h)}function u(h){return a=h,s(h)}function s(h){return h===a?(n.enter("thematicBreakSequence"),f(h)):e>=3&&(h===null||w(h))?(n.exit("thematicBreak"),r(h)):t(h)}function f(h){return h===a?(n.consume(h),e++,f):(n.exit("thematicBreakSequence"),B(h)?O(n,s,"whitespace")(h):s(h))}}const W={continuation:{tokenize:Pe},exit:Oe,name:"list",tokenize:Ae},_e={partial:!0,tokenize:Me},Be={partial:!0,tokenize:Le};function Ae(n,r,t){const e=this,a=e.events[e.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,u=0;return s;function s(c){const T=e.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!e.containerState.marker||c===e.containerState.marker:Tn(c)){if(e.containerState.type||(e.containerState.type=T,n.enter(T,{_container:!0})),T==="listUnordered")return n.enter("listItemPrefix"),c===42||c===45?n.check(In,t,h)(c):h(c);if(!e.interrupt||c===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(c)}return t(c)}function f(c){return Tn(c)&&++u<10?(n.consume(c),f):(!e.interrupt||u<2)&&(e.containerState.marker?c===e.containerState.marker:c===41||c===46)?(n.exit("listItemValue"),h(c)):t(c)}function h(c){return n.enter("listItemMarker"),n.consume(c),n.exit("listItemMarker"),e.containerState.marker=e.containerState.marker||c,n.check(wn,e.interrupt?t:m,n.attempt(_e,g,p))}function m(c){return e.containerState.initialBlankLine=!0,i++,g(c)}function p(c){return B(c)?(n.enter("listItemPrefixWhitespace"),n.consume(c),n.exit("listItemPrefixWhitespace"),g):t(c)}function g(c){return e.containerState.size=i+e.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(c)}}function Pe(n,r,t){const e=this;return e.containerState._closeFlow=void 0,n.check(wn,a,i);function a(s){return e.containerState.furtherBlankLines=e.containerState.furtherBlankLines||e.containerState.initialBlankLine,O(n,r,"listItemIndent",e.containerState.size+1)(s)}function i(s){return e.containerState.furtherBlankLines||!B(s)?(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,u(s)):(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,n.attempt(Be,r,u)(s))}function u(s){return e.containerState._closeFlow=!0,e.interrupt=void 0,O(n,n.attempt(W,r,t),"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function Le(n,r,t){const e=this;return O(n,a,"listItemIndent",e.containerState.size+1);function a(i){const u=e.events[e.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===e.containerState.size?r(i):t(i)}}function Oe(n){n.exit(this.containerState.type)}function Me(n,r,t){const e=this;return O(n,a,"listItemPrefixWhitespace",e.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const u=e.events[e.events.length-1];return!B(i)&&u&&u[1].type==="listItemPrefixWhitespace"?r(i):t(i)}}const Un={name:"setextUnderline",resolveTo:Ne,tokenize:De};function Ne(n,r){let t=n.length,e,a,i;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){e=t;break}n[t][1].type==="paragraph"&&(a=t)}else n[t][1].type==="content"&&n.splice(t,1),!i&&n[t][1].type==="definition"&&(i=t);const u={type:"setextHeading",start:{...n[e][1].start},end:{...n[n.length-1][1].end}};return n[a][1].type="setextHeadingText",i?(n.splice(a,0,["enter",u,r]),n.splice(i+1,0,["exit",n[e][1],r]),n[e][1].end={...n[i][1].end}):n[e][1]=u,n.push(["exit",u,r]),n}function De(n,r,t){const e=this;let a;return i;function i(h){let m=e.events.length,p;for(;m--;)if(e.events[m][1].type!=="lineEnding"&&e.events[m][1].type!=="linePrefix"&&e.events[m][1].type!=="content"){p=e.events[m][1].type==="paragraph";break}return!e.parser.lazy[e.now().line]&&(e.interrupt||p)?(n.enter("setextHeadingLine"),a=h,u(h)):t(h)}function u(h){return n.enter("setextHeadingLineSequence"),s(h)}function s(h){return h===a?(n.consume(h),s):(n.exit("setextHeadingLineSequence"),B(h)?O(n,f,"lineSuffix")(h):f(h))}function f(h){return h===null||w(h)?(n.exit("setextHeadingLine"),r(h)):t(h)}}const Re={tokenize:qe};function qe(n){const r=this,t=n.attempt(wn,e,n.attempt(this.parser.constructs.flowInitial,a,O(n,n.attempt(this.parser.constructs.flow,a,n.attempt(Ut,a)),"linePrefix")));return t;function e(i){if(i===null){n.consume(i);return}return n.enter("lineEndingBlank"),n.consume(i),n.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function a(i){if(i===null){n.consume(i);return}return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),r.currentConstruct=void 0,t}}const He={resolveAll:et()},Ve=tt("string"),Qe=tt("text");function tt(n){return{resolveAll:et(n==="text"?je:void 0),tokenize:r};function r(t){const e=this,a=this.parser.constructs[n],i=t.attempt(a,u,s);return u;function u(m){return h(m)?i(m):s(m)}function s(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),f}function f(m){return h(m)?(t.exit("data"),i(m)):(t.consume(m),f)}function h(m){if(m===null)return!0;const p=a[m];let g=-1;if(p)for(;++g<p.length;){const c=p[g];if(!c.previous||c.previous.call(e,e.previous))return!0}return!1}}}function et(n){return r;function r(t,e){let a=-1,i;for(;++a<=t.length;)i===void 0?t[a]&&t[a][1].type==="data"&&(i=a,a++):(!t[a]||t[a][1].type!=="data")&&(a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),a=i+2),i=void 0);return n?n(t,e):t}}function je(n,r){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const e=n[t-1][1],a=r.sliceStream(e);let i=a.length,u=-1,s=0,f;for(;i--;){const h=a[i];if(typeof h=="string"){for(u=h.length;h.charCodeAt(u-1)===32;)s++,u--;if(u)break;u=-1}else if(h===-2)f=!0,s++;else if(h!==-1){i++;break}}if(r._contentTypeTextTrailing&&t===n.length&&(s=0),s){const h={type:t===n.length||f||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?u:e.start._bufferIndex+u,_index:e.start._index+i,line:e.end.line,column:e.end.column-s,offset:e.end.offset-s},end:{...e.end}};e.end={...h.start},e.start.offset===e.end.offset?Object.assign(e,h):(n.splice(t,0,["enter",h,r],["exit",h,r]),t+=2)}t++}return n}const Ue={42:W,43:W,45:W,48:W,49:W,50:W,51:W,52:W,53:W,54:W,55:W,56:W,57:W,62:Gn},We={91:Jt},Ye={[-2]:zn,[-1]:zn,32:zn},$e={35:te,42:In,45:[Un,In],60:ue,61:Un,95:In,96:Qn,126:Qn},Ge={38:Kn,92:Jn},Je={[-5]:Cn,[-4]:Cn,[-3]:Cn,33:we,38:Kn,42:Fn,60:[Et,pe],91:Ce,92:[vt,Jn],93:An,95:Fn,96:Rt},Ke={null:[Fn,He]},Xe={null:[42,95]},Ze={null:[]},ve=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Xe,contentInitial:We,disable:Ze,document:Ue,flow:$e,flowInitial:Ye,insideSpan:Ke,string:Ge,text:Je},Symbol.toStringTag,{value:"Module"}));function nr(n,r,t){let e={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const a={},i=[];let u=[],s=[];const f={attempt:_(D),check:_(k),consume:q,enter:b,exit:M,interrupt:_(k,{interrupt:!0})},h={code:null,containerState:{},defineSkip:F,events:[],now:T,parser:n,previous:null,sliceSerialize:g,sliceStream:c,write:p};let m=r.tokenize.call(h,f);return r.resolveAll&&i.push(r),h;function p(I){return u=G(u,I),R(),u[u.length-1]!==null?[]:(H(r,0),h.events=_n(i,h.events,h),h.events)}function g(I,y){return er(c(I),y)}function c(I){return tr(u,I)}function T(){const{_bufferIndex:I,_index:y,line:N,column:V,offset:E}=e;return{_bufferIndex:I,_index:y,line:N,column:V,offset:E}}function F(I){a[I.line]=I.column,L()}function R(){let I;for(;e._index<u.length;){const y=u[e._index];if(typeof y=="string")for(I=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===I&&e._bufferIndex<y.length;)S(y.charCodeAt(e._bufferIndex));else S(y)}}function S(I){m=m(I)}function q(I){w(I)?(e.line++,e.column=1,e.offset+=I===-3?2:1,L()):I!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===u[e._index].length&&(e._bufferIndex=-1,e._index++)),h.previous=I}function b(I,y){const N=y||{};return N.type=I,N.start=T(),h.events.push(["enter",N,h]),s.push(N),N}function M(I){const y=s.pop();return y.end=T(),h.events.push(["exit",y,h]),y}function D(I,y){H(I,y.from)}function k(I,y){y.restore()}function _(I,y){return N;function N(V,E,U){let Q,J,tn,l;return Array.isArray(V)?en(V):"tokenize"in V?en([V]):K(V);function K(j){return gn;function gn(an){const hn=an!==null&&j[an],pn=an!==null&&j.null,bn=[...Array.isArray(hn)?hn:hn?[hn]:[],...Array.isArray(pn)?pn:pn?[pn]:[]];return en(bn)(an)}}function en(j){return Q=j,J=0,j.length===0?U:o(j[J])}function o(j){return gn;function gn(an){return l=A(),tn=j,j.partial||(h.currentConstruct=j),j.name&&h.parser.constructs.disable.null.includes(j.name)?on():j.tokenize.call(y?Object.assign(Object.create(h),y):h,f,X,on)(an)}}function X(j){return I(tn,l),E}function on(j){return l.restore(),++J<Q.length?o(Q[J]):U}}}function H(I,y){I.resolveAll&&!i.includes(I)&&i.push(I),I.resolve&&sn(h.events,y,h.events.length-y,I.resolve(h.events.slice(y),h)),I.resolveTo&&(h.events=I.resolveTo(h.events,h))}function A(){const I=T(),y=h.previous,N=h.currentConstruct,V=h.events.length,E=Array.from(s);return{from:V,restore:U};function U(){e=I,h.previous=y,h.currentConstruct=N,h.events.length=V,s=E,L()}}function L(){e.line in a&&e.column<2&&(e.column=a[e.line],e.offset+=a[e.line]-1)}}function tr(n,r){const t=r.start._index,e=r.start._bufferIndex,a=r.end._index,i=r.end._bufferIndex;let u;if(t===a)u=[n[t].slice(e,i)];else{if(u=n.slice(t,a),e>-1){const s=u[0];typeof s=="string"?u[0]=s.slice(e):u.shift()}i>0&&u.push(n[a].slice(0,i))}return u}function er(n,r){let t=-1;const e=[];let a;for(;++t<n.length;){const i=n[t];let u;if(typeof i=="string")u=i;else switch(i){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=r?" ":"	";break}case-1:{if(!r&&a)continue;u=" ";break}default:u=String.fromCharCode(i)}a=i===-2,e.push(u)}return e.join("")}function rr(n){const e={constructs:ft([ve,...(n||{}).extensions||[]]),content:a(St),defined:[],document:a(yt),flow:a(Re),lazy:{},string:a(Ve),text:a(Qe)};return e;function a(i){return u;function u(s){return nr(e,i,s)}}}function ir(n){for(;!Xn(n););return n}const Wn=/[\0\t\n\r]/g;function ur(){let n=1,r="",t=!0,e;return a;function a(i,u,s){const f=[];let h,m,p,g,c;for(i=r+(typeof i=="string"?i.toString():new TextDecoder(u||void 0).decode(i)),p=0,r="",t&&(i.charCodeAt(0)===65279&&p++,t=void 0);p<i.length;){if(Wn.lastIndex=p,h=Wn.exec(i),g=h&&h.index!==void 0?h.index:i.length,c=i.charCodeAt(g),!h){r=i.slice(p);break}if(c===10&&p===g&&e)f.push(-3),e=void 0;else switch(e&&(f.push(-5),e=void 0),p<g&&(f.push(i.slice(p,g)),n+=g-p),c){case 0:{f.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,f.push(-2);n++<m;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:e=!0,n=1}p=g+1}return s&&(e&&f.push(-5),r&&f.push(r),f.push(null)),f}}const ar=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function lr(n){return n.replace(ar,sr)}function sr(n,r,t){if(r)return r;if(t.charCodeAt(0)===35){const a=t.charCodeAt(1),i=a===120||a===88;return $n(t.slice(i?2:1),i?16:10)}return Bn(t)||n}const rt={}.hasOwnProperty;function or(n,r,t){return typeof r!="string"&&(t=r,r=void 0),cr(t)(ir(rr(t).document().write(ur()(n,r,!0))))}function cr(n){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Mn),autolinkProtocol:A,autolinkEmail:A,atxHeading:i(Pn),blockQuote:i(pn),characterEscape:A,characterReference:A,codeFenced:i(bn),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:i(bn,u),codeText:i(ut,u),codeTextData:A,data:A,codeFlowValue:A,definition:i(at),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:i(lt),hardBreakEscape:i(Ln),hardBreakTrailing:i(Ln),htmlFlow:i(On,u),htmlFlowData:A,htmlText:i(On,u),htmlTextData:A,image:i(st),label:u,link:i(Mn),listItem:i(ot),listItemValue:g,listOrdered:i(Nn,p),listUnordered:i(Nn),paragraph:i(ct),reference:o,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:i(Pn),strong:i(ht),thematicBreak:i(mt)},exit:{atxHeading:f(),atxHeadingSequence:D,autolink:f(),autolinkEmail:hn,autolinkProtocol:an,blockQuote:f(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:on,characterReferenceMarkerNumeric:on,characterReferenceValue:j,characterReference:gn,codeFenced:f(R),codeFencedFence:F,codeFencedFenceInfo:c,codeFencedFenceMeta:T,codeFlowValue:L,codeIndented:f(S),codeText:f(E),codeTextData:L,data:L,definition:f(),definitionDestinationString:M,definitionLabelString:q,definitionTitleString:b,emphasis:f(),hardBreakEscape:f(y),hardBreakTrailing:f(y),htmlFlow:f(N),htmlFlowData:L,htmlText:f(V),htmlTextData:L,image:f(Q),label:tn,labelText:J,lineEnding:I,link:f(U),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:X,resourceDestinationString:l,resourceTitleString:K,resource:en,setextHeading:f(H),setextHeadingLineSequence:_,setextHeadingText:k,strong:f(),thematicBreak:f()}};it(r,(n||{}).mdastExtensions||[]);const t={};return e;function e(x){let d={type:"root",children:[]};const z={stack:[d],tokenStack:[],config:r,enter:s,exit:h,buffer:u,resume:m,data:t},C=[];let P=-1;for(;++P<x.length;)if(x[P][1].type==="listOrdered"||x[P][1].type==="listUnordered")if(x[P][0]==="enter")C.push(P);else{const Z=C.pop();P=a(x,Z,P)}for(P=-1;++P<x.length;){const Z=r[x[P][0]];rt.call(Z,x[P][1].type)&&Z[x[P][1].type].call(Object.assign({sliceSerialize:x[P][2].sliceSerialize},z),x[P][1])}if(z.tokenStack.length>0){const Z=z.tokenStack[z.tokenStack.length-1];(Z[1]||Yn).call(z,void 0,Z[0])}for(d.position={start:ln(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:ln(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},P=-1;++P<r.transforms.length;)d=r.transforms[P](d)||d;return d}function a(x,d,z){let C=d-1,P=-1,Z=!1,cn,rn,xn,kn;for(;++C<=z;){const Y=x[C];switch(Y[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Y[0]==="enter"?P++:P--,kn=void 0;break}case"lineEndingBlank":{Y[0]==="enter"&&(cn&&!kn&&!P&&!xn&&(xn=C),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!P&&Y[0]==="enter"&&Y[1].type==="listItemPrefix"||P===-1&&Y[0]==="exit"&&(Y[1].type==="listUnordered"||Y[1].type==="listOrdered")){if(cn){let mn=C;for(rn=void 0;mn--;){const un=x[mn];if(un[1].type==="lineEnding"||un[1].type==="lineEndingBlank"){if(un[0]==="exit")continue;rn&&(x[rn][1].type="lineEndingBlank",Z=!0),un[1].type="lineEnding",rn=mn}else if(!(un[1].type==="linePrefix"||un[1].type==="blockQuotePrefix"||un[1].type==="blockQuotePrefixWhitespace"||un[1].type==="blockQuoteMarker"||un[1].type==="listItemIndent"))break}xn&&(!rn||xn<rn)&&(cn._spread=!0),cn.end=Object.assign({},rn?x[rn][1].start:Y[1].end),x.splice(rn||C,0,["exit",cn,Y[2]]),C++,z++}if(Y[1].type==="listItemPrefix"){const mn={type:"listItem",_spread:!1,start:Object.assign({},Y[1].start),end:void 0};cn=mn,x.splice(C,0,["enter",mn,Y[2]]),C++,z++,xn=void 0,kn=!0}}}return x[d][1]._spread=Z,z}function i(x,d){return z;function z(C){s.call(this,x(C),C),d&&d.call(this,C)}}function u(){this.stack.push({type:"fragment",children:[]})}function s(x,d,z){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([d,z||void 0]),x.position={start:ln(d.start),end:void 0}}function f(x){return d;function d(z){x&&x.call(this,z),h.call(this,z)}}function h(x,d){const z=this.stack.pop(),C=this.tokenStack.pop();if(C)C[0].type!==x.type&&(d?d.call(this,x,C[0]):(C[1]||Yn).call(this,x,C[0]));else throw new Error("Cannot close `"+x.type+"` ("+yn({start:x.start,end:x.end})+"): it’s not open");z.position.end=ln(x.end)}function m(){return gt(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(x){if(this.data.expectingFirstListItemValue){const d=this.stack[this.stack.length-2];d.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function c(){const x=this.resume(),d=this.stack[this.stack.length-1];d.lang=x}function T(){const x=this.resume(),d=this.stack[this.stack.length-1];d.meta=x}function F(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x.replace(/(\r?\n|\r)$/g,"")}function q(x){const d=this.resume(),z=this.stack[this.stack.length-1];z.label=d,z.identifier=fn(this.sliceSerialize(x)).toLowerCase()}function b(){const x=this.resume(),d=this.stack[this.stack.length-1];d.title=x}function M(){const x=this.resume(),d=this.stack[this.stack.length-1];d.url=x}function D(x){const d=this.stack[this.stack.length-1];if(!d.depth){const z=this.sliceSerialize(x).length;d.depth=z}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function _(x){const d=this.stack[this.stack.length-1];d.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function A(x){const z=this.stack[this.stack.length-1].children;let C=z[z.length-1];(!C||C.type!=="text")&&(C=pt(),C.position={start:ln(x.start),end:void 0},z.push(C)),this.stack.push(C)}function L(x){const d=this.stack.pop();d.value+=this.sliceSerialize(x),d.position.end=ln(x.end)}function I(x){const d=this.stack[this.stack.length-1];if(this.data.atHardBreak){const z=d.children[d.children.length-1];z.position.end=ln(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes(d.type)&&(A.call(this,x),L.call(this,x))}function y(){this.data.atHardBreak=!0}function N(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x}function V(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x}function E(){const x=this.resume(),d=this.stack[this.stack.length-1];d.value=x}function U(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const d=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=d,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function Q(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const d=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=d,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function J(x){const d=this.sliceSerialize(x),z=this.stack[this.stack.length-2];z.label=lr(d),z.identifier=fn(d).toLowerCase()}function tn(){const x=this.stack[this.stack.length-1],d=this.resume(),z=this.stack[this.stack.length-1];if(this.data.inReference=!0,z.type==="link"){const C=x.children;z.children=C}else z.alt=d}function l(){const x=this.resume(),d=this.stack[this.stack.length-1];d.url=x}function K(){const x=this.resume(),d=this.stack[this.stack.length-1];d.title=x}function en(){this.data.inReference=void 0}function o(){this.data.referenceType="collapsed"}function X(x){const d=this.resume(),z=this.stack[this.stack.length-1];z.label=d,z.identifier=fn(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function on(x){this.data.characterReferenceType=x.type}function j(x){const d=this.sliceSerialize(x),z=this.data.characterReferenceType;let C;z?(C=$n(d,z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):C=Bn(d);const P=this.stack[this.stack.length-1];P.value+=C}function gn(x){const d=this.stack.pop();d.position.end=ln(x.end)}function an(x){L.call(this,x);const d=this.stack[this.stack.length-1];d.url=this.sliceSerialize(x)}function hn(x){L.call(this,x);const d=this.stack[this.stack.length-1];d.url="mailto:"+this.sliceSerialize(x)}function pn(){return{type:"blockquote",children:[]}}function bn(){return{type:"code",lang:null,meta:null,value:""}}function ut(){return{type:"inlineCode",value:""}}function at(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function Pn(){return{type:"heading",depth:0,children:[]}}function Ln(){return{type:"break"}}function On(){return{type:"html",value:""}}function st(){return{type:"image",title:null,url:"",alt:null}}function Mn(){return{type:"link",title:null,url:"",children:[]}}function Nn(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function ot(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function ct(){return{type:"paragraph",children:[]}}function ht(){return{type:"strong",children:[]}}function pt(){return{type:"text",value:""}}function mt(){return{type:"thematicBreak"}}}function ln(n){return{line:n.line,column:n.column,offset:n.offset}}function it(n,r){let t=-1;for(;++t<r.length;){const e=r[t];Array.isArray(e)?it(n,e):hr(n,e)}}function hr(n,r){let t;for(t in r)if(rt.call(r,t))switch(t){case"canContainEols":{const e=r[t];e&&n[t].push(...e);break}case"transforms":{const e=r[t];e&&n[t].push(...e);break}case"enter":case"exit":{const e=r[t];e&&Object.assign(n[t],e);break}}}function Yn(n,r){throw n?new Error("Cannot close `"+n.type+"` ("+yn({start:n.start,end:n.end})+"): a different token (`"+r.type+"`, "+yn({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+yn({start:r.start,end:r.end})+") is still open")}function gr(n){const r=this;r.parser=t;function t(e){return or(e,{...r.data("settings"),...n,extensions:r.data("micromarkExtensions")||[],mdastExtensions:r.data("fromMarkdownExtensions")||[]})}}export{gr as default};
